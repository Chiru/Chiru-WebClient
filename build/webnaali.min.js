'use strict';var r=void 0,v=!0,w=null,D=!1;function Ua(){return function(){}}var mb,THREE=THREE||{om:"54dev"};self.console=self.console||{info:Ua(),log:Ua(),debug:Ua(),warn:Ua(),error:Ua()};self.Ap=self.Ap||Array;self.yp=self.yp||Array;String.prototype.Ai=String.prototype.Ai||function(a){var a=String(a),b=this.lastIndexOf(a);return(-1<b&&b)===this.length-a.length};
for(var yb=0,Bb=["ms","moz","webkit","o"],Kb=0;Kb<Bb.length&&!window.requestAnimationFrame;++Kb)window.requestAnimationFrame=window[Bb[Kb]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[Bb[Kb]+"CancelAnimationFrame"]||window[Bb[Kb]+"CancelRequestAnimationFrame"];r===window.requestAnimationFrame&&(window.requestAnimationFrame=function(a){var b=Date.now(),c=Math.max(0,16-(b-yb)),d=window.setTimeout(function(){a(b+c)},c);yb=b+c;return d});
window.cancelAnimationFrame=window.cancelAnimationFrame||function(a){window.clearTimeout(a)};THREE.tp=0;THREE.sp=1;THREE.Mh=2;THREE.uu=3;THREE.zp=0;THREE.wu=1;THREE.uf=0;THREE.rf=1;THREE.Cc=2;THREE.Bu=0;THREE.og=1;THREE.Gc=2;THREE.rg=0;THREE.ve=1;THREE.wg=2;THREE.im=0;THREE.sg=1;THREE.Ql=2;THREE.Bm=3;THREE.Jp=4;THREE.Vl=5;THREE.Pl=100;THREE.bq=101;THREE.Up=102;THREE.nq=200;THREE.Np=201;THREE.aq=202;THREE.Qp=203;THREE.Am=204;THREE.jm=205;THREE.wp=206;THREE.Op=207;THREE.xp=208;THREE.Pp=209;
THREE.$p=210;THREE.Th=0;THREE.em=1;THREE.nu=2;THREE.Dm=Ua();THREE.su=Ua();THREE.rp=Ua();THREE.Yp=Ua();THREE.Gu=Ua();THREE.Fc=1E3;THREE.re=1001;THREE.Kj=1002;THREE.qg=1003;THREE.hm=1004;THREE.gm=1005;THREE.Gd=1006;THREE.Ep=1007;THREE.Ij=1008;THREE.Uj=1009;THREE.lp=1010;THREE.Wp=1011;THREE.mq=1012;THREE.Bp=1013;THREE.iq=1014;THREE.Bj=1015;THREE.jq=1016;THREE.kq=1017;THREE.lq=1018;THREE.hp=1019;THREE.Mj=1020;THREE.vg=1021;THREE.Gp=1022;THREE.Fp=1023;THREE.rm=2001;THREE.Sp=2002;THREE.pm=2003;
THREE.qm=2004;THREE.Sl=function(a){this.Vq=r!==a?a:v;this.elapsedTime=this.pl=this.startTime=0;this.dj=D};THREE.Sl.prototype.start=function(){this.pl=this.startTime=Date.now();this.dj=v};THREE.Sl.prototype.stop=function(){var a=0;this.Vq&&!this.dj&&this.start();if(this.dj){var b=Date.now(),a=0.001*(b-this.pl);this.pl=b;this.elapsedTime+=a}this.dj=D};THREE.u=function(a){r!==a&&this.set(a);return this};
THREE.u.prototype={h:1,g:1,c:1,copy:function(a){this.h=a.h;this.g=a.g;this.c=a.c;return this},set:function(a){switch(typeof a){case "number":Nb(this,a);break;case "string":/^rgb\((\d+),(\d+),(\d+)\)$/i.test(a)?(a=/^rgb\((\d+),(\d+),(\d+)\)$/i.exec(a),this.h=Math.min(255,parseInt(a[1],10))/255,this.g=Math.min(255,parseInt(a[2],10))/255,this.c=Math.min(255,parseInt(a[3],10))/255):/^rgb\((\d+)\%,(\d+)\%,(\d+)\%\)$/i.test(a)?(a=/^rgb\((\d+)\%,(\d+)\%,(\d+)\%\)$/i.exec(a),this.h=Math.min(100,parseInt(a[1],
10))/100,this.g=Math.min(100,parseInt(a[2],10))/100,this.c=Math.min(100,parseInt(a[3],10))/100):/^\#([0-9a-f]{6})$/i.test(a)?(a=/^\#([0-9a-f]{6})$/i.exec(a),Nb(this,parseInt(a[1],16))):/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(a)?(a=/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(a),Nb(this,parseInt(a[1]+a[1]+a[2]+a[2]+a[3]+a[3],16))):/^(\w+)$/i.test(a)&&Nb(this,THREE.op[a])}},$:function(a,b){this.h+=(a.h-this.h)*b;this.g+=(a.g-this.g)*b;this.c+=(a.c-this.c)*b;return this},d:function(){return Ob(new THREE.u,
this.h,this.g,this.c)}};function Pb(a){return"rgb("+(255*a.h|0)+","+(255*a.g|0)+","+(255*a.c|0)+")"}function Nb(a,b){b=Math.floor(b);a.h=(b>>16&255)/255;a.g=(b>>8&255)/255;a.c=(b&255)/255}function Wb(a){return 255*a.h<<16^255*a.g<<8^255*a.c<<0}function Ob(a,b,c,d){a.h=b;a.g=c;a.c=d;return a}function bc(a,b){a.h=b.h*b.h;a.g=b.g*b.g;a.c=b.c*b.c}
THREE.op={Vu:15792383,Xu:16444375,Zu:65535,$u:8388564,cv:15794175,ev:16119260,iv:16770244,jv:0,kv:16772045,blue:255,lv:9055202,qv:10824234,sv:14596231,tv:6266528,yv:8388352,zv:13789470,Ev:16744272,Fv:6591981,Gv:16775388,Iv:14423100,Lv:65535,Mv:139,Nv:35723,Ov:12092939,Pv:11119017,Qv:25600,Rv:11119017,Sv:12433259,Tv:9109643,Uv:5597999,Vv:16747520,Wv:10040012,Xv:9109504,Yv:15308410,Zv:9419919,$v:4734347,aw:3100495,bw:3100495,cw:52945,dw:9699539,iw:16716947,jw:49151,lw:6908265,mw:6908265,pw:2003199,
yw:11674146,zw:16775920,Aw:2263842,Cw:16711935,Dw:14474460,Jw:16316671,Kw:16766720,Lw:14329120,Mw:8421504,green:32768,Nw:11403055,Ow:8421504,Rw:15794160,Sw:16738740,Tw:13458524,Uw:4915330,Yw:16777200,Zw:15787660,ax:15132410,bx:16773365,cx:8190976,dx:16775885,ex:11393254,fx:15761536,gx:14745599,hx:16448210,ix:13882323,jx:9498256,kx:13882323,lx:16758465,mx:16752762,nx:2142890,ox:8900346,px:7833753,qx:7833753,rx:11584734,sx:16777184,tx:65280,ux:3329330,vx:16445670,Ax:16711935,Wx:8388608,Zx:6737322,$x:205,
ay:12211667,by:9662683,cy:3978097,dy:8087790,ey:64154,fy:4772300,gy:13047173,hy:1644912,ly:16121850,my:16770273,ny:16770229,Jy:16768685,Ky:128,My:16643558,Ny:8421376,Oy:7048739,Py:16753920,Qy:16729344,Ry:14315734,Sy:15657130,Ty:10025880,Uy:11529966,Vy:14381203,Wy:16773077,Yy:16767673,Zy:13468991,bz:16761035,cz:14524637,ez:11591910,gz:8388736,red:16711680,rz:12357519,tz:4286945,uz:9127187,vz:16416882,wz:16032864,yz:3050327,zz:16774638,Hz:10506797,Kz:12632256,Oz:8900331,Pz:6970061,Qz:7372944,Rz:7372944,
Sz:16775930,Tz:65407,Uz:4620980,tan:13808780,Zz:32896,aA:14204888,bA:16737095,hA:4251856,qA:15631086,vA:16113331,wA:16777215,xA:16119285,AA:16776960,BA:10145074};THREE.l=function(a,b){this.x=a||0;this.y=b||0};
THREE.l.prototype={set:function(a,b){this.x=a;this.y=b;return this},hj:function(a){this.y=a;return this},copy:function(a){this.x=a.x;this.y=a.y;return this},add:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this},v:function(a){this.x+=a.x;this.y+=a.y;return this},sub:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this},Wa:function(a){this.x-=a.x;this.y-=a.y;return this},V:function(a){this.x*=a;this.y*=a;return this},Yc:function(a){a?(this.x/=a,this.y/=a):this.set(0,0);return this},Ui:function(a){this.x>
a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);return this},qi:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);return this},Xi:function(){return this.V(-1)},Qa:function(a){return this.x*a.x+this.y*a.y},bh:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.bh())},normalize:function(){return this.Yc(this.length())},Nb:function(a){return Math.sqrt(this.Pg(a))},Pg:function(a){var b=this.x-a.x,a=this.y-a.y;return b*
b+a*a},fj:function(a){return this.normalize().V(a)},$:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;return this},eb:function(a){return a.x===this.x&&a.y===this.y},d:function(){return new THREE.l(this.x,this.y)}};THREE.e=function(a,b,c){this.x=a||0;this.y=b||0;this.a=c||0};
THREE.e.prototype={set:function(a,b,c){this.x=a;this.y=b;this.a=c;return this},hj:function(a){this.y=a;return this},copy:function(a){this.x=a.x;this.y=a.y;this.a=a.a;return this},add:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.a=a.a+b.a;return this},v:function(a){this.x+=a.x;this.y+=a.y;this.a+=a.a;return this},sub:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.a=a.a-b.a;return this},Wa:function(a){this.x-=a.x;this.y-=a.y;this.a-=a.a;return this},multiply:function(a,b){this.x=a.x*b.x;this.y=
a.y*b.y;this.a=a.a*b.a;return this},Xe:function(a){this.x*=a.x;this.y*=a.y;this.a*=a.a;return this},V:function(a){this.x*=a;this.y*=a;this.a*=a;return this},Yc:function(a){a?(this.x/=a,this.y/=a,this.a/=a):this.a=this.y=this.x=0;return this},Ui:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);this.a>a.a&&(this.a=a.a);return this},qi:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);this.a<a.a?this.a=a.a:this.a>b.a&&(this.a=b.a);
return this},Xi:function(){return this.V(-1)},Qa:function(a){return this.x*a.x+this.y*a.y+this.a*a.a},bh:function(){return this.x*this.x+this.y*this.y+this.a*this.a},length:function(){return Math.sqrt(this.bh())},Kn:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.a)},normalize:function(){return this.Yc(this.length())},fj:function(a){return this.normalize().V(a)},$:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.a+=(a.a-this.a)*b;return this},Nb:function(a){return Math.sqrt(this.Pg(a))},
Pg:function(a){var b=this.x-a.x,c=this.y-a.y,a=this.a-a.a;return b*b+c*c+a*a},eb:function(a){return a.x===this.x&&a.y===this.y&&a.a===this.a},d:function(){return new THREE.e(this.x,this.y,this.a)}};
function uc(a,b,c){function d(a){return Math.min(Math.max(a,-1),1)}var b=b.elements,e=b[0],f=b[4],g=b[8],h=b[1],i=b[5],k=b[9],l=b[2],m=b[6],b=b[10];r===c||"XYZ"===c?(a.y=Math.asin(d(g)),0.99999>Math.abs(g)?(a.x=Math.atan2(-k,b),a.a=Math.atan2(-f,e)):(a.x=Math.atan2(m,i),a.a=0)):"YXZ"===c?(a.x=Math.asin(-d(k)),0.99999>Math.abs(k)?(a.y=Math.atan2(g,b),a.a=Math.atan2(h,i)):(a.y=Math.atan2(-l,e),a.a=0)):"ZXY"===c?(a.x=Math.asin(d(m)),0.99999>Math.abs(m)?(a.y=Math.atan2(-l,b),a.a=Math.atan2(-f,i)):(a.y=
0,a.a=Math.atan2(h,e))):"ZYX"===c?(a.y=Math.asin(-d(l)),0.99999>Math.abs(l)?(a.x=Math.atan2(m,b),a.a=Math.atan2(h,e)):(a.x=0,a.a=Math.atan2(-f,i))):"YZX"===c?(a.a=Math.asin(d(h)),0.99999>Math.abs(h)?(a.x=Math.atan2(-k,i),a.y=Math.atan2(-l,e)):(a.x=0,a.y=Math.atan2(g,b))):"XZY"===c&&(a.a=Math.asin(-d(f)),0.99999>Math.abs(f)?(a.x=Math.atan2(m,i),a.y=Math.atan2(g,e)):(a.x=Math.atan2(-k,b),a.y=0))}function Ac(a,b){var c=a.x,d=a.y,e=a.a;a.x=d*b.a-e*b.y;a.y=e*b.x-c*b.a;a.a=c*b.y-d*b.x;return a}
function Mc(a,b,c){a.x=b.y*c.a-b.a*c.y;a.y=b.a*c.x-b.x*c.a;a.a=b.x*c.y-b.y*c.x;return a}THREE.Hc=function(a,b,c,d){this.x=a||0;this.y=b||0;this.a=c||0;this.k=r!==d?d:1};
THREE.Hc.prototype={set:function(a,b,c,d){this.x=a;this.y=b;this.a=c;this.k=d;return this},hj:function(a){this.y=a;return this},copy:function(a){this.x=a.x;this.y=a.y;this.a=a.a;this.k=r!==a.k?a.k:1;return this},add:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.a=a.a+b.a;this.k=a.k+b.k;return this},v:function(a){this.x+=a.x;this.y+=a.y;this.a+=a.a;this.k+=a.k;return this},sub:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.a=a.a-b.a;this.k=a.k-b.k;return this},Wa:function(a){this.x-=a.x;this.y-=
a.y;this.a-=a.a;this.k-=a.k;return this},V:function(a){this.x*=a;this.y*=a;this.a*=a;this.k*=a;return this},Yc:function(a){a?(this.x/=a,this.y/=a,this.a/=a,this.k/=a):(this.a=this.y=this.x=0,this.k=1);return this},Ui:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);this.a>a.a&&(this.a=a.a);this.k>a.k&&(this.k=a.k);return this},qi:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);this.a<a.a?this.a=a.a:this.a>b.a&&(this.a=b.a);this.k<
a.k?this.k=a.k:this.k>b.k&&(this.k=b.k);return this},Xi:function(){return this.V(-1)},Qa:function(a){return this.x*a.x+this.y*a.y+this.a*a.a+this.k*a.k},bh:function(){return this.Qa(this)},length:function(){return Math.sqrt(this.bh())},Kn:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.a)+Math.abs(this.k)},normalize:function(){return this.Yc(this.length())},fj:function(a){return this.normalize().V(a)},$:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.a+=(a.a-this.a)*
b;this.k+=(a.k-this.k)*b;return this},eb:function(a){return a.x===this.x&&a.y===this.y&&a.a===this.a&&a.k===this.k},d:function(){return new THREE.Hc(this.x,this.y,this.a,this.k)}};THREE.Jh=function(a,b){r===a&&r===b?(this.min=new THREE.l,this.max=new THREE.l,this.eh()):(this.min=a.d(),this.max=r===b?(new THREE.l).copy(this.min):b.d())};
THREE.Jh.prototype={set:function(a,b){this.min.copy(a);this.max.copy(b);return this},wo:function(a){if(0<a.length){var b=a[0];this.min.copy(b);this.max.copy(b);for(var c=1,d=a.length;c<d;c++)b=a[c],b.x<this.min.x?this.min.x=b.x:b.x>this.max.x&&(this.max.x=b.x),b.y<this.min.y?this.min.y=b.y:b.y>this.max.y&&(this.max.y=b.y)}else this.eh();return this},copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},eh:function(){this.min.x=this.min.y=Infinity;this.max.x=this.max.y=-Infinity;
return this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},xb:function(){return(new THREE.l).add(this.min,this.max).V(0.5)},size:function(){return(new THREE.l).sub(this.max,this.min)},Lk:function(a){this.min.Wa(a);this.max.v(a);return this},getParameter:function(a){return new THREE.l((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y))},Og:function(a){return THREE.Jh.Aa.copy(a).qi(this.min,this.max).Wa(a).length()},translate:function(a){this.min.v(a);
this.max.v(a);return this},scale:function(a){a=this.size().V(0.5*(a-1));this.Lk(a);return this},eb:function(a){return a.min.eb(this.min)&&a.max.eb(this.max)},d:function(){return(new THREE.Jh).copy(this)}};THREE.Jh.Aa=new THREE.l;THREE.sf=function(a,b){r===a&&r===b?(this.min=new THREE.e,this.max=new THREE.e,this.eh()):(this.min=a.d(),this.max=r===b?(new THREE.e).copy(this.min):b.d())};
THREE.sf.prototype={set:function(a,b){this.min.copy(a);this.max.copy(b);return this},wo:function(a){if(0<a.length){var b=a[0];this.min.copy(b);this.max.copy(b);for(var c=1,d=a.length;c<d;c++)b=a[c],b.x<this.min.x?this.min.x=b.x:b.x>this.max.x&&(this.max.x=b.x),b.y<this.min.y?this.min.y=b.y:b.y>this.max.y&&(this.max.y=b.y),b.a<this.min.a?this.min.a=b.a:b.a>this.max.a&&(this.max.a=b.a)}else this.eh();return this},copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},eh:function(){this.min.x=
this.min.y=this.min.a=Infinity;this.max.x=this.max.y=this.max.a=-Infinity;return this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.a<this.min.a},xb:function(){return(new THREE.e).add(this.min,this.max).V(0.5)},size:function(){return(new THREE.e).sub(this.max,this.min)},Lk:function(a){this.min.Wa(a);this.max.v(a);return this},getParameter:function(a){return new THREE.e((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.a-this.min.a)/
(this.max.a-this.min.a))},Og:function(a){return THREE.sf.Aa.copy(a).qi(this.min,this.max).Wa(a).length()},translate:function(a){this.min.v(a);this.max.v(a);return this},scale:function(a){a=this.size().V(0.5*(a-1));this.Lk(a);return this},eb:function(a){return a.min.eb(this.min)&&a.max.eb(this.max)},d:function(){return(new THREE.sf).copy(this)}};THREE.sf.Aa=new THREE.e;THREE.ye=function(){this.elements=new Float32Array(9)};
THREE.ye.prototype={aa:function(a){var b=this.elements,c=a.x,d=a.y,e=a.a;a.x=b[0]*c+b[3]*d+b[6]*e;a.y=b[1]*c+b[4]*d+b[7]*e;a.a=b[2]*c+b[5]*d+b[8]*e;return a},ll:function(a){for(var b=THREE.ye.Aa,c=0,d=a.length;c<d;c+=3)b.x=a[c],b.y=a[c+1],b.a=a[c+2],this.aa(b),a[c]=b.x,a[c+1]=b.y,a[c+2]=b.a;return a},Ob:function(a){var b=a.elements,a=b[10]*b[5]-b[6]*b[9],c=-b[10]*b[1]+b[2]*b[9],d=b[6]*b[1]-b[2]*b[5],e=-b[10]*b[4]+b[6]*b[8],f=b[10]*b[0]-b[2]*b[8],g=-b[6]*b[0]+b[2]*b[4],h=b[9]*b[4]-b[5]*b[8],i=-b[9]*
b[0]+b[1]*b[8],k=b[5]*b[0]-b[1]*b[4],b=b[0]*a+b[1]*e+b[2]*h;0===b&&console.warn("Matrix3.getInverse(): determinant == 0");var b=1/b,l=this.elements;l[0]=b*a;l[1]=b*c;l[2]=b*d;l[3]=b*e;l[4]=b*f;l[5]=b*g;l[6]=b*h;l[7]=b*i;l[8]=b*k;return this},Dh:function(){var a,b=this.elements;a=b[1];b[1]=b[3];b[3]=a;a=b[2];b[2]=b[6];b[6]=a;a=b[5];b[5]=b[7];b[7]=a;return this}};THREE.ye.Aa=new THREE.e;
THREE.D=function(a,b,c,d,e,f,g,h,i,k,l,m,p,s,q,n){this.elements=new Float32Array(16);this.set(r!==a?a:1,b||0,c||0,d||0,e||0,r!==f?f:1,g||0,h||0,i||0,k||0,r!==l?l:1,m||0,p||0,s||0,q||0,r!==n?n:1)};
THREE.D.prototype={set:function(a,b,c,d,e,f,g,h,i,k,l,m,p,s,q,n){var t=this.elements;t[0]=a;t[4]=b;t[8]=c;t[12]=d;t[1]=e;t[5]=f;t[9]=g;t[13]=h;t[2]=i;t[6]=k;t[10]=l;t[14]=m;t[3]=p;t[7]=s;t[11]=q;t[15]=n;return this},copy:function(a){a=a.elements;this.set(a[0],a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15]);return this},nb:function(a,b,c){var d=this.elements,e=THREE.D.Aa,f=THREE.D.Id,g=THREE.D.bi;g.sub(a,b).normalize();0===g.length()&&(g.a=1);Mc(e,c,g).normalize();
0===e.length()&&(g.x+=1E-4,Mc(e,c,g).normalize());Mc(f,g,e);d[0]=e.x;d[4]=f.x;d[8]=g.x;d[1]=e.y;d[5]=f.y;d[9]=g.y;d[2]=e.a;d[6]=f.a;d[10]=g.a;return this},multiply:function(a,b){var c=a.elements,d=b.elements,e=this.elements,f=c[0],g=c[4],h=c[8],i=c[12],k=c[1],l=c[5],m=c[9],p=c[13],s=c[2],q=c[6],n=c[10],t=c[14],x=c[3],L=c[7],E=c[11],c=c[15],y=d[0],M=d[4],B=d[8],K=d[12],J=d[1],H=d[5],O=d[9],C=d[13],P=d[2],F=d[6],U=d[10],G=d[14],V=d[3],fa=d[7],W=d[11],d=d[15];e[0]=f*y+g*J+h*P+i*V;e[4]=f*M+g*H+h*F+i*
fa;e[8]=f*B+g*O+h*U+i*W;e[12]=f*K+g*C+h*G+i*d;e[1]=k*y+l*J+m*P+p*V;e[5]=k*M+l*H+m*F+p*fa;e[9]=k*B+l*O+m*U+p*W;e[13]=k*K+l*C+m*G+p*d;e[2]=s*y+q*J+n*P+t*V;e[6]=s*M+q*H+n*F+t*fa;e[10]=s*B+q*O+n*U+t*W;e[14]=s*K+q*C+n*G+t*d;e[3]=x*y+L*J+E*P+c*V;e[7]=x*M+L*H+E*F+c*fa;e[11]=x*B+L*O+E*U+c*W;e[15]=x*K+L*C+E*G+c*d;return this},Xe:function(a){return this.multiply(this,a)},V:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=
a;b[7]*=a;b[11]*=a;b[15]*=a;return this},aa:function(a){var b=this.elements,c=a.x,d=a.y,e=a.a,f=1/(b[3]*c+b[7]*d+b[11]*e+b[15]);a.x=(b[0]*c+b[4]*d+b[8]*e+b[12])*f;a.y=(b[1]*c+b[5]*d+b[9]*e+b[13])*f;a.a=(b[2]*c+b[6]*d+b[10]*e+b[14])*f;return a},ll:function(a){for(var b=THREE.D.Aa,c=0,d=a.length;c<d;c+=3)b.x=a[c],b.y=a[c+1],b.a=a[c+2],this.aa(b),a[c]=b.x,a[c+1]=b.y,a[c+2]=b.a;return a},Dh:function(){var a=this.elements,b;b=a[1];a[1]=a[4];a[4]=b;b=a[2];a[2]=a[8];a[8]=b;b=a[6];a[6]=a[9];a[9]=b;b=a[3];
a[3]=a[12];a[12]=b;b=a[7];a[7]=a[13];a[13]=b;b=a[11];a[11]=a[14];a[14]=b;return this},Ob:function(a){var b=this.elements,c=a.elements,d=c[0],e=c[4],f=c[8],g=c[12],h=c[1],i=c[5],k=c[9],l=c[13],m=c[2],p=c[6],s=c[10],q=c[14],n=c[3],t=c[7],x=c[11],c=c[15];b[0]=k*q*t-l*s*t+l*p*x-i*q*x-k*p*c+i*s*c;b[4]=g*s*t-f*q*t-g*p*x+e*q*x+f*p*c-e*s*c;b[8]=f*l*t-g*k*t+g*i*x-e*l*x-f*i*c+e*k*c;b[12]=g*k*p-f*l*p-g*i*s+e*l*s+f*i*q-e*k*q;b[1]=l*s*n-k*q*n-l*m*x+h*q*x+k*m*c-h*s*c;b[5]=f*q*n-g*s*n+g*m*x-d*q*x-f*m*c+d*s*c;b[9]=
g*k*n-f*l*n-g*h*x+d*l*x+f*h*c-d*k*c;b[13]=f*l*m-g*k*m+g*h*s-d*l*s-f*h*q+d*k*q;b[2]=i*q*n-l*p*n+l*m*t-h*q*t-i*m*c+h*p*c;b[6]=g*p*n-e*q*n-g*m*t+d*q*t+e*m*c-d*p*c;b[10]=e*l*n-g*i*n+g*h*t-d*l*t-e*h*c+d*i*c;b[14]=g*i*m-e*l*m-g*h*p+d*l*p+e*h*q-d*i*q;b[3]=k*p*n-i*s*n-k*m*t+h*s*t+i*m*x-h*p*x;b[7]=e*s*n-f*p*n+f*m*t-d*s*t-e*m*x+d*p*x;b[11]=f*i*n-e*k*n-f*h*t+d*k*t+e*h*x-d*i*x;b[15]=e*k*m-f*i*m+f*h*p-d*k*p-e*h*s+d*i*s;a=a.elements;b=a[0];c=a[4];d=a[8];e=a[12];f=a[1];g=a[5];h=a[9];i=a[13];k=a[2];l=a[6];m=a[10];
p=a[14];s=a[3];q=a[7];n=a[11];a=a[15];this.V(1/(e*h*l*s-d*i*l*s-e*g*m*s+c*i*m*s+d*g*p*s-c*h*p*s-e*h*k*q+d*i*k*q+e*f*m*q-b*i*m*q-d*f*p*q+b*h*p*q+e*g*k*n-c*i*k*n-e*f*l*n+b*i*l*n+c*f*p*n-b*g*p*n-d*g*k*a+c*h*k*a+d*f*l*a-b*h*l*a-c*f*m*a+b*g*m*a));return this},translate:function(a){var b=this.elements,c=a.x,d=a.y,a=a.a;b[12]=b[0]*c+b[4]*d+b[8]*a+b[12];b[13]=b[1]*c+b[5]*d+b[9]*a+b[13];b[14]=b[2]*c+b[6]*d+b[10]*a+b[14];b[15]=b[3]*c+b[7]*d+b[11]*a+b[15];return this},scale:function(a){var b=this.elements,c=
a.x,d=a.y,a=a.a;b[0]*=c;b[4]*=d;b[8]*=a;b[1]*=c;b[5]*=d;b[9]*=a;b[2]*=c;b[6]*=d;b[10]*=a;b[3]*=c;b[7]*=d;b[11]*=a;return this},d:function(){var a=this.elements;return new THREE.D(a[0],a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15])}};function Nc(a,b,c,d,e,f,g){a=a.elements;a[0]=2*f/(c-b);a[4]=0;a[8]=(c+b)/(c-b);a[12]=0;a[1]=0;a[5]=2*f/(e-d);a[9]=(e+d)/(e-d);a[13]=0;a[2]=0;a[6]=0;a[10]=-(g+f)/(g-f);a[14]=-2*g*f/(g-f);a[3]=0;a[7]=0;a[11]=-1;a[15]=0}
function Uc(a,b,c){var d=Math.cos(c),c=Math.sin(c),e=1-d,f=b.x,g=b.y,b=b.a,h=e*f,i=e*g;a.set(h*f+d,h*g-c*b,h*b+c*g,0,h*g+c*b,i*g+d,i*b-c*f,0,h*b-c*g,i*b+c*f,e*b*b+d,0,0,0,0,1);return a}function Vc(a,b,c,d){a.set(1,0,0,b,0,1,0,c,0,0,1,d,0,0,0,1);return a}function Wc(a,b){var c=a.elements,d=c[4],e=c[5],f=c[6],g=c[7],h=c[8],i=c[9],k=c[10],l=c[11],m=Math.cos(b),b=Math.sin(b);c[4]=m*d+b*h;c[5]=m*e+b*i;c[6]=m*f+b*k;c[7]=m*g+b*l;c[8]=m*h-b*d;c[9]=m*i-b*e;c[10]=m*k-b*f;c[11]=m*l-b*g}
function jd(a,b){var c=a.elements,b=b.elements,d=THREE.D.Aa,e=1/d.set(b[0],b[1],b[2]).length(),f=1/d.set(b[4],b[5],b[6]).length(),d=1/d.set(b[8],b[9],b[10]).length();c[0]=b[0]*e;c[1]=b[1]*e;c[2]=b[2]*e;c[4]=b[4]*f;c[5]=b[5]*f;c[6]=b[6]*f;c[8]=b[8]*d;c[9]=b[9]*d;c[10]=b[10]*d;return a}
function kd(a,b,c,d){var e=a.elements,f=THREE.D.Aa,g=THREE.D.Id,h=THREE.D.bi;f.set(e[0],e[1],e[2]);g.set(e[4],e[5],e[6]);h.set(e[8],e[9],e[10]);b=b instanceof THREE.e?b:new THREE.e;c=c instanceof THREE.Ec?c:new THREE.Ec;d=d instanceof THREE.e?d:new THREE.e;d.x=f.length();d.y=g.length();d.a=h.length();b.x=e[12];b.y=e[13];b.a=e[14];e=THREE.D.Vj;e.copy(a);e.elements[0]/=d.x;e.elements[1]/=d.x;e.elements[2]/=d.x;e.elements[4]/=d.y;e.elements[5]/=d.y;e.elements[6]/=d.y;e.elements[8]/=d.a;e.elements[9]/=
d.a;e.elements[10]/=d.a;var a=c,f=e.elements,g=f[0],e=f[4],h=f[8],i=f[1],k=f[5],l=f[9],m=f[2],p=f[6],f=f[10],s=g+k+f;0<s?(g=0.5/Math.sqrt(s+1),a.k=0.25/g,a.x=(p-l)*g,a.y=(h-m)*g,a.a=(i-e)*g):g>k&&g>f?(g=2*Math.sqrt(1+g-k-f),a.k=(p-l)/g,a.x=0.25*g,a.y=(e+i)/g,a.a=(h+m)/g):k>f?(g=2*Math.sqrt(1+k-g-f),a.k=(h-m)/g,a.x=(e+i)/g,a.y=0.25*g,a.a=(l+p)/g):(g=2*Math.sqrt(1+f-g-k),a.k=(i-e)/g,a.x=(h+m)/g,a.y=(l+p)/g,a.a=0.25*g);return[b,c,d]}
function ld(a,b){var c=a.elements,d=b.x,e=b.y,f=b.a,g=b.k,h=d+d,i=e+e,k=f+f,b=d*h,l=d*i,d=d*k,m=e*i,e=e*k,f=f*k,h=g*h,i=g*i,g=g*k;c[0]=1-(m+f);c[4]=l-g;c[8]=d+i;c[1]=l+g;c[5]=1-(b+f);c[9]=e-h;c[2]=d-i;c[6]=e+h;c[10]=1-(b+m)}
function md(a,b,c){var a=a.elements,d=b.x,e=b.y,b=b.a,f=Math.cos(d),d=Math.sin(d),g=Math.cos(e),e=Math.sin(e),h=Math.cos(b),b=Math.sin(b);if(r===c||"XYZ"===c){var i=f*h,k=f*b,l=d*h,m=d*b;a[0]=g*h;a[4]=-g*b;a[8]=e;a[1]=k+l*e;a[5]=i-m*e;a[9]=-d*g;a[2]=m-i*e;a[6]=l+k*e;a[10]=f*g}else"YXZ"===c?(i=g*h,k=g*b,l=e*h,m=e*b,a[0]=i+m*d,a[4]=l*d-k,a[8]=f*e,a[1]=f*b,a[5]=f*h,a[9]=-d,a[2]=k*d-l,a[6]=m+i*d,a[10]=f*g):"ZXY"===c?(i=g*h,k=g*b,l=e*h,m=e*b,a[0]=i-m*d,a[4]=-f*b,a[8]=l+k*d,a[1]=k+l*d,a[5]=f*h,a[9]=m-i*
d,a[2]=-f*e,a[6]=d,a[10]=f*g):"ZYX"===c?(i=f*h,k=f*b,l=d*h,m=d*b,a[0]=g*h,a[4]=l*e-k,a[8]=i*e+m,a[1]=g*b,a[5]=m*e+i,a[9]=k*e-l,a[2]=-e,a[6]=d*g,a[10]=f*g):"YZX"===c?(i=f*g,k=f*e,l=d*g,m=d*e,a[0]=g*h,a[4]=m-i*b,a[8]=l*b+k,a[1]=b,a[5]=f*h,a[9]=-d*h,a[2]=-e*h,a[6]=k*b+l,a[10]=i-m*b):"XZY"===c&&(i=f*g,k=f*e,l=d*g,m=d*e,a[0]=g*h,a[4]=-b,a[8]=e*h,a[1]=i*b+m,a[5]=f*h,a[9]=k*b-l,a[2]=l*b-k,a[6]=d*h,a[10]=m*b+i)}function nd(a,b){var c=a.elements;c[12]=b.x;c[13]=b.y;c[14]=b.a}
function od(a){a=a.elements;return THREE.D.Aa.set(a[12],a[13],a[14])}function Hd(a,b,c){a=a.elements;b[c]=a[0];b[c+1]=a[1];b[c+2]=a[2];b[c+3]=a[3];b[c+4]=a[4];b[c+5]=a[5];b[c+6]=a[6];b[c+7]=a[7];b[c+8]=a[8];b[c+9]=a[9];b[c+10]=a[10];b[c+11]=a[11];b[c+12]=a[12];b[c+13]=a[13];b[c+14]=a[14];b[c+15]=a[15]}function Id(a,b){var c=a.elements,d=b.x,e=b.y,f=b.a,g=b.k;b.x=c[0]*d+c[4]*e+c[8]*f+c[12]*g;b.y=c[1]*d+c[5]*e+c[9]*f+c[13]*g;b.a=c[2]*d+c[6]*e+c[10]*f+c[14]*g;b.k=c[3]*d+c[7]*e+c[11]*f+c[15]*g}
function Jd(a){a.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}THREE.D.Aa=new THREE.e;THREE.D.Id=new THREE.e;THREE.D.bi=new THREE.e;THREE.D.Vj=new THREE.D;THREE.D.sq=new THREE.D;THREE.sd=function(a,b){this.origin=r!==a?a.d():new THREE.e;this.direction=r!==b?b.d():new THREE.e};
THREE.sd.prototype={set:function(a,b){this.origin.copy(a);this.direction.copy(b);return this},copy:function(a){this.origin.copy(a.origin);this.direction.copy(a.direction);return this},Og:function(a){var b=THREE.sd.Aa.sub(a,this.origin).Qa(this.direction);THREE.sd.Aa.copy(this.direction).V(b).v(this.origin);return THREE.sd.Aa.Nb(a)},eb:function(a){return a.origin.eb(this.origin)&&a.direction.eb(this.direction)},d:function(){return(new THREE.sd).copy(this)}};THREE.sd.Aa=new THREE.e;THREE.sd.Id=new THREE.e;
THREE.vf=function(){this.ko=[new THREE.Dc,new THREE.Dc,new THREE.Dc,new THREE.Dc,new THREE.Dc,new THREE.Dc]};
function Kd(a,b){var c=a.ko,d=b.elements,b=d[0],e=d[1],f=d[2],g=d[3],h=d[4],i=d[5],k=d[6],l=d[7],m=d[8],p=d[9],s=d[10],q=d[11],n=d[12],t=d[13],x=d[14],d=d[15],L=c[0],E=d-n;L.r.set(g-b,l-h,q-m);L.lb=E;L=c[1];n=d+n;L.r.set(g+b,l+h,q+m);L.lb=n;h=c[2];m=d+t;h.r.set(g+e,l+i,q+p);h.lb=m;h=c[3];t=d-t;h.r.set(g-e,l-i,q-p);h.lb=t;e=c[4];i=d-x;e.r.set(g-f,l-k,q-s);e.lb=i;e=c[5];d+=x;e.r.set(g+f,l+k,q+s);e.lb=d;for(b=0;6>b;b++)c[b].normalize()}
THREE.vf.prototype.contains=function(a){for(var b=this.ko,c=a.F,d=od(c),a=-a.t.Lb.X,c=c.elements,c=Math.sqrt(Math.max(c[0]*c[0]+c[1]*c[1]+c[2]*c[2],Math.max(c[4]*c[4]+c[5]*c[5]+c[6]*c[6],c[8]*c[8]+c[9]*c[9]+c[10]*c[10]))),a=a*c,e=c=0;6>e;e++)if(c=b[e].Og(d),c<=a)return D;return v};THREE.vf.Aa=new THREE.e;THREE.Dc=function(a,b){r===a&&r===b?(this.r=new THREE.e,this.lb=0):(this.r=a.d(),this.lb=b||0)};
THREE.Dc.prototype={set:function(a,b){this.r.copy(a);this.lb=b;return this},copy:function(a){this.r.copy(a.r);this.lb=a.lb;return this},normalize:function(){var a=1/this.r.length();this.r.V(a);this.lb*=a;return this},Og:function(a){return this.r.Qa(a)+this.lb},translate:function(a){this.lb=-a.Qa(this.r);return this},eb:function(a){return a.r.eb(this.r)&&a.lb==this.lb},d:function(){return(new THREE.Dc).copy(this)}};THREE.Dc.Aa=new THREE.e;THREE.Dc.Id=new THREE.e;
THREE.Oj=function(){function a(){f=d-b;g=e-c}var b=0,c=0,d=0,e=0,f=0,g=0,h=v;this.Bn=function(){return b};this.Cn=function(){return c};this.An=function(){return f};this.zn=function(){return g};this.Uf=function(){return b};this.Zf=function(){return c};this.Yf=function(){return d};this.Tf=function(){return e};this.set=function(f,g,l,m){h=D;b=f;c=g;d=l;e=m;a()};this.Gf=function(f,g){v===h?(h=D,b=f,c=g,d=f,e=g):(b=b<f?b:f,c=c<g?c:g,d=d>f?d:f,e=e>g?e:g);a()};this.Kq=function(f,g,l,m,p,s){v===h?(h=D,b=
f<l?f<p?f:p:l<p?l:p,c=g<m?g<s?g:s:m<s?m:s,d=f>l?f>p?f:p:l>p?l:p,e=g>m?g>s?g:s:m>s?m:s):(b=f<l?f<p?f<b?f:b:p<b?p:b:l<p?l<b?l:b:p<b?p:b,c=g<m?g<s?g<c?g:c:s<c?s:c:m<s?m<c?m:c:s<c?s:c,d=f>l?f>p?f>d?f:d:p>d?p:d:l>p?l>d?l:d:p>d?p:d,e=g>m?g>s?g>e?g:e:s>e?s:e:m>s?m>e?m:e:s>e?s:e);a()};this.Mq=function(f){v===h?(h=D,b=f.Uf(),c=f.Zf(),d=f.Yf(),e=f.Tf()):(b=b<f.Uf()?b:f.Uf(),c=c<f.Zf()?c:f.Zf(),d=d>f.Yf()?d:f.Yf(),e=e>f.Tf()?e:f.Tf());a()};this.Sk=function(f){b-=f;c-=f;d+=f;e+=f;a()};this.Ui=function(f){b=b>
f.Uf()?b:f.Uf();c=c>f.Zf()?c:f.Zf();d=d<f.Yf()?d:f.Yf();e=e<f.Tf()?e:f.Tf();a()};this.bg=function(a){return d<a.Uf()||b>a.Yf()||e<a.Zf()||c>a.Tf()?D:v};this.empty=function(){h=v;e=d=c=b=0;a()};this.cs=function(){return h}};THREE.De=function(a,b){r===a&&r===b?(this.xb=new THREE.e,this.X=0):(this.xb=a.d(),this.X=b||0)};
THREE.De.prototype={set:function(a,b){this.xb.copy(a);this.X=b;return this},copy:function(a){this.xb.copy(a.xb);this.X=a.X;return this},empty:function(){return 0>=this.X},Og:function(a){return a.Nb(this.xb)-this.X},translate:function(){this.xb.v(this.offset);return this},scale:function(a){this.X*=a;return this},eb:function(a){return a.xb.eb(this.xb)&&a.X===this.X},d:function(){return(new THREE.Fu).copy(this)}};
THREE.bb={qc:function(a,b,c){return a<b?b:a>c?c:a},Av:function(a,b){return a<b?b:a},Nx:function(a,b,c,d,e){return d+(a-b)*(e-d)/(c-b)},lt:function(){return(65280*Math.random()+255*Math.random())/65535},lz:function(a,b){return a+Math.floor(Math.random()*(b-a+1))},jz:function(a,b){return a+Math.random()*(b-a)},kz:function(a){return a*(0.5-Math.random())},Iz:function(a){return 0>a?-1:0<a?1:0},kw:function(a){return a*THREE.bb.pq},iz:function(a){return a*THREE.bb.vq}};THREE.bb.pq=Math.PI/180;
THREE.bb.vq=180/Math.PI;THREE.Ec=function(a,b,c,d){this.x=a||0;this.y=b||0;this.a=c||0;this.k=r!==d?d:1};
THREE.Ec.prototype={set:function(a,b,c,d){this.x=a;this.y=b;this.a=c;this.k=d;return this},copy:function(a){this.x=a.x;this.y=a.y;this.a=a.a;this.k=a.k;return this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.a*this.a+this.k*this.k)},normalize:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y+this.a*this.a+this.k*this.k);0===a?(this.a=this.y=this.x=0,this.k=1):(a=1/a,this.x*=a,this.y*=a,this.a*=a,this.k*=a);return this},multiply:function(a,b){var c=a.x,d=a.y,e=a.a,f=a.k,
g=b.x,h=b.y,i=b.a,k=b.k;this.x=c*k+d*i-e*h+f*g;this.y=-c*i+d*k+e*g+f*h;this.a=c*h-d*g+e*k+f*i;this.k=-c*g-d*h-e*i+f*k;return this},Xe:function(a){var b=this.x,c=this.y,d=this.a,e=this.k,f=a.x,g=a.y,h=a.a,a=a.k;this.x=b*a+e*f+c*h-d*g;this.y=c*a+e*g+d*f-b*h;this.a=d*a+e*h+b*g-c*f;this.k=e*a-b*f-c*g-d*h;return this},aa:function(a,b){b||(b=a);var c=a.x,d=a.y,e=a.a,f=this.x,g=this.y,h=this.a,i=this.k,k=i*c+g*e-h*d,l=i*d+h*c-f*e,m=i*e+f*d-g*c,c=-f*c-g*d-h*e;b.x=k*i+c*-f+l*-h-m*-g;b.y=l*i+c*-g+m*-f-k*-h;
b.a=m*i+c*-h+k*-g-l*-f;return b},d:function(){return new THREE.Ec(this.x,this.y,this.a,this.k)}};
THREE.Ec.Et=function(a,b,c,d){var e=a.k*b.k+a.x*b.x+a.y*b.y+a.a*b.a;0>e?(c.k=-b.k,c.x=-b.x,c.y=-b.y,c.a=-b.a,e=-e):c.copy(b);if(1<=Math.abs(e))c.k=a.k,c.x=a.x,c.y=a.y,c.a=a.a;else{var b=Math.acos(e),f=Math.sqrt(1-e*e);0.001>Math.abs(f)?(c.k=0.5*(a.k+c.k),c.x=0.5*(a.x+c.x),c.y=0.5*(a.y+c.y),c.a=0.5*(a.a+c.a)):(e=Math.sin((1-d)*b)/f,d=Math.sin(d*b)/f,c.k=a.k*e+c.k*d,c.x=a.x*e+c.x*d,c.y=a.y*e+c.y*d,c.a=a.a*e+c.a*d)}};
THREE.Hu=function(a){function b(a,b,c,d,e,f,g){a=0.5*(c-a);d=0.5*(d-b);return(2*(b-c)+a+d)*g+(-3*(b-c)-2*a-d)*f+a*e+b}this.M=a;var c=[],d={x:0,y:0,a:0},e,f,g,h,i,k,l,m,p;this.Vw=function(a){this.M=[];for(var b=0;b<a.length;b++)this.M[b]={x:a[b][0],y:a[b][1],a:a[b][2]}};this.Ba=function(a){e=(this.M.length-1)*a;f=Math.floor(e);g=e-f;c[0]=0===f?f:f-1;c[1]=f;c[2]=f>this.M.length-2?this.M.length-1:f+1;c[3]=f>this.M.length-3?this.M.length-1:f+2;k=this.M[c[0]];l=this.M[c[1]];m=this.M[c[2]];p=this.M[c[3]];
h=g*g;i=g*h;d.x=b(k.x,l.x,m.x,p.x,g,h,i);d.y=b(k.y,l.y,m.y,p.y,g,h,i);d.a=b(k.a,l.a,m.a,p.a,g,h,i);return d};this.Fw=function(){var a,b,c=this.M.length,d=[];for(a=0;a<c;a++)b=this.M[a],d[a]=[b.x,b.y,b.a];return d};this.Vf=function(a){var b,c,d,e=0,f=new THREE.e,g=new THREE.e,h=[],i=0;h[0]=0;a||(a=100);c=this.M.length*a;f.copy(this.M[0]);for(a=1;a<c;a++)b=a/c,d=this.Ba(b),g.copy(d),i+=g.Nb(f),f.copy(d),b*=this.M.length-1,b=Math.floor(b),b!=e&&(h[b]=i,e=b);h[h.length]=i;return{gn:h,total:i}};this.oz=
function(a){var b,c,d,e,f,g,h=[],i=new THREE.e,l=this.Vf();h.push(i.copy(this.M[0]).d());for(b=1;b<this.M.length;b++){c=l.gn[b]-l.gn[b-1];g=Math.ceil(a*c/l.total);e=(b-1)/(this.M.length-1);f=b/(this.M.length-1);for(c=1;c<g-1;c++)d=e+c*(1/g)*(f-e),d=this.Ba(d),h.push(i.copy(d).d());h.push(i.copy(this.M[b]).d())}this.M=h}};THREE.Mu=function(a){console.warn("THREE.Vertex has been DEPRECATED. Use THREE.Vector3 instead.");return a};
THREE.Lu=function(a,b){console.warn("THREE.UV has been DEPRECATED. Use THREE.Vector2 instead.");return new THREE.l(a,b)};THREE.Aj=function(){var a={};this.addEventListener=function(b,c){r===a[b]&&(a[b]=[]);-1===a[b].indexOf(c)&&a[b].push(c)};this.dispatchEvent=function(b){var c=a[b.type];if(r!==c)for(var d=0,e=c.length;d<e;d++)c[d](b)};this.removeEventListener=function(b,c){var d=a[b].indexOf(c);-1!==d&&a[b].splice(d,1)}};var Ld=THREE;
Ld.Nj=function(a,b,c,d){this.lh=new Ld.sd(a,b);0<this.lh.direction.length()&&this.lh.direction.normalize();this.Ca=c||0;this.Ia=d||Infinity};new Ld.De;new Ld.sd;new Ld.Dc;new Ld.D;Ld.Nj.prototype.precision=1E-4;Ld.Nj.prototype.set=function(a,b){this.lh.set(a,b);0<this.lh.direction.length()&&this.lh.direction.normalize()};
THREE.z=function(){this.id=THREE.Kp++;this.name="";this.ca={};this.parent=r;this.children=[];this.kd=new THREE.e(0,1,0);this.position=new THREE.e;this.rotation=new THREE.e;this.Qe=THREE.z.tr;this.scale=new THREE.e(1,1,1);this.fd=w;this.cj=v;this.J=new THREE.D;this.F=new THREE.D;this.Un=new THREE.D;this.Ya=this.tc=v;this.ic=new THREE.Ec;this.ld=D;this.ni=0;this.oi=1;this.visible=v;this.hg=this.pc=D;this.Se=v;this.pk=new THREE.e;THREE.Lp[this.id]=this};
THREE.z.prototype={If:function(a){this.J.multiply(a,this.J);var a=this.scale,b=this.J,c=a.set(b.elements[0],b.elements[1],b.elements[2]).length(),d=a.set(b.elements[4],b.elements[5],b.elements[6]).length(),b=a.set(b.elements[8],b.elements[9],b.elements[10]).length();a.x=c;a.y=d;a.a=b;a=jd(new THREE.D,this.J);uc(this.rotation,a,this.Qe);a=this.position;b=this.J;a.x=b.elements[12];a.y=b.elements[13];a.a=b.elements[14]},translate:function(a,b){var c=this.J.elements,d=b.x,e=b.y,f=b.a;b.x=d*c[0]+e*c[4]+
f*c[8];b.y=d*c[1]+e*c[5]+f*c[9];b.a=d*c[2]+e*c[6]+f*c[10];b.normalize();this.position.v(b.V(a))},nb:function(a){this.J.nb(a,this.position,this.kd);this.cj&&(D===this.ld?uc(this.rotation,this.J,this.Qe):this.ic.copy(kd(this.J)[1]))},add:function(a){if(a===this)console.warn("THREE.Object3D.add: An object can't be added as a child of itself.");else if(a instanceof THREE.z){r!==a.parent&&a.parent.remove(a);a.parent=this;this.children.push(a);for(var b=this;r!==b.parent;)b=b.parent;r!==b&&b instanceof
THREE.Xh&&Md(b,a)}},remove:function(a){var b=this.children.indexOf(a);if(-1!==b){a.parent=r;this.children.splice(b,1);for(b=this;r!==b.parent;)b=b.parent;r!==b&&b instanceof THREE.Xh&&Yd(b,a)}},yc:function(){nd(this.J,this.position);D===this.ld?md(this.J,this.rotation,this.Qe):ld(this.J,this.ic);if(1!==this.scale.x||1!==this.scale.y||1!==this.scale.a)this.J.scale(this.scale),this.oi=Math.max(this.scale.x,Math.max(this.scale.y,this.scale.a));this.Ya=v},Eb:function(a){v===this.tc&&this.yc();if(v===
this.Ya||v===a)r===this.parent?this.F.copy(this.J):this.F.multiply(this.parent.F,this.J),this.Ya=D,a=v;for(var b=0,c=this.children.length;b<c;b++)this.children[b].Eb(a)},d:function(a){r===a&&(a=new THREE.z);a.name=this.name;a.kd.copy(this.kd);a.position.copy(this.position);a.rotation instanceof THREE.e&&a.rotation.copy(this.rotation);a.Qe=this.Qe;a.scale.copy(this.scale);a.fd=this.fd;a.cj=this.cj;a.J.copy(this.J);a.F.copy(this.F);a.Un.copy(this.Un);a.tc=this.tc;a.Ya=this.Ya;a.ic.copy(this.ic);a.ld=
this.ld;a.ni=this.ni;a.oi=this.oi;a.visible=this.visible;a.pc=this.pc;a.hg=this.hg;a.Se=this.Se;for(var b=0;b<this.children.length;b++)a.add(this.children[b].d());return a}};function Zd(a,b){b(a);for(var c=0,d=a.children.length;c<d;c++)Zd(a.children[c],b)}THREE.z.Vj=new THREE.D;THREE.z.tr="XYZ";THREE.Kp=0;THREE.Lp={};
THREE.Lj=function(){function a(){if(f===h){var a=new THREE.Tp;g.push(a);h++;f++;return a}return g[f++]}function b(){if(k===m){var a=new THREE.$b;l.push(a);m++;k++;return a}return l[k++]}function c(a,b){return b.a-a.a}function d(a,b){var c=0,d=1,e=a.a+a.k,f=b.a+b.k,g=-a.a+a.k,h=-b.a+b.k;if(0<=e&&0<=f&&0<=g&&0<=h)return v;if(0>e&&0>f||0>g&&0>h)return D;0>e?c=Math.max(c,e/(e-f)):0>f&&(d=Math.min(d,e/(e-f)));0>g?c=Math.max(c,g/(g-h)):0>h&&(d=Math.min(d,g/(g-h)));if(d<c)return D;a.$(b,c);b.$(a,1-d);return v}
var e,f,g=[],h=0,i,k,l=[],m=0,p,s,q=[],n=0,t,x=[],L=0,E,y,M=[],B=0,K,J,H=[],O=0,C={hb:[],rj:[],Ab:[],elements:[]},P=new THREE.e,F=new THREE.Hc,U=new THREE.D,G=new THREE.D,V=new THREE.ye,fa=new THREE.vf,W=new THREE.Hc,ia=new THREE.Hc;this.fz=function(a,b){b.xa.Ob(b.F);U.multiply(b.oa,b.xa);U.aa(a);return a};this.uj=function(a,b){b.oo.Ob(b.oa);U.multiply(b.F,b.oo);U.aa(a)};this.az=function(a,b){var c;a.a=-1;c=new THREE.e(a.x,a.y,1);this.uj(a,b);this.uj(c,b);c.Wa(a).normalize();return new THREE.Nj(a,
c)};this.jt=function(g,h,m,ha){function qa(b){for(var c=0,d=b.children.length;c<d;c++){var f=b.children[c];if(D!==f.visible){if(f instanceof THREE.Fb)C.Ab.push(f);else if(f instanceof THREE.R||f instanceof THREE.Fa){if(D===f.Se||v===fa.contains(f))e=a(),e.object=f,w!==f.fd?e.a=f.fd:(P.copy(od(f.F)),U.aa(P),e.a=P.a),C.hb.push(e)}else f instanceof THREE.Ee||f instanceof THREE.ug?(e=a(),e.object=f,w!==f.fd?e.a=f.fd:(P.copy(od(f.F)),U.aa(P),e.a=P.a),C.rj.push(e)):(e=a(),e.object=f,w!==f.fd?e.a=f.fd:(P.copy(od(f.F)),
U.aa(P),e.a=P.a),C.hb.push(e));qa(f)}}}var ka=h.Ca,Q=h.Ia,S=D,ga,T,X,ca,N,ja,La,Oa,za,Ba,Ia,sa,gb,hb,ib;J=y=t=s=0;C.elements.length=0;g.Eb();r===h.parent&&h.Eb();h.xa.Ob(h.F);U.multiply(h.oa,h.xa);Kd(fa,U);f=0;C.hb.length=0;C.rj.length=0;C.Ab.length=0;qa(g);v===m&&C.hb.sort(c);g=0;for(m=C.hb.length;g<m;g++)if(Oa=C.hb[g].object,za=Oa.F,k=0,Oa instanceof THREE.R){Ba=Oa.t;X=Ba.f;Ia=Ba.m;Ba=Ba.C;V.Ob(za);V.Dh();gb=Oa.q instanceof THREE.Hb;hb=v===gb?Oa.q:w;ga=0;for(T=X.length;ga<T;ga++)i=b(),i.vc.copy(X[ga]),
za.aa(i.vc),i.i.copy(i.vc),Id(U,i.i),i.i.x/=i.i.k,i.i.y/=i.i.k,i.visible=i.i.a>ka&&i.i.a<Q;X=0;for(ga=Ia.length;X<ga;X++)if(T=Ia[X],ib=v===gb?hb.ja[T.va]:Oa.q,r!==ib){ja=ib.Rc;if(T instanceof THREE.O)if(ca=l[T.p],N=l[T.c],La=l[T.s],v===ca.visible&&v===N.visible&&v===La.visible)if(S=0>(La.i.x-ca.i.x)*(N.i.y-ca.i.y)-(La.i.y-ca.i.y)*(N.i.x-ca.i.x),ja===THREE.Cc||S===(ja===THREE.uf))s===n?(sa=new THREE.sm,q.push(sa),n++,s++,p=sa):p=q[s++],p.Y.copy(ca),p.ba.copy(N),p.qb.copy(La);else continue;else continue;
else if(T instanceof THREE.da)if(ca=l[T.p],N=l[T.c],La=l[T.s],sa=l[T.S],v===ca.visible&&v===N.visible&&v===La.visible&&v===sa.visible)if(S=0>(sa.i.x-ca.i.x)*(N.i.y-ca.i.y)-(sa.i.y-ca.i.y)*(N.i.x-ca.i.x)||0>(N.i.x-La.i.x)*(sa.i.y-La.i.y)-(N.i.y-La.i.y)*(sa.i.x-La.i.x),ja===THREE.Cc||S===(ja===THREE.uf)){if(t===L){var db=new THREE.tm;x.push(db);L++;t++;p=db}else p=x[t++];p.Y.copy(ca);p.ba.copy(N);p.qb.copy(La);p.Ol.copy(sa)}else continue;else continue;p.uc.copy(T.r);D===S&&(ja===THREE.rf||ja===THREE.Cc)&&
p.uc.Xi();V.aa(p.uc).normalize();p.Mf.copy(T.qa);za.aa(p.Mf);p.pi.copy(p.Mf);U.aa(p.pi);La=T.o;ca=0;for(N=La.length;ca<N;ca++)sa=p.zc[ca],sa.copy(La[ca]),D===S&&(ja===THREE.rf||ja===THREE.Cc)&&sa.Xi(),V.aa(sa).normalize();p.vj=La.length;ca=0;for(N=Ba.length;ca<N;ca++)if(sa=Ba[ca][X],r!==sa){ja=0;for(La=sa.length;ja<La;ja++)p.nf[ca][ja]=sa[ja]}p.color=T.color;p.q=ib;p.a=p.pi.a;C.elements.push(p)}}else if(Oa instanceof THREE.Fa){G.multiply(U,za);X=Oa.t.f;ca=b();ca.i.copy(X[0]);Id(G,ca.i);za=Oa.type===
THREE.xf?2:1;ga=1;for(T=X.length;ga<T;ga++)ca=b(),ca.i.copy(X[ga]),Id(G,ca.i),0<(ga+1)%za||(N=l[k-2],W.copy(ca.i),ia.copy(N.i),v===d(W,ia)&&(W.V(1/W.k),ia.V(1/ia.k),y===B?(Ia=new THREE.um,M.push(Ia),B++,y++,E=Ia):E=M[y++],E.Y.i.copy(W),E.ba.i.copy(ia),E.a=Math.max(W.a,ia.a),E.q=Oa.q,C.elements.push(E)))}g=0;for(m=C.rj.length;g<m;g++)Oa=C.rj[g].object,za=Oa.F,Oa instanceof THREE.ug&&(F.set(za.elements[12],za.elements[13],za.elements[14],1),Id(U,F),F.a/=F.k,0<F.a&&1>F.a&&(J===O?(ka=new THREE.vm,H.push(ka),
O++,J++,K=ka):K=H[J++],K.object=Oa,K.x=F.x/F.k,K.y=F.y/F.k,K.a=F.a,K.rotation=Oa.rotation.a,K.scale.x=Oa.scale.x*Math.abs(K.x-(F.x+h.oa.elements[0])/(F.k+h.oa.elements[12])),K.scale.y=Oa.scale.y*Math.abs(K.y-(F.y+h.oa.elements[5])/(F.k+h.oa.elements[13])),K.q=Oa.q,C.elements.push(K)));v===ha&&C.elements.sort(c);return C}};
THREE.O=function(a,b,c,d,e,f){this.p=a;this.c=b;this.s=c;this.r=d instanceof THREE.e?d:new THREE.e;this.o=d instanceof Array?d:[];this.color=e instanceof THREE.u?e:new THREE.u;this.n=e instanceof Array?e:[];this.md=[];this.va=r!==f?f:0;this.qa=new THREE.e};
THREE.O.prototype={d:function(){var a=new THREE.O(this.p,this.c,this.s);a.r.copy(this.r);a.color.copy(this.color);a.qa.copy(this.qa);a.va=this.va;var b,c;b=0;for(c=this.o.length;b<c;b++)a.o[b]=this.o[b].d();b=0;for(c=this.n.length;b<c;b++)a.n[b]=this.n[b].d();b=0;for(c=this.md.length;b<c;b++)a.md[b]=this.md[b].d();return a}};
THREE.da=function(a,b,c,d,e,f,g){this.p=a;this.c=b;this.s=c;this.S=d;this.r=e instanceof THREE.e?e:new THREE.e;this.o=e instanceof Array?e:[];this.color=f instanceof THREE.u?f:new THREE.u;this.n=f instanceof Array?f:[];this.md=[];this.va=r!==g?g:0;this.qa=new THREE.e};
THREE.da.prototype={d:function(){var a=new THREE.da(this.p,this.c,this.s,this.S);a.r.copy(this.r);a.color.copy(this.color);a.qa.copy(this.qa);a.va=this.va;var b,c;b=0;for(c=this.o.length;b<c;b++)a.o[b]=this.o[b].d();b=0;for(c=this.n.length;b<c;b++)a.n[b]=this.n[b].d();b=0;for(c=this.md.length;b<c;b++)a.md[b]=this.md[b].d();return a}};
THREE.I=function(){this.id=THREE.Zl++;this.name="";this.f=[];this.Xa=[];this.Ye=[];this.m=[];this.Kc=[[]];this.C=[[]];this.G=[];this.ee=[];this.ka=[];this.ne=[];this.me=[];this.On=[];this.Lb=this.Nd=w;this.$f=D;this.zi=v;this.en=this.Ri=this.Ha=this.pe=this.hc=this.of=this.Pe=this.ta=D;THREE.$l[this.id]=this};
THREE.I.prototype={If:function(a){var b=new THREE.ye;b.Ob(a).Dh();for(var c=0,d=this.f.length;c<d;c++)a.aa(this.f[c]);c=0;for(d=this.m.length;c<d;c++){var e=this.m[c];b.aa(e.r).normalize();for(var f=0,g=e.o.length;f<g;f++)b.aa(e.o[f]).normalize();a.aa(e.qa)}},zd:function(a){var b,c,d,e;if(r===this.Yj){e=this.Yj=Array(this.f.length);b=0;for(c=this.f.length;b<c;b++)e[b]=new THREE.e;b=0;for(c=this.m.length;b<c;b++)d=this.m[b],d instanceof THREE.O?d.o=[new THREE.e,new THREE.e,new THREE.e]:d instanceof
THREE.da&&(d.o=[new THREE.e,new THREE.e,new THREE.e,new THREE.e])}else{e=this.Yj;b=0;for(c=this.f.length;b<c;b++)e[b].set(0,0,0)}if(a){var f,g,h,i=new THREE.e,k=new THREE.e,l=new THREE.e,m=new THREE.e,p=new THREE.e;b=0;for(c=this.m.length;b<c;b++)d=this.m[b],d instanceof THREE.O?(a=this.f[d.p],f=this.f[d.c],g=this.f[d.s],i.sub(g,f),k.sub(a,f),Ac(i,k),e[d.p].v(i),e[d.c].v(i),e[d.s].v(i)):d instanceof THREE.da&&(a=this.f[d.p],f=this.f[d.c],g=this.f[d.s],h=this.f[d.S],l.sub(h,f),k.sub(a,f),Ac(l,k),e[d.p].v(l),
e[d.c].v(l),e[d.S].v(l),m.sub(h,g),p.sub(f,g),Ac(m,p),e[d.c].v(m),e[d.s].v(m),e[d.S].v(m))}else{b=0;for(c=this.m.length;b<c;b++)d=this.m[b],d instanceof THREE.O?(e[d.p].v(d.r),e[d.c].v(d.r),e[d.s].v(d.r)):d instanceof THREE.da&&(e[d.p].v(d.r),e[d.c].v(d.r),e[d.s].v(d.r),e[d.S].v(d.r))}b=0;for(c=this.f.length;b<c;b++)e[b].normalize();b=0;for(c=this.m.length;b<c;b++)d=this.m[b],d instanceof THREE.O?(d.o[0].copy(e[d.p]),d.o[1].copy(e[d.c]),d.o[2].copy(e[d.s])):d instanceof THREE.da&&(d.o[0].copy(e[d.p]),
d.o[1].copy(e[d.c]),d.o[2].copy(e[d.s]),d.o[3].copy(e[d.S]))},Jg:function(){function a(a,b,c,d,e,f,J){h=a.f[b];i=a.f[c];k=a.f[d];l=g[e];m=g[f];p=g[J];s=i.x-h.x;q=k.x-h.x;n=i.y-h.y;t=k.y-h.y;x=i.a-h.a;L=k.a-h.a;E=m.x-l.x;y=p.x-l.x;M=m.y-l.y;B=p.y-l.y;K=1/(E*B-y*M);C.set((B*s-M*q)*K,(B*n-M*t)*K,(B*x-M*L)*K);P.set((E*q-y*s)*K,(E*t-y*n)*K,(E*L-y*x)*K);H[b].v(C);H[c].v(C);H[d].v(C);O[b].v(P);O[c].v(P);O[d].v(P)}var b,c,d,e,f,g,h,i,k,l,m,p,s,q,n,t,x,L,E,y,M,B,K,J,H=[],O=[],C=new THREE.e,P=new THREE.e,F=
new THREE.e,U=new THREE.e,G=new THREE.e;b=0;for(c=this.f.length;b<c;b++)H[b]=new THREE.e,O[b]=new THREE.e;b=0;for(c=this.m.length;b<c;b++)f=this.m[b],g=this.C[0][b],f instanceof THREE.O?a(this,f.p,f.c,f.s,0,1,2):f instanceof THREE.da&&(a(this,f.p,f.c,f.S,0,1,3),a(this,f.c,f.s,f.S,1,2,3));var V=["a","b","c","d"];b=0;for(c=this.m.length;b<c;b++){f=this.m[b];for(d=0;d<f.o.length;d++)G.copy(f.o[d]),e=f[V[d]],J=H[e],F.copy(J),F.Wa(G.V(G.Qa(J))).normalize(),Mc(U,f.o[d],J),e=U.Qa(O[e]),e=0>e?-1:1,f.md[d]=
new THREE.Hc(F.x,F.y,F.a,e)}this.$f=v},si:function(){this.Nd=(new THREE.sf).wo(this.f)},ti:function(){for(var a=new THREE.De,b=this.f,c=new THREE.e,d=0,e=0,f=b.length;e<f;e++)d=Math.max(d,c.Pg(b[e]));a.xb=c;a.X=Math.sqrt(d);this.Lb=a},d:function(){for(var a=new THREE.I,b=this.f,c=0,d=b.length;c<d;c++)a.f.push(b[c].d());b=this.m;c=0;for(d=b.length;c<d;c++)a.m.push(b[c].d());b=this.C[0];c=0;for(d=b.length;c<d;c++){for(var e=b[c],f=[],g=0,h=e.length;g<h;g++)f.push(new THREE.l(e[g].x,e[g].y));a.C[0].push(f)}return a}};
function $d(a){var b={},c=[],d=[],e,f=Math.pow(10,4),g,h,i,k;g=0;for(h=a.f.length;g<h;g++)e=a.f[g],e=[Math.round(e.x*f),Math.round(e.y*f),Math.round(e.a*f)].join("_"),r===b[e]?(b[e]=g,c.push(a.f[g]),d[g]=c.length-1):d[g]=d[b[e]];g=0;for(h=a.m.length;g<h;g++)if(b=a.m[g],b instanceof THREE.O)b.p=d[b.p],b.c=d[b.c],b.s=d[b.s];else if(b instanceof THREE.da){b.p=d[b.p];b.c=d[b.c];b.s=d[b.s];b.S=d[b.S];e=[b.p,b.c,b.s,b.S];for(f=3;0<f;f--)if(e.indexOf(b["abcd"[f]])!==f){e.splice(f,1);a.m[g]=new THREE.O(e[0],
e[1],e[2],b.r,b.color,b.va);e=0;for(i=a.C.length;e<i;e++)(k=a.C[e][g])&&k.splice(f,1);a.m[g].n=b.n;break}}a.f=c}function ae(a){for(var b=0,c=a.f,d=0,e=c.length;d<e;d++)0<d&&(b+=c[d].Nb(c[d-1])),a.On[d]=b}function be(a){var b,c,d,e,f,g,h=new THREE.e,i=new THREE.e;b=0;for(c=a.m.length;b<c;b++)d=a.m[b],e=a.f[d.p],f=a.f[d.c],g=a.f[d.s],h.sub(g,f),i.sub(e,f),Ac(h,i),h.normalize(),d.r.copy(h)}
function ce(a){var b,c,d;b=0;for(c=a.m.length;b<c;b++)d=a.m[b],d.qa.set(0,0,0),d instanceof THREE.O?(d.qa.v(a.f[d.p]),d.qa.v(a.f[d.c]),d.qa.v(a.f[d.s]),d.qa.Yc(3)):d instanceof THREE.da&&(d.qa.v(a.f[d.p]),d.qa.v(a.f[d.c]),d.qa.v(a.f[d.s]),d.qa.v(a.f[d.S]),d.qa.Yc(4))}THREE.Zl=0;THREE.$l={};THREE.qd=function(){this.id=THREE.Zl++;this.attributes={};this.zi=D;this.ol=[];this.Lb=this.Nd=w;this.$f=D;this.G=[];THREE.$l[this.id]=this};
THREE.qd.prototype={If:function(a){var b,c;this.attributes.position&&(b=this.attributes.position.b);this.attributes.r&&(c=this.attributes.r.b);r!==b&&(a.ll(b),this.ta=v);r!==c&&(b=new THREE.ye,b.Ob(a).Dh(),b.ll(c),de(this),this.hc=v)},si:function(){this.Nd||(this.Nd=new THREE.sf);var a=this.attributes.position.b;if(a){var b=this.Nd,c,d,e;3<=a.length&&(b.min.x=b.max.x=a[0],b.min.y=b.max.y=a[1],b.min.a=b.max.a=a[2]);for(var f=3,g=a.length;f<g;f+=3)c=a[f],d=a[f+1],e=a[f+2],c<b.min.x?b.min.x=c:c>b.max.x&&
(b.max.x=c),d<b.min.y?b.min.y=d:d>b.max.y&&(b.max.y=d),e<b.min.a?b.min.a=e:e>b.max.a&&(b.max.a=e)}if(r===a||0===a.length)this.Nd.min.set(0,0,0),this.Nd.max.set(0,0,0)},ti:function(){this.Lb||(this.Lb=new THREE.De);var a=this.attributes.position.b;if(a){for(var b,c=0,d,e,f=0,g=a.length;f<g;f+=3)b=a[f],d=a[f+1],e=a[f+2],b=b*b+d*d+e*e,b>c&&(c=b);this.Lb.X=Math.sqrt(c)}},zd:function(){if(this.attributes.position){var a,b,c,d;a=this.attributes.position.b.length;if(r===this.attributes.r)this.attributes.r=
{gc:3,b:new Float32Array(a),eg:a};else{a=0;for(b=this.attributes.r.b.length;a<b;a++)this.attributes.r.b[a]=0}var e=this.attributes.position.b,f=this.attributes.r.b,g,h,i,k,l,m,p=new THREE.e,s=new THREE.e,q=new THREE.e,n=new THREE.e,t=new THREE.e;if(this.attributes.index){var x=this.attributes.index.b,L=this.ol;c=0;for(d=L.length;c<d;++c){b=L[c].start;g=L[c].count;var E=L[c].index;a=b;for(b+=g;a<b;a+=3)g=E+x[a],h=E+x[a+1],i=E+x[a+2],k=e[3*g],l=e[3*g+1],m=e[3*g+2],p.set(k,l,m),k=e[3*h],l=e[3*h+1],m=
e[3*h+2],s.set(k,l,m),k=e[3*i],l=e[3*i+1],m=e[3*i+2],q.set(k,l,m),n.sub(q,s),t.sub(p,s),Ac(n,t),f[3*g]+=n.x,f[3*g+1]+=n.y,f[3*g+2]+=n.a,f[3*h]+=n.x,f[3*h+1]+=n.y,f[3*h+2]+=n.a,f[3*i]+=n.x,f[3*i+1]+=n.y,f[3*i+2]+=n.a}}else{a=0;for(b=e.length;a<b;a+=9)k=e[a],l=e[a+1],m=e[a+2],p.set(k,l,m),k=e[a+3],l=e[a+4],m=e[a+5],s.set(k,l,m),k=e[a+6],l=e[a+7],m=e[a+8],q.set(k,l,m),n.sub(q,s),t.sub(p,s),Ac(n,t),f[a]=n.x,f[a+1]=n.y,f[a+2]=n.a,f[a+3]=n.x,f[a+4]=n.y,f[a+5]=n.a,f[a+6]=n.x,f[a+7]=n.y,f[a+8]=n.a}de(this);
this.hc=v}},Jg:function(){function a(a){ra.x=d[3*a];ra.y=d[3*a+1];ra.a=d[3*a+2];Ha.copy(ra);ha=i[a];W.copy(ha);W.Wa(ra.V(ra.Qa(ha))).normalize();Mc(ia,Ha,ha);qa=ia.Qa(k[a]);R=0>qa?-1:1;h[4*a]=W.x;h[4*a+1]=W.y;h[4*a+2]=W.a;h[4*a+3]=R}if(r===this.attributes.index||r===this.attributes.position||r===this.attributes.r||r===this.attributes.sa)console.warn("Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");else{var b=this.attributes.index.b,c=this.attributes.position.b,
d=this.attributes.r.b,e=this.attributes.sa.b,f=c.length/3;if(r===this.attributes.Rb){var g=4*f;this.attributes.Rb={gc:4,b:new Float32Array(g),eg:g}}for(var h=this.attributes.Rb.b,i=[],k=[],g=0;g<f;g++)i[g]=new THREE.e,k[g]=new THREE.e;var l,m,p,s,q,n,t,x,L,E,y,M,B,K,J,f=new THREE.e,g=new THREE.e,H,O,C,P,F,U,G,V=this.ol;C=0;for(P=V.length;C<P;++C){O=V[C].start;F=V[C].count;var fa=V[C].index;H=O;for(O+=F;H<O;H+=3)F=fa+b[H],U=fa+b[H+1],G=fa+b[H+2],l=c[3*F],m=c[3*F+1],p=c[3*F+2],s=c[3*U],q=c[3*U+1],n=
c[3*U+2],t=c[3*G],x=c[3*G+1],L=c[3*G+2],E=e[2*F],y=e[2*F+1],M=e[2*U],B=e[2*U+1],K=e[2*G],J=e[2*G+1],s-=l,l=t-l,q-=m,m=x-m,n-=p,p=L-p,M-=E,E=K-E,B-=y,y=J-y,J=1/(M*y-E*B),f.set((y*s-B*l)*J,(y*q-B*m)*J,(y*n-B*p)*J),g.set((M*l-E*s)*J,(M*m-E*q)*J,(M*p-E*n)*J),i[F].v(f),i[U].v(f),i[G].v(f),k[F].v(g),k[U].v(g),k[G].v(g)}var W=new THREE.e,ia=new THREE.e,ra=new THREE.e,Ha=new THREE.e,R,ha,qa;C=0;for(P=V.length;C<P;++C){O=V[C].start;F=V[C].count;fa=V[C].index;H=O;for(O+=F;H<O;H+=3)F=fa+b[H],U=fa+b[H+1],G=fa+
b[H+2],a(F),a(U),a(G)}this.pe=this.$f=v}}};function de(a){for(var a=a.attributes.r.b,b,c,d,e=0,f=a.length;e<f;e+=3)b=a[e],c=a[e+1],d=a[e+2],b=1/Math.sqrt(b*b+c*c+d*d),a[e]*=b,a[e+1]*=b,a[e+2]*=b}THREE.Wb=function(){THREE.z.call(this);this.xa=new THREE.D;this.oa=new THREE.D;this.oo=new THREE.D};THREE.Wb.prototype=Object.create(THREE.z.prototype);THREE.Wb.prototype.nb=function(a){this.J.nb(this.position,a,this.kd);v===this.cj&&(D===this.ld?uc(this.rotation,this.J,this.Qe):this.ic.copy(kd(this.J)[1]))};
THREE.tg=function(a,b,c,d,e,f){THREE.Wb.call(this);this.left=a;this.right=b;this.top=c;this.bottom=d;this.Ca=r!==e?e:0.1;this.Ia=r!==f?f:2E3;this.mf()};THREE.tg.prototype=Object.create(THREE.Wb.prototype);THREE.tg.prototype.mf=function(){var a=this.left,b=this.right,c=this.top,d=this.bottom,e=this.Ca,f=this.Ia,g=this.oa.elements,h=b-a,i=c-d,k=f-e;g[0]=2/h;g[4]=0;g[8]=0;g[12]=-((b+a)/h);g[1]=0;g[5]=2/i;g[9]=0;g[13]=-((c+d)/i);g[2]=0;g[6]=0;g[10]=-2/k;g[14]=-((f+e)/k);g[3]=0;g[7]=0;g[11]=0;g[15]=1};
THREE.mc=function(a,b,c,d){THREE.Wb.call(this);this.Xd=r!==a?a:50;this.ji=r!==b?b:1;this.Ca=r!==c?c:0.1;this.Ia=r!==d?d:2E3;this.mf()};THREE.mc.prototype=Object.create(THREE.Wb.prototype);
THREE.mc.prototype.mf=function(){if(this.Nk){var a=this.Nk/this.sn,b=Math.tan(this.Xd*Math.PI/360)*this.Ca,c=-b,d=a*c,a=Math.abs(a*b-d),c=Math.abs(b-c);Nc(this.oa,d+this.x*a/this.Nk,d+(this.x+this.width)*a/this.Nk,b-(this.y+this.height)*c/this.sn,b-this.y*c/this.sn,this.Ca,this.Ia)}else{var a=this.oa,b=this.Xd,c=this.ji,d=this.Ca,e=this.Ia,b=d*Math.tan(b*Math.PI/360),f=-b;Nc(a,f*c,b*c,f,b,d,e)}};THREE.Fb=function(a){THREE.z.call(this);this.color=new THREE.u(a)};THREE.Fb.prototype=Object.create(THREE.z.prototype);
THREE.Gh=function(a){THREE.Fb.call(this,a)};THREE.Gh.prototype=Object.create(THREE.Fb.prototype);
THREE.Bc=function(a,b){THREE.Fb.call(this,a);this.position=new THREE.e(0,1,0);this.target=new THREE.z;this.mb=r!==b?b:1;this.$i=this.pc=D;this.rh=50;this.qh=5E3;this.Dl=-500;this.Fl=this.El=500;this.Cl=-500;this.ie=D;this.jg=0;this.je=0.5;this.th=this.vh=512;this.Gl=D;this.At=new THREE.e(0,0,-1E3);this.yt=2;this.yo=[0,0,0];this.Bt=[512,512,512];this.zt=[512,512,512];this.Ao=[-1,0.99,0.998];this.zo=[0.99,0.998,1];this.jj=[];this.ff=this.Cd=this.uh=this.ef=w};THREE.Bc.prototype=Object.create(THREE.Fb.prototype);
THREE.Cj=function(a,b,c){THREE.Fb.call(this,a);this.Ra=new THREE.u(b);this.position=new THREE.e(0,100,0);this.mb=r!==c?c:1};THREE.Cj.prototype=Object.create(THREE.Fb.prototype);THREE.yf=function(a,b,c){THREE.Fb.call(this,a);this.position=new THREE.e(0,0,0);this.mb=r!==b?b:1;this.Mb=r!==c?c:0};THREE.yf.prototype=Object.create(THREE.Fb.prototype);
THREE.zf=function(a,b,c,d,e){THREE.Fb.call(this,a);this.position=new THREE.e(0,1,0);this.target=new THREE.z;this.mb=r!==b?b:1;this.Mb=r!==c?c:0;this.Ke=r!==d?d:Math.PI/2;this.Er=r!==e?e:10;this.$i=this.pc=D;this.rh=50;this.qh=5E3;this.xt=50;this.ie=D;this.jg=0;this.je=0.5;this.th=this.vh=512;this.ff=this.Cd=this.uh=this.ef=w};THREE.zf.prototype=Object.create(THREE.Fb.prototype);
THREE.xe=function(a){(this.Gz=a)?(a=document.createElement("div"),a.style.position="absolute",a.style.right="0px",a.style.top="0px",a.style.fontSize="0.8em",a.style.textAlign="left",a.style.background="rgba(0,0,0,0.25)",a.style.color="#fff",a.style.width="120px",a.style.padding="0.5em 0.5em 0.5em 0.5em",a.style.zIndex=1E3,a.innerHTML="Loading ..."):a=w;this.St=a;this.Vs=Ua();this.Us=Ua();this.Ts=Ua()};
THREE.xe.prototype={crossOrigin:"anonymous",eu:function(a){var b="Loaded ",b=a.total?b+((100*a.loaded/a.total).toFixed(0)+"%"):b+((a.loaded/1E3).toFixed(2)+" KB");this.St.innerHTML=b}};
function ee(a,b){function c(a){a=Math.log(a)/Math.LN2;return Math.floor(a)==a}function d(a){a=Math.log(a)/Math.LN2;return Math.pow(2,Math.round(a))}function e(a,e,f,h,i,k,t){var x=f.toLowerCase().Ai(".dds"),L=b+"/"+f;if(x){var E=THREE.rd.Pn(L);a[e]=E}else E=document.createElement("canvas"),a[e]=new THREE.Jb(E);a[e].Gt=f;h&&(a[e].repeat.set(h[0],h[1]),1!==h[0]&&(a[e].Ub=THREE.Fc),1!==h[1]&&(a[e].Vb=THREE.Fc));i&&a[e].offset.set(i[0],i[1]);k&&(f={repeat:THREE.Fc,Gs:THREE.Kj},r!==f[k[0]]&&(a[e].Ub=f[k[0]]),
r!==f[k[1]]&&(a[e].Vb=f[k[1]]));t&&(a[e].Kb=t);if(!x){var y=a[e],a=new Image;a.onload=function(){if(!c(this.width)||!c(this.height)){var a=d(this.width),b=d(this.height);y.L.width=a;y.L.height=b;y.L.getContext("2d").drawImage(this,0,0,a,b)}else y.L=this;y.ga=v};a.crossOrigin=g.crossOrigin;a.src=L}}function f(a){return(255*a[0]<<16)+(255*a[1]<<8)+255*a[2]}var g=THREE.xe.prototype,h="MeshLambertMaterial",i={color:15658734,opacity:1,map:w,Ja:w,Za:w,wb:w,Q:D};if(a.Da){var k=a.Da.toLowerCase();"phong"===
k?h="MeshPhongMaterial":"basic"===k&&(h="MeshBasicMaterial")}r!==a.kb&&r!==THREE[a.kb]&&(i.kb=THREE[a.kb]);if(r!==a.za||1>a.opacity)i.za=a.za;r!==a.rc&&(i.rc=a.rc);r!==a.Bd&&(i.Bd=a.Bd);r!==a.visible&&(i.visible=a.visible);r!==a.Mk&&(i.Rc=THREE.rf);r!==a.Ud&&(i.Rc=THREE.Cc);r!==a.Q&&(i.Q=a.Q);r!==a.n&&("face"===a.n?i.n=THREE.ve:a.n&&(i.n=THREE.wg));a.lr?i.color=f(a.lr):a.up&&(i.color=a.up);a.mr&&(i.hd=f(a.mr));a.kr&&(i.wa=f(a.kr));a.au&&(i.opacity=a.au);a.Ht&&(i.ke=a.Ht);a.ws&&b&&e(i,"map",a.ws,a.Hx,
a.Gx,a.Ix,a.Fx);a.xs&&b&&e(i,"lightMap",a.xs,a.Lx,a.Kx,a.Mx,a.Jx);a.us&&b&&e(i,"bumpMap",a.us,a.Dx,a.Cx,a.Ex,a.Bx);a.Sn&&b&&e(i,"normalMap",a.Sn,a.Qx,a.Px,a.Rx,a.Ox);a.ys&&b&&e(i,"specularMap",a.ys,a.Ux,a.Tx,a.Vx,a.Sx);a.vs&&(i.Lf=a.vs);a.Sn?(h=THREE.ym.Ln.r,k=THREE.nc.d(h.P),k.Lo.value=i.Za,a.Tn&&k.Vo.value.set(a.Tn,a.Tn),i.map&&(k.Ko.value=i.map,k.pn.value=v),i.Ea&&(k.Mo.value=i.Ea,k.qn.value=v),i.Ja&&(k.Jo.value=i.Ja,k.on.value=v),Nb(k.Uo.value,i.color),Nb(k.Yo.value,i.hd),Nb(k.To.value,i.wa),
k.Xo.value=i.ke,r!==i.opacity&&(k.Wo.value=i.opacity),h=new THREE.Ta({K:h.K,N:h.N,P:k,Ab:v,A:v}),i.za&&(h.za=v)):h=new THREE[h](i);r!==a.vp&&(h.name=a.vp);return h}function fe(a){for(var b=0,c=a.length;b<c;b++)if(a[b]instanceof THREE.Ta)return v;return D}function ge(a,b){for(var c=[],d=0;d<a.length;++d)c[d]=ee(a[d],b);return c}function he(a){a=a.split("/");a.pop();return(1>a.length?".":a.join("/"))+"/"}THREE.Ih=function(a){THREE.xe.call(this,a)};THREE.Ih.prototype=Object.create(THREE.xe.prototype);
THREE.Ih.prototype.load=function(a,b,c,d){c=c&&"string"===typeof c?c:he(a);d=d&&"string"===typeof d?d:he(a);this.bl(this,a,b,c,d,this.Fz?THREE.xe.prototype.eu:w)};
THREE.Ih.prototype.bl=function(a,b,c,d,e,f){var g=new XMLHttpRequest;g.onreadystatechange=function(){if(4==g.readyState)if(200==g.status||0==g.status){var a=JSON.parse(g.responseText),i=new XMLHttpRequest,k=e+"/"+a.rv,l=0;i.onreadystatechange=function(){if(4==i.readyState)if(200==i.status||0==i.status){var b=i.response;r===b&&(b=(new Uint8Array(i.qz)).buffer);var e=b,b=d,g=a.ja,q=function(){function a(b){return b%4?4-b%4:0}function b(a,c){return(new Uint8Array(a,c,1))[0]}function c(a,b){return(new Uint32Array(a,
b,1))[0]}function d(a,b){var c,f,g,h,i,k,l,m=new Uint32Array(e,b,3*a);for(c=0;c<a;c++)f=m[3*c],g=m[3*c+1],h=m[3*c+2],i=S[2*f],f=S[2*f+1],k=S[2*g],l=S[2*g+1],g=S[2*h],h=S[2*h+1],qa.C[0].push([new THREE.l(i,f),new THREE.l(k,l),new THREE.l(g,h)])}function f(a,b){var c,d,g,h,i,k,l,m,n,s=new Uint32Array(e,b,4*a);for(c=0;c<a;c++)d=s[4*c],g=s[4*c+1],h=s[4*c+2],i=s[4*c+3],k=S[2*d],d=S[2*d+1],l=S[2*g],m=S[2*g+1],g=S[2*h],n=S[2*h+1],h=S[2*i],i=S[2*i+1],qa.C[0].push([new THREE.l(k,d),new THREE.l(l,m),new THREE.l(g,
n),new THREE.l(h,i)])}function g(a,b,c){for(var d,f,h,i,b=new Uint32Array(e,b,3*a),k=new Uint16Array(e,c,a),c=0;c<a;c++)d=b[3*c],f=b[3*c+1],h=b[3*c+2],i=k[c],qa.m.push(new THREE.O(d,f,h,w,w,i))}function h(a,b,c){for(var d,f,g,i,k,b=new Uint32Array(e,b,4*a),l=new Uint16Array(e,c,a),c=0;c<a;c++)d=b[4*c],f=b[4*c+1],g=b[4*c+2],i=b[4*c+3],k=l[c],qa.m.push(new THREE.da(d,f,g,i,w,w,k))}function i(a,b,c,d){for(var f,g,h,k,l,m,n,b=new Uint32Array(e,b,3*a),c=new Uint32Array(e,c,3*a),s=new Uint16Array(e,d,a),
d=0;d<a;d++){f=b[3*d];g=b[3*d+1];h=b[3*d+2];l=c[3*d];m=c[3*d+1];n=c[3*d+2];k=s[d];var q=Q[3*m],t=Q[3*m+1];m=Q[3*m+2];var x=Q[3*n],y=Q[3*n+1];n=Q[3*n+2];qa.m.push(new THREE.O(f,g,h,[new THREE.e(Q[3*l],Q[3*l+1],Q[3*l+2]),new THREE.e(q,t,m),new THREE.e(x,y,n)],w,k))}}function k(a,b,c,d){for(var f,g,h,i,l,m,n,s,q,b=new Uint32Array(e,b,4*a),c=new Uint32Array(e,c,4*a),t=new Uint16Array(e,d,a),d=0;d<a;d++){f=b[4*d];g=b[4*d+1];h=b[4*d+2];i=b[4*d+3];m=c[4*d];n=c[4*d+1];s=c[4*d+2];q=c[4*d+3];l=t[d];var x=Q[3*
n],y=Q[3*n+1];n=Q[3*n+2];var B=Q[3*s],E=Q[3*s+1];s=Q[3*s+2];var C=Q[3*q],u=Q[3*q+1];q=Q[3*q+2];qa.m.push(new THREE.da(f,g,h,i,[new THREE.e(Q[3*m],Q[3*m+1],Q[3*m+2]),new THREE.e(x,y,n),new THREE.e(B,E,s),new THREE.e(C,u,q)],w,l))}}var l,m,s,q,P,F,U,G,V,fa,W,ia,ra,Ha,R,ha,qa=this,ka=0,Q=[],S=[],ga,T,X;THREE.I.call(this);ha=e;T=ka;Ha=new Uint8Array(ha,T,12);fa="";for(ra=0;12>ra;ra++)fa+=String.fromCharCode(Ha[T+ra]);l=b(ha,T+12);b(ha,T+13);b(ha,T+14);b(ha,T+15);m=b(ha,T+16);s=b(ha,T+17);q=b(ha,T+18);
P=b(ha,T+19);F=c(ha,T+20);U=c(ha,T+20+4);G=c(ha,T+20+8);V=c(ha,T+20+12);fa=c(ha,T+20+16);W=c(ha,T+20+20);ia=c(ha,T+20+24);ra=c(ha,T+20+28);Ha=c(ha,T+20+32);R=c(ha,T+20+36);ha=c(ha,T+20+40);ka+=l;T=3*m+P;X=4*m+P;ga=V*T;l=fa*(T+3*s);m=W*(T+3*q);P=ia*(T+3*s+3*q);T=ra*X;s=Ha*(X+4*s);q=R*(X+4*q);X=ka;var ka=new Float32Array(e,ka,3*F),ca,N,ja,La;for(ca=0;ca<F;ca++)N=ka[3*ca],ja=ka[3*ca+1],La=ka[3*ca+2],qa.f.push(new THREE.e(N,ja,La));F=ka=X+3*F*Float32Array.BYTES_PER_ELEMENT;if(U){ka=new Int8Array(e,ka,
3*U);for(X=0;X<U;X++)ca=ka[3*X],N=ka[3*X+1],ja=ka[3*X+2],Q.push(ca/127,N/127,ja/127)}ka=F+3*U*Int8Array.BYTES_PER_ELEMENT;U=ka+=a(3*U);if(G){F=new Float32Array(e,ka,2*G);for(ka=0;ka<G;ka++)X=F[2*ka],ca=F[2*ka+1],S.push(X,ca)}G=ka=U+2*G*Float32Array.BYTES_PER_ELEMENT;ga=G+ga+a(2*V);U=ga+l+a(2*fa);l=U+m+a(2*W);m=l+P+a(2*ia);T=m+T+a(2*ra);P=T+s+a(2*Ha);s=P+q+a(2*R);W&&(q=U+3*W*Uint32Array.BYTES_PER_ELEMENT,g(W,U,q+3*W*Uint32Array.BYTES_PER_ELEMENT),d(W,q));ia&&(W=l+3*ia*Uint32Array.BYTES_PER_ELEMENT,
q=W+3*ia*Uint32Array.BYTES_PER_ELEMENT,i(ia,l,W,q+3*ia*Uint32Array.BYTES_PER_ELEMENT),d(ia,q));R&&(ia=P+4*R*Uint32Array.BYTES_PER_ELEMENT,h(R,P,ia+4*R*Uint32Array.BYTES_PER_ELEMENT),f(R,ia));ha&&(R=s+4*ha*Uint32Array.BYTES_PER_ELEMENT,ia=R+4*ha*Uint32Array.BYTES_PER_ELEMENT,k(ha,s,R,ia+4*ha*Uint32Array.BYTES_PER_ELEMENT),f(ha,ia));V&&g(V,G,G+3*V*Uint32Array.BYTES_PER_ELEMENT);fa&&(V=ga+3*fa*Uint32Array.BYTES_PER_ELEMENT,i(fa,ga,V,V+3*fa*Uint32Array.BYTES_PER_ELEMENT));ra&&h(ra,m,m+4*ra*Uint32Array.BYTES_PER_ELEMENT);
Ha&&(fa=T+4*Ha*Uint32Array.BYTES_PER_ELEMENT,k(Ha,T,fa,fa+4*Ha*Uint32Array.BYTES_PER_ELEMENT));ce(this);be(this)};q.prototype=Object.create(THREE.I.prototype);q=new q(b);b=ge(g,b);fe(b)&&q.Jg();c(q,b)}else console.error("THREE.BinaryLoader: Couldn't load ["+k+"] ["+i.status+"]");else 3==i.readyState?f&&(0==l&&(l=i.getResponseHeader("Content-Length")),f({total:l,loaded:i.responseText.length})):2==i.readyState&&(l=i.getResponseHeader("Content-Length"))};i.open("GET",k,v);i.responseType="arraybuffer";
i.send(w)}else console.error("THREE.BinaryLoader: Couldn't load ["+b+"] ["+g.status+"]")};g.open("GET",b,v);g.send(w)};THREE.bm=function(){THREE.Aj.call(this);this.crossOrigin=w};THREE.bm.prototype={load:function(a,b){var c=this;r===b&&(b=new Image);b.addEventListener("load",function(){c.dispatchEvent({type:"load",content:b})},D);b.addEventListener("error",function(){c.dispatchEvent({type:"error",message:"Couldn't load URL ["+a+"]"})},D);c.crossOrigin&&(b.crossOrigin=c.crossOrigin);b.src=a}};
THREE.Ph=function(a){THREE.xe.call(this,a);this.withCredentials=D};THREE.Ph.prototype=Object.create(THREE.xe.prototype);THREE.Ph.prototype.load=function(a,b,c){c=c&&"string"===typeof c?c:he(a);this.bl(this,a,b,c)};
THREE.Ph.prototype.bl=function(a,b,c,d,e){var f=new XMLHttpRequest,g=0;f.withCredentials=this.withCredentials;f.onreadystatechange=function(){if(f.readyState===f.DONE)if(200===f.status||0===f.status)if(f.responseText){var a=JSON.parse(f.responseText);ie(a,c,d)}else console.warn("THREE.JSONLoader: ["+b+"] seems to be unreachable or file there is empty");else console.error("THREE.JSONLoader: Couldn't load ["+b+"] ["+f.status+"]");else f.readyState===f.LOADING?e&&(0===g&&(g=f.getResponseHeader("Content-Length")),
e({total:g,loaded:f.responseText.length})):f.readyState===f.xu&&(g=f.getResponseHeader("Content-Length"))};f.open("GET",b,v);f.send(w)};
function ie(a,b,c){var d=new THREE.I,e=r!==a.scale?1/a.scale:1,f,g,h,i,k,l,m,p,s,q,n,t,x,L,E,y=a.m;q=a.f;var M=a.Ye,B=a.Xa,K=0;for(f=0;f<a.nf.length;f++)a.nf[f].length&&K++;for(f=0;f<K;f++)d.Kc[f]=[],d.C[f]=[];i=0;for(k=q.length;i<k;)l=new THREE.e,l.x=q[i++]*e,l.y=q[i++]*e,l.a=q[i++]*e,d.f.push(l);i=0;for(k=y.length;i<k;){q=y[i++];l=q&1;h=q&2;f=q&4;g=q&8;p=q&16;m=q&32;n=q&64;q&=128;l?(t=new THREE.da,t.p=y[i++],t.c=y[i++],t.s=y[i++],t.S=y[i++],l=4):(t=new THREE.O,t.p=y[i++],t.c=y[i++],t.s=y[i++],l=
3);h&&(h=y[i++],t.va=h);h=d.m.length;if(f)for(f=0;f<K;f++)x=a.nf[f],s=y[i++],E=x[2*s],s=x[2*s+1],d.Kc[f][h]=new THREE.l(E,s);if(g)for(f=0;f<K;f++){x=a.nf[f];L=[];for(g=0;g<l;g++)s=y[i++],E=x[2*s],s=x[2*s+1],L[g]=new THREE.l(E,s);d.C[f][h]=L}p&&(p=3*y[i++],g=new THREE.e,g.x=M[p++],g.y=M[p++],g.a=M[p],t.r=g);if(m)for(f=0;f<l;f++)p=3*y[i++],g=new THREE.e,g.x=M[p++],g.y=M[p++],g.a=M[p],t.o.push(g);n&&(m=y[i++],m=new THREE.u(B[m]),t.color=m);if(q)for(f=0;f<l;f++)m=y[i++],m=new THREE.u(B[m]),t.n.push(m);
d.m.push(t)}if(a.ne){i=0;for(k=a.ne.length;i<k;i+=2)y=a.ne[i],M=a.ne[i+1],d.ne.push(new THREE.Hc(y,M,0,0))}if(a.me){i=0;for(k=a.me.length;i<k;i+=2)y=a.me[i],M=a.me[i+1],d.me.push(new THREE.Hc(y,M,0,0))}d.Pa=a.Pa;d.gi=a.gi;if(r!==a.G){i=0;for(k=a.G.length;i<k;i++){d.G[i]={};d.G[i].name=a.G[i].name;d.G[i].f=[];B=d.G[i].f;K=a.G[i].f;y=0;for(M=K.length;y<M;y+=3)q=new THREE.e,q.x=K[y]*e,q.y=K[y+1]*e,q.a=K[y+2]*e,B.push(q)}}if(r!==a.ee){i=0;for(k=a.ee.length;i<k;i++){d.ee[i]={};d.ee[i].name=a.ee[i].name;
d.ee[i].Xa=[];M=d.ee[i].Xa;B=a.ee[i].Xa;e=0;for(y=B.length;e<y;e+=3)K=new THREE.u(16755200),Ob(K,B[e],B[e+1],B[e+2]),M.push(K)}}ce(d);be(d);a=ge(a.ja,c);fe(a)&&d.Jg();b(d,a)}THREE.zu=function(){function a(){c++;b.dispatchEvent({type:"progress",loaded:c,total:d});c===d&&b.dispatchEvent({type:"load"})}THREE.Aj.call(this);var b=this,c=0,d=0;this.add=function(b){d++;b.addEventListener("load",a,D)}};
THREE.wm=function(){this.Vs=Ua();this.Us=Ua();this.Ts=Ua();this.vv=Ua();this.uv=Ua();this.Yd={};this.ag={};this.Yd.ascii={cl:THREE.Ph};this.Yd.binary={cl:THREE.Ih}};THREE.wm.prototype.load=function(a,b){var c=this,d=new XMLHttpRequest;d.onreadystatechange=function(){if(4===d.readyState)if(200===d.status||0===d.status){var e=JSON.parse(d.responseText);c.parse(e,b,a)}else console.error("THREE.SceneLoader: Couldn't load ["+a+"] ["+d.status+"]")};d.open("GET",a,v);d.send(w)};
THREE.wm.prototype.parse=function(a,b,c){function d(a,b){return"relativeToHTML"==b?a:m+"/"+a}function e(){f(B.xc,J.hb)}function f(a,b){var c,e,g,i,k,m;for(m in b)if(r===B.hb[m]){var n=b[m],t=w;if(n.type&&n.type in l.ag&&r===n.qs){c={type:1,url:1,q:1,position:1,rotation:1,scale:1,visible:1,children:1,ca:1,Sc:1,cd:1,de:1,duration:1};e={};for(var y in n)y in c||(e[y]=n[y]);s=B.ja[n.q];n.qs=v;c=l.ag[n.type].dl;c.addEventListener?(c.addEventListener("load",h(m,a,s,n)),c.load(d(n.url,J.Fh))):c.options?
c.load(d(n.url,J.Fh),h(m,a,s,n)):c.load(d(n.url,J.Fh),h(m,a,s,n),e)}else if(r!==n.t){if(p=B.Z[n.t]){s=B.ja[n.q];t=s instanceof THREE.Ta;e=n.position;g=n.rotation;i=n.scale;c=n.J;k=0;n.q||(s=new THREE.Hb(B.Ci[n.t]));s instanceof THREE.Hb&&0===s.ja.length&&(s=new THREE.Hb(B.Ci[n.t]));if(s instanceof THREE.Hb)for(var C=0;C<s.ja.length;C++)t=t||s.ja[C]instanceof THREE.Ta;t&&p.Jg();if(n.Sc)t=new THREE.ac(p,s);else if(n.cd){if(t=new THREE.Sh(p,s),r!==n.duration&&(t.duration=n.duration),r!==n.time&&(t.time=
n.time),r!==n.de&&(t.de=n.de),s.ka){for(var C=p,F=r,H=r,G=r,M=r,N=r,G=0,M=C.m.length;G<M;G++){N=C.m[G];N.Wj?N.Wj.copy(N.r):N.Wj=N.r.d();N.yg||(N.yg=[]);F=0;for(H=N.o.length;F<H;F++)N.yg[F]?N.yg[F].copy(N.o[F]):N.yg[F]=N.o[F].d()}var O=new THREE.I;O.m=C.m;F=0;for(H=C.G.length;F<H;F++){if(!C.ka[F]){C.ka[F]={};C.ka[F].Bi=[];C.ka[F].o=[];for(var P=C.ka[F].Bi,U=C.ka[F].o,za,Ba,G=0,M=C.m.length;G<M;G++)N=C.m[G],za=new THREE.e,Ba=N instanceof THREE.O?{p:new THREE.e,c:new THREE.e,s:new THREE.e}:{p:new THREE.e,
c:new THREE.e,s:new THREE.e,S:new THREE.e},P.push(za),U.push(Ba)}P=C.ka[F];O.f=C.G[F].f;be(O);O.zd();G=0;for(M=C.m.length;G<M;G++)N=C.m[G],za=P.Bi[G],Ba=P.o[G],za.copy(N.r),N instanceof THREE.O?(Ba.p.copy(N.o[0]),Ba.c.copy(N.o[1]),Ba.s.copy(N.o[2])):(Ba.p.copy(N.o[0]),Ba.c.copy(N.o[1]),Ba.s.copy(N.o[2]),Ba.S.copy(N.o[3]))}G=0;for(M=C.m.length;G<M;G++)N=C.m[G],N.r=N.Wj,N.o=N.yg}}else t=new THREE.R(p,s);t.name=m;c?(t.tc=D,t.J.set(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10],c[11],c[12],c[13],
c[14],c[15])):(t.position.set(e[0],e[1],e[2]),k?(t.ic.set(k[0],k[1],k[2],k[3]),t.ld=v):t.rotation.set(g[0],g[1],g[2]),t.scale.set(i[0],i[1],i[2]));t.visible=n.visible;t.pc=n.pc;t.hg=n.hg;a.add(t);B.hb[m]=t}}else"DirectionalLight"===n.type||"PointLight"===n.type||"AmbientLight"===n.type?(L=r!==n.color?n.color:16777215,E=r!==n.mb?n.mb:1,"DirectionalLight"===n.type?(e=n.direction,x=new THREE.Bc(L,E),x.position.set(e[0],e[1],e[2]),n.target&&(K.push({object:x,Xt:n.target}),x.target=w)):"PointLight"===
n.type?(e=n.position,c=n.Mb,x=new THREE.yf(L,E,c),x.position.set(e[0],e[1],e[2])):"AmbientLight"===n.type&&(x=new THREE.Gh(L)),a.add(x),x.name=m,B.Ab[m]=x,B.hb[m]=x):"PerspectiveCamera"===n.type||"OrthographicCamera"===n.type?("PerspectiveCamera"===n.type?q=new THREE.mc(n.Xd,n.ji,n.Ca,n.Ia):"OrthographicCamera"===n.type&&(q=new THREE.tg(n.left,n.right,n.top,n.bottom,n.Ca,n.Ia)),e=n.position,q.position.set(e[0],e[1],e[2]),a.add(q),q.name=m,B.Qd[m]=q,B.hb[m]=q):(e=n.position,g=n.rotation,i=n.scale,
k=0,t=new THREE.z,t.name=m,t.position.set(e[0],e[1],e[2]),k?(t.ic.set(k[0],k[1],k[2],k[3]),t.ld=v):t.rotation.set(g[0],g[1],g[2]),t.scale.set(i[0],i[1],i[2]),t.visible=r!==n.visible?n.visible:D,a.add(t),B.hb[m]=t,B.Ar[m]=t);if(t){if(r!==n.ca)for(var Ia in n.ca)t.ca[Ia]=n.ca[Ia];r!==n.children&&f(t,n.children)}}}function g(a){return function(b,c){B.Z[a]=b;B.Ci[a]=c;e();y-=1;k()}}function h(a,b,c,d){return function(f){var f=f.content?f.content:f.qr?f.xc:f,g=d.position,h=d.rotation,i=d.ic,l=d.scale;
f.position.set(g[0],g[1],g[2]);i?(f.ic.set(i[0],i[1],i[2],i[3]),f.ld=v):f.rotation.set(h[0],h[1],h[2]);f.scale.set(l[0],l[1],l[2]);c&&Zd(f,function(a){a.q=c});b.add(f);B.hb[a]=f;e();y-=1;k()}}function i(a){return function(b,c){B.Z[a]=b;B.Ci[a]=c}}function k(){if(0===y&&0===M){for(var a=0;a<K.length;a++){var c=K[a],d=B.hb[c.Xt];d?c.object.target=d:(c.object.target=new THREE.z,B.xc.add(c.object.target));c.object.target.ca.Qo=c.object}b(B)}}var l=this,m=he(c),p,s,q,n,t,x,L,E,y,M,B,K=[],J=a,H;for(H in this.Yd)a=
this.Yd[H].cl,this.Yd[H].dl=new a;for(H in this.ag)a=this.ag[H].cl,this.ag[H].dl=new a;M=y=0;B={xc:new THREE.Xh,Z:{},Ci:{},ja:{},Tb:{},hb:{},Qd:{},Ab:{},Rg:{},Ar:{}};if(J.transform&&(H=J.transform.position,a=J.transform.rotation,c=J.transform.scale,H&&B.xc.position.set(H[0],H[1],H[2]),a&&B.xc.rotation.set(a[0],a[1],a[2]),c&&B.xc.scale.set(c[0],c[1],c[2]),H||a||c))B.xc.yc(),B.xc.Eb();H=function(a){return function(){M-=a;k()}};for(var O in J.Rg)a=J.Rg[O],"linear"===a.type?n=new THREE.pg(0,a.Ca,a.Ia):
"exp2"===a.type&&(n=new THREE.tf(0,a.yi)),a=a.color,Ob(n.color,a[0],a[1],a[2]),B.Rg[O]=n;for(var C in J.Z)n=J.Z[C],n.type in this.Yd&&(y+=1);for(var P in J.hb)n=J.hb[P],n.type&&n.type in this.ag&&(y+=1);for(C in J.Z)if(n=J.Z[C],"cube"===n.type)p=new THREE.Ul(n.width,n.height,n.depth,n.nd,n.ad,n.Fk),B.Z[C]=p;else if("plane"===n.type)p=new THREE.lm(n.width,n.height,n.nd,n.ad),B.Z[C]=p;else if("sphere"===n.type)p=new THREE.ud(n.X,n.nd,n.ad),B.Z[C]=p;else if("cylinder"===n.type)p=new THREE.Nh(n.eA,n.mv,
n.height,n.hz,n.Qw),B.Z[C]=p;else if("torus"===n.type)p=new THREE.Cm(n.X,n.lf,n.Az,n.Bz),B.Z[C]=p;else if("icosahedron"===n.type)p=new THREE.Dj(n.X,n.Vt),B.Z[C]=p;else if(n.type in this.Yd){P={};for(t in n)"type"!==t&&"url"!==t&&(P[t]=n[t]);this.Yd[n.type].dl.load(d(n.url,J.Fh),g(C),P)}else"embedded"===n.type&&(P=J.embeds[n.id],P.Ds=J.Ds,P&&ie(P,i(C),""));for(var F in J.Tb)if(C=J.Tb[F],C.url instanceof Array){M+=C.url.length;for(t=0;t<C.url.length;t++);}else M+=1;for(F in J.Tb){C=J.Tb[F];r!==C.ob&&
r!==THREE[C.ob]&&(C.ob=new THREE[C.ob]);if(C.url instanceof Array){P=C.url.length;n=[];for(t=0;t<P;t++)n[t]=d(C.url[t],J.Fh);t=(t=n[0].Ai(".dds"))?THREE.rd.os(n,C.ob,H(P)):THREE.rd.ps(n,C.ob,H(P))}else t=C.url.toLowerCase().Ai(".dds"),P=d(C.url,J.Fh),n=H(1),t=t?THREE.rd.Pn(P,C.ob,n):THREE.rd.Rn(P,C.ob,n),r!==THREE[C.gb]&&(t.gb=THREE[C.gb]),r!==THREE[C.Bb]&&(t.Bb=THREE[C.Bb]),C.Kb&&(t.Kb=C.Kb),C.repeat&&(t.repeat.set(C.repeat[0],C.repeat[1]),1!==C.repeat[0]&&(t.Ub=THREE.Fc),1!==C.repeat[1]&&(t.Vb=
THREE.Fc)),C.offset&&t.offset.set(C.offset[0],C.offset[1]),C.xj&&(P={repeat:THREE.Fc,Gs:THREE.Kj},r!==P[C.xj[0]]&&(t.Ub=P[C.xj[0]]),r!==P[C.xj[1]]&&(t.Vb=P[C.xj[1]]));B.Tb[F]=t}var U,G;for(U in J.ja){F=J.ja[U];for(G in F.H)"envMap"===G||"map"===G||"lightMap"===G||"bumpMap"===G?F.H[G]=B.Tb[F.H[G]]:"shading"===G?F.H[G]="flat"===F.H[G]?THREE.og:THREE.Gc:"side"===G?F.H[G]="double"==F.H[G]?THREE.Cc:"back"==F.H[G]?THREE.rf:THREE.uf:"blending"===G?F.H[G]=F.H[G]in THREE?THREE[F.H[G]]:THREE.sg:"combine"===
G?F.H[G]="MixOperation"==F.H[G]?THREE.em:THREE.Th:"vertexColors"===G?"face"==F.H[G]?F.H[G]=THREE.ve:F.H[G]&&(F.H[G]=THREE.wg):"wrapRGB"===G&&(H=F.H[G],F.H[G]=new THREE.e(H[0],H[1],H[2]));r!==F.H.opacity&&1>F.H.opacity&&(F.H.za=v);F.H.Za?(H=THREE.ym.Ln.r,C=THREE.nc.d(H.P),t=F.H.color,P=F.H.hd,n=F.H.wa,O=F.H.ke,C.Lo.value=B.Tb[F.H.Za],F.H.fe&&C.Vo.value.set(F.H.fe[0],F.H.fe[1]),F.H.map&&(C.Ko.value=F.H.map,C.pn.value=v),F.H.ma&&(C.Jl.value=F.H.ma,C.Cr.value=v,C.du.value=F.H.wc),F.H.Ja&&(C.Jo.value=
F.H.Ja,C.on.value=v),F.H.Ea&&(C.Mo.value=B.Tb[F.H.Ea],C.qn.value=v),F.H.wr&&(C.Wt.value=B.Tb[F.H.wr],C.Br.value=v,C.bu.value=F.H.nw,C.cu.value=F.H.ow),Nb(C.Uo.value,t),Nb(C.Yo.value,P),Nb(C.To.value,n),C.Xo.value=O,F.H.opacity&&(C.Wo.value=F.H.opacity),s=new THREE.Ta({K:H.K,N:H.N,P:C,Ab:v,A:v})):s=new THREE[F.type](F.H);B.ja[U]=s}for(U in J.ja)if(F=J.ja[U],F.H.ja){G=[];for(t=0;t<F.H.ja.length;t++)G.push(B.ja[F.H.ja[t]]);B.ja[U].ja=G}e();B.Qd&&J.Mg.Bk&&(B.Kv=B.Qd[J.Mg.Bk]);B.Rg&&J.Mg.A&&(B.xc.A=B.Rg[J.Mg.A]);
a=J.Mg.hv;B.bgColor=new THREE.u;Ob(B.bgColor,a[0],a[1],a[2]);B.fv=J.Mg.gv;k()};THREE.gq=function(){THREE.Aj.call(this);this.crossOrigin=w};THREE.gq.prototype={load:function(a){var b=this,c=new Image;c.addEventListener("load",function(){var a=new THREE.Jb(c);a.ga=v;b.dispatchEvent({type:"load",content:a})},D);c.addEventListener("error",function(){b.dispatchEvent({type:"error",message:"Couldn't load URL ["+a+"]"})},D);b.crossOrigin&&(c.crossOrigin=b.crossOrigin);c.src=a}};
THREE.W=function(){this.id=THREE.Hp++;this.name="";this.Rc=THREE.uf;this.opacity=1;this.za=D;this.kb=THREE.sg;this.Oe=THREE.Am;this.Ne=THREE.jm;this.blendEquation=THREE.Pl;this.Bd=this.rc=v;this.polygonOffset=D;this.xd=this.kh=this.jh=0;this.aj=D;this.ga=this.visible=v;THREE.Ip[this.id]=this};
function je(a,b){if(r!==b)for(var c in b){var d=b[c];if(r===d)console.warn("THREE.Material: '"+c+"' parameter is undefined.");else if(c in a){var e=a[c];e instanceof THREE.u&&d instanceof THREE.u?e.copy(d):e instanceof THREE.u?e.set(d):e instanceof THREE.e&&d instanceof THREE.e?e.copy(d):a[c]=d}}}
THREE.W.prototype.d=function(a){r===a&&(a=new THREE.W);a.name=this.name;a.Rc=this.Rc;a.opacity=this.opacity;a.za=this.za;a.kb=this.kb;a.Oe=this.Oe;a.Ne=this.Ne;a.blendEquation=this.blendEquation;a.rc=this.rc;a.Bd=this.Bd;a.polygonOffset=this.polygonOffset;a.jh=this.jh;a.kh=this.kh;a.xd=this.xd;a.aj=this.aj;a.visible=this.visible;return a};THREE.Hp=0;THREE.Ip={};THREE.Gb=function(a){THREE.W.call(this);this.color=new THREE.u(16777215);this.ae=1;this.al=this.$k="round";this.n=D;this.A=v;je(this,a)};
THREE.Gb.prototype=Object.create(THREE.W.prototype);THREE.Gb.prototype.d=function(){var a=new THREE.Gb;THREE.W.prototype.d.call(this,a);a.color.copy(this.color);a.ae=this.ae;a.$k=this.$k;a.al=this.al;a.n=this.n;a.A=this.A;return a};THREE.we=function(a){THREE.W.call(this);this.color=new THREE.u(16777215);this.scale=this.ae=1;this.Sd=3;this.Sg=1;this.n=D;this.A=v;je(this,a)};THREE.we.prototype=Object.create(THREE.W.prototype);
THREE.we.prototype.d=function(){var a=new THREE.we;THREE.W.prototype.d.call(this,a);a.color.copy(this.color);a.ae=this.ae;a.scale=this.scale;a.Sd=this.Sd;a.Sg=this.Sg;a.n=this.n;a.A=this.A;return a};THREE.Ma=function(a){THREE.W.call(this);this.color=new THREE.u(16777215);this.ma=this.Ea=this.Ja=this.map=w;this.Jc=THREE.Th;this.wc=1;this.Pc=0.98;this.A=v;this.Da=THREE.Gc;this.Q=D;this.pa=1;this.sb=this.rb="round";this.n=THREE.rg;this.G=this.ya=D;je(this,a)};THREE.Ma.prototype=Object.create(THREE.W.prototype);
THREE.Ma.prototype.d=function(){var a=new THREE.Ma;THREE.W.prototype.d.call(this,a);a.color.copy(this.color);a.map=this.map;a.Ja=this.Ja;a.Ea=this.Ea;a.ma=this.ma;a.Jc=this.Jc;a.wc=this.wc;a.Pc=this.Pc;a.A=this.A;a.Da=this.Da;a.Q=this.Q;a.pa=this.pa;a.rb=this.rb;a.sb=this.sb;a.n=this.n;a.ya=this.ya;a.G=this.G;return a};
THREE.Xb=function(a){THREE.W.call(this);this.color=new THREE.u(16777215);this.wa=new THREE.u(16777215);this.cb=new THREE.u(0);this.Vc=D;this.Ac=new THREE.e(1,1,1);this.ma=this.Ea=this.Ja=this.map=w;this.Jc=THREE.Th;this.wc=1;this.Pc=0.98;this.A=v;this.Da=THREE.Gc;this.Q=D;this.pa=1;this.sb=this.rb="round";this.n=THREE.rg;this.ka=this.G=this.ya=D;je(this,a)};THREE.Xb.prototype=Object.create(THREE.W.prototype);
THREE.Xb.prototype.d=function(){var a=new THREE.Xb;THREE.W.prototype.d.call(this,a);a.color.copy(this.color);a.wa.copy(this.wa);a.cb.copy(this.cb);a.Vc=this.Vc;a.Ac.copy(this.Ac);a.map=this.map;a.Ja=this.Ja;a.Ea=this.Ea;a.ma=this.ma;a.Jc=this.Jc;a.wc=this.wc;a.Pc=this.Pc;a.A=this.A;a.Da=this.Da;a.Q=this.Q;a.pa=this.pa;a.rb=this.rb;a.sb=this.sb;a.n=this.n;a.ya=this.ya;a.G=this.G;a.ka=this.ka;return a};
THREE.Yb=function(a){THREE.W.call(this);this.color=new THREE.u(16777215);this.wa=new THREE.u(16777215);this.cb=new THREE.u(0);this.hd=new THREE.u(1118481);this.ke=30;this.gh=D;this.gg=v;this.Vc=D;this.Ac=new THREE.e(1,1,1);this.wb=this.Ja=this.map=w;this.Lf=1;this.Za=w;this.fe=new THREE.l(1,1);this.ma=this.Ea=w;this.Jc=THREE.Th;this.wc=1;this.Pc=0.98;this.A=v;this.Da=THREE.Gc;this.Q=D;this.pa=1;this.sb=this.rb="round";this.n=THREE.rg;this.ka=this.G=this.ya=D;je(this,a)};THREE.Yb.prototype=Object.create(THREE.W.prototype);
THREE.Yb.prototype.d=function(){var a=new THREE.Yb;THREE.W.prototype.d.call(this,a);a.color.copy(this.color);a.wa.copy(this.wa);a.cb.copy(this.cb);a.hd.copy(this.hd);a.ke=this.ke;a.gh=this.gh;a.gg=this.gg;a.Vc=this.Vc;a.Ac.copy(this.Ac);a.map=this.map;a.Ja=this.Ja;a.wb=this.wb;a.Lf=this.Lf;a.Za=this.Za;a.fe.copy(this.fe);a.Ea=this.Ea;a.ma=this.ma;a.Jc=this.Jc;a.wc=this.wc;a.Pc=this.Pc;a.A=this.A;a.Da=this.Da;a.Q=this.Q;a.pa=this.pa;a.rb=this.rb;a.sb=this.sb;a.n=this.n;a.ya=this.ya;a.G=this.G;a.ka=
this.ka;return a};THREE.ze=function(a){THREE.W.call(this);this.Q=D;this.pa=1;je(this,a)};THREE.ze.prototype=Object.create(THREE.W.prototype);THREE.ze.prototype.d=function(){var a=new THREE.Gb;THREE.W.prototype.d.call(this,a);a.Q=this.Q;a.pa=this.pa;return a};THREE.Ae=function(a){THREE.W.call(this);this.Da=THREE.og;this.Q=D;this.pa=1;je(this,a)};THREE.Ae.prototype=Object.create(THREE.W.prototype);
THREE.Ae.prototype.d=function(){var a=new THREE.Ae;THREE.W.prototype.d.call(this,a);a.Da=this.Da;a.Q=this.Q;a.pa=this.pa;return a};THREE.Hb=function(a){this.ja=a instanceof Array?a:[]};THREE.Hb.prototype.d=function(){return new THREE.Hb(this.ja.slice(0))};THREE.Be=function(a){THREE.W.call(this);this.color=new THREE.u(16777215);this.map=w;this.size=1;this.Db=v;this.n=D;this.A=v;je(this,a)};THREE.Be.prototype=Object.create(THREE.W.prototype);
THREE.Be.prototype.d=function(){var a=new THREE.Be;THREE.W.prototype.d.call(this,a);a.color.copy(this.color);a.map=this.map;a.size=this.size;a.Db=this.Db;a.n=this.n;a.A=this.A;return a};THREE.Uh=function(a){THREE.W.call(this);this.color=new THREE.u(16777215);this.pb=Ua();je(this,a)};THREE.Uh.prototype=Object.create(THREE.W.prototype);THREE.Uh.prototype.d=function(){var a=new THREE.Uh;THREE.W.prototype.d.call(this,a);a.color.copy(this.color);a.pb=this.pb;return a};
THREE.km=function(a){this.element=a};THREE.km.prototype.d=function(){return new THREE.km(this.element)};THREE.Ta=function(a){THREE.W.call(this);this.N=this.K="void main() {}";this.P={};this.Ek={};this.attributes=w;this.Da=THREE.Gc;this.Q=D;this.pa=1;this.Ab=this.A=D;this.n=THREE.rg;this.ka=this.G=this.ya=D;je(this,a)};THREE.Ta.prototype=Object.create(THREE.W.prototype);
THREE.Ta.prototype.d=function(){var a=new THREE.Ta;THREE.W.prototype.d.call(this,a);a.K=this.K;a.N=this.N;a.P=THREE.nc.d(this.P);a.attributes=this.attributes;a.Ek=this.Ek;a.Da=this.Da;a.Q=this.Q;a.pa=this.pa;a.A=this.A;a.Ab=this.Ab;a.n=this.n;a.ya=this.ya;a.G=this.G;a.ka=this.ka;return a};
THREE.Yh=function(a){THREE.W.call(this);this.color=new THREE.u(16777215);this.map=new THREE.Jb;this.Tc=v;this.rc=!this.Tc;this.Db=!this.Tc;this.nh=!this.Db;this.Hf=THREE.Wc.xb.d();this.A=D;this.lg=new THREE.l(0,0);this.mg=new THREE.l(1,1);je(this,a);a=a||{};r===a.rc&&(this.rc=!this.Tc);r===a.Db&&(this.Db=!this.Tc);r===a.nh&&(this.nh=!this.Db)};THREE.Yh.prototype=Object.create(THREE.W.prototype);
THREE.Yh.prototype.d=function(){var a=new THREE.Yh;THREE.W.prototype.d.call(this,a);a.color.copy(this.color);a.map=this.map;a.Tc=this.Tc;a.Db=this.Db;a.nh=this.nh;a.Hf.copy(this.Hf);a.lg.copy(this.lg);a.mg.copy(this.mg);a.A=this.A;return a};THREE.Wc={};THREE.Wc.dA=new THREE.l(1,-1);THREE.Wc.cA=new THREE.l(0,-1);THREE.Wc.fA=new THREE.l(-1,-1);THREE.Wc.wv=new THREE.l(1,0);THREE.Wc.xb=new THREE.l(0,0);THREE.Wc.xv=new THREE.l(-1,0);THREE.Wc.ov=new THREE.l(1,1);THREE.Wc.nv=new THREE.l(0,1);
THREE.Wc.pv=new THREE.l(-1,1);THREE.Jb=function(a,b,c,d,e,f,g,h,i){this.id=THREE.eq++;this.name="";this.L=a;this.Cb=[];this.ob=r!==b?b:new THREE.Dm;this.Ub=r!==c?c:THREE.re;this.Vb=r!==d?d:THREE.re;this.Bb=r!==e?e:THREE.Gd;this.gb=r!==f?f:THREE.Ij;this.Kb=r!==i?i:1;this.ia=r!==g?g:THREE.vg;this.type=r!==h?h:THREE.Uj;this.offset=new THREE.l(0,0);this.repeat=new THREE.l(1,1);this.fb=v;this.sl=D;this.Re=v;this.Ml=4;this.ga=D;this.Zi=w;THREE.fq[this.id]=this};
THREE.Jb.prototype={d:function(a){r===a&&(a=new THREE.Jb);a.L=this.L;a.Cb=this.Cb.slice(0);a.ob=this.ob;a.Ub=this.Ub;a.Vb=this.Vb;a.Bb=this.Bb;a.gb=this.gb;a.Kb=this.Kb;a.ia=this.ia;a.type=this.type;a.offset.copy(this.offset);a.repeat.copy(this.repeat);a.fb=this.fb;a.sl=this.sl;a.Re=this.Re;a.Ml=this.Ml;return a}};THREE.eq=0;THREE.fq={};THREE.se=function(a,b,c,d,e,f,g,h,i,k,l){THREE.Jb.call(this,w,f,g,h,i,k,d,e,l);this.L={width:b,height:c};this.Cb=a;this.fb=D};THREE.se.prototype=Object.create(THREE.Jb.prototype);
THREE.se.prototype.d=function(){var a=new THREE.se;THREE.Jb.prototype.d.call(this,a);return a};THREE.ue=function(a,b,c,d,e,f,g,h,i,k,l){THREE.Jb.call(this,w,f,g,h,i,k,d,e,l);this.L={data:a,width:b,height:c}};THREE.ue.prototype=Object.create(THREE.Jb.prototype);THREE.ue.prototype.d=function(){var a=new THREE.ue;THREE.Jb.prototype.d.call(this,a);return a};THREE.ug=function(a){THREE.z.call(this);this.q=a};THREE.ug.prototype=Object.create(THREE.z.prototype);
THREE.ug.prototype.d=function(a){r===a&&(a=new THREE.ug(this.q));THREE.z.prototype.d.call(this,a);return a};THREE.Ib=function(a,b){THREE.z.call(this);this.t=a;this.q=r!==b?b:new THREE.Be({color:16777215*Math.random()});this.gf=D;this.t&&(w===this.t.Lb&&this.t.ti(),this.ni=a.Lb.X);this.Se=D};THREE.Ib.prototype=Object.create(THREE.z.prototype);THREE.Ib.prototype.d=function(a){r===a&&(a=new THREE.Ib(this.t,this.q));a.gf=this.gf;THREE.z.prototype.d.call(this,a);return a};
THREE.Fa=function(a,b,c){THREE.z.call(this);this.t=a;this.q=r!==b?b:new THREE.Gb({color:16777215*Math.random()});this.type=r!==c?c:THREE.dm;this.t&&(this.t.Lb||this.t.ti())};THREE.dm=0;THREE.xf=1;THREE.Fa.prototype=Object.create(THREE.z.prototype);THREE.Fa.prototype.d=function(a){r===a&&(a=new THREE.Fa(this.t,this.q,this.type));THREE.z.prototype.d.call(this,a);return a};
THREE.R=function(a,b){THREE.z.call(this);this.t=a;this.q=r!==b?b:new THREE.Ma({color:16777215*Math.random(),Q:v});if(this.t&&(w===this.t.Lb&&this.t.ti(),this.ni=a.Lb.X,this.t.G.length)){this.il=-1;this.bo=[];this.Nc=[];this.Is={};for(var c=0;c<this.t.G.length;c++)this.Nc.push(0),this.Is[this.t.G[c].name]=c}};THREE.R.prototype=Object.create(THREE.z.prototype);THREE.R.prototype.d=function(a){r===a&&(a=new THREE.R(this.t,this.q));THREE.z.prototype.d.call(this,a);return a};
THREE.pd=function(a){THREE.z.call(this);this.Sc=a;this.gd=new THREE.D};THREE.pd.prototype=Object.create(THREE.z.prototype);THREE.pd.prototype.update=function(a,b){this.tc&&(b|=this.yc());if(b||this.Ya)a?this.gd.multiply(a,this.J):this.gd.copy(this.J),this.Ya=D,b=v;var c,d=this.children.length;for(c=0;c<d;c++)this.children[c].update(this.gd,b)};
THREE.ac=function(a,b,c){THREE.R.call(this,a,b);this.Dd=r!==c?c:v;this.Xr=new THREE.D;this.Pa=[];this.Dg=[];var d,e,f;if(this.t&&r!==this.t.Pa){for(a=0;a<this.t.Pa.length;a++)c=this.t.Pa[a],d=c.mo,e=c.sz,f=c.xz,b=r,r===b&&(b=new THREE.pd(this)),this.Pa.push(b),b.name=c.name,b.position.set(d[0],d[1],d[2]),b.ic.set(e[0],e[1],e[2],e[3]),b.ld=v,r!==f?b.scale.set(f[0],f[1],f[2]):b.scale.set(1,1,1);for(a=0;a<this.Pa.length;a++)c=this.t.Pa[a],b=this.Pa[a],-1===c.parent?this.add(b):this.Pa[c.parent].add(b);
a=this.Pa.length;this.Dd?(this.Jf=this.Kf=256<a?64:64<a?32:16<a?16:8,this.Dg=new Float32Array(4*this.Kf*this.Jf),this.Md=new THREE.ue(this.Dg,this.Kf,this.Jf,THREE.vg,THREE.Bj),this.Md.gb=THREE.qg,this.Md.Bb=THREE.qg,this.Md.fb=D,this.Md.Re=D):this.Dg=new Float32Array(16*a);this.Eb(v);for(a=0;a<this.t.me.length;a++)c=this.t.ne[a],d=1/c.Kn(),Infinity!==d?c.V(d):c.set(1)}};THREE.ac.prototype=Object.create(THREE.R.prototype);
THREE.ac.prototype.Eb=function(a){this.tc&&this.yc();if(this.Ya||a)this.parent?this.F.multiply(this.parent.F,this.J):this.F.copy(this.J),this.Ya=D;for(var a=0,b=this.children.length;a<b;a++){var c=this.children[a];c instanceof THREE.pd?c.update(this.Xr,D):c.Eb(v)}if(r==this.yk){this.yk=[];a=0;for(b=this.Pa.length;a<b;a++)c=new THREE.D,c.Ob(this.Pa[a].gd),this.yk.push(c)}a=0;for(b=this.Pa.length;a<b;a++)THREE.ac.eo.multiply(this.Pa[a].gd,this.yk[a]),Hd(THREE.ac.eo,this.Dg,16*a);this.Dd&&(this.Md.ga=
v)};THREE.ac.prototype.d=function(a){r===a&&(a=new THREE.ac(this.t,this.q,this.Dd));THREE.R.prototype.d.call(this,a);return a};THREE.ac.eo=new THREE.D;THREE.Sh=function(a,b){THREE.R.call(this,a,b);this.duration=1E3;this.de=D;this.hn=this.Jn=this.time=0;this.direction=1;this.Pf=D;var c=this.t.G.length-1;this.Qt=0;this.Dr=c;this.length=this.Dr-this.Qt+1};THREE.Sh.prototype=Object.create(THREE.R.prototype);
THREE.Sh.prototype.d=function(a){r===a&&(a=new THREE.Sh(this.t,this.q));a.duration=this.duration;a.de=this.de;a.time=this.time;a.Jn=this.Jn;a.hn=this.hn;a.direction=this.direction;a.Pf=this.Pf;THREE.R.prototype.d.call(this,a);return a};THREE.td=function(a,b){THREE.z.call(this);this.t=a;this.q=b};THREE.td.prototype=Object.create(THREE.z.prototype);THREE.td.prototype.d=function(a){r===a&&(a=new THREE.td(this.t,this.q));THREE.z.prototype.d.call(this,a);return a};
THREE.Hj=function(){THREE.z.call(this);this.Fd=[]};THREE.Hj.prototype=Object.create(THREE.z.prototype);THREE.Hj.prototype.update=function(a){if(1<this.Fd.length){a.xa.Ob(a.F);a=a.xa;a=-(a.elements[2]*this.F.elements[12]+a.elements[6]*this.F.elements[13]+a.elements[10]*this.F.elements[14]+a.elements[14]);this.Fd[0].nl.visible=v;for(var b=1;b<this.Fd.length;b++)if(a>=this.Fd[b].rA)this.Fd[b-1].nl.visible=D,this.Fd[b].nl.visible=v;else break;for(;b<this.Fd.length;b++)this.Fd[b].nl.visible=D}};
THREE.Hj.prototype.d=Ua();THREE.Ee=function(a){THREE.z.call(this);this.q=r!==a?a:new THREE.Yh;this.to=this.rotation;this.rotation=0};THREE.Ee.prototype=Object.create(THREE.z.prototype);THREE.Ee.prototype.yc=function(){nd(this.J,this.position);this.to.set(0,0,this.rotation);md(this.J,this.to);if(1!==this.scale.x||1!==this.scale.y)this.J.scale(this.scale),this.oi=Math.max(this.scale.x,this.scale.y);this.Ya=v};
THREE.Ee.prototype.d=function(a){r===a&&(a=new THREE.Ee(this.q));THREE.z.prototype.d.call(this,a);return a};THREE.Xh=function(){THREE.z.call(this);this.ho=this.A=w;this.tc=D;this.ai=[];this.bc=[];this.Af=[];this.Bf=[]};THREE.Xh.prototype=Object.create(THREE.z.prototype);
function Md(a,b){if(b instanceof THREE.Fb)-1===a.bc.indexOf(b)&&a.bc.push(b),b.target&&r===b.target.parent&&a.add(b.target);else if(!(b instanceof THREE.Wb||b instanceof THREE.pd)&&-1===a.ai.indexOf(b)){a.ai.push(b);a.Af.push(b);var c=a.Bf.indexOf(b);-1!==c&&a.Bf.splice(c,1)}for(c=0;c<b.children.length;c++)Md(a,b.children[c])}
function Yd(a,b){if(b instanceof THREE.Fb){var c=a.bc.indexOf(b);-1!==c&&a.bc.splice(c,1)}else b instanceof THREE.Wb||(c=a.ai.indexOf(b),-1!==c&&(a.ai.splice(c,1),a.Bf.push(b),c=a.Af.indexOf(b),-1!==c&&a.Af.splice(c,1)));for(c=0;c<b.children.length;c++)Yd(a,b.children[c])}THREE.pg=function(a,b,c){this.name="";this.color=new THREE.u(a);this.Ca=r!==b?b:1;this.Ia=r!==c?c:1E3};THREE.pg.prototype.d=function(){return new THREE.pg(Wb(this.color),this.Ca,this.Ia)};
THREE.tf=function(a,b){this.name="";this.color=new THREE.u(a);this.yi=r!==b?b:2.5E-4};THREE.tf.prototype.d=function(){return new THREE.tf(Wb(this.color),this.yi)};
THREE.pu=function(a){function b(a){L!==a&&(L=n.globalAlpha=a)}function c(a){E!==a&&(a===THREE.sg?n.globalCompositeOperation="source-over":a===THREE.Ql?n.globalCompositeOperation="lighter":a===THREE.Bm&&(n.globalCompositeOperation="darker"),E=a)}function d(a){y!==a&&(y=n.strokeStyle=a)}function e(a){M!==a&&(M=n.fillStyle=a)}console.log("THREE.CanvasRenderer",THREE.om);var a=a||{},f=this,g,h,i,k=new THREE.Lj,l=r!==a.canvas?a.canvas:document.createElement("canvas"),m,p,s,q,n=l.getContext("2d"),t=new THREE.u(0),
x=0,L=1,E=0,y=w,M=w,B=w,K=w,J=w,H,O,C,P,F=new THREE.$b,U=new THREE.$b,G,V,fa,W,ia,ra,Ha,R,ha,qa,ka,Q,S=new THREE.u,ga=new THREE.u,T=new THREE.u,X=new THREE.u,ca=new THREE.u,N=new THREE.u,ja=new THREE.u,La={},Oa={},za,Ba,Ia,sa,gb,hb,ib,db,Ib,Jb,ub=new THREE.Oj,Na=new THREE.Oj,Ga=new THREE.Oj,nb=D,Ca=new THREE.u,bb=new THREE.u,Xa=new THREE.u,Ma=new THREE.e,u,da,ua,va,Cb,Da,a=16;u=document.createElement("canvas");u.width=u.height=2;da=u.getContext("2d");da.fillStyle="rgba(0,0,0,1)";da.fillRect(0,0,2,
2);ua=da.getImageData(0,0,2,2);va=ua.data;Cb=document.createElement("canvas");Cb.width=Cb.height=a;Da=Cb.getContext("2d");Da.translate(-a/2,-a/2);Da.scale(a,a);a--;this.xr=l;this.Ft=this.qj=this.tk=v;this.info={B:{f:0,m:0}};this.xo=function(a,b){m=a;p=b;s=Math.floor(m/2);q=Math.floor(p/2);l.width=m;l.height=p;ub.set(-s,-q,s,q);Na.set(-s,-q,s,q);L=1;E=0;J=K=B=M=y=w};this.tt=function(a,b){t.copy(a);x=r!==b?b:1;Na.set(-s,-q,s,q)};this.ut=function(a,b){Nb(t,a);x=r!==b?b:1;Na.set(-s,-q,s,q)};this.Mr=function(){return 0};
this.clear=function(){n.setTransform(1,0,0,-1,s,q);D===Na.cs()&&(Na.Ui(ub),Na.Sk(2),1>x&&n.clearRect(Math.floor(Na.Bn()),Math.floor(Na.Cn()),Math.floor(Na.An()),Math.floor(Na.zn())),0<x&&(c(THREE.sg),b(1),e("rgba("+Math.floor(255*t.h)+","+Math.floor(255*t.g)+","+Math.floor(255*t.c)+","+x+")"),n.fillRect(Math.floor(Na.Bn()),Math.floor(Na.Cn()),Math.floor(Na.An()),Math.floor(Na.zn()))),Na.empty())};this.B=function(a,l){function j(a,b,c){for(var d=0,e=i.length;d<e;d++){var f=i[d],g=f.color;if(f instanceof
THREE.Bc){var j=od(f.F).normalize(),h=b.Qa(j);0>=h||(h*=f.mb,c.h+=g.h*h,c.g+=g.g*h,c.c+=g.c*h)}else f instanceof THREE.yf&&(j=od(f.F),h=b.Qa(Ma.sub(j,a).normalize()),0>=h||(h*=0==f.Mb?1:1-Math.min(a.Nb(j)/f.Mb,1),0!=h&&(h*=f.mb,c.h+=g.h*h,c.g+=g.g*h,c.c+=g.c*h)))}}function m(a,d,e,g,h,i,k,u){f.info.B.f+=3;f.info.B.m++;b(u.opacity);c(u.kb);G=a.i.x;V=a.i.y;fa=d.i.x;W=d.i.y;ia=e.i.x;ra=e.i.y;p(G,V,fa,W,ia,ra);(u instanceof THREE.Xb||u instanceof THREE.Yb)&&w===u.map&&w===u.map?(N.copy(u.color),ja.copy(u.cb),
u.n===THREE.ve&&(N.h*=k.color.h,N.g*=k.color.g,N.c*=k.color.c),v===nb?D===u.Q&&u.Da==THREE.Gc&&3==k.vj?(ga.h=T.h=X.h=Ca.h,ga.g=T.g=X.g=Ca.g,ga.c=T.c=X.c=Ca.c,j(k.Y.vc,k.zc[0],ga),j(k.ba.vc,k.zc[1],T),j(k.qb.vc,k.zc[2],X),ga.h=ga.h*N.h+ja.h,ga.g=ga.g*N.g+ja.g,ga.c=ga.c*N.c+ja.c,T.h=T.h*N.h+ja.h,T.g=T.g*N.g+ja.g,T.c=T.c*N.c+ja.c,X.h=X.h*N.h+ja.h,X.g=X.g*N.g+ja.g,X.c=X.c*N.c+ja.c,ca.h=0.5*(T.h+X.h),ca.g=0.5*(T.g+X.g),ca.c=0.5*(T.c+X.c),Ia=M(ga,T,X,ca),L(G,V,fa,W,ia,ra,0,0,Ia)):(S.h=Ca.h,S.g=Ca.g,S.c=
Ca.c,j(k.Mf,k.uc,S),S.h=S.h*N.h+ja.h,S.g=S.g*N.g+ja.g,S.c=S.c*N.c+ja.c,v===u.Q?x(S,u.pa,u.rb,u.sb):y(S)):v===u.Q?x(u.color,u.pa,u.rb,u.sb):y(u.color)):u instanceof THREE.Ma||u instanceof THREE.Xb||u instanceof THREE.Yb?w!==u.map?u.map.ob instanceof THREE.Dm&&(sa=k.nf[0],E(G,V,fa,W,ia,ra,sa[g].tj,sa[g].qe,sa[h].tj,sa[h].qe,sa[i].tj,sa[i].qe,u.map)):w!==u.ma?u.ma.ob instanceof THREE.Yp&&(a=l.xa,Ma.copy(k.zc[g]),gb=0.5*(Ma.x*a.elements[0]+Ma.y*a.elements[4]+Ma.a*a.elements[8])+0.5,hb=0.5*(Ma.x*a.elements[1]+
Ma.y*a.elements[5]+Ma.a*a.elements[9])+0.5,Ma.copy(k.zc[h]),ib=0.5*(Ma.x*a.elements[0]+Ma.y*a.elements[4]+Ma.a*a.elements[8])+0.5,db=0.5*(Ma.x*a.elements[1]+Ma.y*a.elements[5]+Ma.a*a.elements[9])+0.5,Ma.copy(k.zc[i]),Ib=0.5*(Ma.x*a.elements[0]+Ma.y*a.elements[4]+Ma.a*a.elements[8])+0.5,Jb=0.5*(Ma.x*a.elements[1]+Ma.y*a.elements[5]+Ma.a*a.elements[9])+0.5,E(G,V,fa,W,ia,ra,gb,hb,ib,db,Ib,Jb,u.ma)):(S.copy(u.color),u.n===THREE.ve&&(S.h*=k.color.h,S.g*=k.color.g,S.c*=k.color.c),v===u.Q?x(S,u.pa,u.rb,
u.sb):y(S)):u instanceof THREE.ze?(za=l.Ca,Ba=l.Ia,ga.h=ga.g=ga.c=1-ya(a.i.a,za,Ba),T.h=T.g=T.c=1-ya(d.i.a,za,Ba),X.h=X.g=X.c=1-ya(e.i.a,za,Ba),ca.h=0.5*(T.h+X.h),ca.g=0.5*(T.g+X.g),ca.c=0.5*(T.c+X.c),Ia=M(ga,T,X,ca),L(G,V,fa,W,ia,ra,0,0,Ia)):u instanceof THREE.Ae&&(S.h=Oc(k.uc.x),S.g=Oc(k.uc.y),S.c=Oc(k.uc.a),v===u.Q?x(S,u.pa,u.rb,u.sb):y(S))}function p(a,b,c,d,e,f){n.beginPath();n.moveTo(a,b);n.lineTo(c,d);n.lineTo(e,f);n.closePath()}function t(a,b,c,d,e,f,g,j){n.beginPath();n.moveTo(a,b);n.lineTo(c,
d);n.lineTo(e,f);n.lineTo(g,j);n.closePath()}function x(a,b,c,e){B!==b&&(B=n.lineWidth=b);K!==c&&(K=n.lineCap=c);J!==e&&(J=n.lineJoin=e);d(Pb(a));n.stroke();Ga.Sk(2*b)}function y(a){e(Pb(a));n.fill()}function E(a,b,c,d,f,g,j,h,i,u,k,l,ya){if(!(ya instanceof THREE.ue||r===ya.L||0==ya.L.width)){if(v===ya.ga){var m=ya.Ub==THREE.Fc,p=ya.Vb==THREE.Fc;La[ya.id]=n.createPattern(ya.L,v===m&&v===p?"repeat":v===m&&D===p?"repeat-x":D===m&&v===p?"repeat-y":"no-repeat");ya.ga=D}r===La[ya.id]?e("rgba(0,0,0,1)"):
e(La[ya.id]);var m=ya.offset.x/ya.repeat.x,p=ya.offset.y/ya.repeat.y,Xb=ya.L.width*ya.repeat.x,s=ya.L.height*ya.repeat.y,j=(j+m)*Xb,h=(1-h+p)*s,c=c-a,d=d-b,f=f-a,g=g-b,i=(i+m)*Xb-j,u=(1-u+p)*s-h,k=(k+m)*Xb-j,l=(1-l+p)*s-h,m=i*l-k*u;0===m?(r===Oa[ya.id]&&(b=document.createElement("canvas"),b.width=ya.L.width,b.height=ya.L.height,b=b.getContext("2d"),b.drawImage(ya.L,0,0),Oa[ya.id]=b.getImageData(0,0,ya.L.width,ya.L.height).data),b=Oa[ya.id],j=4*(Math.floor(j)+Math.floor(h)*ya.L.width),Ob(S,b[j]/255,
b[j+1]/255,b[j+2]/255),y(S)):(m=1/m,ya=(l*c-u*f)*m,u=(l*d-u*g)*m,c=(i*f-k*c)*m,d=(i*g-k*d)*m,a=a-ya*j-c*h,j=b-u*j-d*h,n.save(),n.transform(ya,u,c,d,a,j),n.fill(),n.restore())}}function L(a,b,c,d,e,f,g,j,h){var i,u,k,ya,l,m;l=h.width-1;m=h.height-1;g*=l;i=0*m;c-=a;d-=b;e-=a;f-=b;u=1*l-g;j=j*m-i;k=0*l-g;ya=1*m-i;m=1/(u*ya-k*j);l=(ya*c-j*e)*m;j=(ya*d-j*f)*m;c=(u*e-k*c)*m;d=(u*f-k*d)*m;a=a-l*g-c*i;b=b-j*g-d*i;n.save();n.transform(l,j,c,d,a,b);n.clip();n.drawImage(h,0,0);n.restore()}function M(a,b,c,d){va[0]=
255*a.h|0;va[1]=255*a.g|0;va[2]=255*a.c|0;va[4]=255*b.h|0;va[5]=255*b.g|0;va[6]=255*b.c|0;va[8]=255*c.h|0;va[9]=255*c.g|0;va[10]=255*c.c|0;va[12]=255*d.h|0;va[13]=255*d.g|0;va[14]=255*d.c|0;da.putImageData(ua,0,0);Da.drawImage(u,0,0);return Cb}function ya(a,b,c){a=(a-b)/(c-b);return a*a*(3-2*a)}function Oc(a){a=0.5*(a+1);return 0>a?0:1<a?1:a}function Xb(a,b){var c=b.x-a.x,d=b.y-a.y,e=c*c+d*d;0!==e&&(e=1/Math.sqrt(e),c*=e,d*=e,b.x+=c,b.y+=d,a.x-=c,a.y-=d)}if(D===l instanceof THREE.Wb)console.error("THREE.CanvasRenderer.render: camera is not an instance of THREE.Camera.");
else{var Bc,pd,wa,la;v===this.tk?this.clear():n.setTransform(1,0,0,-1,s,q);f.info.B.f=0;f.info.B.m=0;g=k.jt(a,l,this.qj,this.Ft);h=g.elements;i=g.Ab;nb=0<i.length;if(v===nb){Ob(Ca,0,0,0);Ob(bb,0,0,0);Ob(Xa,0,0,0);Bc=0;for(pd=i.length;Bc<pd;Bc++){la=i[Bc];var xa=la.color;la instanceof THREE.Gh?(Ca.h+=xa.h,Ca.g+=xa.g,Ca.c+=xa.c):la instanceof THREE.Bc?(bb.h+=xa.h,bb.g+=xa.g,bb.c+=xa.c):la instanceof THREE.yf&&(Xa.h+=xa.h,Xa.g+=xa.g,Xa.c+=xa.c)}}Bc=0;for(pd=h.length;Bc<pd;Bc++)if(wa=h[Bc],la=wa.q,!(r===
la||D===la.visible)){Ga.empty();if(wa instanceof THREE.vm){H=wa;H.x*=s;H.y*=q;var xa=H,xb=wa;b(la.opacity);c(la.kb);var Yb=r,Zb=r,Qb=r,Rb=r,qd=wa=r,Nd=r;la instanceof THREE.Be?w===la.map?(Qb=xb.object.scale.x,Rb=xb.object.scale.y,Qb*=xb.scale.x*s,Rb*=xb.scale.y*q,Ga.set(xa.x-Qb,xa.y-Rb,xa.x+Qb,xa.y+Rb),D!==ub.bg(Ga)&&(e(Pb(la.color)),n.save(),n.translate(xa.x,xa.y),n.rotate(-xb.rotation),n.scale(Qb,Rb),n.fillRect(-1,-1,2,2),n.restore())):(wa=la.map.L,qd=wa.width>>1,Nd=wa.height>>1,Qb=xb.scale.x*s,
Rb=xb.scale.y*q,Yb=Qb*qd,Zb=Rb*Nd,Ga.set(xa.x-Yb,xa.y-Zb,xa.x+Yb,xa.y+Zb),D!==ub.bg(Ga)&&(n.save(),n.translate(xa.x,xa.y),n.rotate(-xb.rotation),n.scale(Qb,-Rb),n.translate(-qd,-Nd),n.drawImage(wa,0,0),n.restore())):la instanceof THREE.Uh&&(Yb=xb.scale.x*s,Zb=xb.scale.y*q,Ga.set(xa.x-Yb,xa.y-Zb,xa.x+Yb,xa.y+Zb),D!==ub.bg(Ga)&&(d(Pb(la.color)),e(Pb(la.color)),n.save(),n.translate(xa.x,xa.y),n.rotate(-xb.rotation),n.scale(Yb,Zb),la.pb(n),n.restore()))}else wa instanceof THREE.um?(H=wa.Y,O=wa.ba,H.i.x*=
s,H.i.y*=q,O.i.x*=s,O.i.y*=q,Ga.Gf(H.i.x,H.i.y),Ga.Gf(O.i.x,O.i.y),v===ub.bg(Ga)&&(xa=H,xb=O,b(la.opacity),c(la.kb),n.beginPath(),n.moveTo(xa.i.x,xa.i.y),n.lineTo(xb.i.x,xb.i.y),la instanceof THREE.Gb&&(xa=la.ae,B!==xa&&(B=n.lineWidth=xa),xa=la.$k,K!==xa&&(K=n.lineCap=xa),xa=la.al,J!==xa&&(J=n.lineJoin=xa),d(Pb(la.color)),n.stroke(),Ga.Sk(2*la.ae)))):wa instanceof THREE.sm?(H=wa.Y,O=wa.ba,C=wa.qb,H.i.x*=s,H.i.y*=q,O.i.x*=s,O.i.y*=q,C.i.x*=s,C.i.y*=q,v===la.aj&&(Xb(H.i,O.i),Xb(O.i,C.i),Xb(C.i,H.i)),
Ga.Kq(H.i.x,H.i.y,O.i.x,O.i.y,C.i.x,C.i.y),v===ub.bg(Ga)&&m(H,O,C,0,1,2,wa,la)):wa instanceof THREE.tm&&(H=wa.Y,O=wa.ba,C=wa.qb,P=wa.Ol,H.i.x*=s,H.i.y*=q,O.i.x*=s,O.i.y*=q,C.i.x*=s,C.i.y*=q,P.i.x*=s,P.i.y*=q,F.i.copy(O.i),U.i.copy(P.i),v===la.aj&&(Xb(H.i,O.i),Xb(O.i,P.i),Xb(P.i,H.i),Xb(C.i,F.i),Xb(C.i,U.i)),Ga.Gf(H.i.x,H.i.y),Ga.Gf(O.i.x,O.i.y),Ga.Gf(C.i.x,C.i.y),Ga.Gf(P.i.x,P.i.y),v===ub.bg(Ga)&&(xa=H,xb=O,Yb=C,Zb=P,Qb=F,Rb=U,qd=a,f.info.B.f+=4,f.info.B.m++,b(la.opacity),c(la.kb),r!==la.map&&w!==
la.map||r!==la.ma&&w!==la.ma?(m(xa,xb,Zb,0,1,3,wa,la),m(Qb,Yb,Rb,1,2,3,wa,la)):(G=xa.i.x,V=xa.i.y,fa=xb.i.x,W=xb.i.y,ia=Yb.i.x,ra=Yb.i.y,Ha=Zb.i.x,R=Zb.i.y,ha=Qb.i.x,qa=Qb.i.y,ka=Rb.i.x,Q=Rb.i.y,la instanceof THREE.Xb||la instanceof THREE.Yb?(N.copy(la.color),ja.copy(la.cb),la.n===THREE.ve&&(N.h*=wa.color.h,N.g*=wa.color.g,N.c*=wa.color.c),v===nb?D===la.Q&&la.Da==THREE.Gc&&4==wa.vj?(ga.h=T.h=X.h=ca.h=Ca.h,ga.g=T.g=X.g=ca.g=Ca.g,ga.c=T.c=X.c=ca.c=Ca.c,j(wa.Y.vc,wa.zc[0],ga),j(wa.ba.vc,wa.zc[1],T),
j(wa.Ol.vc,wa.zc[3],X),j(wa.qb.vc,wa.zc[2],ca),ga.h=ga.h*N.h+ja.h,ga.g=ga.g*N.g+ja.g,ga.c=ga.c*N.c+ja.c,T.h=T.h*N.h+ja.h,T.g=T.g*N.g+ja.g,T.c=T.c*N.c+ja.c,X.h=X.h*N.h+ja.h,X.g=X.g*N.g+ja.g,X.c=X.c*N.c+ja.c,ca.h=ca.h*N.h+ja.h,ca.g=ca.g*N.g+ja.g,ca.c=ca.c*N.c+ja.c,Ia=M(ga,T,X,ca),p(G,V,fa,W,Ha,R),L(G,V,fa,W,Ha,R,0,0,Ia),p(ha,qa,ia,ra,ka,Q),L(ha,qa,ia,ra,ka,Q,1,1,Ia)):(S.h=Ca.h,S.g=Ca.g,S.c=Ca.c,j(wa.Mf,wa.uc,S),S.h=S.h*N.h+ja.h,S.g=S.g*N.g+ja.g,S.c=S.c*N.c+ja.c,t(G,V,fa,W,ia,ra,Ha,R),v===la.Q?x(S,la.pa,
la.rb,la.sb):y(S)):(S.h=N.h+ja.h,S.g=N.g+ja.g,S.c=N.c+ja.c,t(G,V,fa,W,ia,ra,Ha,R),v===la.Q?x(S,la.pa,la.rb,la.sb):y(S))):la instanceof THREE.Ma?(S.copy(la.color),la.n===THREE.ve&&(S.h*=wa.color.h,S.g*=wa.color.g,S.c*=wa.color.c),t(G,V,fa,W,ia,ra,Ha,R),v===la.Q?x(S,la.pa,la.rb,la.sb):y(S)):la instanceof THREE.Ae?(S.h=Oc(wa.uc.x),S.g=Oc(wa.uc.y),S.c=Oc(wa.uc.a),t(G,V,fa,W,ia,ra,Ha,R),v===la.Q?x(S,la.pa,la.rb,la.sb):y(S)):la instanceof THREE.ze&&(za=l.Ca,Ba=l.Ia,ga.h=ga.g=ga.c=1-ya(xa.i.a,za,Ba),T.h=
T.g=T.c=1-ya(xb.i.a,za,Ba),X.h=X.g=X.c=1-ya(Zb.i.a,za,Ba),ca.h=ca.g=ca.c=1-ya(Yb.i.a,za,Ba),Ia=M(ga,T,X,ca),p(G,V,fa,W,Ha,R),L(G,V,fa,W,Ha,R,0,0,Ia),p(ha,qa,ia,ra,ka,Q),L(ha,qa,ia,ra,ka,Q,1,1,Ia)))));Na.Mq(Ga)}n.setTransform(1,0,0,1,0,0)}}};
THREE.j={Rf:"#ifdef USE_FOG\nuniform vec3 fogColor;\n#ifdef FOG_EXP2\nuniform float fogDensity;\n#else\nuniform float fogNear;\nuniform float fogFar;\n#endif\n#endif",Qf:"#ifdef USE_FOG\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n#ifdef FOG_EXP2\nconst float LOG2 = 1.442695;\nfloat fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n#else\nfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n#endif\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n#endif",Ik:"#ifdef USE_ENVMAP\nuniform float reflectivity;\nuniform samplerCube envMap;\nuniform float flipEnvMap;\nuniform int combine;\n#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\nuniform bool useRefract;\nuniform float refractionRatio;\n#else\nvarying vec3 vReflect;\n#endif\n#endif",
Hk:"#ifdef USE_ENVMAP\nvec3 reflectVec;\n#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\nvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\nif ( useRefract ) {\nreflectVec = refract( cameraToVertex, normal, refractionRatio );\n} else { \nreflectVec = reflect( cameraToVertex, normal );\n}\n#else\nreflectVec = vReflect;\n#endif\n#ifdef DOUBLE_SIDED\nfloat flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );\nvec4 cubeColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n#else\nvec4 cubeColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n#endif\n#ifdef GAMMA_INPUT\ncubeColor.xyz *= cubeColor.xyz;\n#endif\nif ( combine == 1 ) {\ngl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularStrength * reflectivity );\n} else if ( combine == 2 ) {\ngl_FragColor.xyz += cubeColor.xyz * specularStrength * reflectivity;\n} else {\ngl_FragColor.xyz = mix( gl_FragColor.xyz, gl_FragColor.xyz * cubeColor.xyz, specularStrength * reflectivity );\n}\n#endif",
Jk:"#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )\nvarying vec3 vReflect;\nuniform float refractionRatio;\nuniform bool useRefract;\n#endif",wj:"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n#ifdef USE_SKINNING\nvec4 worldPosition = modelMatrix * skinned;\n#endif\n#if defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\nvec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );\n#endif\n#if ! defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\nvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n#endif\n#endif",
Kk:"#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )\nvec3 worldNormal = mat3( modelMatrix[ 0 ].xyz, modelMatrix[ 1 ].xyz, modelMatrix[ 2 ].xyz ) * objectNormal;\nworldNormal = normalize( worldNormal );\nvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\nif ( useRefract ) {\nvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n} else {\nvReflect = reflect( cameraToVertex, worldNormal );\n}\n#endif",As:"#ifdef USE_MAP\nuniform sampler2D map;\n#endif",
zs:"#ifdef USE_MAP\ngl_FragColor = gl_FragColor * texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) );\n#endif",gl:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )\nvarying vec2 vUv;\nuniform vec4 offsetRepeat;\n#endif",fl:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )\nvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\nuniform sampler2D map;\n#endif",hl:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )\nvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",
el:"#ifdef USE_MAP\nvec4 texelColor = texture2D( map, vUv );\n#ifdef GAMMA_INPUT\ntexelColor.xyz *= texelColor.xyz;\n#endif\ngl_FragColor = gl_FragColor * texelColor;\n#endif",Xk:"#ifdef USE_LIGHTMAP\nvarying vec2 vUv2;\nuniform sampler2D lightMap;\n#endif",Yk:"#ifdef USE_LIGHTMAP\nvarying vec2 vUv2;\n#endif",Wk:"#ifdef USE_LIGHTMAP\ngl_FragColor = gl_FragColor * texture2D( lightMap, vUv2 );\n#endif",Zk:"#ifdef USE_LIGHTMAP\nvUv2 = uv2;\n#endif",gr:"#ifdef USE_BUMPMAP\nuniform sampler2D bumpMap;\nuniform float bumpScale;\nvec2 dHdxy_fwd() {\nvec2 dSTdx = dFdx( vUv );\nvec2 dSTdy = dFdy( vUv );\nfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\nfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\nfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\nreturn vec2( dBx, dBy );\n}\nvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\nvec3 vSigmaX = dFdx( surf_pos );\nvec3 vSigmaY = dFdy( surf_pos );\nvec3 vN = surf_norm;\nvec3 R1 = cross( vSigmaY, vN );\nvec3 R2 = cross( vN, vSigmaX );\nfloat fDet = dot( vSigmaX, R1 );\nvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\nreturn normalize( abs( fDet ) * surf_norm - vGrad );\n}\n#endif",
Ns:"#ifdef USE_NORMALMAP\nuniform sampler2D normalMap;\nuniform vec2 normalScale;\nvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\nvec3 q0 = dFdx( eye_pos.xyz );\nvec3 q1 = dFdy( eye_pos.xyz );\nvec2 st0 = dFdx( vUv.st );\nvec2 st1 = dFdy( vUv.st );\nvec3 S = normalize(  q0 * st1.t - q1 * st0.t );\nvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\nvec3 N = normalize( surf_norm );\nvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\nmapN.xy = normalScale * mapN.xy;\nmat3 tsn = mat3( S, T, N );\nreturn normalize( tsn * mapN );\n}\n#endif",
Il:"#ifdef USE_SPECULARMAP\nuniform sampler2D specularMap;\n#endif",Hl:"float specularStrength;\n#ifdef USE_SPECULARMAP\nvec4 texelSpecular = texture2D( specularMap, vUv );\nspecularStrength = texelSpecular.r;\n#else\nspecularStrength = 1.0;\n#endif",is:"uniform vec3 ambient;\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 ambientLightColor;\n#if MAX_DIR_LIGHTS > 0\nuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\nuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n#endif\n#if MAX_HEMI_LIGHTS > 0\nuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n#endif\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n#endif\n#if MAX_SPOT_LIGHTS > 0\nuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\nuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\nuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\nuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n#endif\n#ifdef WRAP_AROUND\nuniform vec3 wrapRGB;\n#endif",
js:"vLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\nvLightBack = vec3( 0.0 );\n#endif\ntransformedNormal = normalize( transformedNormal );\n#if MAX_DIR_LIGHTS > 0\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\nvec3 dirVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( transformedNormal, dirVector );\nvec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n#ifdef DOUBLE_SIDED\nvec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n#ifdef WRAP_AROUND\nvec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n#endif\n#endif\n#ifdef WRAP_AROUND\nvec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\ndirectionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );\n#ifdef DOUBLE_SIDED\ndirectionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );\n#endif\n#endif\nvLightFront += directionalLightColor[ i ] * directionalLightWeighting;\n#ifdef DOUBLE_SIDED\nvLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;\n#endif\n}\n#endif\n#if MAX_POINT_LIGHTS > 0\nfor( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nfloat lDistance = 1.0;\nif ( pointLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\nfloat dotProduct = dot( transformedNormal, lVector );\nvec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );\n#ifdef DOUBLE_SIDED\nvec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n#ifdef WRAP_AROUND\nvec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n#endif\n#endif\n#ifdef WRAP_AROUND\nvec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\npointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );\n#ifdef DOUBLE_SIDED\npointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );\n#endif\n#endif\nvLightFront += pointLightColor[ i ] * pointLightWeighting * lDistance;\n#ifdef DOUBLE_SIDED\nvLightBack += pointLightColor[ i ] * pointLightWeightingBack * lDistance;\n#endif\n}\n#endif\n#if MAX_SPOT_LIGHTS > 0\nfor( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - worldPosition.xyz ) );\nif ( spotEffect > spotLightAngleCos[ i ] ) {\nspotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );\nfloat lDistance = 1.0;\nif ( spotLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\nfloat dotProduct = dot( transformedNormal, lVector );\nvec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );\n#ifdef DOUBLE_SIDED\nvec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n#ifdef WRAP_AROUND\nvec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n#endif\n#endif\n#ifdef WRAP_AROUND\nvec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\nspotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );\n#ifdef DOUBLE_SIDED\nspotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );\n#endif\n#endif\nvLightFront += spotLightColor[ i ] * spotLightWeighting * lDistance * spotEffect;\n#ifdef DOUBLE_SIDED\nvLightBack += spotLightColor[ i ] * spotLightWeightingBack * lDistance * spotEffect;\n#endif\n}\n}\n#endif\n#if MAX_HEMI_LIGHTS > 0\nfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\nvec3 lVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( transformedNormal, lVector );\nfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\nfloat hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;\nvLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n#ifdef DOUBLE_SIDED\nvLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\n#endif\n}\n#endif\nvLightFront = vLightFront * diffuse + ambient * ambientLightColor + emissive;\n#ifdef DOUBLE_SIDED\nvLightBack = vLightBack * diffuse + ambient * ambientLightColor + emissive;\n#endif",
ms:"#ifndef PHONG_PER_PIXEL\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\nvarying vec4 vPointLight[ MAX_POINT_LIGHTS ];\n#endif\n#if MAX_SPOT_LIGHTS > 0\nuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\nuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\nvarying vec4 vSpotLight[ MAX_SPOT_LIGHTS ];\n#endif\n#endif\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )\nvarying vec3 vWorldPosition;\n#endif",ns:"#ifndef PHONG_PER_PIXEL\n#if MAX_POINT_LIGHTS > 0\nfor( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nfloat lDistance = 1.0;\nif ( pointLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\nvPointLight[ i ] = vec4( lVector, lDistance );\n}\n#endif\n#if MAX_SPOT_LIGHTS > 0\nfor( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nfloat lDistance = 1.0;\nif ( spotLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\nvSpotLight[ i ] = vec4( lVector, lDistance );\n}\n#endif\n#endif\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )\nvWorldPosition = worldPosition.xyz;\n#endif",
ls:"uniform vec3 ambientLightColor;\n#if MAX_DIR_LIGHTS > 0\nuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\nuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n#endif\n#if MAX_HEMI_LIGHTS > 0\nuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n#endif\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n#ifdef PHONG_PER_PIXEL\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n#else\nvarying vec4 vPointLight[ MAX_POINT_LIGHTS ];\n#endif\n#endif\n#if MAX_SPOT_LIGHTS > 0\nuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\nuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\nuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n#ifdef PHONG_PER_PIXEL\nuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n#else\nvarying vec4 vSpotLight[ MAX_SPOT_LIGHTS ];\n#endif\n#endif\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )\nvarying vec3 vWorldPosition;\n#endif\n#ifdef WRAP_AROUND\nuniform vec3 wrapRGB;\n#endif\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;",
ks:"vec3 normal = normalize( vNormal );\nvec3 viewPosition = normalize( vViewPosition );\n#ifdef DOUBLE_SIDED\nnormal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n#endif\n#ifdef USE_NORMALMAP\nnormal = perturbNormal2Arb( -viewPosition, normal );\n#elif defined( USE_BUMPMAP )\nnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n#if MAX_POINT_LIGHTS > 0\nvec3 pointDiffuse  = vec3( 0.0 );\nvec3 pointSpecular = vec3( 0.0 );\nfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n#ifdef PHONG_PER_PIXEL\nvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz + vViewPosition.xyz;\nfloat lDistance = 1.0;\nif ( pointLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\n#else\nvec3 lVector = normalize( vPointLight[ i ].xyz );\nfloat lDistance = vPointLight[ i ].w;\n#endif\nfloat dotProduct = dot( normal, lVector );\n#ifdef WRAP_AROUND\nfloat pointDiffuseWeightFull = max( dotProduct, 0.0 );\nfloat pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\nvec3 pointDiffuseWeight = mix( vec3 ( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n#else\nfloat pointDiffuseWeight = max( dotProduct, 0.0 );\n#endif\npointDiffuse  += diffuse * pointLightColor[ i ] * pointDiffuseWeight * lDistance;\nvec3 pointHalfVector = normalize( lVector + viewPosition );\nfloat pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\nfloat pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( shininess + 2.0001 ) / 8.0;\nvec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, pointHalfVector ), 5.0 );\npointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance * specularNormalization;\n#else\npointSpecular += specular * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance;\n#endif\n}\n#endif\n#if MAX_SPOT_LIGHTS > 0\nvec3 spotDiffuse  = vec3( 0.0 );\nvec3 spotSpecular = vec3( 0.0 );\nfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n#ifdef PHONG_PER_PIXEL\nvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz + vViewPosition.xyz;\nfloat lDistance = 1.0;\nif ( spotLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\n#else\nvec3 lVector = normalize( vSpotLight[ i ].xyz );\nfloat lDistance = vSpotLight[ i ].w;\n#endif\nfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\nif ( spotEffect > spotLightAngleCos[ i ] ) {\nspotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );\nfloat dotProduct = dot( normal, lVector );\n#ifdef WRAP_AROUND\nfloat spotDiffuseWeightFull = max( dotProduct, 0.0 );\nfloat spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\nvec3 spotDiffuseWeight = mix( vec3 ( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n#else\nfloat spotDiffuseWeight = max( dotProduct, 0.0 );\n#endif\nspotDiffuse += diffuse * spotLightColor[ i ] * spotDiffuseWeight * lDistance * spotEffect;\nvec3 spotHalfVector = normalize( lVector + viewPosition );\nfloat spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\nfloat spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( shininess + 2.0001 ) / 8.0;\nvec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, spotHalfVector ), 5.0 );\nspotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * specularNormalization * spotEffect;\n#else\nspotSpecular += specular * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * spotEffect;\n#endif\n}\n}\n#endif\n#if MAX_DIR_LIGHTS > 0\nvec3 dirDiffuse  = vec3( 0.0 );\nvec3 dirSpecular = vec3( 0.0 );\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\nvec3 dirVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( normal, dirVector );\n#ifdef WRAP_AROUND\nfloat dirDiffuseWeightFull = max( dotProduct, 0.0 );\nfloat dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\nvec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );\n#else\nfloat dirDiffuseWeight = max( dotProduct, 0.0 );\n#endif\ndirDiffuse  += diffuse * directionalLightColor[ i ] * dirDiffuseWeight;\nvec3 dirHalfVector = normalize( dirVector + viewPosition );\nfloat dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\nfloat dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( shininess + 2.0001 ) / 8.0;\nvec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( dirVector, dirHalfVector ), 5.0 );\ndirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n#else\ndirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight;\n#endif\n}\n#endif\n#if MAX_HEMI_LIGHTS > 0\nvec3 hemiDiffuse  = vec3( 0.0 );\nvec3 hemiSpecular = vec3( 0.0 );\nfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\nvec3 lVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( normal, lVector );\nfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\nvec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\nhemiDiffuse += diffuse * hemiColor;\nvec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\nfloat hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\nfloat hemiSpecularWeightSky = specularStrength * max( pow( hemiDotNormalHalfSky, shininess ), 0.0 );\nvec3 lVectorGround = -lVector;\nvec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\nfloat hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\nfloat hemiSpecularWeightGround = specularStrength * max( pow( hemiDotNormalHalfGround, shininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat dotProductGround = dot( normal, lVectorGround );\nfloat specularNormalization = ( shininess + 2.0001 ) / 8.0;\nvec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, hemiHalfVectorSky ), 5.0 );\nvec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 5.0 );\nhemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\n#else\nhemiSpecular += specular * hemiColor * ( hemiSpecularWeightSky + hemiSpecularWeightGround ) * hemiDiffuseWeight;\n#endif\n}\n#endif\nvec3 totalDiffuse = vec3( 0.0 );\nvec3 totalSpecular = vec3( 0.0 );\n#if MAX_DIR_LIGHTS > 0\ntotalDiffuse += dirDiffuse;\ntotalSpecular += dirSpecular;\n#endif\n#if MAX_HEMI_LIGHTS > 0\ntotalDiffuse += hemiDiffuse;\ntotalSpecular += hemiSpecular;\n#endif\n#if MAX_POINT_LIGHTS > 0\ntotalDiffuse += pointDiffuse;\ntotalSpecular += pointSpecular;\n#endif\n#if MAX_SPOT_LIGHTS > 0\ntotalDiffuse += spotDiffuse;\ntotalSpecular += spotSpecular;\n#endif\n#ifdef METAL\ngl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient + totalSpecular );\n#else\ngl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient ) + totalSpecular;\n#endif",
Gg:"#ifdef USE_COLOR\nvarying vec3 vColor;\n#endif",Fg:"#ifdef USE_COLOR\ngl_FragColor = gl_FragColor * vec4( vColor, opacity );\n#endif",Hg:"#ifdef USE_COLOR\nvarying vec3 vColor;\n#endif",Ig:"#ifdef USE_COLOR\n#ifdef GAMMA_INPUT\nvColor = color * color;\n#else\nvColor = color;\n#endif\n#endif",Bh:"#ifdef USE_SKINNING\n#ifdef BONE_TEXTURE\nuniform sampler2D boneTexture;\nmat4 getBoneMatrix( const in float i ) {\nfloat j = i * 4.0;\nfloat x = mod( j, N_BONE_PIXEL_X );\nfloat y = floor( j / N_BONE_PIXEL_X );\nconst float dx = 1.0 / N_BONE_PIXEL_X;\nconst float dy = 1.0 / N_BONE_PIXEL_Y;\ny = dy * ( y + 0.5 );\nvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\nvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\nvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\nvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\nmat4 bone = mat4( v1, v2, v3, v4 );\nreturn bone;\n}\n#else\nuniform mat4 boneGlobalMatrices[ MAX_BONES ];\nmat4 getBoneMatrix( const in float i ) {\nmat4 bone = boneGlobalMatrices[ int(i) ];\nreturn bone;\n}\n#endif\n#endif",
Ah:"#ifdef USE_SKINNING\nmat4 boneMatX = getBoneMatrix( skinIndex.x );\nmat4 boneMatY = getBoneMatrix( skinIndex.y );\n#endif",oj:"#ifdef USE_SKINNING\n#ifdef USE_MORPHTARGETS\nvec4 skinVertex = vec4( morphed, 1.0 );\n#else\nvec4 skinVertex = vec4( position, 1.0 );\n#endif\nvec4 skinned  = boneMatX * skinVertex * skinWeight.x;\nskinned \t  += boneMatY * skinVertex * skinWeight.y;\n#endif",Vi:"#ifdef USE_MORPHTARGETS\n#ifndef USE_MORPHNORMALS\nuniform float morphTargetInfluences[ 8 ];\n#else\nuniform float morphTargetInfluences[ 4 ];\n#endif\n#endif",
Wi:"#ifdef USE_MORPHTARGETS\nvec3 morphed = vec3( 0.0 );\nmorphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\nmorphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\nmorphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\nmorphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n#ifndef USE_MORPHNORMALS\nmorphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\nmorphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\nmorphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\nmorphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n#endif\nmorphed += position;\n#endif",
xi:"vec4 mvPosition;\n#ifdef USE_SKINNING\nmvPosition = modelViewMatrix * skinned;\n#endif\n#if !defined( USE_SKINNING ) && defined( USE_MORPHTARGETS )\nmvPosition = modelViewMatrix * vec4( morphed, 1.0 );\n#endif\n#if !defined( USE_SKINNING ) && ! defined( USE_MORPHTARGETS )\nmvPosition = modelViewMatrix * vec4( position, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;",kl:"#ifdef USE_MORPHNORMALS\nvec3 morphedNormal = vec3( 0.0 );\nmorphedNormal +=  ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\nmorphedNormal +=  ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\nmorphedNormal +=  ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\nmorphedNormal +=  ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\nmorphedNormal += normal;\n#endif",
pj:"#ifdef USE_SKINNING\nmat4 skinMatrix = skinWeight.x * boneMatX;\nskinMatrix \t+= skinWeight.y * boneMatY;\n#ifdef USE_MORPHNORMALS\nvec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );\n#else\nvec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );\n#endif\n#endif",Dk:"vec3 objectNormal;\n#ifdef USE_SKINNING\nobjectNormal = skinnedNormal.xyz;\n#endif\n#if !defined( USE_SKINNING ) && defined( USE_MORPHNORMALS )\nobjectNormal = morphedNormal;\n#endif\n#if !defined( USE_SKINNING ) && ! defined( USE_MORPHNORMALS )\nobjectNormal = normal;\n#endif\n#ifdef FLIP_SIDED\nobjectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;",
yh:"#ifdef USE_SHADOWMAP\nuniform sampler2D shadowMap[ MAX_SHADOWS ];\nuniform vec2 shadowMapSize[ MAX_SHADOWS ];\nuniform float shadowDarkness[ MAX_SHADOWS ];\nuniform float shadowBias[ MAX_SHADOWS ];\nvarying vec4 vShadowCoord[ MAX_SHADOWS ];\nfloat unpackDepth( const in vec4 rgba_depth ) {\nconst vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\nfloat depth = dot( rgba_depth, bit_shift );\nreturn depth;\n}\n#endif",xh:"#ifdef USE_SHADOWMAP\n#ifdef SHADOWMAP_DEBUG\nvec3 frustumColors[3];\nfrustumColors[0] = vec3( 1.0, 0.5, 0.0 );\nfrustumColors[1] = vec3( 0.0, 1.0, 0.8 );\nfrustumColors[2] = vec3( 0.0, 0.5, 1.0 );\n#endif\n#ifdef SHADOWMAP_CASCADE\nint inFrustumCount = 0;\n#endif\nfloat fDepth;\nvec3 shadowColor = vec3( 1.0 );\nfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\nvec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\nbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\nbool inFrustum = all( inFrustumVec );\n#ifdef SHADOWMAP_CASCADE\ninFrustumCount += int( inFrustum );\nbvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );\n#else\nbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n#endif\nbool frustumTest = all( frustumTestVec );\nif ( frustumTest ) {\nshadowCoord.z += shadowBias[ i ];\n#ifdef SHADOWMAP_SOFT\nfloat shadow = 0.0;\nconst float shadowDelta = 1.0 / 9.0;\nfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\nfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\nfloat dx0 = -1.25 * xPixelOffset;\nfloat dy0 = -1.25 * yPixelOffset;\nfloat dx1 = 1.25 * xPixelOffset;\nfloat dy1 = 1.25 * yPixelOffset;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n#else\nvec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\nfloat fDepth = unpackDepth( rgbaDepth );\nif ( fDepth < shadowCoord.z )\nshadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\n#endif\n}\n#ifdef SHADOWMAP_DEBUG\n#ifdef SHADOWMAP_CASCADE\nif ( inFrustum && inFrustumCount == 1 ) gl_FragColor.xyz *= frustumColors[ i ];\n#else\nif ( inFrustum ) gl_FragColor.xyz *= frustumColors[ i ];\n#endif\n#endif\n}\n#ifdef GAMMA_OUTPUT\nshadowColor *= shadowColor;\n#endif\ngl_FragColor.xyz = gl_FragColor.xyz * shadowColor;\n#endif",
zh:"#ifdef USE_SHADOWMAP\nvarying vec4 vShadowCoord[ MAX_SHADOWS ];\nuniform mat4 shadowMatrix[ MAX_SHADOWS ];\n#endif",nj:"#ifdef USE_SHADOWMAP\nfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\nvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n}\n#endif",fi:"#ifdef ALPHATEST\nif ( gl_FragColor.a < ALPHATEST ) discard;\n#endif",Si:"#ifdef GAMMA_OUTPUT\ngl_FragColor.xyz = sqrt( gl_FragColor.xyz );\n#endif"};
THREE.nc={be:function(a){var b,c,d,e={};for(b=0;b<a.length;b++)for(c in d=this.d(a[b]),d)e[c]=d[c];return e},d:function(a){var b,c,d,e={};for(b in a)for(c in e[b]={},a[b])d=a[b][c],e[b][c]=d instanceof THREE.u||d instanceof THREE.l||d instanceof THREE.e||d instanceof THREE.Hc||d instanceof THREE.D||d instanceof THREE.Jb?d.d():d instanceof Array?d.slice():d;return e}};
THREE.Na={ri:{Of:{type:"c",value:new THREE.u(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:w},Qs:{type:"v4",value:new THREE.Hc(0,0,1,1)},Ja:{type:"t",value:w},Ea:{type:"t",value:w},ma:{type:"t",value:w},Hr:{type:"f",value:-1},ap:{type:"i",value:0},wc:{type:"f",value:1},Pc:{type:"f",value:0.98},Jc:{type:"i",value:0},Nc:{type:"f",value:0}},fr:{wb:{type:"t",value:w},Lf:{type:"f",value:1}},Ms:{Za:{type:"t",value:w},fe:{type:"v2",value:new THREE.l(1,1)}},A:{Gi:{type:"f",value:2.5E-4},Ii:{type:"f",
value:1},Hi:{type:"f",value:2E3},Fi:{type:"c",value:new THREE.u(16777215)}},Ab:{Oq:{type:"fv",value:[]},vr:{type:"fv",value:[]},ur:{type:"fv",value:[]},Ur:{type:"fv",value:[]},Wr:{type:"fv",value:[]},Vr:{type:"fv",value:[]},gt:{type:"fv",value:[]},it:{type:"fv",value:[]},ht:{type:"fv1",value:[]},Jt:{type:"fv",value:[]},Nt:{type:"fv",value:[]},Kt:{type:"fv",value:[]},Lt:{type:"fv1",value:[]},It:{type:"fv1",value:[]},Mt:{type:"fv1",value:[]}},et:{kt:{type:"c",value:new THREE.u(15658734)},opacity:{type:"f",
value:1},size:{type:"f",value:1},scale:{type:"f",value:1},map:{type:"t",value:w},Gi:{type:"f",value:2.5E-4},Ii:{type:"f",value:1},Hi:{type:"f",value:2E3},Fi:{type:"c",value:new THREE.u(16777215)}},wh:{ef:{type:"tv",value:[]},uh:{type:"v2v",value:[]},jg:{type:"fv1",value:[]},je:{type:"fv1",value:[]},ff:{type:"m4v",value:[]}}};
THREE.Pj={depth:{P:{ss:{type:"f",value:1},rs:{type:"f",value:2E3},opacity:{type:"f",value:1}},N:"void main() {\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",K:"uniform float mNear;\nuniform float mFar;\nuniform float opacity;\nvoid main() {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat color = 1.0 - smoothstep( mNear, mFar, depth );\ngl_FragColor = vec4( vec3( color ), opacity );\n}"},r:{P:{opacity:{type:"f",value:1}},N:"varying vec3 vNormal;\nvoid main() {\nvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\nvNormal = normalize( normalMatrix * normal );\ngl_Position = projectionMatrix * mvPosition;\n}",
K:"uniform float opacity;\nvarying vec3 vNormal;\nvoid main() {\ngl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );\n}"},dv:{P:THREE.nc.be([THREE.Na.ri,THREE.Na.A,THREE.Na.wh]),N:[THREE.j.gl,THREE.j.Yk,THREE.j.Jk,THREE.j.Hg,THREE.j.Vi,THREE.j.Bh,THREE.j.zh,"void main() {",THREE.j.hl,THREE.j.Zk,THREE.j.Ig,"#ifdef USE_ENVMAP",THREE.j.kl,THREE.j.Ah,THREE.j.pj,THREE.j.Dk,"#endif",THREE.j.Wi,THREE.j.oj,THREE.j.xi,THREE.j.wj,THREE.j.Kk,THREE.j.nj,"}"].join("\n"),K:["uniform vec3 diffuse;\nuniform float opacity;",
THREE.j.Gg,THREE.j.fl,THREE.j.Xk,THREE.j.Ik,THREE.j.Rf,THREE.j.yh,THREE.j.Il,"void main() {\ngl_FragColor = vec4( diffuse, opacity );",THREE.j.el,THREE.j.fi,THREE.j.Hl,THREE.j.Wk,THREE.j.Fg,THREE.j.Hk,THREE.j.xh,THREE.j.Si,THREE.j.Qf,"}"].join("\n")},$w:{P:THREE.nc.be([THREE.Na.ri,THREE.Na.A,THREE.Na.Ab,THREE.Na.wh,{wa:{type:"c",value:new THREE.u(16777215)},cb:{type:"c",value:new THREE.u(0)},Ac:{type:"v3",value:new THREE.e(1,1,1)}}]),N:["#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\nvarying vec3 vLightBack;\n#endif",
THREE.j.gl,THREE.j.Yk,THREE.j.Jk,THREE.j.is,THREE.j.Hg,THREE.j.Vi,THREE.j.Bh,THREE.j.zh,"void main() {",THREE.j.hl,THREE.j.Zk,THREE.j.Ig,THREE.j.kl,THREE.j.Ah,THREE.j.pj,THREE.j.Dk,THREE.j.Wi,THREE.j.oj,THREE.j.xi,THREE.j.wj,THREE.j.Kk,THREE.j.js,THREE.j.nj,"}"].join("\n"),K:["uniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\nvarying vec3 vLightBack;\n#endif",THREE.j.Gg,THREE.j.fl,THREE.j.Xk,THREE.j.Ik,THREE.j.Rf,THREE.j.yh,THREE.j.Il,"void main() {\ngl_FragColor = vec4( vec3 ( 1.0 ), opacity );",
THREE.j.el,THREE.j.fi,THREE.j.Hl,"#ifdef DOUBLE_SIDED\nif ( gl_FrontFacing )\ngl_FragColor.xyz *= vLightFront;\nelse\ngl_FragColor.xyz *= vLightBack;\n#else\ngl_FragColor.xyz *= vLightFront;\n#endif",THREE.j.Wk,THREE.j.Fg,THREE.j.Hk,THREE.j.xh,THREE.j.Si,THREE.j.Qf,"}"].join("\n")},$y:{P:THREE.nc.be([THREE.Na.ri,THREE.Na.fr,THREE.Na.Ms,THREE.Na.A,THREE.Na.Ab,THREE.Na.wh,{wa:{type:"c",value:new THREE.u(16777215)},cb:{type:"c",value:new THREE.u(0)},hd:{type:"c",value:new THREE.u(1118481)},ke:{type:"f",
value:30},Ac:{type:"v3",value:new THREE.e(1,1,1)}}]),N:["#define PHONG\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;",THREE.j.gl,THREE.j.Yk,THREE.j.Jk,THREE.j.ms,THREE.j.Hg,THREE.j.Vi,THREE.j.Bh,THREE.j.zh,"void main() {",THREE.j.hl,THREE.j.Zk,THREE.j.Ig,THREE.j.kl,THREE.j.Ah,THREE.j.pj,THREE.j.Dk,"vNormal = normalize( transformedNormal );",THREE.j.Wi,THREE.j.oj,THREE.j.xi,"vViewPosition = -mvPosition.xyz;",THREE.j.wj,THREE.j.Kk,THREE.j.ns,THREE.j.nj,"}"].join("\n"),K:["uniform vec3 diffuse;\nuniform float opacity;\nuniform vec3 ambient;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;",
THREE.j.Gg,THREE.j.fl,THREE.j.Xk,THREE.j.Ik,THREE.j.Rf,THREE.j.ls,THREE.j.yh,THREE.j.gr,THREE.j.Ns,THREE.j.Il,"void main() {\ngl_FragColor = vec4( vec3 ( 1.0 ), opacity );",THREE.j.el,THREE.j.fi,THREE.j.Hl,THREE.j.ks,THREE.j.Wk,THREE.j.Fg,THREE.j.Hk,THREE.j.xh,THREE.j.Si,THREE.j.Qf,"}"].join("\n")},Xy:{P:THREE.nc.be([THREE.Na.et,THREE.Na.wh]),N:["uniform float size;\nuniform float scale;",THREE.j.Hg,THREE.j.zh,"void main() {",THREE.j.Ig,"vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n#ifdef USE_SIZEATTENUATION\ngl_PointSize = size * ( scale / length( mvPosition.xyz ) );\n#else\ngl_PointSize = size;\n#endif\ngl_Position = projectionMatrix * mvPosition;",
THREE.j.wj,THREE.j.nj,"}"].join("\n"),K:["uniform vec3 psColor;\nuniform float opacity;",THREE.j.Gg,THREE.j.As,THREE.j.Rf,THREE.j.yh,"void main() {\ngl_FragColor = vec4( psColor, opacity );",THREE.j.zs,THREE.j.fi,THREE.j.Fg,THREE.j.xh,THREE.j.Qf,"}"].join("\n")},ew:{P:THREE.nc.be([THREE.Na.ri,THREE.Na.A,{scale:{type:"f",value:1},Sd:{type:"f",value:1},Zt:{type:"f",value:2}}]),N:["uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;",THREE.j.Hg,"void main() {",THREE.j.Ig,
"vLineDistance = scale * lineDistance;\nvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n}"].join("\n"),K:["uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;",THREE.j.Gg,THREE.j.Rf,"void main() {\nif ( mod( vLineDistance, totalSize ) > dashSize ) {\ndiscard;\n}\ngl_FragColor = vec4( diffuse, opacity );",THREE.j.Fg,THREE.j.Qf,"}"].join("\n")},ln:{P:{},N:[THREE.j.Vi,
THREE.j.Bh,"void main() {",THREE.j.Ah,THREE.j.Wi,THREE.j.oj,THREE.j.xi,"}"].join("\n"),K:"vec4 pack_depth( const in float depth ) {\nconst vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\nconst vec4 bit_mask  = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\nvec4 res = fract( depth * bit_shift );\nres -= res.xxyz * bit_mask;\nreturn res;\n}\nvoid main() {\ngl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );\n}"}};
THREE.Nu=function(a){function b(a){if(a.vb)for(var b in a.vb)j.deleteBuffer(a.vb[b].buffer)}function c(a,b){var c=a.f.length,d=b.q;if(d.attributes){r===a.vb&&(a.vb=[]);for(var e in d.attributes){var f=d.attributes[e];if(!f.ck||f.or){f.ck=v;var g=1;"v2"===f.type?g=2:"v3"===f.type?g=3:"v4"===f.type?g=4:"c"===f.type&&(g=3);f.size=g;f.b=new Float32Array(c*g);f.buffer=j.createBuffer();f.buffer.ki=e;f.ga=v}a.vb.push(f)}}}function d(a,b){var c=b.t,d=a.Di,h=a.Ei,i=3*d.length+4*h.length,u=1*d.length+2*h.length,
h=3*d.length+4*h.length,d=e(b,a),k=g(d),l=f(d),m=d.n?d.n:D;a.Jd=new Float32Array(3*i);l&&(a.$h=new Float32Array(3*i));c.$f&&(a.Nm=new Float32Array(4*i));m&&(a.Hd=new Float32Array(3*i));if(k){if(0<c.Kc.length||0<c.C.length)a.Pm=new Float32Array(2*i);if(1<c.Kc.length||1<c.C.length)a.Om=new Float32Array(2*i)}b.t.ne.length&&b.t.me.length&&(a.Lm=new Float32Array(4*i),a.Mm=new Float32Array(4*i));a.Gm=new Uint16Array(3*u);a.Im=new Uint16Array(2*h);if(a.$e){a.Km=[];c=0;for(k=a.$e;c<k;c++)a.Km.push(new Float32Array(3*
i))}if(a.Ze){a.Jm=[];c=0;for(k=a.Ze;c<k;c++)a.Jm.push(new Float32Array(3*i))}a.ak=3*u;a.ek=2*h;if(d.attributes){r===a.vb&&(a.vb=[]);for(var n in d.attributes){var u=d.attributes[n],c={},p;for(p in u)c[p]=u[p];if(!c.ck||c.or)c.ck=v,h=1,"v2"===c.type?h=2:"v3"===c.type?h=3:"v4"===c.type?h=4:"c"===c.type&&(h=3),c.size=h,c.b=new Float32Array(i*h),c.buffer=j.createBuffer(),c.buffer.ki=n,u.ga=v,c.uq=u;a.vb.push(c)}}a.Hm=v}function e(a,b){return a.q instanceof THREE.Hb?a.q.ja[b.va]:a.q}function f(a){return a instanceof
THREE.Ma&&!a.ma||a instanceof THREE.ze?D:a&&r!==a.Da&&a.Da===THREE.Gc?THREE.Gc:THREE.og}function g(a){return a.map||a.Ja||a.wb||a.Za||a.Ea||a instanceof THREE.Ta?v:D}function h(a){var b,c,d;for(b in a.attributes)d="index"===b?j.ELEMENT_ARRAY_BUFFER:j.ARRAY_BUFFER,c=a.attributes[b],c.buffer=j.createBuffer(),j.bindBuffer(d,c.buffer),j.bufferData(d,c.b,j.STATIC_DRAW)}function i(a,b,c){var d=a.attributes,e=d.index,f=d.position,g=d.r,h=d.sa,i=d.color,d=d.Rb;a.Pe&&r!==e&&(j.bindBuffer(j.ELEMENT_ARRAY_BUFFER,
e.buffer),j.bufferData(j.ELEMENT_ARRAY_BUFFER,e.b,b));a.ta&&r!==f&&(j.bindBuffer(j.ARRAY_BUFFER,f.buffer),j.bufferData(j.ARRAY_BUFFER,f.b,b));a.hc&&r!==g&&(j.bindBuffer(j.ARRAY_BUFFER,g.buffer),j.bufferData(j.ARRAY_BUFFER,g.b,b));a.of&&r!==h&&(j.bindBuffer(j.ARRAY_BUFFER,h.buffer),j.bufferData(j.ARRAY_BUFFER,h.b,b));a.Ha&&r!==i&&(j.bindBuffer(j.ARRAY_BUFFER,i.buffer),j.bufferData(j.ARRAY_BUFFER,i.b,b));a.pe&&r!==d&&(j.bindBuffer(j.ARRAY_BUFFER,d.buffer),j.bufferData(j.ARRAY_BUFFER,d.b,b));if(c)for(var u in a.attributes)delete a.attributes[u].b}
function k(a){u[a]||(j.enableVertexAttribArray(a),u[a]=v)}function l(){for(var a in u)u[a]&&(j.disableVertexAttribArray(a),u[a]=D)}function m(a,b){return a.a!==b.a?b.a-a.a:b.id-a.id}function p(a,b){return b[0]-a[0]}function s(a,b,c){if(a.length)for(var d=0,e=a.length;d<e;d++)ja=T=w,ca=N=Ba=za=db=ib=Ia=-1,cc=v,a[d].B(b,c,Xa,Ma),ja=T=w,ca=N=Ba=za=db=ib=Ia=-1,cc=v}function q(a,b,c,d,e,f,g,j){var h,i,u,k;b?(i=a.length-1,k=b=-1):(i=0,b=a.length,k=1);for(var l=i;l!==b;l+=k)if(h=a[l],h.B){i=h.object;u=h.buffer;
if(j)h=j;else{h=h[c];if(!h)continue;g&&Q.ig(h.kb,h.blendEquation,h.Oe,h.Ne);Q.df(h.rc);Q.oh(h.Bd);O(h.polygonOffset,h.jh,h.kh)}Q.Bl(h);u instanceof THREE.qd?Q.wl(d,e,f,h,u,i):Q.vl(d,e,f,h,u,i)}}function n(a,b,c,d,e,f,g){for(var j,h,i=0,u=a.length;i<u;i++)if(j=a[i],h=j.object,h.visible){if(g)j=g;else{j=j[b];if(!j)continue;f&&Q.ig(j.kb,j.blendEquation,j.Oe,j.Ne);Q.df(j.rc);Q.oh(j.Bd);O(j.polygonOffset,j.jh,j.kh)}Q.xl(c,d,e,j,h)}}function t(a,b,c){a.push({buffer:b,object:c,af:w,za:w})}function x(a){for(var b in a.attributes)if(a.attributes[b].ga)return v;
return D}function L(a){for(var b in a.attributes)a.attributes[b].ga=D}function E(a,b){for(var c=a.length-1;0<=c;c--)a[c].object===b&&a.splice(c,1)}function y(a,b){for(var c=a.length-1;0<=c;c--)a[c]===b&&a.splice(c,1)}function M(a,b,c,d,e){Oa=0;d.ga&&(d.pb&&Q.sr(d),Q.Zr(d,b,c,e),d.ga=D);d.G&&!e.Ag&&(e.Ag=new Float32Array(Q.fh));var f=D,g=d.pb,h=g.P,i=d.P;g!==T&&(j.useProgram(g),T=g,f=v);d.id!==ca&&(ca=d.id,f=v);if(f||a!==ja)j.uniformMatrix4fv(h.oa,D,a.oa.elements),a!==ja&&(ja=a);if(d.ya)if(dc&&e.Dd){if(w!==
h.Md){var u=B();j.uniform1i(h.Md,u);Q.ph(e.Md,u)}}else w!==h.er&&j.uniformMatrix4fv(h.er,D,e.Dg);if(f){c&&d.A&&(i.Fi.value=c.color,c instanceof THREE.pg?(i.Ii.value=c.Ca,i.Hi.value=c.Ia):c instanceof THREE.tf&&(i.Gi.value=c.yi));if(d instanceof THREE.Yb||d instanceof THREE.Xb||d.Ab){if(cc){for(var k=0,l=0,m=0,n,p,s,da=Hc,q=da.Ng.Xa,ua=da.Ng.Oc,t=da.bf.Xa,va=da.bf.Oc,y=da.bf.Qg,x=da.jc.Xa,C=da.jc.Oc,Cb=da.jc.Qg,E=da.jc.mn,G=da.jc.an,L=da.jc.rn,K=da.Te.Go,N=da.Te.Dn,S=da.Te.Oc,M=0,O=0,P=0,R=0,zb=0,
ga=0,ob=0,U=0,Y=p=0,c=Y=Y=0,f=b.length;c<f;c++)u=b[c],u.$i||(n=u.color,s=u.mb,p=u.Mb,u instanceof THREE.Gh?u.visible&&(Q.Zc?(k+=n.h*n.h,l+=n.g*n.g,m+=n.c*n.c):(k+=n.h,l+=n.g,m+=n.c)):u instanceof THREE.Bc?(zb+=1,u.visible&&(p=3*M,Q.Zc?J(q,p,n,s*s):H(q,p,n,s),Da.copy(od(u.F)),Da.Wa(od(u.target.F)),Da.normalize(),ua[p]=Da.x,ua[p+1]=Da.y,ua[p+2]=Da.a,M+=1)):u instanceof THREE.yf?(ga+=1,u.visible&&(Y=3*O,Q.Zc?J(t,Y,n,s*s):H(t,Y,n,s),s=od(u.F),va[Y]=s.x,va[Y+1]=s.y,va[Y+2]=s.a,y[O]=p,O+=1)):u instanceof
THREE.zf?(ob+=1,u.visible&&(Y=3*P,Q.Zc?J(x,Y,n,s*s):H(x,Y,n,s),s=od(u.F),C[Y]=s.x,C[Y+1]=s.y,C[Y+2]=s.a,Cb[P]=p,Da.copy(s),Da.Wa(od(u.target.F)),Da.normalize(),E[Y]=Da.x,E[Y+1]=Da.y,E[Y+2]=Da.a,G[P]=Math.cos(u.Ke),L[P]=u.Er,P+=1)):u instanceof THREE.Cj&&(U+=1,u.visible&&(n=u.color,p=u.Ra,Y=3*R,Q.Zc?(s*=s,J(K,Y,n,s),J(N,Y,p,s)):(H(K,Y,n,s),H(N,Y,p,s)),Da.copy(od(u.F)),Da.normalize(),S[Y]=Da.x,S[Y+1]=Da.y,S[Y+2]=Da.a,R+=1)));c=3*M;for(f=Math.max(q.length,3*zb);c<f;c++)q[c]=0;c=3*M;for(f=Math.max(ua.length,
3*zb);c<f;c++)ua[c]=0;c=3*O;for(f=Math.max(t.length,3*ga);c<f;c++)t[c]=0;c=3*O;for(f=Math.max(va.length,3*ga);c<f;c++)va[c]=0;c=O;for(f=Math.max(y.length,ga);c<f;c++)y[c]=0;c=3*P;for(f=Math.max(x.length,3*ob);c<f;c++)x[c]=0;c=3*P;for(f=Math.max(C.length,3*ob);c<f;c++)C[c]=0;c=3*P;for(f=Math.max(E.length,3*ob);c<f;c++)E[c]=0;c=P;for(f=Math.max(G.length,ob);c<f;c++)G[c]=0;c=P;for(f=Math.max(L.length,ob);c<f;c++)L[c]=0;c=P;for(f=Math.max(Cb.length,ob);c<f;c++)Cb[c]=0;c=3*R;for(f=Math.max(K.length,3*
U);c<f;c++)K[c]=0;c=3*R;for(f=Math.max(N.length,3*U);c<f;c++)N[c]=0;c=3*R;for(f=Math.max(S.length,3*U);c<f;c++)S[c]=0;da.Ng.length=M;da.bf.length=O;da.jc.length=P;da.Te.length=R;da.wa[0]=k;da.wa[1]=l;da.wa[2]=m;cc=D}c=Hc;i.Oq.value=c.wa;i.ur.value=c.Ng.Xa;i.vr.value=c.Ng.Oc;i.gt.value=c.bf.Xa;i.it.value=c.bf.Oc;i.ht.value=c.bf.Qg;i.Jt.value=c.jc.Xa;i.Nt.value=c.jc.Oc;i.Lt.value=c.jc.Qg;i.Kt.value=c.jc.mn;i.It.value=c.jc.an;i.Mt.value=c.jc.rn;i.Wr.value=c.Te.Go;i.Vr.value=c.Te.Dn;i.Ur.value=c.Te.Oc}if(d instanceof
THREE.Ma||d instanceof THREE.Xb||d instanceof THREE.Yb){i.opacity.value=d.opacity;Q.Zc?bc(i.Of.value,d.color):i.Of.value=d.color;i.map.value=d.map;i.Ja.value=d.Ja;i.Ea.value=d.Ea;d.wb&&(i.wb.value=d.wb,i.Lf.value=d.Lf);d.Za&&(i.Za.value=d.Za,i.fe.value.copy(d.fe));var X;d.map?X=d.map:d.Ea?X=d.Ea:d.Za?X=d.Za:d.wb&&(X=d.wb);r!==X&&(c=X.offset,X=X.repeat,i.Qs.value.set(c.x,c.y,X.x,X.y));i.ma.value=d.ma;i.Hr.value=d.ma instanceof THREE.Ge?1:-1;i.wc.value=d.wc;i.Pc.value=d.Pc;i.Jc.value=d.Jc;i.ap.value=
d.ma&&d.ma.ob instanceof THREE.rp}d instanceof THREE.Gb?(i.Of.value=d.color,i.opacity.value=d.opacity):d instanceof THREE.we?(i.Of.value=d.color,i.opacity.value=d.opacity,i.Sd.value=d.Sd,i.Zt.value=d.Sd+d.Sg,i.scale.value=d.scale):d instanceof THREE.Be?(i.kt.value=d.color,i.opacity.value=d.opacity,i.size.value=d.size,i.scale.value=fa.height/2,i.map.value=d.map):d instanceof THREE.Yb?(i.ke.value=d.ke,Q.Zc?(bc(i.wa.value,d.wa),bc(i.cb.value,d.cb),bc(i.hd.value,d.hd)):(i.wa.value=d.wa,i.cb.value=d.cb,
i.hd.value=d.hd),d.Vc&&i.Ac.value.copy(d.Ac)):d instanceof THREE.Xb?(Q.Zc?(bc(i.wa.value,d.wa),bc(i.cb.value,d.cb)):(i.wa.value=d.wa,i.cb.value=d.cb),d.Vc&&i.Ac.value.copy(d.Ac)):d instanceof THREE.ze?(i.ss.value=a.Ca,i.rs.value=a.Ia,i.opacity.value=d.opacity):d instanceof THREE.Ae&&(i.opacity.value=d.opacity);if(e.hg&&!d.Ld&&i.ff){c=X=0;for(f=b.length;c<f;c++)if(u=b[c],u.pc&&(u instanceof THREE.zf||u instanceof THREE.Bc&&!u.Gl))i.ef.value[X]=u.ef,i.uh.value[X]=u.uh,i.ff.value[X]=u.ff,i.je.value[X]=
u.je,i.jg.value[X]=u.jg,X++}b=d.Zo;i=0;for(X=b.length;i<X;i++)if(f=g.P[b[i][1]])if(c=b[i][0],k=c.type,u=c.value,"i"===k)j.uniform1i(f,u);else if("f"===k)j.uniform1f(f,u);else if("v2"===k)j.uniform2f(f,u.x,u.y);else if("v3"===k)j.uniform3f(f,u.x,u.y,u.a);else if("v4"===k)j.uniform4f(f,u.x,u.y,u.a,u.k);else if("c"===k)j.uniform3f(f,u.h,u.g,u.c);else if("iv1"===k)j.uniform1iv(f,u);else if("iv"===k)j.uniform3iv(f,u);else if("fv1"===k)j.uniform1fv(f,u);else if("fv"===k)j.uniform3fv(f,u);else if("v2v"===
k){r===c.fa&&(c.fa=new Float32Array(2*u.length));k=0;for(l=u.length;k<l;k++)m=2*k,c.fa[m]=u[k].x,c.fa[m+1]=u[k].y;j.uniform2fv(f,c.fa)}else if("v3v"===k){r===c.fa&&(c.fa=new Float32Array(3*u.length));k=0;for(l=u.length;k<l;k++)m=3*k,c.fa[m]=u[k].x,c.fa[m+1]=u[k].y,c.fa[m+2]=u[k].a;j.uniform3fv(f,c.fa)}else if("v4v"===k){r===c.fa&&(c.fa=new Float32Array(4*u.length));k=0;for(l=u.length;k<l;k++)m=4*k,c.fa[m]=u[k].x,c.fa[m+1]=u[k].y,c.fa[m+2]=u[k].a,c.fa[m+3]=u[k].k;j.uniform4fv(f,c.fa)}else if("m4"===
k)r===c.fa&&(c.fa=new Float32Array(16)),n=c.fa,u=u.elements,n[0]=u[0],n[1]=u[1],n[2]=u[2],n[3]=u[3],n[4]=u[4],n[5]=u[5],n[6]=u[6],n[7]=u[7],n[8]=u[8],n[9]=u[9],n[10]=u[10],n[11]=u[11],n[12]=u[12],n[13]=u[13],n[14]=u[14],n[15]=u[15],j.uniformMatrix4fv(f,D,c.fa);else if("m4v"===k){r===c.fa&&(c.fa=new Float32Array(16*u.length));k=0;for(l=u.length;k<l;k++)Hd(u[k],c.fa,16*k);j.uniformMatrix4fv(f,D,c.fa)}else if("t"===k){if(m=u,u=B(),j.uniform1i(f,u),m)if(m.L instanceof Array&&6===m.L.length){if(c=m,f=
u,6===c.L.length)if(c.ga){c.L.Bg||(c.L.Bg=j.createTexture(),Q.info.memory.Tb++);j.activeTexture(j.TEXTURE0+f);j.bindTexture(j.TEXTURE_CUBE_MAP,c.L.Bg);j.pixelStorei(j.UNPACK_FLIP_Y_WEBGL,c.Re);f=c instanceof THREE.se;u=[];for(k=0;6>k;k++)Q.Uq&&!f?(l=u,m=k,da=c.L[k],ua=Ea,da.width<=ua&&da.height<=ua||(t=Math.max(da.width,da.height),q=Math.floor(da.width*ua/t),ua=Math.floor(da.height*ua/t),t=document.createElement("canvas"),t.width=q,t.height=ua,t.getContext("2d").drawImage(da,0,0,da.width,da.height,
0,0,q,ua),da=t),l[m]=da):u[k]=c.L[k];k=u[0];l=0===(k.width&k.width-1)&&0===(k.height&k.height-1);m=V(c.ia);da=V(c.type);F(j.TEXTURE_CUBE_MAP,c,l);for(k=0;6>k;k++)if(f){ua=u[k].Cb;t=0;for(va=ua.length;t<va;t++)q=ua[t],j.compressedTexImage2D(j.TEXTURE_CUBE_MAP_POSITIVE_X+k,t,m,q.width,q.height,0,q.data)}else j.texImage2D(j.TEXTURE_CUBE_MAP_POSITIVE_X+k,0,m,m,da,u[k]);c.fb&&l&&j.generateMipmap(j.TEXTURE_CUBE_MAP);c.ga=D;c.Zi&&c.Zi()}else j.activeTexture(j.TEXTURE0+f),j.bindTexture(j.TEXTURE_CUBE_MAP,
c.L.Bg)}else m instanceof THREE.Ge?(c=m,j.activeTexture(j.TEXTURE0+u),j.bindTexture(j.TEXTURE_CUBE_MAP,c.dc)):Q.ph(m,u)}else if("tv"===k){r===c.fa&&(c.fa=[]);k=0;for(l=c.value.length;k<l;k++)c.fa[k]=B();j.uniform1iv(f,c.fa);k=0;for(l=c.value.length;k<l;k++)m=c.value[k],u=c.fa[k],m&&Q.ph(m,u)}if((d instanceof THREE.Ta||d instanceof THREE.Yb||d.ma)&&w!==h.hr)b=od(a.F),j.uniform3f(h.hr,b.x,b.y,b.a);(d instanceof THREE.Yb||d instanceof THREE.Xb||d instanceof THREE.Ta||d.ya)&&w!==h.fu&&j.uniformMatrix4fv(h.fu,
D,a.xa.elements)}j.uniformMatrix4fv(h.ao,D,e.Ic.elements);h.Ls&&j.uniformMatrix3fv(h.Ls,D,e.ei.elements);w!==h.Hs&&j.uniformMatrix4fv(h.Hs,D,e.F.elements);return g}function B(){var a=Oa;a>=Db&&console.warn("Trying to use "+a+" texture units while this GPU supports only "+Db);Oa+=1;return a}function K(a,b){a.Ic.multiply(b.xa,a.F);a.ei.Ob(a.Ic);a.ei.Dh()}function J(a,b,c,d){a[b]=c.h*c.h*d;a[b+1]=c.g*c.g*d;a[b+2]=c.c*c.c*d}function H(a,b,c,d){a[b]=c.h*d;a[b+1]=c.g*d;a[b+2]=c.c*d}function O(a,b,c){Ib!==
a&&(a?j.enable(j.POLYGON_OFFSET_FILL):j.disable(j.POLYGON_OFFSET_FILL),Ib=a);if(a&&(Jb!==b||ub!==c))j.polygonOffset(b,c),Jb=b,ub=c}function C(a){for(var a=a.split("\n"),b=0,c=a.length;b<c;b++)a[b]=b+1+": "+a[b];return a.join("\n")}function P(a,b){var c;"fragment"===a?c=j.createShader(j.FRAGMENT_SHADER):"vertex"===a&&(c=j.createShader(j.VERTEX_SHADER));j.shaderSource(c,b);j.compileShader(c);return!j.getShaderParameter(c,j.COMPILE_STATUS)?(console.error(j.getShaderInfoLog(c)),console.error(C(b)),w):
c}function F(a,b,c){c?(j.texParameteri(a,j.TEXTURE_WRAP_S,V(b.Ub)),j.texParameteri(a,j.TEXTURE_WRAP_T,V(b.Vb)),j.texParameteri(a,j.TEXTURE_MAG_FILTER,V(b.Bb)),j.texParameteri(a,j.TEXTURE_MIN_FILTER,V(b.gb))):(j.texParameteri(a,j.TEXTURE_WRAP_S,j.CLAMP_TO_EDGE),j.texParameteri(a,j.TEXTURE_WRAP_T,j.CLAMP_TO_EDGE),j.texParameteri(a,j.TEXTURE_MAG_FILTER,G(b.Bb)),j.texParameteri(a,j.TEXTURE_MIN_FILTER,G(b.gb)));if(zb&&b.type!==THREE.Bj&&(1<b.Kb||b.tq))j.texParameterf(a,zb.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(b.Kb,
Xc)),b.tq=b.Kb}function U(a,b){j.bindRenderbuffer(j.RENDERBUFFER,a);b.Td&&!b.oe?(j.renderbufferStorage(j.RENDERBUFFER,j.DEPTH_COMPONENT16,b.width,b.height),j.framebufferRenderbuffer(j.FRAMEBUFFER,j.DEPTH_ATTACHMENT,j.RENDERBUFFER,a)):b.Td&&b.oe?(j.renderbufferStorage(j.RENDERBUFFER,j.DEPTH_STENCIL,b.width,b.height),j.framebufferRenderbuffer(j.FRAMEBUFFER,j.DEPTH_STENCIL_ATTACHMENT,j.RENDERBUFFER,a)):j.renderbufferStorage(j.RENDERBUFFER,j.RGBA4,b.width,b.height)}function G(a){return a===THREE.qg||
a===THREE.hm||a===THREE.gm?j.NEAREST:j.LINEAR}function V(a){if(a===THREE.Fc)return j.REPEAT;if(a===THREE.re)return j.CLAMP_TO_EDGE;if(a===THREE.Kj)return j.MIRRORED_REPEAT;if(a===THREE.qg)return j.NEAREST;if(a===THREE.hm)return j.NEAREST_MIPMAP_NEAREST;if(a===THREE.gm)return j.NEAREST_MIPMAP_LINEAR;if(a===THREE.Gd)return j.LINEAR;if(a===THREE.Ep)return j.LINEAR_MIPMAP_NEAREST;if(a===THREE.Ij)return j.LINEAR_MIPMAP_LINEAR;if(a===THREE.Uj)return j.UNSIGNED_BYTE;if(a===THREE.jq)return j.UNSIGNED_SHORT_4_4_4_4;
if(a===THREE.kq)return j.UNSIGNED_SHORT_5_5_5_1;if(a===THREE.lq)return j.UNSIGNED_SHORT_5_6_5;if(a===THREE.lp)return j.BYTE;if(a===THREE.Wp)return j.SHORT;if(a===THREE.mq)return j.UNSIGNED_SHORT;if(a===THREE.Bp)return j.INT;if(a===THREE.iq)return j.UNSIGNED_INT;if(a===THREE.Bj)return j.FLOAT;if(a===THREE.hp)return j.ALPHA;if(a===THREE.Mj)return j.RGB;if(a===THREE.vg)return j.RGBA;if(a===THREE.Gp)return j.LUMINANCE;if(a===THREE.Fp)return j.LUMINANCE_ALPHA;if(a===THREE.Pl)return j.FUNC_ADD;if(a===THREE.bq)return j.FUNC_SUBTRACT;
if(a===THREE.Up)return j.FUNC_REVERSE_SUBTRACT;if(a===THREE.nq)return j.ZERO;if(a===THREE.Np)return j.ONE;if(a===THREE.aq)return j.SRC_COLOR;if(a===THREE.Qp)return j.ONE_MINUS_SRC_COLOR;if(a===THREE.Am)return j.SRC_ALPHA;if(a===THREE.jm)return j.ONE_MINUS_SRC_ALPHA;if(a===THREE.wp)return j.DST_ALPHA;if(a===THREE.Op)return j.ONE_MINUS_DST_ALPHA;if(a===THREE.xp)return j.DST_COLOR;if(a===THREE.Pp)return j.ONE_MINUS_DST_COLOR;if(a===THREE.$p)return j.SRC_ALPHA_SATURATE;if(r!==ob){if(a===THREE.rm)return ob.COMPRESSED_RGB_S3TC_DXT1_EXT;
if(a===THREE.Sp)return ob.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(a===THREE.pm)return ob.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(a===THREE.qm)return ob.COMPRESSED_RGBA_S3TC_DXT5_EXT}return 0}console.log("THREE.WebGLRenderer",THREE.om);var a=a||{},fa=r!==a.canvas?a.canvas:document.createElement("canvas"),W=r!==a.precision?a.precision:"highp",ia=r!==a.alpha?a.alpha:v,ra=r!==a.premultipliedAlpha?a.premultipliedAlpha:v,Ha=r!==a.antialias?a.antialias:D,R=r!==a.stencil?a.stencil:v,ha=r!==a.preserveDrawingBuffer?a.preserveDrawingBuffer:
D,qa=r!==a.clearColor?new THREE.u(a.clearColor):new THREE.u(0),ka=r!==a.jr?a.jr:0;this.xr=fa;this.Xc=w;this.uk=this.Wq=this.qj=this.Tq=this.Sq=this.Rq=this.tk=v;this.sh=this.jo=this.un=this.Zc=D;this.mj=this.Ct=v;this.Bo=THREE.Mh;this.kj=this.lj=D;this.fh=8;this.Ti=4;this.Uq=v;this.so=[];this.ro=[];this.info={memory:{no:0,Z:0,Tb:0},B:{Od:0,f:0,m:0,M:0}};var Q=this,S=[],ga=0,T=w,X=w,ca=-1,N=w,ja=w,La=0,Oa=0,za=-1,Ba=-1,Ia=-1,sa=-1,gb=-1,hb=-1,ib=-1,db=-1,Ib=w,Jb=w,ub=w,Na=w,Ga=0,nb=0,Ca=0,bb=0,Xa=
0,Ma=0,u={},da=new THREE.vf,ua=new THREE.D,va=new THREE.D,Cb=new THREE.e,Da=new THREE.e,cc=v,Hc={wa:[0,0,0],Ng:{length:0,Xa:[],Oc:[]},bf:{length:0,Xa:[],Oc:[],Qg:[]},jc:{length:0,Xa:[],Oc:[],Qg:[],mn:[],an:[],rn:[]},Te:{length:0,Go:[],Dn:[],Oc:[]}},j,zb,ob;try{if(!(j=fa.getContext("experimental-webgl",{alpha:ia,premultipliedAlpha:ra,antialias:Ha,stencil:R,preserveDrawingBuffer:ha})))throw"Error creating WebGL context.";}catch(jb){console.error(jb)}a=j.getExtension("OES_texture_float");ia=j.getExtension("OES_standard_derivatives");
zb=j.getExtension("EXT_texture_filter_anisotropic")||j.getExtension("MOZ_EXT_texture_filter_anisotropic")||j.getExtension("WEBKIT_EXT_texture_filter_anisotropic");ob=j.getExtension("WEBGL_compressed_texture_s3tc")||j.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||j.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");a||console.log("THREE.WebGLRenderer: Float textures not supported.");ia||console.log("THREE.WebGLRenderer: Standard derivatives not supported.");zb||console.log("THREE.WebGLRenderer: Anisotropic texture filtering not supported.");
ob||console.log("THREE.WebGLRenderer: S3TC compressed textures not supported.");j.clearColor(0,0,0,1);j.clearDepth(1);j.clearStencil(0);j.enable(j.DEPTH_TEST);j.depthFunc(j.LEQUAL);j.frontFace(j.CCW);j.cullFace(j.BACK);j.enable(j.CULL_FACE);j.enable(j.BLEND);j.blendEquation(j.FUNC_ADD);j.blendFunc(j.SRC_ALPHA,j.ONE_MINUS_SRC_ALPHA);j.clearColor(qa.h,qa.g,qa.c,ka);this.Xc=j;var Db=j.getParameter(j.MAX_TEXTURE_IMAGE_UNITS),ia=j.getParameter(j.MAX_VERTEX_TEXTURE_IMAGE_UNITS);j.getParameter(j.MAX_TEXTURE_SIZE);
var Ea=j.getParameter(j.MAX_CUBE_MAP_TEXTURE_SIZE),Xc=zb?j.getParameter(zb.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,Lb=0<ia,dc=Lb&&a;ob&&j.getParameter(j.COMPRESSED_TEXTURE_FORMATS);this.getContext=function(){return j};this.Wz=function(){return Lb};this.Mr=function(){return Xc};this.xo=function(a,b){fa.width=a;fa.height=b;this.wt(fa.width,fa.height)};this.wt=function(a,b){nb=Ga=0;Ca=r!==a?a:fa.width;bb=r!==b?b:fa.height;j.viewport(Ga,nb,Ca,bb)};this.Ez=function(a,b,c,d){j.scissor(a,b,c,d)};this.sw=function(a){a?
j.enable(j.SCISSOR_TEST):j.disable(j.SCISSOR_TEST)};this.ut=function(a,b){Nb(qa,a);ka=b;j.clearColor(qa.h,qa.g,qa.c,ka)};this.tt=function(a,b){qa.copy(a);ka=b;j.clearColor(qa.h,qa.g,qa.c,ka)};this.yn=function(){return qa};this.xn=function(){return ka};this.clear=function(a,b,c){var d=0;if(r===a||a)d|=j.COLOR_BUFFER_BIT;if(r===b||b)d|=j.DEPTH_BUFFER_BIT;if(r===c||c)d|=j.STENCIL_BUFFER_BIT;j.clear(d)};this.Bv=function(a,b,c,d){this.gj(a);this.clear(b,c,d)};this.Ym=function(a){a.Zg(this);this.ro.push(a)};
this.Lq=function(a){a.Zg(this);this.so.push(a)};this.fw=function(a){if(a.He)if(a.He=D,delete a.Ic,delete a.ei,a instanceof THREE.R)for(var c in a.t.Va){var d=a.t.Va[c];j.deleteBuffer(d.Oa);j.deleteBuffer(d.wd);j.deleteBuffer(d.jk);j.deleteBuffer(d.ub);j.deleteBuffer(d.lk);j.deleteBuffer(d.kk);j.deleteBuffer(d.gk);j.deleteBuffer(d.hk);j.deleteBuffer(d.$j);j.deleteBuffer(d.dk);var e=r,f=r;if(d.$e){e=0;for(f=d.$e;e<f;e++)j.deleteBuffer(d.Cf[e])}if(d.Ze){e=0;for(f=d.Ze;e<f;e++)j.deleteBuffer(d.zg[e])}b(d);
Q.info.memory.Z--}else a instanceof THREE.td?(a=a.t,j.deleteBuffer(a.Oa),j.deleteBuffer(a.ub),j.deleteBuffer(a.wd),b(a),Q.info.memory.Z--):a instanceof THREE.Fa?(a=a.t,j.deleteBuffer(a.Oa),j.deleteBuffer(a.ub),j.deleteBuffer(a.fk),b(a),Q.info.memory.Z--):a instanceof THREE.Ib&&(a=a.t,j.deleteBuffer(a.Oa),j.deleteBuffer(a.ub),b(a),Q.info.memory.Z--)};this.hw=function(a){if(a.L&&a.L.Bg)j.deleteTexture(a.L.Bg);else{if(!a.He)return;a.He=D;j.deleteTexture(a.dc)}Q.info.memory.Tb--};this.gw=function(a){if(a&&
a.dc)if(j.deleteTexture(a.dc),a instanceof THREE.Ge)for(var b=0;6>b;b++)j.deleteFramebuffer(a.vd[b]),j.deleteRenderbuffer(a.Df[b]);else j.deleteFramebuffer(a.vd),j.deleteRenderbuffer(a.Df)};this.sr=function(a){var b=a.pb;if(b){a.pb=r;var c,d,e=D,a=0;for(c=S.length;a<c;a++)if(d=S[a],d.pb===b){d.Nl--;0===d.Nl&&(e=v);break}if(e){e=[];a=0;for(c=S.length;a<c;a++)d=S[a],d.pb!==b&&e.push(d);S=e;j.deleteProgram(b);Q.info.memory.no--}}};this.mA=function(a,b){T=w;ca=N=db=ib=Ia=-1;cc=v;Ba=za=-1;this.Co.update(a,
b)};this.ot=function(a,b,c){a.Sr&&!a.Oa&&(a.Oa=j.createBuffer());a.Rr&&!a.wd&&(a.wd=j.createBuffer());a.Tr&&!a.Sm&&(a.Sm=j.createBuffer());a.Qr&&!a.ub&&(a.ub=j.createBuffer());a.Sr&&(j.bindBuffer(j.ARRAY_BUFFER,a.Oa),j.bufferData(j.ARRAY_BUFFER,a.dz,j.DYNAMIC_DRAW),j.enableVertexAttribArray(b.attributes.position),j.vertexAttribPointer(b.attributes.position,3,j.FLOAT,D,0,0));if(a.Rr){j.bindBuffer(j.ARRAY_BUFFER,a.wd);if(c.Da===THREE.og){var d,e,f,g,h,i,u,k,l,m,n,p=3*a.count;for(n=0;n<p;n+=9)m=a.Ks,
d=m[n],e=m[n+1],f=m[n+2],g=m[n+3],i=m[n+4],k=m[n+5],h=m[n+6],u=m[n+7],l=m[n+8],d=(d+g+h)/3,e=(e+i+u)/3,f=(f+k+l)/3,m[n]=d,m[n+1]=e,m[n+2]=f,m[n+3]=d,m[n+4]=e,m[n+5]=f,m[n+6]=d,m[n+7]=e,m[n+8]=f}j.bufferData(j.ARRAY_BUFFER,a.Ks,j.DYNAMIC_DRAW);j.enableVertexAttribArray(b.attributes.r);j.vertexAttribPointer(b.attributes.r,3,j.FLOAT,D,0,0)}a.Tr&&c.map&&(j.bindBuffer(j.ARRAY_BUFFER,a.Sm),j.bufferData(j.ARRAY_BUFFER,a.pA,j.DYNAMIC_DRAW),j.enableVertexAttribArray(b.attributes.sa),j.vertexAttribPointer(b.attributes.sa,
2,j.FLOAT,D,0,0));a.Qr&&c.n!==THREE.rg&&(j.bindBuffer(j.ARRAY_BUFFER,a.ub),j.bufferData(j.ARRAY_BUFFER,a.Cv,j.DYNAMIC_DRAW),j.enableVertexAttribArray(b.attributes.color),j.vertexAttribPointer(b.attributes.color,3,j.FLOAT,D,0,0));j.drawArrays(j.TRIANGLES,0,a.count);a.count=0};this.wl=function(a,b,c,d,e,f){if(D!==d.visible)if(c=M(a,b,c,d,f),a=c.attributes,b=D,d=16777215*e.id+2*c.id+(d.Q?1:0),d!==N&&(N=d,b=v),b&&l(),f instanceof THREE.R)if(f=e.attributes.index){d=e.ol;1<d.length&&(b=v);for(var c=0,g=
d.length;c<g;c++){var h=d[c].index;if(b){var i=e.attributes.position,u=i.gc;j.bindBuffer(j.ARRAY_BUFFER,i.buffer);k(a.position);j.vertexAttribPointer(a.position,u,j.FLOAT,D,0,4*h*u);u=e.attributes.r;if(0<=a.r&&u){var m=u.gc;j.bindBuffer(j.ARRAY_BUFFER,u.buffer);k(a.r);j.vertexAttribPointer(a.r,m,j.FLOAT,D,0,4*h*m)}u=e.attributes.sa;0<=a.sa&&u&&(m=u.gc,j.bindBuffer(j.ARRAY_BUFFER,u.buffer),k(a.sa),j.vertexAttribPointer(a.sa,m,j.FLOAT,D,0,4*h*m));u=e.attributes.color;0<=a.color&&u&&(m=u.gc,j.bindBuffer(j.ARRAY_BUFFER,
u.buffer),k(a.color),j.vertexAttribPointer(a.color,m,j.FLOAT,D,0,4*h*m));u=e.attributes.Rb;0<=a.Rb&&u&&(m=u.gc,j.bindBuffer(j.ARRAY_BUFFER,u.buffer),k(a.Rb),j.vertexAttribPointer(a.Rb,m,j.FLOAT,D,0,4*h*m));j.bindBuffer(j.ELEMENT_ARRAY_BUFFER,f.buffer)}j.drawElements(j.TRIANGLES,d[c].count,j.UNSIGNED_SHORT,2*d[c].start);Q.info.B.Od++;Q.info.B.f+=d[c].count;Q.info.B.m+=d[c].count/3}}else b&&(i=e.attributes.position,u=i.gc,j.bindBuffer(j.ARRAY_BUFFER,i.buffer),k(a.position),j.vertexAttribPointer(a.position,
u,j.FLOAT,D,0,0),u=e.attributes.r,0<=a.r&&u&&(m=u.gc,j.bindBuffer(j.ARRAY_BUFFER,u.buffer),k(a.r),j.vertexAttribPointer(a.r,m,j.FLOAT,D,0,0)),u=e.attributes.sa,0<=a.sa&&u&&(m=u.gc,j.bindBuffer(j.ARRAY_BUFFER,u.buffer),k(a.sa),j.vertexAttribPointer(a.sa,m,j.FLOAT,D,0,0)),u=e.attributes.color,0<=a.color&&u&&(m=u.gc,j.bindBuffer(j.ARRAY_BUFFER,u.buffer),k(a.color),j.vertexAttribPointer(a.color,m,j.FLOAT,D,0,0)),u=e.attributes.Rb,0<=a.Rb&&u&&(m=u.gc,j.bindBuffer(j.ARRAY_BUFFER,u.buffer),k(a.Rb),j.vertexAttribPointer(a.Rb,
m,j.FLOAT,D,0,0))),j.drawArrays(j.TRIANGLES,0,i.eg/3),Q.info.B.Od++,Q.info.B.f+=i.eg/3,Q.info.B.m+=i.eg/3/3;else f instanceof THREE.Ib&&b&&(i=e.attributes.position,u=i.gc,j.bindBuffer(j.ARRAY_BUFFER,i.buffer),k(a.position),j.vertexAttribPointer(a.position,u,j.FLOAT,D,0,0),u=e.attributes.color,0<=a.color&&u&&(m=u.gc,j.bindBuffer(j.ARRAY_BUFFER,u.buffer),k(a.color),j.vertexAttribPointer(a.color,m,j.FLOAT,D,0,0)),j.drawArrays(j.POINTS,0,i.eg/3),Q.info.B.Od++,Q.info.B.M+=i.eg/3)};this.vl=function(a,b,
c,d,e,f){if(D!==d.visible){var g,h,c=M(a,b,c,d,f),b=c.attributes,a=D,c=16777215*e.id+2*c.id+(d.Q?1:0);c!==N&&(N=c,a=v);a&&l();if(!d.G&&0<=b.position)a&&(j.bindBuffer(j.ARRAY_BUFFER,e.Oa),k(b.position),j.vertexAttribPointer(b.position,3,j.FLOAT,D,0,0));else if(f.il){c=d.pb.attributes;-1!==f.il&&0<=c.position?(j.bindBuffer(j.ARRAY_BUFFER,e.Cf[f.il]),k(c.position),j.vertexAttribPointer(c.position,3,j.FLOAT,D,0,0)):0<=c.position&&(j.bindBuffer(j.ARRAY_BUFFER,e.Oa),k(c.position),j.vertexAttribPointer(c.position,
3,j.FLOAT,D,0,0));if(f.bo.length){var u=0;h=f.bo;for(g=f.Nc;u<d.hh&&u<h.length;)0<=c["morphTarget"+u]&&(j.bindBuffer(j.ARRAY_BUFFER,e.Cf[h[u]]),k(c["morphTarget"+u]),j.vertexAttribPointer(c["morphTarget"+u],3,j.FLOAT,D,0,0)),0<=c["morphNormal"+u]&&d.ka&&(j.bindBuffer(j.ARRAY_BUFFER,e.zg[h[u]]),k(c["morphNormal"+u]),j.vertexAttribPointer(c["morphNormal"+u],3,j.FLOAT,D,0,0)),f.Ag[u]=g[h[u]],u++}else{h=[];g=f.Nc;var i,m=g.length;for(i=0;i<m;i++)u=g[i],0<u&&h.push([u,i]);h.length>d.hh?(h.sort(p),h.length=
d.hh):h.length>d.co?h.sort(p):0===h.length&&h.push([0,0]);for(u=0;u<d.hh;)h[u]?(i=h[u][1],0<=c["morphTarget"+u]&&(j.bindBuffer(j.ARRAY_BUFFER,e.Cf[i]),k(c["morphTarget"+u]),j.vertexAttribPointer(c["morphTarget"+u],3,j.FLOAT,D,0,0)),0<=c["morphNormal"+u]&&d.ka&&(j.bindBuffer(j.ARRAY_BUFFER,e.zg[i]),k(c["morphNormal"+u]),j.vertexAttribPointer(c["morphNormal"+u],3,j.FLOAT,D,0,0)),f.Ag[u]=g[i]):f.Ag[u]=0,u++}w!==d.pb.P.Nc&&j.uniform1fv(d.pb.P.Nc,f.Ag)}if(a){if(e.vb){g=0;for(h=e.vb.length;g<h;g++)c=e.vb[g],
0<=b[c.buffer.ki]&&(j.bindBuffer(j.ARRAY_BUFFER,c.buffer),k(b[c.buffer.ki]),j.vertexAttribPointer(b[c.buffer.ki],c.size,j.FLOAT,D,0,0))}0<=b.color&&(j.bindBuffer(j.ARRAY_BUFFER,e.ub),k(b.color),j.vertexAttribPointer(b.color,3,j.FLOAT,D,0,0));0<=b.r&&(j.bindBuffer(j.ARRAY_BUFFER,e.wd),k(b.r),j.vertexAttribPointer(b.r,3,j.FLOAT,D,0,0));0<=b.Rb&&(j.bindBuffer(j.ARRAY_BUFFER,e.jk),k(b.Rb),j.vertexAttribPointer(b.Rb,4,j.FLOAT,D,0,0));0<=b.sa&&(j.bindBuffer(j.ARRAY_BUFFER,e.lk),k(b.sa),j.vertexAttribPointer(b.sa,
2,j.FLOAT,D,0,0));0<=b.cp&&(j.bindBuffer(j.ARRAY_BUFFER,e.kk),k(b.cp),j.vertexAttribPointer(b.cp,2,j.FLOAT,D,0,0));d.ya&&0<=b.Do&&0<=b.Eo&&(j.bindBuffer(j.ARRAY_BUFFER,e.gk),k(b.Do),j.vertexAttribPointer(b.Do,4,j.FLOAT,D,0,0),j.bindBuffer(j.ARRAY_BUFFER,e.hk),k(b.Eo),j.vertexAttribPointer(b.Eo,4,j.FLOAT,D,0,0));0<=b.Nn&&(j.bindBuffer(j.ARRAY_BUFFER,e.fk),k(b.Nn),j.vertexAttribPointer(b.Nn,1,j.FLOAT,D,0,0))}f instanceof THREE.R?(d.Q?(d=d.pa,d!==Na&&(j.lineWidth(d),Na=d),a&&j.bindBuffer(j.ELEMENT_ARRAY_BUFFER,
e.dk),j.drawElements(j.LINES,e.ek,j.UNSIGNED_SHORT,0)):(a&&j.bindBuffer(j.ELEMENT_ARRAY_BUFFER,e.$j),j.drawElements(j.TRIANGLES,e.ak,j.UNSIGNED_SHORT,0)),Q.info.B.Od++,Q.info.B.f+=e.ak,Q.info.B.m+=e.ak/3):f instanceof THREE.Fa?(f=f.type===THREE.dm?j.LINE_STRIP:j.LINES,d=d.ae,d!==Na&&(j.lineWidth(d),Na=d),j.drawArrays(f,0,e.ek),Q.info.B.Od++):f instanceof THREE.Ib?(j.drawArrays(j.POINTS,0,e.Rm),Q.info.B.Od++,Q.info.B.M+=e.Rm):f instanceof THREE.td&&(j.drawArrays(j.TRIANGLE_STRIP,0,e.Aq),Q.info.B.Od++)}};
this.B=function(a,b,c,d){if(D===b instanceof THREE.Wb)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else{var e,f,g,h,u=a.bc,i=a.A;ca=-1;cc=v;this.uk&&a.Eb();r===b.parent&&b.Eb();b.xa.Ob(b.F);ua.multiply(b.oa,b.xa);Kd(da,ua);this.Wq&&this.$r(a);s(this.so,a,b);Q.info.B.Od=0;Q.info.B.f=0;Q.info.B.m=0;Q.info.B.M=0;this.gj(c);(this.tk||d)&&this.clear(this.Rq,this.Sq,this.Tq);h=a.cc;d=0;for(e=h.length;d<e;d++)if(f=h[d],g=f.object,f.B=D,g.visible&&(!(g instanceof
THREE.R||g instanceof THREE.Ib)||!g.Se||da.contains(g))){K(g,b);var k=f,l=k.buffer,p=r,t=r,t=k.object.q;if(t instanceof THREE.Hb)p=l.va,p=t.ja[p],p.za?(k.za=p,k.af=w):(k.af=p,k.za=w);else if(p=t)p.za?(k.za=p,k.af=w):(k.af=p,k.za=w);f.B=v;v===this.qj&&(w!==g.fd?f.a=g.fd:(Cb.copy(od(g.F)),ua.aa(Cb),f.a=Cb.a),f.id=g.id)}this.qj&&h.sort(m);h=a.Kd;d=0;for(e=h.length;d<e;d++)f=h[d],g=f.object,g.visible&&(K(g,b),g=f.object.q,g.za?(f.za=g,f.af=w):(f.af=g,f.za=w));a.ho?(d=a.ho,this.ig(d.kb,d.blendEquation,
d.Oe,d.Ne),this.df(d.rc),this.oh(d.Bd),O(d.polygonOffset,d.jh,d.kh),q(a.cc,D,"",b,u,i,v,d),n(a.Kd,"",b,u,i,D,d)):(d=w,this.ig(THREE.im),q(a.cc,v,"opaque",b,u,i,D,d),n(a.Kd,"opaque",b,u,i,D,d),q(a.cc,D,"transparent",b,u,i,v,d),n(a.Kd,"transparent",b,u,i,v,d));s(this.ro,a,b);c&&c.fb&&(c.gb!==THREE.qg&&c.gb!==THREE.Gd)&&(c instanceof THREE.Ge?(j.bindTexture(j.TEXTURE_CUBE_MAP,c.dc),j.generateMipmap(j.TEXTURE_CUBE_MAP),j.bindTexture(j.TEXTURE_CUBE_MAP,w)):(j.bindTexture(j.TEXTURE_2D,c.dc),j.generateMipmap(j.TEXTURE_2D),
j.bindTexture(j.TEXTURE_2D,w)));this.df(v);this.oh(v)}};this.xl=function(a,b,c,d,e){var f=M(a,b,c,d,e);N=-1;Q.Bl(d);e.Rk?e.Rk(f,j,da):e.B(function(a){Q.ot(a,f,d)})};this.$r=function(a){for(a.cc||(a.cc=[],a.Kd=[],a.ik=[],a.bk=[]);a.Af.length;){var b=a.Af[0],u=a,k=r,l=r,m=r,n=r;if(!b.He)if(b.He=v,b.Ic=new THREE.D,b.ei=new THREE.ye,b instanceof THREE.R)if(l=b.t,m=b.q,l instanceof THREE.I){if(r===l.Va){var da=l,s=r,q=r,C=r,B=r,F=r,G=r,H={},J=da.G.length,K=da.ka.length,N=m instanceof THREE.Hb;da.Va={};
s=0;for(q=da.m.length;s<q;s++)C=da.m[s],B=N?C.va:0,r===H[B]&&(H[B]={hash:B,vi:0}),G=H[B].hash+"_"+H[B].vi,r===da.Va[G]&&(da.Va[G]={Di:[],Ei:[],va:B,f:0,$e:J,Ze:K}),F=C instanceof THREE.O?3:4,65535<da.Va[G].f+F&&(H[B].vi+=1,G=H[B].hash+"_"+H[B].vi,r===da.Va[G]&&(da.Va[G]={Di:[],Ei:[],va:B,f:0,$e:J,Ze:K})),C instanceof THREE.O?da.Va[G].Di.push(s):da.Va[G].Ei.push(s),da.Va[G].f+=F;da.Ok=[];var cc=r;for(cc in da.Va)da.Va[cc].id=La++,da.Ok.push(da.Va[cc])}for(k in l.Va)if(n=l.Va[k],!n.Oa){var Da=n;Da.Oa=
j.createBuffer();Da.wd=j.createBuffer();Da.jk=j.createBuffer();Da.ub=j.createBuffer();Da.lk=j.createBuffer();Da.kk=j.createBuffer();Da.gk=j.createBuffer();Da.hk=j.createBuffer();Da.$j=j.createBuffer();Da.dk=j.createBuffer();var S=r,M=r;if(Da.$e){Da.Cf=[];S=0;for(M=Da.$e;S<M;S++)Da.Cf.push(j.createBuffer())}if(Da.Ze){Da.zg=[];S=0;for(M=Da.Ze;S<M;S++)Da.zg.push(j.createBuffer())}Q.info.memory.Z++;d(n,b);l.ta=v;l.jl=v;l.Pe=v;l.of=v;l.hc=v;l.pe=v;l.Ha=v}}else l instanceof THREE.qd&&h(l);else if(b instanceof
THREE.td){if(l=b.t,!l.Oa){var T=l;T.Oa=j.createBuffer();T.ub=j.createBuffer();T.wd=j.createBuffer();Q.info.memory.Z++;var O=l,P=b,X=O.f.length;O.Jd=new Float32Array(3*X);O.Hd=new Float32Array(3*X);O.$h=new Float32Array(3*X);O.Aq=X;c(O,P);l.ta=v;l.Ha=v;l.hc=v}}else if(b instanceof THREE.Fa){if(l=b.t,!l.Oa){var R=l;R.Oa=j.createBuffer();R.ub=j.createBuffer();R.fk=j.createBuffer();Q.info.memory.Z++;var zb=l,V=b,ob=zb.f.length;zb.Jd=new Float32Array(3*ob);zb.Hd=new Float32Array(3*ob);zb.rq=new Float32Array(1*
ob);zb.ek=ob;c(zb,V);l.ta=v;l.Ha=v;l.Ri=v}}else if(b instanceof THREE.Ib&&(l=b.t,!l.Oa))if(l instanceof THREE.I){var ga=l;ga.Oa=j.createBuffer();ga.ub=j.createBuffer();Q.info.memory.Z++;var U=l,ca=b,ja=U.f.length;U.Jd=new Float32Array(3*ja);U.Hd=new Float32Array(3*ja);U.wq=[];U.Rm=ja;c(U,ca);l.ta=v;l.Ha=v}else l instanceof THREE.qd&&h(l);if(!b.Qm){if(b instanceof THREE.R)if(l=b.t,l instanceof THREE.qd)t(u.cc,l,b);else for(k in l.Va)n=l.Va[k],t(u.cc,n,b);else b instanceof THREE.td||b instanceof THREE.Fa||
b instanceof THREE.Ib?(l=b.t,t(u.cc,l,b)):b instanceof THREE.Ej||b.Rk?u.Kd.push({object:b,af:w,za:w}):b instanceof THREE.Ee?u.ik.push(b):b instanceof THREE.Rh&&u.bk.push(b);b.Qm=v}a.Af.splice(0,1)}for(;a.Bf.length;){var W=a.Bf[0],Hc=a;W instanceof THREE.R||W instanceof THREE.Ib||W instanceof THREE.td||W instanceof THREE.Fa?E(Hc.cc,W):W instanceof THREE.Ee?y(Hc.ik,W):W instanceof THREE.Rh?y(Hc.bk,W):(W instanceof THREE.Ej||W.Rk)&&E(Hc.Kd,W);W.Qm=D;a.Bf.splice(0,1)}for(var fa=0,ia=a.cc.length;fa<ia;fa++){var Db=
a.cc[fa].object,Y=Db.t,ha=r,ka=r,jb=r;if(Db instanceof THREE.R)if(Y instanceof THREE.qd)(Y.ta||Y.Pe||Y.of||Y.hc||Y.Ha||Y.pe)&&i(Y,j.DYNAMIC_DRAW,!Y.zi),Y.ta=D,Y.Pe=D,Y.of=D,Y.hc=D,Y.Ha=D,Y.pe=D;else{for(var ra=0,za=Y.Ok.length;ra<za;ra++)if(ha=Y.Ok[ra],jb=e(Db,ha),Y.en&&d(ha,Db),ka=jb.attributes&&x(jb),Y.ta||Y.jl||Y.Pe||Y.of||Y.hc||Y.Ha||Y.pe||ka){var Ea=ha,Oa=Db,qa=j.DYNAMIC_DRAW,Ba=!Y.zi,sa=jb;if(Ea.Hm){var Ca=f(sa),Ia=sa.n?sa.n:D,Xc=g(sa),Ha=Ca===THREE.Gc,I=r,ea=r,Ga=r,Z=r,Ma=r,Na=r,Lb=r,gb=r,
Xa=r,ib=r,dc=r,$=r,aa=r,ba=r,Fa=r,bb=r,hb=r,db=r,ub=r,nb=r,ec=r,fc=r,Ib=r,gc=r,hc=r,ic=r,Jb=r,jc=r,kc=r,lc=r,Yc=r,mc=r,nc=r,oc=r,Zc=r,Pa=r,te=r,Cc=r,Pc=r,Qc=r,pb=r,ue=r,kb=r,lb=r,Dc=r,vc=r,cb=0,fb=0,wc=0,xc=0,Sb=0,vb=0,Sa=0,Ab=0,eb=0,na=0,ta=0,A=0,Qa=r,qb=Ea.Jd,$c=Ea.Pm,ad=Ea.Om,Tb=Ea.$h,Ya=Ea.Nm,rb=Ea.Hd,Za=Ea.Lm,$a=Ea.Mm,Od=Ea.Km,Pd=Ea.Jm,Qd=Ea.vb,z=r,pc=Ea.Gm,Mb=Ea.Im,Eb=Oa.t,We=Eb.Pe,ve=Eb.of,Xe=Eb.hc,Ye=Eb.pe,Ze=Eb.Ha,$e=Eb.jl,Ic=Eb.f,Ja=Ea.Di,Ka=Ea.Ei,wb=Eb.m,Rd=Eb.C[0],Sd=Eb.C[1],Jc=Eb.me,
Ec=Eb.ne,Fc=Eb.G,rd=Eb.ka;if(Eb.ta){I=0;for(ea=Ja.length;I<ea;I++)Z=wb[Ja[I]],$=Ic[Z.p],aa=Ic[Z.c],ba=Ic[Z.s],qb[fb]=$.x,qb[fb+1]=$.y,qb[fb+2]=$.a,qb[fb+3]=aa.x,qb[fb+4]=aa.y,qb[fb+5]=aa.a,qb[fb+6]=ba.x,qb[fb+7]=ba.y,qb[fb+8]=ba.a,fb+=9;I=0;for(ea=Ka.length;I<ea;I++)Z=wb[Ka[I]],$=Ic[Z.p],aa=Ic[Z.c],ba=Ic[Z.s],Fa=Ic[Z.S],qb[fb]=$.x,qb[fb+1]=$.y,qb[fb+2]=$.a,qb[fb+3]=aa.x,qb[fb+4]=aa.y,qb[fb+5]=aa.a,qb[fb+6]=ba.x,qb[fb+7]=ba.y,qb[fb+8]=ba.a,qb[fb+9]=Fa.x,qb[fb+10]=Fa.y,qb[fb+11]=Fa.a,fb+=12;j.bindBuffer(j.ARRAY_BUFFER,
Ea.Oa);j.bufferData(j.ARRAY_BUFFER,qb,qa)}if($e){pb=0;for(ue=Fc.length;pb<ue;pb++){I=ta=0;for(ea=Ja.length;I<ea;I++)Dc=Ja[I],Z=wb[Dc],$=Fc[pb].f[Z.p],aa=Fc[pb].f[Z.c],ba=Fc[pb].f[Z.s],kb=Od[pb],kb[ta]=$.x,kb[ta+1]=$.y,kb[ta+2]=$.a,kb[ta+3]=aa.x,kb[ta+4]=aa.y,kb[ta+5]=aa.a,kb[ta+6]=ba.x,kb[ta+7]=ba.y,kb[ta+8]=ba.a,sa.ka&&(Ha?(vc=rd[pb].o[Dc],nb=vc.p,ec=vc.c,fc=vc.s):fc=ec=nb=rd[pb].Bi[Dc],lb=Pd[pb],lb[ta]=nb.x,lb[ta+1]=nb.y,lb[ta+2]=nb.a,lb[ta+3]=ec.x,lb[ta+4]=ec.y,lb[ta+5]=ec.a,lb[ta+6]=fc.x,lb[ta+
7]=fc.y,lb[ta+8]=fc.a),ta+=9;I=0;for(ea=Ka.length;I<ea;I++)Dc=Ka[I],Z=wb[Dc],$=Fc[pb].f[Z.p],aa=Fc[pb].f[Z.c],ba=Fc[pb].f[Z.s],Fa=Fc[pb].f[Z.S],kb=Od[pb],kb[ta]=$.x,kb[ta+1]=$.y,kb[ta+2]=$.a,kb[ta+3]=aa.x,kb[ta+4]=aa.y,kb[ta+5]=aa.a,kb[ta+6]=ba.x,kb[ta+7]=ba.y,kb[ta+8]=ba.a,kb[ta+9]=Fa.x,kb[ta+10]=Fa.y,kb[ta+11]=Fa.a,sa.ka&&(Ha?(vc=rd[pb].o[Dc],nb=vc.p,ec=vc.c,fc=vc.s,Ib=vc.S):Ib=fc=ec=nb=rd[pb].Bi[Dc],lb=Pd[pb],lb[ta]=nb.x,lb[ta+1]=nb.y,lb[ta+2]=nb.a,lb[ta+3]=ec.x,lb[ta+4]=ec.y,lb[ta+5]=ec.a,lb[ta+
6]=fc.x,lb[ta+7]=fc.y,lb[ta+8]=fc.a,lb[ta+9]=Ib.x,lb[ta+10]=Ib.y,lb[ta+11]=Ib.a),ta+=12;j.bindBuffer(j.ARRAY_BUFFER,Ea.Cf[pb]);j.bufferData(j.ARRAY_BUFFER,Od[pb],qa);sa.ka&&(j.bindBuffer(j.ARRAY_BUFFER,Ea.zg[pb]),j.bufferData(j.ARRAY_BUFFER,Pd[pb],qa))}}if(Ec.length){I=0;for(ea=Ja.length;I<ea;I++)Z=wb[Ja[I]],jc=Ec[Z.p],kc=Ec[Z.c],lc=Ec[Z.s],$a[na]=jc.x,$a[na+1]=jc.y,$a[na+2]=jc.a,$a[na+3]=jc.k,$a[na+4]=kc.x,$a[na+5]=kc.y,$a[na+6]=kc.a,$a[na+7]=kc.k,$a[na+8]=lc.x,$a[na+9]=lc.y,$a[na+10]=lc.a,$a[na+
11]=lc.k,mc=Jc[Z.p],nc=Jc[Z.c],oc=Jc[Z.s],Za[na]=mc.x,Za[na+1]=mc.y,Za[na+2]=mc.a,Za[na+3]=mc.k,Za[na+4]=nc.x,Za[na+5]=nc.y,Za[na+6]=nc.a,Za[na+7]=nc.k,Za[na+8]=oc.x,Za[na+9]=oc.y,Za[na+10]=oc.a,Za[na+11]=oc.k,na+=12;I=0;for(ea=Ka.length;I<ea;I++)Z=wb[Ka[I]],jc=Ec[Z.p],kc=Ec[Z.c],lc=Ec[Z.s],Yc=Ec[Z.S],$a[na]=jc.x,$a[na+1]=jc.y,$a[na+2]=jc.a,$a[na+3]=jc.k,$a[na+4]=kc.x,$a[na+5]=kc.y,$a[na+6]=kc.a,$a[na+7]=kc.k,$a[na+8]=lc.x,$a[na+9]=lc.y,$a[na+10]=lc.a,$a[na+11]=lc.k,$a[na+12]=Yc.x,$a[na+13]=Yc.y,
$a[na+14]=Yc.a,$a[na+15]=Yc.k,mc=Jc[Z.p],nc=Jc[Z.c],oc=Jc[Z.s],Zc=Jc[Z.S],Za[na]=mc.x,Za[na+1]=mc.y,Za[na+2]=mc.a,Za[na+3]=mc.k,Za[na+4]=nc.x,Za[na+5]=nc.y,Za[na+6]=nc.a,Za[na+7]=nc.k,Za[na+8]=oc.x,Za[na+9]=oc.y,Za[na+10]=oc.a,Za[na+11]=oc.k,Za[na+12]=Zc.x,Za[na+13]=Zc.y,Za[na+14]=Zc.a,Za[na+15]=Zc.k,na+=16;0<na&&(j.bindBuffer(j.ARRAY_BUFFER,Ea.gk),j.bufferData(j.ARRAY_BUFFER,Za,qa),j.bindBuffer(j.ARRAY_BUFFER,Ea.hk),j.bufferData(j.ARRAY_BUFFER,$a,qa))}if(Ze&&Ia){I=0;for(ea=Ja.length;I<ea;I++)Z=wb[Ja[I]],
Lb=Z.n,gb=Z.color,3===Lb.length&&Ia===THREE.wg?(gc=Lb[0],hc=Lb[1],ic=Lb[2]):ic=hc=gc=gb,rb[eb]=gc.h,rb[eb+1]=gc.g,rb[eb+2]=gc.c,rb[eb+3]=hc.h,rb[eb+4]=hc.g,rb[eb+5]=hc.c,rb[eb+6]=ic.h,rb[eb+7]=ic.g,rb[eb+8]=ic.c,eb+=9;I=0;for(ea=Ka.length;I<ea;I++)Z=wb[Ka[I]],Lb=Z.n,gb=Z.color,4===Lb.length&&Ia===THREE.wg?(gc=Lb[0],hc=Lb[1],ic=Lb[2],Jb=Lb[3]):Jb=ic=hc=gc=gb,rb[eb]=gc.h,rb[eb+1]=gc.g,rb[eb+2]=gc.c,rb[eb+3]=hc.h,rb[eb+4]=hc.g,rb[eb+5]=hc.c,rb[eb+6]=ic.h,rb[eb+7]=ic.g,rb[eb+8]=ic.c,rb[eb+9]=Jb.h,rb[eb+
10]=Jb.g,rb[eb+11]=Jb.c,eb+=12;0<eb&&(j.bindBuffer(j.ARRAY_BUFFER,Ea.ub),j.bufferData(j.ARRAY_BUFFER,rb,qa))}if(Ye&&Eb.$f){I=0;for(ea=Ja.length;I<ea;I++)Z=wb[Ja[I]],Xa=Z.md,bb=Xa[0],hb=Xa[1],db=Xa[2],Ya[Sa]=bb.x,Ya[Sa+1]=bb.y,Ya[Sa+2]=bb.a,Ya[Sa+3]=bb.k,Ya[Sa+4]=hb.x,Ya[Sa+5]=hb.y,Ya[Sa+6]=hb.a,Ya[Sa+7]=hb.k,Ya[Sa+8]=db.x,Ya[Sa+9]=db.y,Ya[Sa+10]=db.a,Ya[Sa+11]=db.k,Sa+=12;I=0;for(ea=Ka.length;I<ea;I++)Z=wb[Ka[I]],Xa=Z.md,bb=Xa[0],hb=Xa[1],db=Xa[2],ub=Xa[3],Ya[Sa]=bb.x,Ya[Sa+1]=bb.y,Ya[Sa+2]=bb.a,
Ya[Sa+3]=bb.k,Ya[Sa+4]=hb.x,Ya[Sa+5]=hb.y,Ya[Sa+6]=hb.a,Ya[Sa+7]=hb.k,Ya[Sa+8]=db.x,Ya[Sa+9]=db.y,Ya[Sa+10]=db.a,Ya[Sa+11]=db.k,Ya[Sa+12]=ub.x,Ya[Sa+13]=ub.y,Ya[Sa+14]=ub.a,Ya[Sa+15]=ub.k,Sa+=16;j.bindBuffer(j.ARRAY_BUFFER,Ea.jk);j.bufferData(j.ARRAY_BUFFER,Ya,qa)}if(Xe&&Ca){I=0;for(ea=Ja.length;I<ea;I++)if(Z=wb[Ja[I]],Ma=Z.o,Na=Z.r,3===Ma.length&&Ha)for(Pa=0;3>Pa;Pa++)Cc=Ma[Pa],Tb[vb]=Cc.x,Tb[vb+1]=Cc.y,Tb[vb+2]=Cc.a,vb+=3;else for(Pa=0;3>Pa;Pa++)Tb[vb]=Na.x,Tb[vb+1]=Na.y,Tb[vb+2]=Na.a,vb+=3;I=0;
for(ea=Ka.length;I<ea;I++)if(Z=wb[Ka[I]],Ma=Z.o,Na=Z.r,4===Ma.length&&Ha)for(Pa=0;4>Pa;Pa++)Cc=Ma[Pa],Tb[vb]=Cc.x,Tb[vb+1]=Cc.y,Tb[vb+2]=Cc.a,vb+=3;else for(Pa=0;4>Pa;Pa++)Tb[vb]=Na.x,Tb[vb+1]=Na.y,Tb[vb+2]=Na.a,vb+=3;j.bindBuffer(j.ARRAY_BUFFER,Ea.wd);j.bufferData(j.ARRAY_BUFFER,Tb,qa)}if(ve&&Rd&&Xc){I=0;for(ea=Ja.length;I<ea;I++)if(Ga=Ja[I],ib=Rd[Ga],r!==ib)for(Pa=0;3>Pa;Pa++)Pc=ib[Pa],$c[wc]=Pc.x,$c[wc+1]=Pc.y,wc+=2;I=0;for(ea=Ka.length;I<ea;I++)if(Ga=Ka[I],ib=Rd[Ga],r!==ib)for(Pa=0;4>Pa;Pa++)Pc=
ib[Pa],$c[wc]=Pc.x,$c[wc+1]=Pc.y,wc+=2;0<wc&&(j.bindBuffer(j.ARRAY_BUFFER,Ea.lk),j.bufferData(j.ARRAY_BUFFER,$c,qa))}if(ve&&Sd&&Xc){I=0;for(ea=Ja.length;I<ea;I++)if(Ga=Ja[I],dc=Sd[Ga],r!==dc)for(Pa=0;3>Pa;Pa++)Qc=dc[Pa],ad[xc]=Qc.x,ad[xc+1]=Qc.y,xc+=2;I=0;for(ea=Ka.length;I<ea;I++)if(Ga=Ka[I],dc=Sd[Ga],r!==dc)for(Pa=0;4>Pa;Pa++)Qc=dc[Pa],ad[xc]=Qc.x,ad[xc+1]=Qc.y,xc+=2;0<xc&&(j.bindBuffer(j.ARRAY_BUFFER,Ea.kk),j.bufferData(j.ARRAY_BUFFER,ad,qa))}if(We){I=0;for(ea=Ja.length;I<ea;I++)pc[Sb]=cb,pc[Sb+
1]=cb+1,pc[Sb+2]=cb+2,Sb+=3,Mb[Ab]=cb,Mb[Ab+1]=cb+1,Mb[Ab+2]=cb,Mb[Ab+3]=cb+2,Mb[Ab+4]=cb+1,Mb[Ab+5]=cb+2,Ab+=6,cb+=3;I=0;for(ea=Ka.length;I<ea;I++)pc[Sb]=cb,pc[Sb+1]=cb+1,pc[Sb+2]=cb+3,pc[Sb+3]=cb+1,pc[Sb+4]=cb+2,pc[Sb+5]=cb+3,Sb+=6,Mb[Ab]=cb,Mb[Ab+1]=cb+1,Mb[Ab+2]=cb,Mb[Ab+3]=cb+3,Mb[Ab+4]=cb+1,Mb[Ab+5]=cb+2,Mb[Ab+6]=cb+2,Mb[Ab+7]=cb+3,Ab+=8,cb+=4;j.bindBuffer(j.ELEMENT_ARRAY_BUFFER,Ea.$j);j.bufferData(j.ELEMENT_ARRAY_BUFFER,pc,qa);j.bindBuffer(j.ELEMENT_ARRAY_BUFFER,Ea.dk);j.bufferData(j.ELEMENT_ARRAY_BUFFER,
Mb,qa)}if(Qd){Pa=0;for(te=Qd.length;Pa<te;Pa++)if(z=Qd[Pa],z.uq.ga){A=0;if(1===z.size)if(r===z.Ga||"vertices"===z.Ga){I=0;for(ea=Ja.length;I<ea;I++)Z=wb[Ja[I]],z.b[A]=z.value[Z.p],z.b[A+1]=z.value[Z.c],z.b[A+2]=z.value[Z.s],A+=3;I=0;for(ea=Ka.length;I<ea;I++)Z=wb[Ka[I]],z.b[A]=z.value[Z.p],z.b[A+1]=z.value[Z.c],z.b[A+2]=z.value[Z.s],z.b[A+3]=z.value[Z.S],A+=4}else{if("faces"===z.Ga){I=0;for(ea=Ja.length;I<ea;I++)Qa=z.value[Ja[I]],z.b[A]=Qa,z.b[A+1]=Qa,z.b[A+2]=Qa,A+=3;I=0;for(ea=Ka.length;I<ea;I++)Qa=
z.value[Ka[I]],z.b[A]=Qa,z.b[A+1]=Qa,z.b[A+2]=Qa,z.b[A+3]=Qa,A+=4}}else if(2===z.size)if(r===z.Ga||"vertices"===z.Ga){I=0;for(ea=Ja.length;I<ea;I++)Z=wb[Ja[I]],$=z.value[Z.p],aa=z.value[Z.c],ba=z.value[Z.s],z.b[A]=$.x,z.b[A+1]=$.y,z.b[A+2]=aa.x,z.b[A+3]=aa.y,z.b[A+4]=ba.x,z.b[A+5]=ba.y,A+=6;I=0;for(ea=Ka.length;I<ea;I++)Z=wb[Ka[I]],$=z.value[Z.p],aa=z.value[Z.c],ba=z.value[Z.s],Fa=z.value[Z.S],z.b[A]=$.x,z.b[A+1]=$.y,z.b[A+2]=aa.x,z.b[A+3]=aa.y,z.b[A+4]=ba.x,z.b[A+5]=ba.y,z.b[A+6]=Fa.x,z.b[A+7]=Fa.y,
A+=8}else{if("faces"===z.Ga){I=0;for(ea=Ja.length;I<ea;I++)ba=aa=$=Qa=z.value[Ja[I]],z.b[A]=$.x,z.b[A+1]=$.y,z.b[A+2]=aa.x,z.b[A+3]=aa.y,z.b[A+4]=ba.x,z.b[A+5]=ba.y,A+=6;I=0;for(ea=Ka.length;I<ea;I++)Fa=ba=aa=$=Qa=z.value[Ka[I]],z.b[A]=$.x,z.b[A+1]=$.y,z.b[A+2]=aa.x,z.b[A+3]=aa.y,z.b[A+4]=ba.x,z.b[A+5]=ba.y,z.b[A+6]=Fa.x,z.b[A+7]=Fa.y,A+=8}}else if(3===z.size){var ma;ma="c"===z.type?["r","g","b"]:["x","y","z"];if(r===z.Ga||"vertices"===z.Ga){I=0;for(ea=Ja.length;I<ea;I++)Z=wb[Ja[I]],$=z.value[Z.p],
aa=z.value[Z.c],ba=z.value[Z.s],z.b[A]=$[ma[0]],z.b[A+1]=$[ma[1]],z.b[A+2]=$[ma[2]],z.b[A+3]=aa[ma[0]],z.b[A+4]=aa[ma[1]],z.b[A+5]=aa[ma[2]],z.b[A+6]=ba[ma[0]],z.b[A+7]=ba[ma[1]],z.b[A+8]=ba[ma[2]],A+=9;I=0;for(ea=Ka.length;I<ea;I++)Z=wb[Ka[I]],$=z.value[Z.p],aa=z.value[Z.c],ba=z.value[Z.s],Fa=z.value[Z.S],z.b[A]=$[ma[0]],z.b[A+1]=$[ma[1]],z.b[A+2]=$[ma[2]],z.b[A+3]=aa[ma[0]],z.b[A+4]=aa[ma[1]],z.b[A+5]=aa[ma[2]],z.b[A+6]=ba[ma[0]],z.b[A+7]=ba[ma[1]],z.b[A+8]=ba[ma[2]],z.b[A+9]=Fa[ma[0]],z.b[A+10]=
Fa[ma[1]],z.b[A+11]=Fa[ma[2]],A+=12}else if("faces"===z.Ga){I=0;for(ea=Ja.length;I<ea;I++)ba=aa=$=Qa=z.value[Ja[I]],z.b[A]=$[ma[0]],z.b[A+1]=$[ma[1]],z.b[A+2]=$[ma[2]],z.b[A+3]=aa[ma[0]],z.b[A+4]=aa[ma[1]],z.b[A+5]=aa[ma[2]],z.b[A+6]=ba[ma[0]],z.b[A+7]=ba[ma[1]],z.b[A+8]=ba[ma[2]],A+=9;I=0;for(ea=Ka.length;I<ea;I++)Fa=ba=aa=$=Qa=z.value[Ka[I]],z.b[A]=$[ma[0]],z.b[A+1]=$[ma[1]],z.b[A+2]=$[ma[2]],z.b[A+3]=aa[ma[0]],z.b[A+4]=aa[ma[1]],z.b[A+5]=aa[ma[2]],z.b[A+6]=ba[ma[0]],z.b[A+7]=ba[ma[1]],z.b[A+8]=
ba[ma[2]],z.b[A+9]=Fa[ma[0]],z.b[A+10]=Fa[ma[1]],z.b[A+11]=Fa[ma[2]],A+=12}else if("faceVertices"===z.Ga){I=0;for(ea=Ja.length;I<ea;I++)Qa=z.value[Ja[I]],$=Qa[0],aa=Qa[1],ba=Qa[2],z.b[A]=$[ma[0]],z.b[A+1]=$[ma[1]],z.b[A+2]=$[ma[2]],z.b[A+3]=aa[ma[0]],z.b[A+4]=aa[ma[1]],z.b[A+5]=aa[ma[2]],z.b[A+6]=ba[ma[0]],z.b[A+7]=ba[ma[1]],z.b[A+8]=ba[ma[2]],A+=9;I=0;for(ea=Ka.length;I<ea;I++)Qa=z.value[Ka[I]],$=Qa[0],aa=Qa[1],ba=Qa[2],Fa=Qa[3],z.b[A]=$[ma[0]],z.b[A+1]=$[ma[1]],z.b[A+2]=$[ma[2]],z.b[A+3]=aa[ma[0]],
z.b[A+4]=aa[ma[1]],z.b[A+5]=aa[ma[2]],z.b[A+6]=ba[ma[0]],z.b[A+7]=ba[ma[1]],z.b[A+8]=ba[ma[2]],z.b[A+9]=Fa[ma[0]],z.b[A+10]=Fa[ma[1]],z.b[A+11]=Fa[ma[2]],A+=12}}else if(4===z.size)if(r===z.Ga||"vertices"===z.Ga){I=0;for(ea=Ja.length;I<ea;I++)Z=wb[Ja[I]],$=z.value[Z.p],aa=z.value[Z.c],ba=z.value[Z.s],z.b[A]=$.x,z.b[A+1]=$.y,z.b[A+2]=$.a,z.b[A+3]=$.k,z.b[A+4]=aa.x,z.b[A+5]=aa.y,z.b[A+6]=aa.a,z.b[A+7]=aa.k,z.b[A+8]=ba.x,z.b[A+9]=ba.y,z.b[A+10]=ba.a,z.b[A+11]=ba.k,A+=12;I=0;for(ea=Ka.length;I<ea;I++)Z=
wb[Ka[I]],$=z.value[Z.p],aa=z.value[Z.c],ba=z.value[Z.s],Fa=z.value[Z.S],z.b[A]=$.x,z.b[A+1]=$.y,z.b[A+2]=$.a,z.b[A+3]=$.k,z.b[A+4]=aa.x,z.b[A+5]=aa.y,z.b[A+6]=aa.a,z.b[A+7]=aa.k,z.b[A+8]=ba.x,z.b[A+9]=ba.y,z.b[A+10]=ba.a,z.b[A+11]=ba.k,z.b[A+12]=Fa.x,z.b[A+13]=Fa.y,z.b[A+14]=Fa.a,z.b[A+15]=Fa.k,A+=16}else if("faces"===z.Ga){I=0;for(ea=Ja.length;I<ea;I++)ba=aa=$=Qa=z.value[Ja[I]],z.b[A]=$.x,z.b[A+1]=$.y,z.b[A+2]=$.a,z.b[A+3]=$.k,z.b[A+4]=aa.x,z.b[A+5]=aa.y,z.b[A+6]=aa.a,z.b[A+7]=aa.k,z.b[A+8]=ba.x,
z.b[A+9]=ba.y,z.b[A+10]=ba.a,z.b[A+11]=ba.k,A+=12;I=0;for(ea=Ka.length;I<ea;I++)Fa=ba=aa=$=Qa=z.value[Ka[I]],z.b[A]=$.x,z.b[A+1]=$.y,z.b[A+2]=$.a,z.b[A+3]=$.k,z.b[A+4]=aa.x,z.b[A+5]=aa.y,z.b[A+6]=aa.a,z.b[A+7]=aa.k,z.b[A+8]=ba.x,z.b[A+9]=ba.y,z.b[A+10]=ba.a,z.b[A+11]=ba.k,z.b[A+12]=Fa.x,z.b[A+13]=Fa.y,z.b[A+14]=Fa.a,z.b[A+15]=Fa.k,A+=16}else if("faceVertices"===z.Ga){I=0;for(ea=Ja.length;I<ea;I++)Qa=z.value[Ja[I]],$=Qa[0],aa=Qa[1],ba=Qa[2],z.b[A]=$.x,z.b[A+1]=$.y,z.b[A+2]=$.a,z.b[A+3]=$.k,z.b[A+4]=
aa.x,z.b[A+5]=aa.y,z.b[A+6]=aa.a,z.b[A+7]=aa.k,z.b[A+8]=ba.x,z.b[A+9]=ba.y,z.b[A+10]=ba.a,z.b[A+11]=ba.k,A+=12;I=0;for(ea=Ka.length;I<ea;I++)Qa=z.value[Ka[I]],$=Qa[0],aa=Qa[1],ba=Qa[2],Fa=Qa[3],z.b[A]=$.x,z.b[A+1]=$.y,z.b[A+2]=$.a,z.b[A+3]=$.k,z.b[A+4]=aa.x,z.b[A+5]=aa.y,z.b[A+6]=aa.a,z.b[A+7]=aa.k,z.b[A+8]=ba.x,z.b[A+9]=ba.y,z.b[A+10]=ba.a,z.b[A+11]=ba.k,z.b[A+12]=Fa.x,z.b[A+13]=Fa.y,z.b[A+14]=Fa.a,z.b[A+15]=Fa.k,A+=16}j.bindBuffer(j.ARRAY_BUFFER,z.buffer);j.bufferData(j.ARRAY_BUFFER,z.b,qa)}}Ba&&
(delete Ea.Hm,delete Ea.Hd,delete Ea.$h,delete Ea.Nm,delete Ea.Pm,delete Ea.Om,delete Ea.Gm,delete Ea.Jd,delete Ea.Im,delete Ea.Lm,delete Ea.Mm)}}Y.ta=D;Y.jl=D;Y.Pe=D;Y.of=D;Y.hc=D;Y.Ha=D;Y.pe=D;Y.en=D;jb.attributes&&L(jb)}else if(Db instanceof THREE.td){jb=e(Db,Y);ka=jb.attributes&&x(jb);if(Y.ta||Y.Ha||Y.hc||ka){var Ub=Y,sd=j.DYNAMIC_DRAW,bd=r,cd=r,dd=r,td=r,Ra=r,ud=r,vd=r,wd=r,we=r,sb=r,Rc=r,Va=r,Fb=r,xe=Ub.f,ye=Ub.Xa,ze=Ub.Ye,af=xe.length,bf=ye.length,cf=ze.length,xd=Ub.Jd,yd=Ub.Hd,zd=Ub.$h,df=
Ub.Ha,ef=Ub.hc,Td=Ub.vb;if(Ub.ta){for(bd=0;bd<af;bd++)td=xe[bd],Ra=3*bd,xd[Ra]=td.x,xd[Ra+1]=td.y,xd[Ra+2]=td.a;j.bindBuffer(j.ARRAY_BUFFER,Ub.Oa);j.bufferData(j.ARRAY_BUFFER,xd,sd)}if(df){for(cd=0;cd<bf;cd++)ud=ye[cd],Ra=3*cd,yd[Ra]=ud.h,yd[Ra+1]=ud.g,yd[Ra+2]=ud.c;j.bindBuffer(j.ARRAY_BUFFER,Ub.ub);j.bufferData(j.ARRAY_BUFFER,yd,sd)}if(ef){for(dd=0;dd<cf;dd++)vd=ze[dd],Ra=3*dd,zd[Ra]=vd.x,zd[Ra+1]=vd.y,zd[Ra+2]=vd.a;j.bindBuffer(j.ARRAY_BUFFER,Ub.wd);j.bufferData(j.ARRAY_BUFFER,zd,sd)}if(Td){wd=
0;for(we=Td.length;wd<we;wd++)if(Va=Td[wd],Va.ga&&(r===Va.Ga||"vertices"===Va.Ga)){Ra=0;Rc=Va.value.length;if(1===Va.size)for(sb=0;sb<Rc;sb++)Va.b[sb]=Va.value[sb];else if(2===Va.size)for(sb=0;sb<Rc;sb++)Fb=Va.value[sb],Va.b[Ra]=Fb.x,Va.b[Ra+1]=Fb.y,Ra+=2;else if(3===Va.size)if("c"===Va.type)for(sb=0;sb<Rc;sb++)Fb=Va.value[sb],Va.b[Ra]=Fb.h,Va.b[Ra+1]=Fb.g,Va.b[Ra+2]=Fb.c,Ra+=3;else for(sb=0;sb<Rc;sb++)Fb=Va.value[sb],Va.b[Ra]=Fb.x,Va.b[Ra+1]=Fb.y,Va.b[Ra+2]=Fb.a,Ra+=3;else if(4===Va.size)for(sb=
0;sb<Rc;sb++)Fb=Va.value[sb],Va.b[Ra]=Fb.x,Va.b[Ra+1]=Fb.y,Va.b[Ra+2]=Fb.a,Va.b[Ra+3]=Fb.k,Ra+=4;j.bindBuffer(j.ARRAY_BUFFER,Va.buffer);j.bufferData(j.ARRAY_BUFFER,Va.b,sd)}}}Y.ta=D;Y.Ha=D;Y.hc=D;jb.attributes&&L(jb)}else if(Db instanceof THREE.Fa){jb=e(Db,Y);ka=jb.attributes&&x(jb);if(Y.ta||Y.Ha||Y.Ri||ka){var Vb=Y,Ad=j.DYNAMIC_DRAW,ed=r,fd=r,gd=r,Bd=r,ab=r,Cd=r,Ae=Vb.f,Be=Vb.Xa,Ce=Vb.On,ff=Ae.length,gf=Be.length,hf=Ce.length,Dd=Vb.Jd,Ed=Vb.Hd,De=Vb.rq,jf=Vb.Ha,kf=Vb.Ri,Ud=Vb.vb,Fd=r,Ee=r,tb=r,Sc=
r,Gb=r,Wa=r;if(Vb.ta){for(ed=0;ed<ff;ed++)Bd=Ae[ed],ab=3*ed,Dd[ab]=Bd.x,Dd[ab+1]=Bd.y,Dd[ab+2]=Bd.a;j.bindBuffer(j.ARRAY_BUFFER,Vb.Oa);j.bufferData(j.ARRAY_BUFFER,Dd,Ad)}if(jf){for(fd=0;fd<gf;fd++)Cd=Be[fd],ab=3*fd,Ed[ab]=Cd.h,Ed[ab+1]=Cd.g,Ed[ab+2]=Cd.c;j.bindBuffer(j.ARRAY_BUFFER,Vb.ub);j.bufferData(j.ARRAY_BUFFER,Ed,Ad)}if(kf){for(gd=0;gd<hf;gd++)De[gd]=Ce[gd];j.bindBuffer(j.ARRAY_BUFFER,Vb.fk);j.bufferData(j.ARRAY_BUFFER,De,Ad)}if(Ud){Fd=0;for(Ee=Ud.length;Fd<Ee;Fd++)if(Wa=Ud[Fd],Wa.ga&&(r===
Wa.Ga||"vertices"===Wa.Ga)){ab=0;Sc=Wa.value.length;if(1===Wa.size)for(tb=0;tb<Sc;tb++)Wa.b[tb]=Wa.value[tb];else if(2===Wa.size)for(tb=0;tb<Sc;tb++)Gb=Wa.value[tb],Wa.b[ab]=Gb.x,Wa.b[ab+1]=Gb.y,ab+=2;else if(3===Wa.size)if("c"===Wa.type)for(tb=0;tb<Sc;tb++)Gb=Wa.value[tb],Wa.b[ab]=Gb.h,Wa.b[ab+1]=Gb.g,Wa.b[ab+2]=Gb.c,ab+=3;else for(tb=0;tb<Sc;tb++)Gb=Wa.value[tb],Wa.b[ab]=Gb.x,Wa.b[ab+1]=Gb.y,Wa.b[ab+2]=Gb.a,ab+=3;else if(4===Wa.size)for(tb=0;tb<Sc;tb++)Gb=Wa.value[tb],Wa.b[ab]=Gb.x,Wa.b[ab+1]=Gb.y,
Wa.b[ab+2]=Gb.a,Wa.b[ab+3]=Gb.k,ab+=4;j.bindBuffer(j.ARRAY_BUFFER,Wa.buffer);j.bufferData(j.ARRAY_BUFFER,Wa.b,Ad)}}}Y.ta=D;Y.Ha=D;Y.Ri=D;jb.attributes&&L(jb)}else if(Db instanceof THREE.Ib)if(Y instanceof THREE.qd)(Y.ta||Y.Ha)&&i(Y,j.DYNAMIC_DRAW,!Y.zi),Y.ta=D,Y.Ha=D;else{jb=e(Db,Y);ka=jb.attributes&&x(jb);if(Y.ta||Y.Ha||Db.gf||ka){var qc=Y,Vd=j.DYNAMIC_DRAW,hd=Db,Hb=r,rc=r,sc=r,pa=r,tc=r,Gc=r,Gd=qc.f,Wd=Gd.length,Xd=qc.Xa,Fe=Xd.length,Kc=qc.Jd,Lc=qc.Hd,yc=qc.wq,Ge=qc.ta,He=qc.Ha,zc=qc.vb,$b=r,Tc=
r,Aa=r,ac=r,Ta=r,oa=r;if(hd.gf){va.copy(ua);va.Xe(hd.F);for(Hb=0;Hb<Wd;Hb++)sc=Gd[Hb],Cb.copy(sc),va.aa(Cb),yc[Hb]=[Cb.a,Hb];yc.sort(p);for(Hb=0;Hb<Wd;Hb++)sc=Gd[yc[Hb][1]],pa=3*Hb,Kc[pa]=sc.x,Kc[pa+1]=sc.y,Kc[pa+2]=sc.a;for(rc=0;rc<Fe;rc++)pa=3*rc,Gc=Xd[yc[rc][1]],Lc[pa]=Gc.h,Lc[pa+1]=Gc.g,Lc[pa+2]=Gc.c;if(zc){$b=0;for(Tc=zc.length;$b<Tc;$b++)if(oa=zc[$b],r===oa.Ga||"vertices"===oa.Ga)if(pa=0,ac=oa.value.length,1===oa.size)for(Aa=0;Aa<ac;Aa++)tc=yc[Aa][1],oa.b[Aa]=oa.value[tc];else if(2===oa.size)for(Aa=
0;Aa<ac;Aa++)tc=yc[Aa][1],Ta=oa.value[tc],oa.b[pa]=Ta.x,oa.b[pa+1]=Ta.y,pa+=2;else if(3===oa.size)if("c"===oa.type)for(Aa=0;Aa<ac;Aa++)tc=yc[Aa][1],Ta=oa.value[tc],oa.b[pa]=Ta.h,oa.b[pa+1]=Ta.g,oa.b[pa+2]=Ta.c,pa+=3;else for(Aa=0;Aa<ac;Aa++)tc=yc[Aa][1],Ta=oa.value[tc],oa.b[pa]=Ta.x,oa.b[pa+1]=Ta.y,oa.b[pa+2]=Ta.a,pa+=3;else if(4===oa.size)for(Aa=0;Aa<ac;Aa++)tc=yc[Aa][1],Ta=oa.value[tc],oa.b[pa]=Ta.x,oa.b[pa+1]=Ta.y,oa.b[pa+2]=Ta.a,oa.b[pa+3]=Ta.k,pa+=4}}else{if(Ge)for(Hb=0;Hb<Wd;Hb++)sc=Gd[Hb],
pa=3*Hb,Kc[pa]=sc.x,Kc[pa+1]=sc.y,Kc[pa+2]=sc.a;if(He)for(rc=0;rc<Fe;rc++)Gc=Xd[rc],pa=3*rc,Lc[pa]=Gc.h,Lc[pa+1]=Gc.g,Lc[pa+2]=Gc.c;if(zc){$b=0;for(Tc=zc.length;$b<Tc;$b++)if(oa=zc[$b],oa.ga&&(r===oa.Ga||"vertices"===oa.Ga))if(ac=oa.value.length,pa=0,1===oa.size)for(Aa=0;Aa<ac;Aa++)oa.b[Aa]=oa.value[Aa];else if(2===oa.size)for(Aa=0;Aa<ac;Aa++)Ta=oa.value[Aa],oa.b[pa]=Ta.x,oa.b[pa+1]=Ta.y,pa+=2;else if(3===oa.size)if("c"===oa.type)for(Aa=0;Aa<ac;Aa++)Ta=oa.value[Aa],oa.b[pa]=Ta.h,oa.b[pa+1]=Ta.g,oa.b[pa+
2]=Ta.c,pa+=3;else for(Aa=0;Aa<ac;Aa++)Ta=oa.value[Aa],oa.b[pa]=Ta.x,oa.b[pa+1]=Ta.y,oa.b[pa+2]=Ta.a,pa+=3;else if(4===oa.size)for(Aa=0;Aa<ac;Aa++)Ta=oa.value[Aa],oa.b[pa]=Ta.x,oa.b[pa+1]=Ta.y,oa.b[pa+2]=Ta.a,oa.b[pa+3]=Ta.k,pa+=4}}if(Ge||hd.gf)j.bindBuffer(j.ARRAY_BUFFER,qc.Oa),j.bufferData(j.ARRAY_BUFFER,Kc,Vd);if(He||hd.gf)j.bindBuffer(j.ARRAY_BUFFER,qc.ub),j.bufferData(j.ARRAY_BUFFER,Lc,Vd);if(zc){$b=0;for(Tc=zc.length;$b<Tc;$b++)if(oa=zc[$b],oa.ga||hd.gf)j.bindBuffer(j.ARRAY_BUFFER,oa.buffer),
j.bufferData(j.ARRAY_BUFFER,oa.b,Vd)}}Y.ta=D;Y.Ha=D;jb.attributes&&L(jb)}}};this.Zr=function(a,b,c,d){var e,f,g,h,u,i,k,l,m;a instanceof THREE.ze?m="depth":a instanceof THREE.Ae?m="normal":a instanceof THREE.Ma?m="basic":a instanceof THREE.Xb?m="lambert":a instanceof THREE.Yb?m="phong":a instanceof THREE.Gb?m="basic":a instanceof THREE.we?m="dashed":a instanceof THREE.Be&&(m="particle_basic");if(m){var n=THREE.Pj[m];a.P=THREE.nc.d(n.P);a.N=n.N;a.K=n.K}var p,da,s;e=p=da=s=n=0;for(f=b.length;e<f;e++)g=
b[e],g.$i||(g instanceof THREE.Bc&&p++,g instanceof THREE.yf&&da++,g instanceof THREE.zf&&s++,g instanceof THREE.Cj&&n++);e=p;f=da;g=s;h=n;n=p=0;for(s=b.length;n<s;n++)da=b[n],da.pc&&(da instanceof THREE.zf&&p++,da instanceof THREE.Bc&&!da.Gl&&p++);l=p;dc&&d&&d.Dd?k=1024:(b=j.getParameter(j.MAX_VERTEX_UNIFORM_VECTORS),b=Math.floor((b-20)/4),r!==d&&d instanceof THREE.ac&&(b=Math.min(d.Pa.length,b),b<d.Pa.length&&console.warn("WebGLRenderer: too many bones - "+d.Pa.length+", this GPU supports just "+
b+" (try OpenGL instead of ANGLE)")),k=b);a:{da=a.K;s=a.N;n=a.P;b=a.attributes;p=a.Ek;var c={map:!!a.map,ma:!!a.ma,Ja:!!a.Ja,wb:!!a.wb,Za:!!a.Za,Ea:!!a.Ea,n:a.n,A:c,$o:a.A,Ir:c instanceof THREE.tf,Db:a.Db,ya:a.ya,Bs:k,Dd:dc&&d&&d.Dd,Kf:d&&d.Kf,Jf:d&&d.Jf,G:a.G,ka:a.ka,fh:this.fh,Ti:this.Ti,Vn:e,Xn:f,Zn:g,Wn:h,Yn:l,sh:this.sh&&d.hg,mj:this.mj,lj:this.lj,kj:this.kj,xd:a.xd,gh:a.gh,gg:a.gg,Vc:a.Vc,Ud:a.Rc===THREE.Cc,Mk:a.Rc===THREE.rf},q,ua,t,d=[];m?d.push(m):(d.push(da),d.push(s));for(ua in p)d.push(ua),
d.push(p[ua]);for(q in c)d.push(q),d.push(c[q]);m=d.join();q=0;for(ua=S.length;q<ua;q++)if(d=S[q],d.code===m){d.Nl++;i=d.pb;break a}q=[];for(t in p)ua=p[t],D!==ua&&(ua="#define "+t+" "+ua,q.push(ua));ua=q.join("\n");t=j.createProgram();q=["precision "+W+" float;",ua,Lb?"#define VERTEX_TEXTURES":"",Q.Zc?"#define GAMMA_INPUT":"",Q.un?"#define GAMMA_OUTPUT":"",Q.jo?"#define PHYSICALLY_BASED_SHADING":"","#define MAX_DIR_LIGHTS "+c.Vn,"#define MAX_POINT_LIGHTS "+c.Xn,"#define MAX_SPOT_LIGHTS "+c.Zn,"#define MAX_HEMI_LIGHTS "+
c.Wn,"#define MAX_SHADOWS "+c.Yn,"#define MAX_BONES "+c.Bs,c.map?"#define USE_MAP":"",c.ma?"#define USE_ENVMAP":"",c.Ja?"#define USE_LIGHTMAP":"",c.wb?"#define USE_BUMPMAP":"",c.Za?"#define USE_NORMALMAP":"",c.Ea?"#define USE_SPECULARMAP":"",c.n?"#define USE_COLOR":"",c.ya?"#define USE_SKINNING":"",c.Dd?"#define BONE_TEXTURE":"",c.Kf?"#define N_BONE_PIXEL_X "+c.Kf.toFixed(1):"",c.Jf?"#define N_BONE_PIXEL_Y "+c.Jf.toFixed(1):"",c.G?"#define USE_MORPHTARGETS":"",c.ka?"#define USE_MORPHNORMALS":"",c.gg?
"#define PHONG_PER_PIXEL":"",c.Vc?"#define WRAP_AROUND":"",c.Ud?"#define DOUBLE_SIDED":"",c.Mk?"#define FLIP_SIDED":"",c.sh?"#define USE_SHADOWMAP":"",c.mj?"#define SHADOWMAP_SOFT":"",c.lj?"#define SHADOWMAP_DEBUG":"",c.kj?"#define SHADOWMAP_CASCADE":"",c.Db?"#define USE_SIZEATTENUATION":"","uniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 cameraPosition;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\nattribute vec2 uv2;\n#ifdef USE_COLOR\nattribute vec3 color;\n#endif\n#ifdef USE_MORPHTARGETS\nattribute vec3 morphTarget0;\nattribute vec3 morphTarget1;\nattribute vec3 morphTarget2;\nattribute vec3 morphTarget3;\n#ifdef USE_MORPHNORMALS\nattribute vec3 morphNormal0;\nattribute vec3 morphNormal1;\nattribute vec3 morphNormal2;\nattribute vec3 morphNormal3;\n#else\nattribute vec3 morphTarget4;\nattribute vec3 morphTarget5;\nattribute vec3 morphTarget6;\nattribute vec3 morphTarget7;\n#endif\n#endif\n#ifdef USE_SKINNING\nattribute vec4 skinIndex;\nattribute vec4 skinWeight;\n#endif\n"].join("\n");
ua=["precision "+W+" float;",c.wb||c.Za?"#extension GL_OES_standard_derivatives : enable":"",ua,"#define MAX_DIR_LIGHTS "+c.Vn,"#define MAX_POINT_LIGHTS "+c.Xn,"#define MAX_SPOT_LIGHTS "+c.Zn,"#define MAX_HEMI_LIGHTS "+c.Wn,"#define MAX_SHADOWS "+c.Yn,c.xd?"#define ALPHATEST "+c.xd:"",Q.Zc?"#define GAMMA_INPUT":"",Q.un?"#define GAMMA_OUTPUT":"",Q.jo?"#define PHYSICALLY_BASED_SHADING":"",c.$o&&c.A?"#define USE_FOG":"",c.$o&&c.Ir?"#define FOG_EXP2":"",c.map?"#define USE_MAP":"",c.ma?"#define USE_ENVMAP":
"",c.Ja?"#define USE_LIGHTMAP":"",c.wb?"#define USE_BUMPMAP":"",c.Za?"#define USE_NORMALMAP":"",c.Ea?"#define USE_SPECULARMAP":"",c.n?"#define USE_COLOR":"",c.gh?"#define METAL":"",c.gg?"#define PHONG_PER_PIXEL":"",c.Vc?"#define WRAP_AROUND":"",c.Ud?"#define DOUBLE_SIDED":"",c.Mk?"#define FLIP_SIDED":"",c.sh?"#define USE_SHADOWMAP":"",c.mj?"#define SHADOWMAP_SOFT":"",c.lj?"#define SHADOWMAP_DEBUG":"",c.kj?"#define SHADOWMAP_CASCADE":"","uniform mat4 viewMatrix;\nuniform vec3 cameraPosition;\n"].join("\n");
ua=P("fragment",ua+da);q=P("vertex",q+s);j.attachShader(t,q);j.attachShader(t,ua);j.linkProgram(t);j.getProgramParameter(t,j.LINK_STATUS)||console.error("Could not initialise shader\nVALIDATE_STATUS: "+j.getProgramParameter(t,j.VALIDATE_STATUS)+", gl error ["+j.getError()+"]");j.deleteShader(ua);j.deleteShader(q);t.P={};t.attributes={};var va;q="viewMatrix modelViewMatrix projectionMatrix normalMatrix modelMatrix cameraPosition morphTargetInfluences".split(" ");c.Dd?q.push("boneTexture"):q.push("boneGlobalMatrices");
for(va in n)q.push(va);va=q;q=0;for(ua=va.length;q<ua;q++)d=va[q],t.P[d]=j.getUniformLocation(t,d);q="position normal uv uv2 tangent color skinIndex skinWeight lineDistance".split(" ");for(va=0;va<c.fh;va++)q.push("morphTarget"+va);for(va=0;va<c.Ti;va++)q.push("morphNormal"+va);for(i in b)q.push(i);i=q;va=0;for(b=i.length;va<b;va++)q=i[va],t.attributes[q]=j.getAttribLocation(t,q);t.id=ga++;S.push({pb:t,code:m,Nl:1});Q.info.memory.no=S.length;i=t}a.pb=i;va=a.pb.attributes;if(a.G){a.hh=0;b="morphTarget";
for(i=0;i<this.fh;i++)t=b+i,0<=va[t]&&a.hh++}if(a.ka){a.co=0;b="morphNormal";for(i=0;i<this.Ti;i++)t=b+i,0<=va[t]&&a.co++}a.Zo=[];for(u in a.P)a.Zo.push([a.P[u],u])};this.Cz=function(a,b){a===THREE.tp?j.disable(j.CULL_FACE):(b===THREE.zp?j.frontFace(j.CW):j.frontFace(j.CCW),a===THREE.sp?j.cullFace(j.BACK):a===THREE.Mh?j.cullFace(j.FRONT):j.cullFace(j.FRONT_AND_BACK),j.enable(j.CULL_FACE))};this.Bl=function(a){var b=a.Rc===THREE.Cc,a=a.Rc===THREE.rf;za!==b&&(b?j.disable(j.CULL_FACE):j.enable(j.CULL_FACE),
za=b);Ba!==a&&(a?j.frontFace(j.CW):j.frontFace(j.CCW),Ba=a)};this.df=function(a){ib!==a&&(a?j.enable(j.DEPTH_TEST):j.disable(j.DEPTH_TEST),ib=a)};this.oh=function(a){db!==a&&(j.depthMask(a),db=a)};this.ig=function(a,b,c,d){a!==Ia&&(a===THREE.im?j.disable(j.BLEND):a===THREE.Ql?(j.enable(j.BLEND),j.blendEquation(j.FUNC_ADD),j.blendFunc(j.SRC_ALPHA,j.ONE)):a===THREE.Bm?(j.enable(j.BLEND),j.blendEquation(j.FUNC_ADD),j.blendFunc(j.ZERO,j.ONE_MINUS_SRC_COLOR)):a===THREE.Jp?(j.enable(j.BLEND),j.blendEquation(j.FUNC_ADD),
j.blendFunc(j.ZERO,j.SRC_COLOR)):a===THREE.Vl?j.enable(j.BLEND):(j.enable(j.BLEND),j.blendEquationSeparate(j.FUNC_ADD,j.FUNC_ADD),j.blendFuncSeparate(j.SRC_ALPHA,j.ONE_MINUS_SRC_ALPHA,j.ONE,j.ONE_MINUS_SRC_ALPHA)),Ia=a);if(a===THREE.Vl){if(b!==sa&&(j.blendEquation(V(b)),sa=b),c!==gb||d!==hb)j.blendFunc(V(c),V(d)),gb=c,hb=d}else hb=gb=sa=w};this.ph=function(a,b){if(a.ga){a.He||(a.He=v,a.dc=j.createTexture(),Q.info.memory.Tb++);j.activeTexture(j.TEXTURE0+b);j.bindTexture(j.TEXTURE_2D,a.dc);j.pixelStorei(j.UNPACK_FLIP_Y_WEBGL,
a.Re);j.pixelStorei(j.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.sl);j.pixelStorei(j.UNPACK_ALIGNMENT,a.Ml);var c=a.L,d=0===(c.width&c.width-1)&&0===(c.height&c.height-1),e=V(a.ia),f=V(a.type);F(j.TEXTURE_2D,a,d);var g=a.Cb;if(a instanceof THREE.ue)if(0<g.length&&d){for(var h=0,u=g.length;h<u;h++)c=g[h],j.texImage2D(j.TEXTURE_2D,h,e,c.width,c.height,0,e,f,c.data);a.fb=D}else j.texImage2D(j.TEXTURE_2D,0,e,c.width,c.height,0,e,f,c.data);else if(a instanceof THREE.se){h=0;for(u=g.length;h<u;h++)c=g[h],j.compressedTexImage2D(j.TEXTURE_2D,
h,e,c.width,c.height,0,c.data)}else if(0<g.length&&d){h=0;for(u=g.length;h<u;h++)c=g[h],j.texImage2D(j.TEXTURE_2D,h,e,e,f,c);a.fb=D}else j.texImage2D(j.TEXTURE_2D,0,e,e,f,a.L);a.fb&&d&&j.generateMipmap(j.TEXTURE_2D);a.ga=D;a.Zi&&a.Zi()}else j.activeTexture(j.TEXTURE0+b),j.bindTexture(j.TEXTURE_2D,a.dc)};this.gj=function(a){var b=a instanceof THREE.Ge;if(a&&!a.vd){r===a.Td&&(a.Td=v);r===a.oe&&(a.oe=v);a.dc=j.createTexture();Q.info.memory.Tb++;var c=0===(a.width&a.width-1)&&0===(a.height&a.height-1),
d=V(a.ia),e=V(a.type);if(b){a.vd=[];a.Df=[];j.bindTexture(j.TEXTURE_CUBE_MAP,a.dc);F(j.TEXTURE_CUBE_MAP,a,c);for(var f=0;6>f;f++){a.vd[f]=j.createFramebuffer();a.Df[f]=j.createRenderbuffer();j.texImage2D(j.TEXTURE_CUBE_MAP_POSITIVE_X+f,0,d,a.width,a.height,0,d,e,w);var g=a,h=j.TEXTURE_CUBE_MAP_POSITIVE_X+f;j.bindFramebuffer(j.FRAMEBUFFER,a.vd[f]);j.framebufferTexture2D(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,h,g.dc,0);U(a.Df[f],a)}c&&j.generateMipmap(j.TEXTURE_CUBE_MAP)}else a.vd=j.createFramebuffer(),
a.Df=j.createRenderbuffer(),j.bindTexture(j.TEXTURE_2D,a.dc),F(j.TEXTURE_2D,a,c),j.texImage2D(j.TEXTURE_2D,0,d,a.width,a.height,0,d,e,w),d=j.TEXTURE_2D,j.bindFramebuffer(j.FRAMEBUFFER,a.vd),j.framebufferTexture2D(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,d,a.dc,0),U(a.Df,a),c&&j.generateMipmap(j.TEXTURE_2D);b?j.bindTexture(j.TEXTURE_CUBE_MAP,w):j.bindTexture(j.TEXTURE_2D,w);j.bindRenderbuffer(j.RENDERBUFFER,w);j.bindFramebuffer(j.FRAMEBUFFER,w)}a?(b=b?a.vd[a.Je]:a.vd,c=a.width,a=a.height,e=d=0):(b=w,c=Ca,
a=bb,d=Ga,e=nb);b!==X&&(j.bindFramebuffer(j.FRAMEBUFFER,b),j.viewport(d,e,c,a),X=b);Xa=c;Ma=a};this.Co=new THREE.Qj;this.Lq(this.Co);this.Ym(new THREE.Zp);this.Ym(new THREE.Dp)};
THREE.xg=function(a,b,c){this.width=a;this.height=b;c=c||{};this.Ub=r!==c.Ub?c.Ub:THREE.re;this.Vb=r!==c.Vb?c.Vb:THREE.re;this.Bb=r!==c.Bb?c.Bb:THREE.Gd;this.gb=r!==c.gb?c.gb:THREE.Ij;this.Kb=r!==c.Kb?c.Kb:1;this.offset=new THREE.l(0,0);this.repeat=new THREE.l(1,1);this.ia=r!==c.ia?c.ia:THREE.vg;this.type=r!==c.type?c.type:THREE.Uj;this.Td=r!==c.Td?c.Td:v;this.oe=r!==c.oe?c.oe:v;this.fb=v};
THREE.xg.prototype.d=function(){var a=new THREE.xg(this.width,this.height);a.Ub=this.Ub;a.Vb=this.Vb;a.Bb=this.Bb;a.gb=this.gb;a.Kb=this.Kb;a.offset.copy(this.offset);a.repeat.copy(this.repeat);a.ia=this.ia;a.type=this.type;a.Td=this.Td;a.oe=this.oe;a.fb=this.fb;return a};THREE.Ge=function(a,b,c){THREE.xg.call(this,a,b,c);this.Je=0};THREE.Ge.prototype=Object.create(THREE.xg.prototype);THREE.$b=function(){this.vc=new THREE.e;this.i=new THREE.Hc;this.visible=v};
THREE.$b.prototype.copy=function(a){this.vc.copy(a.vc);this.i.copy(a.i)};THREE.sm=function(){this.Y=new THREE.$b;this.ba=new THREE.$b;this.qb=new THREE.$b;this.Mf=new THREE.e;this.pi=new THREE.e;this.uc=new THREE.e;this.zc=[new THREE.e,new THREE.e,new THREE.e];this.vj=0;this.q=this.color=w;this.nf=[[]];this.a=w};
THREE.tm=function(){this.Y=new THREE.$b;this.ba=new THREE.$b;this.qb=new THREE.$b;this.Ol=new THREE.$b;this.Mf=new THREE.e;this.pi=new THREE.e;this.uc=new THREE.e;this.zc=[new THREE.e,new THREE.e,new THREE.e,new THREE.e];this.vj=0;this.q=this.color=w;this.nf=[[]];this.a=w};THREE.Tp=function(){this.a=this.object=w};THREE.vm=function(){this.rotation=this.a=this.y=this.x=this.object=w;this.scale=new THREE.l;this.q=w};THREE.um=function(){this.a=w;this.Y=new THREE.$b;this.ba=new THREE.$b;this.q=w};
THREE.Tl={Uu:function(a,b,c,d){var e=THREE.Tl.qq,f=e,g=a.h,h=a.g,i=a.c,k=Math.max(Math.max(g,h),i),l=Math.min(Math.min(g,h),i);if(l===k)l=g=0;else{var m=k-l,l=m/k,g=(g===k?(h-i)/m:h===k?2+(i-g)/m:4+(g-h)/m)/6;0>g&&(g+=1);1<g&&(g-=1)}r===f&&(f={Xg:0,mh:0,qe:0});f.Xg=g;f.mh=l;f.qe=k;e.Xg=THREE.bb.qc(e.Xg+b,0,1);e.mh=THREE.bb.qc(e.mh+c,0,1);e.qe=THREE.bb.qc(e.qe+d,0,1);var b=e.Xg,c=e.mh,e=e.qe,p,s,q;0===e?a.h=a.g=a.c=0:(p=Math.floor(6*b),s=6*b-p,b=e*(1-c),q=e*(1-c*s),c=e*(1-c*(1-s)),0===p?(a.h=e,a.g=
c,a.c=b):1===p?(a.h=q,a.g=e,a.c=b):2===p?(a.h=b,a.g=e,a.c=c):3===p?(a.h=b,a.g=q,a.c=e):4===p?(a.h=c,a.g=b,a.c=e):5===p&&(a.h=e,a.g=b,a.c=q))}};THREE.Tl.qq={Xg:0,mh:0,qe:0};
THREE.na={be:function(a,b){var c,d,e=a.f.length,f=b instanceof THREE.R?b.t:b,g=a.f,h=f.f,i=a.m,k=f.m,l=a.C[0],f=f.C[0];b instanceof THREE.R&&(b.tc&&b.yc(),c=b.J,d=new THREE.D,jd(d,c));for(var m=0,p=h.length;m<p;m++){var s=h[m].d();c&&c.aa(s);g.push(s)}m=0;for(p=k.length;m<p;m++){var s=k[m],q,n,t=s.o,x=s.n;s instanceof THREE.O?q=new THREE.O(s.p+e,s.c+e,s.s+e):s instanceof THREE.da&&(q=new THREE.da(s.p+e,s.c+e,s.s+e,s.S+e));q.r.copy(s.r);d&&d.aa(q.r);g=0;for(h=t.length;g<h;g++)n=t[g].d(),d&&d.aa(n),
q.o.push(n);q.color.copy(s.color);g=0;for(h=x.length;g<h;g++)n=x[g],q.n.push(n.d());q.va=s.va;q.qa.copy(s.qa);c&&c.aa(q.qa);i.push(q)}m=0;for(p=f.length;m<p;m++){c=f[m];d=[];g=0;for(h=c.length;g<h;g++)d.push(new THREE.l(c[g].x,c[g].y));l.push(d)}},nz:function(a,b){for(var c={},d=0,e=b.length;d<e;d++)c[b[d]]=v;for(var f,g=[],d=0,e=a.m.length;d<e;d++)f=a.m[d],f.va in c||g.push(f);a.m=g},ul:function(a,b,c){var d,e,f,g=new THREE.e,h=THREE.na.Aa;d=THREE.na.random();e=THREE.na.random();1<d+e&&(d=1-d,e=
1-e);f=1-d-e;g.copy(a);g.V(d);h.copy(b);h.V(e);g.v(h);h.copy(c);h.V(f);g.v(h);return g},mt:function(a,b,c){var d,e,f;if(a instanceof THREE.O)return d=b.f[a.p],e=b.f[a.c],f=b.f[a.s],THREE.na.ul(d,e,f);if(a instanceof THREE.da){d=b.f[a.p];e=b.f[a.c];f=b.f[a.s];var b=b.f[a.S],g;c?a.ci&&a.di?(c=a.ci,g=a.di):(c=THREE.na.kf(d,e,b),g=THREE.na.kf(e,f,b),a.ci=c,a.di=g):(c=THREE.na.kf(d,e,b),g=THREE.na.kf(e,f,b));return THREE.na.random()*(c+g)<c?THREE.na.ul(d,e,b):THREE.na.ul(e,f,b)}},mz:function(a,b){function c(a){function b(c,
d){if(d<c)return c;var e=c+Math.floor((d-c)/2);return k[e]>a?b(c,e-1):k[e]<a?b(e+1,d):e}return b(0,k.length-1)}var d,e,f=a.m,g=a.f,h=f.length,i=0,k=[],l,m,p,s;for(e=0;e<h;e++)d=f[e],d instanceof THREE.O?(l=g[d.p],m=g[d.c],p=g[d.s],d.Tm=THREE.na.kf(l,m,p)):d instanceof THREE.da&&(l=g[d.p],m=g[d.c],p=g[d.s],s=g[d.S],d.ci=THREE.na.kf(l,m,s),d.di=THREE.na.kf(m,p,s),d.Tm=d.ci+d.di),i+=d.Tm,k[e]=i;d=[];for(e=0;e<b;e++)g=THREE.na.random()*i,g=c(g),d[e]=THREE.na.mt(f[g],a,v);return d},kf:function(a,b,c){var d=
THREE.na.Aa,e=THREE.na.Id;d.sub(b,a);e.sub(c,a);Ac(d,e);return 0.5*d.length()},xb:function(a){a.si();var b=a.Nd,c=new THREE.e;c.add(b.min,b.max);c.V(-0.5);a.If(Vc(new THREE.D,c.x,c.y,c.a));a.si();return c},Ly:function(a){for(var a=a.C[0],b=0,c=a.length;b<c;b++)for(var d=a[b],e=0,f=d.length;e<f;e++)1!==d[e].x&&(d[e].x-=Math.floor(d[e].x)),1!==d[e].y&&(d[e].y-=Math.floor(d[e].y))},gA:function(a){var b,c,d,e,f=[],g=[],h=[];b=0;for(c=a.Kc.length;b<c;b++)g[b]=[];b=0;for(c=a.C.length;b<c;b++)h[b]=[];b=
0;for(c=a.m.length;b<c;b++)if(d=a.m[b],d instanceof THREE.da){e=d.p;var i=d.c,k=d.s,l=d.S,m=new THREE.O,p=new THREE.O;m.color.copy(d.color);p.color.copy(d.color);m.va=d.va;p.va=d.va;m.p=e;m.c=i;m.s=l;p.p=i;p.c=k;p.s=l;4===d.n.length&&(m.n[0]=d.n[0].d(),m.n[1]=d.n[1].d(),m.n[2]=d.n[3].d(),p.n[0]=d.n[1].d(),p.n[1]=d.n[2].d(),p.n[2]=d.n[3].d());f.push(m,p);d=0;for(e=a.C.length;d<e;d++)a.C[d].length&&(m=a.C[d][b],i=m[1],k=m[2],l=m[3],m=[m[0].d(),i.d(),l.d()],i=[i.d(),k.d(),l.d()],h[d].push(m,i));d=0;
for(e=a.Kc.length;d<e;d++)a.Kc[d].length&&(i=a.Kc[d][b],g[d].push(i,i))}else{f.push(d);d=0;for(e=a.Kc.length;d<e;d++)g[d].push(a.Kc[d][b]);d=0;for(e=a.C.length;d<e;d++)h[d].push(a.C[d][b])}a.m=f;a.Kc=g;a.C=h;ce(a);be(a);a.zd();a.$f&&a.Jg()},uw:function(a){for(var b=[],c=0,d=a.m.length;c<d;c++){var e=b.length,f=a.m[c];if(f instanceof THREE.da){var g=f.p,h=f.c,i=f.s,g=a.f[g],h=a.f[h],i=a.f[i],k=a.f[f.S];b.push(g.d());b.push(h.d());b.push(i.d());b.push(k.d());f.p=e;f.c=e+1;f.s=e+2;f.S=e+3}else g=f.p,
h=f.c,i=f.s,g=a.f[g],h=a.f[h],i=a.f[i],b.push(g.d()),b.push(h.d()),b.push(i.d()),f.p=e,f.c=e+1,f.s=e+2}a.f=b;delete a.Yj},$z:function(a,b){var c,d,e,f,g,h,i,k,l,m,p,s,q,n,t,x,L,E,y,M=[],B=[];c=0;for(d=a.C.length;c<d;c++)B[c]=[];c=0;for(d=a.m.length;c<d;c++)if(e=a.m[c],e instanceof THREE.O)if(f=e.p,g=e.c,h=e.s,k=a.f[f],l=a.f[g],m=a.f[h],s=k.Nb(l),q=l.Nb(m),p=k.Nb(m),s>b||q>b||p>b){i=a.f.length;E=e.d();y=e.d();s>=q&&s>=p?(k=k.d(),k.$(l,0.5),E.p=f,E.c=i,E.s=h,y.p=i,y.c=g,y.s=h,3===e.o.length&&(f=e.o[0].d(),
f.$(e.o[1],0.5),E.o[1].copy(f),y.o[0].copy(f)),3===e.n.length&&(f=e.n[0].d(),f.$(e.n[1],0.5),E.n[1].copy(f),y.n[0].copy(f)),e=0):q>=s&&q>=p?(k=l.d(),k.$(m,0.5),E.p=f,E.c=g,E.s=i,y.p=i,y.c=h,y.s=f,3===e.o.length&&(f=e.o[1].d(),f.$(e.o[2],0.5),E.o[2].copy(f),y.o[0].copy(f),y.o[1].copy(e.o[2]),y.o[2].copy(e.o[0])),3===e.n.length&&(f=e.n[1].d(),f.$(e.n[2],0.5),E.n[2].copy(f),y.n[0].copy(f),y.n[1].copy(e.n[2]),y.n[2].copy(e.n[0])),e=1):(k=k.d(),k.$(m,0.5),E.p=f,E.c=g,E.s=i,y.p=i,y.c=g,y.s=h,3===e.o.length&&
(f=e.o[0].d(),f.$(e.o[2],0.5),E.o[2].copy(f),y.o[0].copy(f)),3===e.n.length&&(f=e.n[0].d(),f.$(e.n[2],0.5),E.n[2].copy(f),y.n[0].copy(f)),e=2);M.push(E,y);a.f.push(k);f=0;for(g=a.C.length;f<g;f++)a.C[f].length&&(k=a.C[f][c],y=k[0],h=k[1],E=k[2],0===e?(l=y.d(),l.$(h,0.5),k=[y.d(),l.d(),E.d()],h=[l.d(),h.d(),E.d()]):1===e?(l=h.d(),l.$(E,0.5),k=[y.d(),h.d(),l.d()],h=[l.d(),E.d(),y.d()]):(l=y.d(),l.$(E,0.5),k=[y.d(),h.d(),l.d()],h=[l.d(),h.d(),E.d()]),B[f].push(k,h))}else{M.push(e);f=0;for(g=a.C.length;f<
g;f++)B[f].push(a.C[f][c])}else if(f=e.p,g=e.c,h=e.s,i=e.S,k=a.f[f],l=a.f[g],m=a.f[h],p=a.f[i],s=k.Nb(l),q=l.Nb(m),n=m.Nb(p),t=k.Nb(p),s>b||q>b||n>b||t>b){x=a.f.length;L=a.f.length+1;E=e.d();y=e.d();s>=q&&s>=n&&s>=t||n>=q&&n>=s&&n>=t?(s=k.d(),s.$(l,0.5),l=m.d(),l.$(p,0.5),E.p=f,E.c=x,E.s=L,E.S=i,y.p=x,y.c=g,y.s=h,y.S=L,4===e.o.length&&(f=e.o[0].d(),f.$(e.o[1],0.5),g=e.o[2].d(),g.$(e.o[3],0.5),E.o[1].copy(f),E.o[2].copy(g),y.o[0].copy(f),y.o[3].copy(g)),4===e.n.length&&(f=e.n[0].d(),f.$(e.n[1],0.5),
g=e.n[2].d(),g.$(e.n[3],0.5),E.n[1].copy(f),E.n[2].copy(g),y.n[0].copy(f),y.n[3].copy(g)),e=0):(s=l.d(),s.$(m,0.5),l=p.d(),l.$(k,0.5),E.p=f,E.c=g,E.s=x,E.S=L,y.p=L,y.c=x,y.s=h,y.S=i,4===e.o.length&&(f=e.o[1].d(),f.$(e.o[2],0.5),g=e.o[3].d(),g.$(e.o[0],0.5),E.o[2].copy(f),E.o[3].copy(g),y.o[0].copy(g),y.o[1].copy(f)),4===e.n.length&&(f=e.n[1].d(),f.$(e.n[2],0.5),g=e.n[3].d(),g.$(e.n[0],0.5),E.n[2].copy(f),E.n[3].copy(g),y.n[0].copy(g),y.n[1].copy(f)),e=1);M.push(E,y);a.f.push(s,l);f=0;for(g=a.C.length;f<
g;f++)a.C[f].length&&(k=a.C[f][c],y=k[0],h=k[1],E=k[2],k=k[3],0===e?(l=y.d(),l.$(h,0.5),m=E.d(),m.$(k,0.5),y=[y.d(),l.d(),m.d(),k.d()],h=[l.d(),h.d(),E.d(),m.d()]):(l=h.d(),l.$(E,0.5),m=k.d(),m.$(y,0.5),y=[y.d(),h.d(),l.d(),m.d()],h=[m.d(),l.d(),E.d(),k.d()]),B[f].push(y,h))}else{M.push(e);f=0;for(g=a.C.length;f<g;f++)B[f].push(a.C[f][c])}a.m=M;a.C=B}};THREE.na.random=THREE.bb.lt;THREE.na.Aa=new THREE.e;THREE.na.Id=new THREE.e;
THREE.rd={crossOrigin:"anonymous",Rn:function(a,b,c,d){var e=new Image,f=new THREE.Jb(e,b),b=new THREE.bm;b.addEventListener("load",function(a){f.L=a.content;f.ga=v;c&&c(f)});b.addEventListener("error",function(a){d&&d(a.message)});b.crossOrigin=this.crossOrigin;b.load(a,e);f.Gt=a;return f},Pn:function(a,b,c,d){var e=new THREE.se;e.ob=b;var f=new XMLHttpRequest;f.onload=function(){var a=THREE.rd.ql(f.response,v);e.ia=a.ia;e.Cb=a.Cb;e.L.width=a.width;e.L.height=a.height;e.fb=D;e.ga=v;c&&c(e)};f.onerror=
d;f.open("GET",a,v);f.responseType="arraybuffer";f.send(w);return e},ps:function(a,b,c,d){var e=[];e.We=0;var f=new THREE.Jb;f.L=e;r!==b&&(f.ob=b);f.Re=D;for(var b=0,g=a.length;b<g;++b){var h=new Image;e[b]=h;h.onload=function(){e.We+=1;6===e.We&&(f.ga=v,c&&c(f))};h.onerror=d;h.crossOrigin=this.crossOrigin;h.src=a[b]}return f},os:function(a,b,c,d){var e=[];e.We=0;var f=new THREE.se;f.L=e;r!==b&&(f.ob=b);f.Re=D;f.fb=D;b=function(a,b){return function(){var d=THREE.rd.ql(a.response,v);b.ia=d.ia;b.Cb=
d.Cb;b.width=d.width;b.height=d.height;e.We+=1;6===e.We&&(f.ia=d.ia,f.ga=v,c&&c(f))}};if(a instanceof Array)for(var g=0,h=a.length;g<h;++g){var i={};e[g]=i;var k=new XMLHttpRequest;k.onload=b(k,i);k.onerror=d;i=a[g];k.open("GET",i,v);k.responseType="arraybuffer";k.send(w)}else k=new XMLHttpRequest,k.onload=function(){var a=THREE.rd.ql(k.response,v);if(a.In){for(var b=a.Cb.length/a.dg,d=0;d<b;d++){e[d]={Cb:[]};for(var g=0;g<a.dg;g++)e[d].Cb.push(a.Cb[d*a.dg+g]),e[d].ia=a.ia,e[d].width=a.width,e[d].height=
a.height}f.ia=a.ia;f.ga=v;c&&c(f)}},k.onerror=d,k.open("GET",a,v),k.responseType="arraybuffer",k.send(w);return f},ql:function(a,b){function c(a){return a.charCodeAt(0)+(a.charCodeAt(1)<<8)+(a.charCodeAt(2)<<16)+(a.charCodeAt(3)<<24)}var d={Cb:[],width:0,height:0,ia:w,dg:1},e=c("DXT1"),f=c("DXT3"),g=c("DXT5"),h=new Int32Array(a,0,31);if(542327876!==h[0])return console.error("ImageUtils.parseDDS(): Invalid magic number in DDS header"),d;if(!h[20]&4)return console.error("ImageUtils.parseDDS(): Unsupported format, must contain a FourCC code"),
d;var i=h[21];switch(i){case e:e=8;d.ia=THREE.rm;break;case f:e=16;d.ia=THREE.pm;break;case g:e=16;d.ia=THREE.qm;break;default:return console.error("ImageUtils.parseDDS(): Unsupported FourCC code: ",String.fromCharCode(i&255,i>>8&255,i>>16&255,i>>24&255)),d}d.dg=1;h[2]&131072&&D!==b&&(d.dg=Math.max(1,h[7]));d.In=h[28]&512?v:D;d.width=h[4];d.height=h[3];for(var h=h[1]+4,f=d.width,g=d.height,i=d.In?6:1,k=0;k<i;k++){for(var l=0;l<d.dg;l++){var m=Math.max(4,f)/4*Math.max(4,g)/4*e,p={data:new Uint8Array(a,
h,m),width:f,height:g};d.Cb.push(p);h+=m;f=Math.max(0.5*f,1);g=Math.max(0.5*g,1)}f=d.width;g=d.height}return d},Gw:function(a,b){var b=b|1,c=a.width,d=a.height,e=document.createElement("canvas");e.width=c;e.height=d;var f=e.getContext("2d");f.drawImage(a,0,0);for(var g=f.getImageData(0,0,c,d).data,h=f.createImageData(c,d),i=h.data,k=0;k<c;k++)for(var l=0;l<d;l++){var m=0>l-1?0:l-1,p=l+1>d-1?d-1:l+1,s=0>k-1?0:k-1,q=k+1>c-1?c-1:k+1,n=[],t=[0,0,g[4*(l*c+k)]/255*b];n.push([-1,0,g[4*(l*c+s)]/255*b]);n.push([-1,
-1,g[4*(m*c+s)]/255*b]);n.push([0,-1,g[4*(m*c+k)]/255*b]);n.push([1,-1,g[4*(m*c+q)]/255*b]);n.push([1,0,g[4*(l*c+q)]/255*b]);n.push([1,1,g[4*(p*c+q)]/255*b]);n.push([0,1,g[4*(p*c+k)]/255*b]);n.push([-1,1,g[4*(p*c+s)]/255*b]);m=[];s=n.length;for(p=0;p<s;p++){var q=n[p],x=n[(p+1)%s],q=[q[0]-t[0],q[1]-t[1],q[2]-t[2]],x=[x[0]-t[0],x[1]-t[1],x[2]-t[2]],q=[q[1]*x[2]-q[2]*x[1],q[2]*x[0]-q[0]*x[2],q[0]*x[1]-q[1]*x[0]],x=Math.sqrt(q[0]*q[0]+q[1]*q[1]+q[2]*q[2]);m.push([q[0]/x,q[1]/x,q[2]/x])}n=[0,0,0];for(p=
0;p<m.length;p++)n[0]+=m[p][0],n[1]+=m[p][1],n[2]+=m[p][2];n[0]/=m.length;n[1]/=m.length;n[2]/=m.length;t=4*(l*c+k);i[t]=255*((n[0]+1)/2)|0;i[t+1]=255*((n[1]+1)/2)|0;i[t+2]=255*n[2]|0;i[t+3]=255}f.putImageData(h,0,0);return e},Ew:function(a,b,c){for(var d=a*b,e=new Uint8Array(3*d),f=Math.floor(255*c.h),g=Math.floor(255*c.g),c=Math.floor(255*c.c),h=0;h<d;h++)e[3*h]=f,e[3*h+1]=g,e[3*h+2]=c;a=new THREE.ue(e,a,b,THREE.Mj);a.ga=v;return a}};
THREE.Eu={Hv:function(a,b){for(var c=new THREE.z,d=0,e=b.length;d<e;d++)c.add(new THREE.R(a,b[d]));return c},detach:function(a,b,c){a.If(b.F);b.remove(a);c.add(a)},av:function(a,b,c){var d=new THREE.D;d.Ob(c.F);a.If(d);b.remove(a);c.add(a)}};
THREE.ym={Ln:{Bw:{P:{zx:{type:"f",value:1.02},wx:{type:"f",value:0.1},xx:{type:"f",value:2},yx:{type:"f",value:1},Jl:{type:"t",value:w}},K:"uniform samplerCube tCube;\nvarying vec3 vReflect;\nvarying vec3 vRefract[3];\nvarying float vReflectionFactor;\nvoid main() {\nvec4 reflectedColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );\nvec4 refractedColor = vec4( 1.0 );\nrefractedColor.r = textureCube( tCube, vec3( -vRefract[0].x, vRefract[0].yz ) ).r;\nrefractedColor.g = textureCube( tCube, vec3( -vRefract[1].x, vRefract[1].yz ) ).g;\nrefractedColor.b = textureCube( tCube, vec3( -vRefract[2].x, vRefract[2].yz ) ).b;\ngl_FragColor = mix( refractedColor, reflectedColor, clamp( vReflectionFactor, 0.0, 1.0 ) );\n}",N:"uniform float mRefractionRatio;\nuniform float mFresnelBias;\nuniform float mFresnelScale;\nuniform float mFresnelPower;\nvarying vec3 vReflect;\nvarying vec3 vRefract[3];\nvarying float vReflectionFactor;\nvoid main() {\nvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\nvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\nvec3 worldNormal = normalize( mat3( modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz ) * normal );\nvec3 I = worldPosition.xyz - cameraPosition;\nvReflect = reflect( I, worldNormal );\nvRefract[0] = refract( normalize( I ), worldNormal, mRefractionRatio );\nvRefract[1] = refract( normalize( I ), worldNormal, mRefractionRatio * 0.99 );\nvRefract[2] = refract( normalize( I ), worldNormal, mRefractionRatio * 0.98 );\nvReflectionFactor = mFresnelBias + mFresnelScale * pow( 1.0 + dot( normalize( I ), worldNormal ), mFresnelPower );\ngl_Position = projectionMatrix * mvPosition;\n}"},
r:{P:THREE.nc.be([THREE.Na.A,THREE.Na.Ab,THREE.Na.wh,{on:{type:"i",value:0},pn:{type:"i",value:0},qn:{type:"i",value:0},Cr:{type:"i",value:0},Br:{type:"i",value:0},Wt:{type:"t",value:w},Ko:{type:"t",value:w},Jl:{type:"t",value:w},Lo:{type:"t",value:w},Mo:{type:"t",value:w},Jo:{type:"t",value:w},Vo:{type:"v2",value:new THREE.l(1,1)},bu:{type:"f",value:0},cu:{type:"f",value:1},Uo:{type:"c",value:new THREE.u(16777215)},Yo:{type:"c",value:new THREE.u(1118481)},To:{type:"c",value:new THREE.u(16777215)},
Xo:{type:"f",value:30},Wo:{type:"f",value:1},ap:{type:"i",value:0},jA:{type:"f",value:0.98},du:{type:"f",value:0.5},iA:{type:"v2",value:new THREE.l(0,0)},kA:{type:"v2",value:new THREE.l(1,1)},Ac:{type:"v3",value:new THREE.e(1,1,1)}}]),K:["uniform vec3 uAmbientColor;\nuniform vec3 uDiffuseColor;\nuniform vec3 uSpecularColor;\nuniform float uShininess;\nuniform float uOpacity;\nuniform bool enableDiffuse;\nuniform bool enableSpecular;\nuniform bool enableAO;\nuniform bool enableReflection;\nuniform sampler2D tDiffuse;\nuniform sampler2D tNormal;\nuniform sampler2D tSpecular;\nuniform sampler2D tAO;\nuniform samplerCube tCube;\nuniform vec2 uNormalScale;\nuniform bool useRefract;\nuniform float uRefractionRatio;\nuniform float uReflectivity;\nvarying vec3 vTangent;\nvarying vec3 vBinormal;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nuniform vec3 ambientLightColor;\n#if MAX_DIR_LIGHTS > 0\nuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\nuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n#endif\n#if MAX_HEMI_LIGHTS > 0\nuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n#endif\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n#endif\n#if MAX_SPOT_LIGHTS > 0\nuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\nuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\nuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\nuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n#endif\n#ifdef WRAP_AROUND\nuniform vec3 wrapRGB;\n#endif\nvarying vec3 vWorldPosition;\nvarying vec3 vViewPosition;",
THREE.j.yh,THREE.j.Rf,"void main() {\ngl_FragColor = vec4( vec3( 1.0 ), uOpacity );\nvec3 specularTex = vec3( 1.0 );\nvec3 normalTex = texture2D( tNormal, vUv ).xyz * 2.0 - 1.0;\nnormalTex.xy *= uNormalScale;\nnormalTex = normalize( normalTex );\nif( enableDiffuse ) {\n#ifdef GAMMA_INPUT\nvec4 texelColor = texture2D( tDiffuse, vUv );\ntexelColor.xyz *= texelColor.xyz;\ngl_FragColor = gl_FragColor * texelColor;\n#else\ngl_FragColor = gl_FragColor * texture2D( tDiffuse, vUv );\n#endif\n}\nif( enableAO ) {\n#ifdef GAMMA_INPUT\nvec4 aoColor = texture2D( tAO, vUv );\naoColor.xyz *= aoColor.xyz;\ngl_FragColor.xyz = gl_FragColor.xyz * aoColor.xyz;\n#else\ngl_FragColor.xyz = gl_FragColor.xyz * texture2D( tAO, vUv ).xyz;\n#endif\n}\nif( enableSpecular )\nspecularTex = texture2D( tSpecular, vUv ).xyz;\nmat3 tsb = mat3( normalize( vTangent ), normalize( vBinormal ), normalize( vNormal ) );\nvec3 finalNormal = tsb * normalTex;\n#ifdef FLIP_SIDED\nfinalNormal = -finalNormal;\n#endif\nvec3 normal = normalize( finalNormal );\nvec3 viewPosition = normalize( vViewPosition );\n#if MAX_POINT_LIGHTS > 0\nvec3 pointDiffuse = vec3( 0.0 );\nvec3 pointSpecular = vec3( 0.0 );\nfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\nvec3 pointVector = lPosition.xyz + vViewPosition.xyz;\nfloat pointDistance = 1.0;\nif ( pointLightDistance[ i ] > 0.0 )\npointDistance = 1.0 - min( ( length( pointVector ) / pointLightDistance[ i ] ), 1.0 );\npointVector = normalize( pointVector );\n#ifdef WRAP_AROUND\nfloat pointDiffuseWeightFull = max( dot( normal, pointVector ), 0.0 );\nfloat pointDiffuseWeightHalf = max( 0.5 * dot( normal, pointVector ) + 0.5, 0.0 );\nvec3 pointDiffuseWeight = mix( vec3 ( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n#else\nfloat pointDiffuseWeight = max( dot( normal, pointVector ), 0.0 );\n#endif\npointDiffuse += pointDistance * pointLightColor[ i ] * uDiffuseColor * pointDiffuseWeight;\nvec3 pointHalfVector = normalize( pointVector + viewPosition );\nfloat pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\nfloat pointSpecularWeight = specularTex.r * max( pow( pointDotNormalHalf, uShininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( uShininess + 2.0001 ) / 8.0;\nvec3 schlick = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( pointVector, pointHalfVector ), 5.0 );\npointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * pointDistance * specularNormalization;\n#else\npointSpecular += pointDistance * pointLightColor[ i ] * uSpecularColor * pointSpecularWeight * pointDiffuseWeight;\n#endif\n}\n#endif\n#if MAX_SPOT_LIGHTS > 0\nvec3 spotDiffuse = vec3( 0.0 );\nvec3 spotSpecular = vec3( 0.0 );\nfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\nvec3 spotVector = lPosition.xyz + vViewPosition.xyz;\nfloat spotDistance = 1.0;\nif ( spotLightDistance[ i ] > 0.0 )\nspotDistance = 1.0 - min( ( length( spotVector ) / spotLightDistance[ i ] ), 1.0 );\nspotVector = normalize( spotVector );\nfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\nif ( spotEffect > spotLightAngleCos[ i ] ) {\nspotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );\n#ifdef WRAP_AROUND\nfloat spotDiffuseWeightFull = max( dot( normal, spotVector ), 0.0 );\nfloat spotDiffuseWeightHalf = max( 0.5 * dot( normal, spotVector ) + 0.5, 0.0 );\nvec3 spotDiffuseWeight = mix( vec3 ( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n#else\nfloat spotDiffuseWeight = max( dot( normal, spotVector ), 0.0 );\n#endif\nspotDiffuse += spotDistance * spotLightColor[ i ] * uDiffuseColor * spotDiffuseWeight * spotEffect;\nvec3 spotHalfVector = normalize( spotVector + viewPosition );\nfloat spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\nfloat spotSpecularWeight = specularTex.r * max( pow( spotDotNormalHalf, uShininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( uShininess + 2.0001 ) / 8.0;\nvec3 schlick = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( spotVector, spotHalfVector ), 5.0 );\nspotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * spotDistance * specularNormalization * spotEffect;\n#else\nspotSpecular += spotDistance * spotLightColor[ i ] * uSpecularColor * spotSpecularWeight * spotDiffuseWeight * spotEffect;\n#endif\n}\n}\n#endif\n#if MAX_DIR_LIGHTS > 0\nvec3 dirDiffuse = vec3( 0.0 );\nvec3 dirSpecular = vec3( 0.0 );\nfor( int i = 0; i < MAX_DIR_LIGHTS; i++ ) {\nvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\nvec3 dirVector = normalize( lDirection.xyz );\n#ifdef WRAP_AROUND\nfloat directionalLightWeightingFull = max( dot( normal, dirVector ), 0.0 );\nfloat directionalLightWeightingHalf = max( 0.5 * dot( normal, dirVector ) + 0.5, 0.0 );\nvec3 dirDiffuseWeight = mix( vec3( directionalLightWeightingFull ), vec3( directionalLightWeightingHalf ), wrapRGB );\n#else\nfloat dirDiffuseWeight = max( dot( normal, dirVector ), 0.0 );\n#endif\ndirDiffuse += directionalLightColor[ i ] * uDiffuseColor * dirDiffuseWeight;\nvec3 dirHalfVector = normalize( dirVector + viewPosition );\nfloat dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\nfloat dirSpecularWeight = specularTex.r * max( pow( dirDotNormalHalf, uShininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( uShininess + 2.0001 ) / 8.0;\nvec3 schlick = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( dirVector, dirHalfVector ), 5.0 );\ndirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n#else\ndirSpecular += directionalLightColor[ i ] * uSpecularColor * dirSpecularWeight * dirDiffuseWeight;\n#endif\n}\n#endif\n#if MAX_HEMI_LIGHTS > 0\nvec3 hemiDiffuse  = vec3( 0.0 );\nvec3 hemiSpecular = vec3( 0.0 );\nfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\nvec3 lVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( normal, lVector );\nfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\nvec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\nhemiDiffuse += uDiffuseColor * hemiColor;\nvec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\nfloat hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\nfloat hemiSpecularWeightSky = specularTex.r * max( pow( hemiDotNormalHalfSky, uShininess ), 0.0 );\nvec3 lVectorGround = -lVector;\nvec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\nfloat hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\nfloat hemiSpecularWeightGround = specularTex.r * max( pow( hemiDotNormalHalfGround, uShininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat dotProductGround = dot( normal, lVectorGround );\nfloat specularNormalization = ( uShininess + 2.0001 ) / 8.0;\nvec3 schlickSky = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( lVector, hemiHalfVectorSky ), 5.0 );\nvec3 schlickGround = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 5.0 );\nhemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\n#else\nhemiSpecular += uSpecularColor * hemiColor * ( hemiSpecularWeightSky + hemiSpecularWeightGround ) * hemiDiffuseWeight;\n#endif\n}\n#endif\nvec3 totalDiffuse = vec3( 0.0 );\nvec3 totalSpecular = vec3( 0.0 );\n#if MAX_DIR_LIGHTS > 0\ntotalDiffuse += dirDiffuse;\ntotalSpecular += dirSpecular;\n#endif\n#if MAX_HEMI_LIGHTS > 0\ntotalDiffuse += hemiDiffuse;\ntotalSpecular += hemiSpecular;\n#endif\n#if MAX_POINT_LIGHTS > 0\ntotalDiffuse += pointDiffuse;\ntotalSpecular += pointSpecular;\n#endif\n#if MAX_SPOT_LIGHTS > 0\ntotalDiffuse += spotDiffuse;\ntotalSpecular += spotSpecular;\n#endif\n#ifdef METAL\ngl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * uAmbientColor + totalSpecular );\n#else\ngl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * uAmbientColor ) + totalSpecular;\n#endif\nif ( enableReflection ) {\nvec3 vReflect;\nvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\nif ( useRefract ) {\nvReflect = refract( cameraToVertex, normal, uRefractionRatio );\n} else {\nvReflect = reflect( cameraToVertex, normal );\n}\nvec4 cubeColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );\n#ifdef GAMMA_INPUT\ncubeColor.xyz *= cubeColor.xyz;\n#endif\ngl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularTex.r * uReflectivity );\n}",
THREE.j.xh,THREE.j.Si,THREE.j.Qf,"}"].join("\n"),N:["attribute vec4 tangent;\nuniform vec2 uOffset;\nuniform vec2 uRepeat;\nuniform bool enableDisplacement;\n#ifdef VERTEX_TEXTURES\nuniform sampler2D tDisplacement;\nuniform float uDisplacementScale;\nuniform float uDisplacementBias;\n#endif\nvarying vec3 vTangent;\nvarying vec3 vBinormal;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vWorldPosition;\nvarying vec3 vViewPosition;",THREE.j.Bh,THREE.j.zh,"void main() {",THREE.j.Ah,THREE.j.pj,
"#ifdef USE_SKINNING\nvNormal = normalize( normalMatrix * skinnedNormal.xyz );\nvec4 skinnedTangent = skinMatrix * vec4( tangent.xyz, 0.0 );\nvTangent = normalize( normalMatrix * skinnedTangent.xyz );\n#else\nvNormal = normalize( normalMatrix * normal );\nvTangent = normalize( normalMatrix * tangent.xyz );\n#endif\nvBinormal = normalize( cross( vNormal, vTangent ) * tangent.w );\nvUv = uv * uRepeat + uOffset;\nvec3 displacedPosition;\n#ifdef VERTEX_TEXTURES\nif ( enableDisplacement ) {\nvec3 dv = texture2D( tDisplacement, uv ).xyz;\nfloat df = uDisplacementScale * dv.x + uDisplacementBias;\ndisplacedPosition = position + normalize( normal ) * df;\n} else {\n#ifdef USE_SKINNING\nvec4 skinVertex = vec4( position, 1.0 );\nvec4 skinned  = boneMatX * skinVertex * skinWeight.x;\nskinned \t  += boneMatY * skinVertex * skinWeight.y;\ndisplacedPosition  = skinned.xyz;\n#else\ndisplacedPosition = position;\n#endif\n}\n#else\n#ifdef USE_SKINNING\nvec4 skinVertex = vec4( position, 1.0 );\nvec4 skinned  = boneMatX * skinVertex * skinWeight.x;\nskinned \t  += boneMatY * skinVertex * skinWeight.y;\ndisplacedPosition  = skinned.xyz;\n#else\ndisplacedPosition = position;\n#endif\n#endif\nvec4 mvPosition = modelViewMatrix * vec4( displacedPosition, 1.0 );\nvec4 worldPosition = modelMatrix * vec4( displacedPosition, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\nvWorldPosition = worldPosition.xyz;\nvViewPosition = -mvPosition.xyz;\n#ifdef USE_SHADOWMAP\nfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\nvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n}\n#endif\n}"].join("\n")},
Jv:{P:{Jl:{type:"t",value:w},Xz:{type:"f",value:-1}},N:"varying vec3 vWorldPosition;\nvoid main() {\nvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\nvWorldPosition = worldPosition.xyz;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",K:"uniform samplerCube tCube;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\nvoid main() {\ngl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n}"}}};
THREE.ab={m:{},face:"helvetiker",Ed:"normal",style:"normal",size:150,Gk:10,Lr:function(){return this.m[this.face][this.Ed][this.style]},Qn:function(a){var b=a.xw.toLowerCase();this.m[b]=this.m[b]||{};this.m[b][a.Ck]=this.m[b][a.Ck]||{};this.m[b][a.Ck][a.pr]=a;return this.m[b][a.Ck][a.pr]=a},zr:function(a){for(var b=this.Lr(),c=this.size/b.pz,d=0,e=String(a).split(""),f=e.length,g=[],a=0;a<f;a++){var h=new THREE.Ce,h=this.Gr(e[a],b,c,d,h),d=d+h.offset;g.push(h.path)}return{ft:g,offset:d/2}},Gr:function(a,
b,c,d,e){var f=[],g,h,i,k,l,m,p,s,q,n=b.Or[a]||b.Or["?"];if(n){if(n.Os){b=n.Cq||(n.Cq=n.Os.split(" "));k=b.length;for(a=0;a<k;)switch(i=b[a++],i){case "m":i=b[a++]*c+d;l=b[a++]*c;e.moveTo(i,l);break;case "l":i=b[a++]*c+d;l=b[a++]*c;e.lineTo(i,l);break;case "q":i=b[a++]*c+d;l=b[a++]*c;m=b[a++]*c+d;p=b[a++]*c;e.quadraticCurveTo(m,p,i,l);if(f[f.length-1]){g=1;for(h=this.Gk;g<=h;g++);}break;case "b":if(i=b[a++]*c+d,l=b[a++]*c,m=b[a++]*c+d,p=b[a++]*-c,s=b[a++]*c+d,q=b[a++]*-c,e.bezierCurveTo(i,l,m,p,s,
q),f[f.length-1]){g=1;for(h=this.Gk;g<=h;g++);}}}return{offset:n.Pw*c,path:e}}}};THREE.ab.Jr=function(a,b){var b=b||{},c=r!==b.Ad?b.Ad:4,d=r!==b.font?b.font:"helvetiker",e=r!==b.Ed?b.Ed:"normal",f=r!==b.style?b.style:"normal";THREE.ab.size=r!==b.size?b.size:100;THREE.ab.Gk=c;THREE.ab.face=d;THREE.ab.Ed=e;THREE.ab.style=f;c=THREE.ab.zr(a).ft;d=[];e=0;for(f=c.length;e<f;e++)Array.prototype.push.apply(d,ke(c[e]));return d};var le=THREE.ab;
function me(a){for(var b=a.length,c=0,d=b-1,e=0;e<b;d=e++)c+=a[d].x*a[e].y-a[e].x*a[d].y;return 0.5*c}
le.Fe=function(a,b){var c=a.length;if(3>c)return w;var d=[],e=[],f=[],g,h,i;if(0<me(a))for(h=0;h<c;h++)e[h]=h;else for(h=0;h<c;h++)e[h]=c-1-h;var k=2*c;for(h=c-1;2<c;){if(0>=k--){console.log("Warning, unable to triangulate polygon!");break}g=h;c<=g&&(g=0);h=g+1;c<=h&&(h=0);i=h+1;c<=i&&(i=0);var l;a:{l=a;var m=g,p=h,s=i,q=c,n=e,t=r,x=r,L=r,E=r,y=r,M=r,B=r,K=r,J=r,x=l[n[m]].x,L=l[n[m]].y,E=l[n[p]].x,y=l[n[p]].y,M=l[n[s]].x,B=l[n[s]].y;if(1E-10>(E-x)*(B-L)-(y-L)*(M-x))l=D;else{for(t=0;t<q;t++)if(!(t==
m||t==p||t==s)){var K=l[n[t]].x,J=l[n[t]].y,H=r,O=r,C=r,P=r,F=r,U=r,G=r,V=r,fa=r,W=r,ia=r,ra=r,H=M-E,O=B-y,C=x-M,P=L-B,F=E-x,U=y-L,G=K-x,V=J-L,fa=K-E,W=J-y,ia=K-M,ra=J-B,H=H*W-O*fa,F=F*V-U*G,C=C*ra-P*ia;if(0<=H&&0<=C&&0<=F){l=D;break a}}l=v}}if(l){d.push([a[e[g]],a[e[h]],a[e[i]]]);f.push([e[g],e[h],e[i]]);g=h;for(i=h+1;i<c;g++,i++)e[g]=e[i];c--;k=2*c}}return b?f:d};le.Fe.Cg=me;self.Su={m:THREE.ab.m,Qn:THREE.ab.Qn};THREE.la=Ua();mb=THREE.la.prototype;
mb.Ba=function(){console.log("Warning, getPoint() not implemented!");return w};mb.Ug=function(a){a=ne(this,a);return this.Ba(a)};mb.Xf=function(a){a||(a=5);var b,c=[];for(b=0;b<=a;b++)c.push(this.Ba(b/a));return c};mb.Li=function(a){a||(a=5);var b,c=[];for(b=0;b<=a;b++)c.push(this.Ug(b/a));return c};mb.Vf=function(){var a=oe(this);return a[a.length-1]};
function oe(a){var b;b||(b=a.oq?a.oq:200);if(a.zk&&a.zk.length==b+1&&!a.ga)return a.zk;a.ga=D;var c=[],d,e=a.Ba(0),f,g=0;c.push(0);for(f=1;f<=b;f++)d=a.Ba(f/b),g+=d.Nb(e),c.push(g),e=d;return a.zk=c}function ne(a,b,c){for(var a=oe(a),d=0,e=a.length,b=c?c:b*a[e-1],c=0,f=e-1,g;c<=f;)if(d=Math.floor(c+(f-c)/2),g=a[d]-b,0>g)c=d+1;else if(0<g)f=d-1;else{f=d;break}d=f;if(a[d]==b)return d/(e-1);c=a[d];return(d+(b-c)/(a[d+1]-c))/(e-1)}
mb.Mi=function(a){var b=a-1E-4,a=a+1E-4;0>b&&(b=0);1<a&&(a=1);b=this.Ba(b);return this.Ba(a).d().Wa(b).normalize()};THREE.wf=function(a,b){this.Y=a;this.ba=b};THREE.wf.prototype=Object.create(THREE.la.prototype);THREE.wf.prototype.Ba=function(a){var b=this.ba.d().Wa(this.Y);b.V(a).v(this.Y);return b};THREE.wf.prototype.Ug=function(a){return this.Ba(a)};THREE.wf.prototype.Mi=function(){return this.ba.d().Wa(this.Y).normalize()};THREE.Wh=function(a,b,c){this.jb=a;this.Y=b;this.ba=c};
THREE.Wh.prototype=Object.create(THREE.la.prototype);THREE.Wh.prototype.Ba=function(a){var b;b=THREE.ea.T.Le(a,this.jb.x,this.Y.x,this.ba.x);a=THREE.ea.T.Le(a,this.jb.y,this.Y.y,this.ba.y);return new THREE.l(b,a)};THREE.Wh.prototype.Mi=function(a){var b;b=THREE.la.T.Oo(a,this.jb.x,this.Y.x,this.ba.x);a=THREE.la.T.Oo(a,this.jb.y,this.Y.y,this.ba.y);b=new THREE.l(b,a);b.normalize();return b};THREE.Lh=function(a,b,c,d){this.jb=a;this.Y=b;this.ba=c;this.qb=d};THREE.Lh.prototype=Object.create(THREE.la.prototype);
THREE.Lh.prototype.Ba=function(a){var b;b=THREE.ea.T.Me(a,this.jb.x,this.Y.x,this.ba.x,this.qb.x);a=THREE.ea.T.Me(a,this.jb.y,this.Y.y,this.ba.y,this.qb.y);return new THREE.l(b,a)};THREE.Lh.prototype.Mi=function(a){var b;b=THREE.la.T.No(a,this.jb.x,this.Y.x,this.ba.x,this.qb.x);a=THREE.la.T.No(a,this.jb.y,this.Y.y,this.ba.y,this.qb.y);b=new THREE.l(b,a);b.normalize();return b};THREE.Sj=function(a){this.M=r==a?[]:a};THREE.Sj.prototype=Object.create(THREE.la.prototype);
THREE.Sj.prototype.Ba=function(a){var b=new THREE.l,c=[],d=this.M,e;e=(d.length-1)*a;a=Math.floor(e);e-=a;c[0]=0==a?a:a-1;c[1]=a;c[2]=a>d.length-2?d.length-1:a+1;c[3]=a>d.length-3?d.length-1:a+2;b.x=THREE.la.T.yb(d[c[0]].x,d[c[1]].x,d[c[2]].x,d[c[3]].x,e);b.y=THREE.la.T.yb(d[c[0]].y,d[c[1]].y,d[c[2]].y,d[c[3]].y,e);return b};THREE.ng=function(a,b,c,d,e,f,g){this.Hq=a;this.Iq=b;this.lu=c;this.mu=d;this.Xm=e;this.Gq=f;this.Fq=g};THREE.ng.prototype=Object.create(THREE.la.prototype);
THREE.ng.prototype.Ba=function(a){var b=this.Gq-this.Xm;this.Fq||(a=1-a);b=this.Xm+a*b;a=this.Hq+this.lu*Math.cos(b);b=this.Iq+this.mu*Math.sin(b);return new THREE.l(a,b)};THREE.jp=function(a,b,c,d,e,f){THREE.ng.call(this,a,b,c,c,d,e,f)};THREE.jp.prototype=Object.create(THREE.ng.prototype);
THREE.la.T={Oo:function(a,b,c,d){return 2*(1-a)*(c-b)+2*a*(d-c)},No:function(a,b,c,d,e){return-3*b*(1-a)*(1-a)+3*c*(1-a)*(1-a)-6*a*c*(1-a)+6*a*d*(1-a)-3*a*a*d+3*a*a*e},Yz:function(a){return 6*a*a-6*a+(3*a*a-4*a+1)+(-6*a*a+6*a)+(3*a*a-2*a)},yb:function(a,b,c,d,e){var a=0.5*(c-a),d=0.5*(d-b),f=e*e;return(2*b-2*c+a+d)*e*f+(-3*b+3*c-2*a-d)*f+a*e+b}};THREE.la.create=function(a,b){a.prototype=Object.create(THREE.la.prototype);a.prototype.Ba=b;return a};
THREE.yu=THREE.la.create(function(a,b){this.Y=a;this.ba=b},function(a){var b=new THREE.e;b.sub(this.ba,this.Y);b.V(a);b.v(this.Y);return b});THREE.Du=THREE.la.create(function(a,b,c){this.jb=a;this.Y=b;this.ba=c},function(a){var b,c;b=THREE.ea.T.Le(a,this.jb.x,this.Y.x,this.ba.x);c=THREE.ea.T.Le(a,this.jb.y,this.Y.y,this.ba.y);a=THREE.ea.T.Le(a,this.jb.a,this.Y.a,this.ba.a);return new THREE.e(b,c,a)});
THREE.tu=THREE.la.create(function(a,b,c,d){this.jb=a;this.Y=b;this.ba=c;this.qb=d},function(a){var b,c;b=THREE.ea.T.Me(a,this.jb.x,this.Y.x,this.ba.x,this.qb.x);c=THREE.ea.T.Me(a,this.jb.y,this.Y.y,this.ba.y,this.qb.y);a=THREE.ea.T.Me(a,this.jb.a,this.Y.a,this.ba.a,this.qb.a);return new THREE.e(b,c,a)});
THREE.Iu=THREE.la.create(function(a){this.M=r==a?[]:a},function(a){var b=new THREE.e,c=[],d=this.M,e,a=(d.length-1)*a;e=Math.floor(a);a-=e;c[0]=0==e?e:e-1;c[1]=e;c[2]=e>d.length-2?d.length-1:e+1;c[3]=e>d.length-3?d.length-1:e+2;e=d[c[0]];var f=d[c[1]],g=d[c[2]],c=d[c[3]];b.x=THREE.la.T.yb(e.x,f.x,g.x,c.x,a);b.y=THREE.la.T.yb(e.y,f.y,g.y,c.y,a);b.a=THREE.la.T.yb(e.a,f.a,g.a,c.a,a);return b});
THREE.qu=THREE.la.create(function(a){this.M=r==a?[]:a},function(a){var b=new THREE.e,c=[],d=this.M,e;e=(d.length-0)*a;a=Math.floor(e);e-=a;a+=0<a?0:(Math.floor(Math.abs(a)/d.length)+1)*d.length;c[0]=(a-1)%d.length;c[1]=a%d.length;c[2]=(a+1)%d.length;c[3]=(a+2)%d.length;b.x=THREE.la.T.yb(d[c[0]].x,d[c[1]].x,d[c[2]].x,d[c[3]].x,e);b.y=THREE.la.T.yb(d[c[0]].y,d[c[1]].y,d[c[2]].y,d[c[3]].y,e);b.a=THREE.la.T.yb(d[c[0]].a,d[c[1]].a,d[c[2]].a,d[c[3]].a,e);return b});
THREE.te=function(){this.Ua=[];this.li=[];this.bv=D};THREE.te.prototype=Object.create(THREE.la.prototype);THREE.te.prototype.add=function(a){this.Ua.push(a)};THREE.te.prototype.closePath=function(){var a=this.Ua[0].Ba(0),b=this.Ua[this.Ua.length-1].Ba(1);a.eb(b)||this.Ua.push(new THREE.wf(b,a))};THREE.te.prototype.Ba=function(a){for(var b=a*this.Vf(),c=pe(this),a=0;a<c.length;){if(c[a]>=b)return b=c[a]-b,a=this.Ua[a],b=1-b/a.Vf(),a.Ug(b);a++}return w};
THREE.te.prototype.Vf=function(){var a=pe(this);return a[a.length-1]};function pe(a){if(a.Ak&&a.Ak.length==a.Ua.length)return a.Ak;var b=[],c=0,d,e=a.Ua.length;for(d=0;d<e;d++)c+=a.Ua[d].Vf(),b.push(c);return a.Ak=b}
function qe(a){var a=a.Xf(),b,c,d,e,f,g;b=c=Number.NEGATIVE_INFINITY;e=f=Number.POSITIVE_INFINITY;var h,i,k,l,m=a[0]instanceof THREE.e;l=m?new THREE.e:new THREE.l;i=0;for(k=a.length;i<k;i++)h=a[i],h.x>b?b=h.x:h.x<e&&(e=h.x),h.y>c?c=h.y:h.y<f&&(f=h.y),m&&(h.a>d?d=h.a:h.a<g&&(g=h.a)),l.v(h);a={iy:e,jy:f,Cs:b,Xx:c,qa:l.Yc(k)};m&&(a.Yx=d,a.ky=g);return a}function re(a,b,c){var b=a.Xf(b),d,e;c||(c=a.li);d=0;for(e=c.length;d<e;d++)b=se(a,b,c[d]);return b}
function Ie(a,b,c){var b=a.Li(b),d,e;c||(c=a.li);d=0;for(e=c.length;d<e;d++)b=se(a,b,c[d]);return b}function se(a,b,c){var a=qe(a),d,e,f,g,h,i;d=0;for(e=b.length;d<e;d++)f=b[d],g=f.x,h=f.y,i=g/a.Cs,i=ne(c,i,g),g=c.Ba(i),h=c.Hw(i).V(h),f.x=g.x+h.x,f.y=g.y+h.y;return b}THREE.Oh=function(){THREE.z.call(this)};THREE.Oh.prototype=Object.create(THREE.z.prototype);mb=THREE.Oh.prototype;
mb.Eb=function(a){this.tc&&this.yc();if(this.Ya||a){if(this.parent){this.F.multiply(this.parent.F,this.J);kd(this.F,this.Ro,this.rt,this.vo);kd(this.J,this.$t,this.uo,this.st);var a=this.F,b=this.Ro,c=this.uo,d=this.vo,e=a.elements,f=THREE.D.Vj,g=THREE.D.sq;Jd(f);ld(f,c);g.set(d.x,0,0,0,0,d.y,0,0,0,0,d.a,0,0,0,0,1);a.multiply(f,g);e[12]=b.x;e[13]=b.y;e[14]=b.a}else this.F.copy(this.J);this.Ya=D;a=v}b=0;for(c=this.children.length;b<c;b++)this.children[b].Eb(a)};mb.Ro=new THREE.e;mb.$t=new THREE.e;
mb.rt=new THREE.Ec;mb.uo=new THREE.Ec;mb.vo=new THREE.e;mb.st=new THREE.e;THREE.Ce=function(a){THREE.te.call(this);this.ha=[];if(a){this.moveTo(a[0].x,a[0].y);for(var b=1,c=a.length;b<c;b++)this.lineTo(a[b].x,a[b].y)}};THREE.Ce.prototype=Object.create(THREE.te.prototype);THREE.Zb={Jj:"moveTo",cm:"lineTo",nm:"quadraticCurveTo",Rl:"bezierCurveTo",mp:"splineThru",gp:"arc",Xl:"ellipse"};mb=THREE.Ce.prototype;
mb.moveTo=function(a,b){var c=Array.prototype.slice.call(arguments);this.ha.push({action:THREE.Zb.Jj,ec:c})};mb.lineTo=function(a,b){var c=Array.prototype.slice.call(arguments),d=this.ha[this.ha.length-1].ec,d=new THREE.wf(new THREE.l(d[d.length-2],d[d.length-1]),new THREE.l(a,b));this.Ua.push(d);this.ha.push({action:THREE.Zb.cm,ec:c})};
mb.quadraticCurveTo=function(a,b,c,d){var e=Array.prototype.slice.call(arguments),f=this.ha[this.ha.length-1].ec,f=new THREE.Wh(new THREE.l(f[f.length-2],f[f.length-1]),new THREE.l(a,b),new THREE.l(c,d));this.Ua.push(f);this.ha.push({action:THREE.Zb.nm,ec:e})};
mb.bezierCurveTo=function(a,b,c,d,e,f){var g=Array.prototype.slice.call(arguments),h=this.ha[this.ha.length-1].ec,h=new THREE.Lh(new THREE.l(h[h.length-2],h[h.length-1]),new THREE.l(a,b),new THREE.l(c,d),new THREE.l(e,f));this.Ua.push(h);this.ha.push({action:THREE.Zb.Rl,ec:g})};mb.arc=function(a,b,c,d,e,f){var g=this.ha[this.ha.length-1].ec;this.Jq(a+g[g.length-2],b+g[g.length-1],c,c,d,e,f)};
mb.Jq=function(a,b,c,d,e,f,g){var h=Array.prototype.slice.call(arguments),i=new THREE.ng(a,b,c,d,e,f,g);this.Ua.push(i);i=i.Ba(g?1:0);h.push(i.x);h.push(i.y);this.ha.push({action:THREE.Zb.Xl,ec:h})};mb.Li=function(a){a||(a=40);for(var b=[],c=0;c<a;c++)b.push(this.Ba(c/a));return b};
mb.Xf=function(a,b){if(this.bp)return console.log("tata"),this.Li(a,b);var a=a||12,c=[],d,e,f,g,h,i,k,l,m,p,s,q,n;d=0;for(e=this.ha.length;d<e;d++)switch(f=this.ha[d],g=f.action,f=f.ec,g){case THREE.Zb.Jj:c.push(new THREE.l(f[0],f[1]));break;case THREE.Zb.cm:c.push(new THREE.l(f[0],f[1]));break;case THREE.Zb.nm:h=f[2];i=f[3];m=f[0];p=f[1];0<c.length?(g=c[c.length-1],s=g.x,q=g.y):(g=this.ha[d-1].ec,s=g[g.length-2],q=g[g.length-1]);for(f=1;f<=a;f++)n=f/a,g=THREE.ea.T.Le(n,s,m,h),n=THREE.ea.T.Le(n,q,
p,i),c.push(new THREE.l(g,n));break;case THREE.Zb.Rl:h=f[4];i=f[5];m=f[0];p=f[1];k=f[2];l=f[3];0<c.length?(g=c[c.length-1],s=g.x,q=g.y):(g=this.ha[d-1].ec,s=g[g.length-2],q=g[g.length-1]);for(f=1;f<=a;f++)n=f/a,g=THREE.ea.T.Me(n,s,m,k,h),n=THREE.ea.T.Me(n,q,p,l,i),c.push(new THREE.l(g,n));break;case THREE.Zb.mp:g=this.ha[d-1].ec;n=[new THREE.l(g[g.length-2],g[g.length-1])];g=a*f[0].length;n=n.concat(f[0]);n=new THREE.Sj(n);for(f=1;f<=g;f++)c.push(n.Ug(f/g));break;case THREE.Zb.gp:h=f[0];i=f[1];p=
f[2];k=f[3];g=f[4];m=!!f[5];s=g-k;q=2*a;for(f=1;f<=q;f++)n=f/q,m||(n=1-n),n=k+n*s,g=h+p*Math.cos(n),n=i+p*Math.sin(n),c.push(new THREE.l(g,n));break;case THREE.Zb.Xl:h=f[0];i=f[1];p=f[2];l=f[3];k=f[4];g=f[5];m=!!f[6];s=g-k;q=2*a;for(f=1;f<=q;f++)n=f/q,m||(n=1-n),n=k+n*s,g=h+p*Math.cos(n),n=i+l*Math.sin(n),c.push(new THREE.l(g,n))}d=c[c.length-1];1E-10>Math.abs(d.x-c[0].x)&&1E-10>Math.abs(d.y-c[0].y)&&c.splice(c.length-1,1);b&&c.push(c[0]);return c};
function ke(a){var b,c,d,e,f=[],g=new THREE.Ce;b=0;for(c=a.ha.length;b<c;b++)d=a.ha[b],e=d.ec,d=d.action,d==THREE.Zb.Jj&&0!=g.ha.length&&(f.push(g),g=new THREE.Ce),g[d].apply(g,e);0!=g.ha.length&&f.push(g);if(0==f.length)return[];var h;e=[];b=!THREE.ea.T.Ue(f[0].Xf());if(1==f.length)return g=f[0],h=new THREE.ea,h.ha=g.ha,h.Ua=g.Ua,e.push(h),e;if(b){h=new THREE.ea;b=0;for(c=f.length;b<c;b++)g=f[b],THREE.ea.T.Ue(g.Xf())?(h.ha=g.ha,h.Ua=g.Ua,e.push(h),h=new THREE.ea):h.Lc.push(g)}else{b=0;for(c=f.length;b<
c;b++)g=f[b],THREE.ea.T.Ue(g.Xf())?(h&&e.push(h),h=new THREE.ea,h.ha=g.ha,h.Ua=g.Ua):h.Lc.push(g);e.push(h)}return e}THREE.ea=function(){THREE.Ce.apply(this,arguments);this.Lc=[]};THREE.ea.prototype=Object.create(THREE.Ce.prototype);function Je(a,b){var c,d=a.Lc.length,e=[];for(c=0;c<d;c++)e[c]=re(a.Lc[c],b,a.li);return e}function Ke(a,b){var c=Ie(a,b),d,e=a.Lc.length,f=[];for(d=0;d<e;d++)f[d]=Ie(a.Lc[d],b,a.li);return{shape:c,Lc:f}}
THREE.ea.T={nt:function(a,b){var c=a.concat(),d=c.concat(),e,f,g,h,i,k,l,m,p,s,q=[];for(i=0;i<b.length;i++){k=b[i];Array.prototype.push.apply(d,k);f=Number.POSITIVE_INFINITY;for(e=0;e<k.length;e++){p=k[e];s=[];for(m=0;m<c.length;m++)l=c[m],l=p.Pg(l),s.push(l),l<f&&(f=l,g=e,h=m)}e=0<=h-1?h-1:c.length-1;f=0<=g-1?g-1:k.length-1;var n=[k[g],c[h],c[e]];m=THREE.ab.Fe.Cg(n);var t=[k[g],k[f],c[h]];p=THREE.ab.Fe.Cg(t);s=h;l=g;h+=1;g+=-1;0>h&&(h+=c.length);h%=c.length;0>g&&(g+=k.length);g%=k.length;e=0<=h-
1?h-1:c.length-1;f=0<=g-1?g-1:k.length-1;n=[k[g],c[h],c[e]];n=THREE.ab.Fe.Cg(n);t=[k[g],k[f],c[h]];t=THREE.ab.Fe.Cg(t);m+p>n+t&&(h=s,g=l,0>h&&(h+=c.length),h%=c.length,0>g&&(g+=k.length),g%=k.length,e=0<=h-1?h-1:c.length-1,f=0<=g-1?g-1:k.length-1);m=c.slice(0,h);p=c.slice(h);s=k.slice(g);l=k.slice(0,g);f=[k[g],k[f],c[h]];q.push([k[g],c[h],c[e]]);q.push(f);c=m.concat(s).concat(l).concat(p)}return{shape:c,es:q,Nq:d}},So:function(a,b){var c=THREE.ea.T.nt(a,b),d=c.Nq,e=c.es,c=THREE.ab.Fe(c.shape,D),f,
g,h,i,k={};f=0;for(g=d.length;f<g;f++)i=d[f].x+":"+d[f].y,r!==k[i]&&console.log("Duplicate point",i),k[i]=f;f=0;for(g=c.length;f<g;f++){h=c[f];for(d=0;3>d;d++)i=h[d].x+":"+h[d].y,i=k[i],r!==i&&(h[d]=i)}f=0;for(g=e.length;f<g;f++){h=e[f];for(d=0;3>d;d++)i=h[d].x+":"+h[d].y,i=k[i],r!==i&&(h[d]=i)}return c.concat(e)},Ue:function(a){return 0>THREE.ab.Fe.Cg(a)},Xq:function(a,b){var c=1-a;return c*c*b},Yq:function(a,b){return 2*(1-a)*a*b},Zq:function(a,b){return a*a*b},Le:function(a,b,c,d){return this.Xq(a,
b)+this.Yq(a,c)+this.Zq(a,d)},$q:function(a,b){var c=1-a;return c*c*c*b},ar:function(a,b){var c=1-a;return 3*c*c*a*b},br:function(a,b){return 3*(1-a)*a*a*b},cr:function(a,b){return a*a*a*b},Me:function(a,b,c,d,e){return this.$q(a,b)+this.ar(a,c)+this.br(a,d)+this.cr(a,e)}};
var Le=[],Me={},Oe={update:function(a){for(var b=0;b<Le.length;b++)Le[b].update(a)},Tu:function(a){-1===Le.indexOf(a)&&Le.push(a)},qo:function(a){a=Le.indexOf(a);-1!==a&&Le.splice(a,1)},add:function(a){r!==Me[a.name]&&console.log("THREE.AnimationHandler.add: Warning! "+a.name+" already exists in library. Overwriting.");Me[a.name]=a;if(v!==a.as){for(var b=0;b<a.w.length;b++){for(var c=0;c<a.w[b].keys.length;c++)if(0>a.w[b].keys[c].time&&(a.w[b].keys[c].time=0),r!==a.w[b].keys[c].Al&&!(a.w[b].keys[c].Al instanceof
THREE.Ec)){var d=a.w[b].keys[c].Al;a.w[b].keys[c].Al=new THREE.Ec(d[0],d[1],d[2],d[3])}if(a.w[b].keys.length&&r!==a.w[b].keys[0].G){d={};for(c=0;c<a.w[b].keys.length;c++)for(var e=0;e<a.w[b].keys[c].G.length;e++){var f=a.w[b].keys[c].G[e];d[f]=-1}a.w[b].oA=d;for(c=0;c<a.w[b].keys.length;c++){var g={};for(f in d){for(e=0;e<a.w[b].keys[c].G.length;e++)if(a.w[b].keys[c].G[e]===f){g[f]=a.w[b].keys[c].Js[e];break}e===a.w[b].keys[c].G.length&&(g[f]=0)}a.w[b].keys[c].Js=g}}for(c=1;c<a.w[b].keys.length;c++)a.w[b].keys[c].time===
a.w[b].keys[c-1].time&&(a.w[b].keys.splice(c,1),c--);for(c=0;c<a.w[b].keys.length;c++)a.w[b].keys[c].index=c}c=parseInt(a.length*a.Sf,10);a.Fj={};a.Fj.w=[];for(b=0;b<a.w.length;b++)a.Fj.w.push(Array(c));a.as=v}},get:function(a){if("string"===typeof a){if(Me[a])return Me[a];console.log("THREE.AnimationHandler.get: Couldn't find animation "+a);return w}},parse:function(a){var b=[];if(a instanceof THREE.ac)for(var c=0;c<a.Pa.length;c++)b.push(a.Pa[c]);else Ne(a,b);return b}};
function Ne(a,b){b.push(a);for(var c=0;c<a.children.length;c++)Ne(a.children[c],b)}Oe.LINEAR=0;Oe.yj=1;Oe.Kh=2;THREE.tb=Oe;THREE.ip=function(a,b,c){this.root=a;this.data=THREE.tb.get(b);this.w=THREE.tb.parse(a);this.currentTime=0;this.Ll=1;this.ah=D;this.loop=this.Uk=v;this.Zd=r!==c?c:THREE.tb.LINEAR;this.M=[];this.target=new THREE.e};mb=THREE.ip.prototype;mb.stop=function(){this.Uk=this.ah=D;THREE.tb.qo(this)};
mb.update=function(a){if(D!==this.ah){var b=["pos","rot","scl"],c,d,e,f,g,h,i,k,l;l=this.currentTime+=a*this.Ll;k=this.currentTime%=this.data.length;Math.min(k*this.data.Sf,this.data.length*this.data.Sf);for(var m=0,p=this.w.length;m<p;m++){a=this.w[m];i=a.hi;for(var s=0;3>s;s++){c=b[s];g=i.tl[c];h=i.ml[c];if(h.time<=l){if(k<l)if(this.loop){g=this.data.w[m].keys[0];for(h=this.Wf(c,m,1);h.time<k;)g=h,h=this.Wf(c,m,h.index+1)}else{this.stop();return}else{do g=h,h=this.Wf(c,m,h.index+1);while(h.time<
k)}i.tl[c]=g;i.ml[c]=h}a.tc=v;a.Ya=v;d=(k-g.time)/(h.time-g.time);e=g[c];f=h[c];if(0>d||1<d)console.log("THREE.Animation.update: Warning! Scale out of bounds:"+d+" on bone "+m),d=0>d?0:1;if("pos"===c)if(c=a.position,this.Zd===THREE.tb.LINEAR)c.x=e[0]+(f[0]-e[0])*d,c.y=e[1]+(f[1]-e[1])*d,c.a=e[2]+(f[2]-e[2])*d;else{if(this.Zd===THREE.tb.yj||this.Zd===THREE.tb.Kh)this.M[0]=this.Pk("pos",m,g.index-1).mo,this.M[1]=e,this.M[2]=f,this.M[3]=this.Wf("pos",m,h.index+1).mo,d=0.33*d+0.33,e=Pe(this,this.M,d),
c.x=e[0],c.y=e[1],c.a=e[2],this.Zd===THREE.tb.Kh&&(d=Pe(this,this.M,1.01*d),this.target.set(d[0],d[1],d[2]),this.target.Wa(c),this.target.y=0,this.target.normalize(),d=Math.atan2(this.target.x,this.target.a),a.rotation.set(0,d,0))}else"rot"===c?THREE.Ec.Et(e,f,a.ic,d):"scl"===c&&(c=a.scale,c.x=e[0]+(f[0]-e[0])*d,c.y=e[1]+(f[1]-e[1])*d,c.a=e[2]+(f[2]-e[2])*d)}}}};
function Pe(a,b,c){var d=[],e=[],f,g,h,i,c=(b.length-1)*c;f=Math.floor(c);c-=f;d[0]=0===f?f:f-1;d[1]=f;d[2]=f>b.length-2?f:f+1;d[3]=f>b.length-3?f:f+2;f=b[d[0]];g=b[d[1]];h=b[d[2]];i=b[d[3]];d=c*c;b=c*d;e[0]=a.yb(f[0],g[0],h[0],i[0],c,d,b);e[1]=a.yb(f[1],g[1],h[1],i[1],c,d,b);e[2]=a.yb(f[2],g[2],h[2],i[2],c,d,b);return e}mb.yb=function(a,b,c,d,e,f,g){a=0.5*(c-a);d=0.5*(d-b);return(2*(b-c)+a+d)*g+(-3*(b-c)-2*a-d)*f+a*e+b};
mb.Wf=function(a,b,c){for(var d=this.data.w[b].keys,c=this.Zd===THREE.tb.yj||this.Zd===THREE.tb.Kh?c<d.length-1?c:d.length-1:c%d.length;c<d.length;c++)if(r!==d[c][a])return d[c];return this.data.w[b].keys[0]};mb.Pk=function(a,b,c){for(var d=this.data.w[b].keys,c=this.Zd===THREE.tb.yj||this.Zd===THREE.tb.Kh?0<c?c:0:0<=c?c:c+d.length;0<=c;c--)if(r!==d[c][a])return d[c];return this.data.w[b].keys[d.length-1]};
THREE.Qh=function(a,b,c){this.root=a;this.data=THREE.tb.get(b);this.w=THREE.tb.parse(a);this.currentTime=0;this.Ll=0.001;this.ah=D;this.loop=this.Uk=v;this.Gj=r!==c?c:v;a=0;for(b=this.w.length;a<b;a++){var c=this.data.w[a].kg,d=this.w[a];if(this.data.w[a].keys.length&&c){for(var e=0;e<c.length;e++){var f=c[e],g=this.Wf(f,a,0);g&&g.apply(f)}d.tc=D;this.data.w[a].Yi.yc();d.Ya=v}}};
THREE.Qh.prototype.stop=function(){this.Uk=this.ah=D;THREE.tb.qo(this);for(var a=0;a<this.data.w.length;a++){var b=this.w[a],c=this.data.w[a];if(r!==c.hi){var d=c.hi.fo;b instanceof THREE.pd?(d.copy(b.gd),b.gd=d):(d.copy(b.J),b.J=d);delete c.hi}}};
THREE.Qh.prototype.update=function(a){if(this.ah){var b,c,d,e,f=this.data.Fj.w,g,h,i;h=this.currentTime+=a*this.Ll;g=this.currentTime%=this.data.length;g<this.Rt&&(g=this.currentTime=this.Rt+g);e=parseInt(Math.min(g*this.data.Sf,this.data.length*this.data.Sf),10);if((i=g<h)&&!this.loop){for(var a=0,k=this.w.length;a<k;a++){var l=this.data.w[a].keys,f=this.data.w[a].kg;d=l.length-1;e=this.w[a];if(l.length){for(l=0;l<f.length;l++)g=f[l],(h=this.Pk(g,a,d))&&h.apply(g);this.data.w[a].Yi.yc();e.Ya=v}}this.stop()}else if(!(g<
this.startTime)){a=0;for(k=this.w.length;a<k;a++){d=this.w[a];b=this.data.w[a];var l=b.keys,m=b.hi;if(this.Gj&&r!==f[a][e])d instanceof THREE.pd?(d.gd=f[a][e],d.Ya=D):(d.J=f[a][e],d.Ya=v);else if(l.length){this.Gj&&m&&(d instanceof THREE.pd?d.gd=m.fo:d.J=m.fo);b=m.tl;c=m.ml;if(b&&c){if(c.time<=h){if(i&&this.loop){b=l[0];for(c=l[1];c.time<g;)b=c,c=l[b.index+1]}else if(!i)for(var p=l.length-1;c.time<g&&c.index!==p;)b=c,c=l[b.index+1];m.tl=b;m.ml=c}c.time>=g?b.yb(c,g):b.yb(c,c.time)}this.data.w[a].Yi.yc();
d.Ya=v}}if(this.Gj&&r===f[0][e]){this.w[0].Eb(v);for(a=0;a<this.w.length;a++)f[a][e]=this.w[a]instanceof THREE.pd?this.w[a].gd.d():this.w[a].J.d()}}}};THREE.Qh.prototype.Wf=function(a,b,c){b=this.data.w[b].keys;for(c%=b.length;c<b.length;c++)if(b[c].Yg(a))return b[c];return b[0]};THREE.Qh.prototype.Pk=function(a,b,c){b=this.data.w[b].keys;for(c=0<=c?c:c+b.length;0<=c;c--)if(b[c].Yg(a))return b[c];return b[b.length-1]};
THREE.qp=function(a,b,c){THREE.z.call(this);var d=new THREE.mc(90,1,a,b);d.kd.set(0,-1,0);d.nb(new THREE.e(1,0,0));this.add(d);var e=new THREE.mc(90,1,a,b);e.kd.set(0,-1,0);e.nb(new THREE.e(-1,0,0));this.add(e);var f=new THREE.mc(90,1,a,b);f.kd.set(0,0,1);f.nb(new THREE.e(0,1,0));this.add(f);var g=new THREE.mc(90,1,a,b);g.kd.set(0,0,-1);g.nb(new THREE.e(0,-1,0));this.add(g);var h=new THREE.mc(90,1,a,b);h.kd.set(0,-1,0);h.nb(new THREE.e(0,0,1));this.add(h);var i=new THREE.mc(90,1,a,b);i.kd.set(0,-1,
0);i.nb(new THREE.e(0,0,-1));this.add(i);this.yl=new THREE.Ge(c,c,{ia:THREE.Mj,Bb:THREE.Gd,gb:THREE.Gd});this.lA=function(a,b){var c=this.yl,p=c.fb;c.fb=D;c.Je=0;a.B(b,d,c);c.Je=1;a.B(b,e,c);c.Je=2;a.B(b,f,c);c.Je=3;a.B(b,g,c);c.Je=4;a.B(b,h,c);c.fb=p;c.Je=5;a.B(b,i,c)}};THREE.qp.prototype=Object.create(THREE.z.prototype);
THREE.zj=function(a,b,c,d,e,f,g){THREE.Wb.call(this);this.Xd=c;this.left=-a/2;this.right=a/2;this.top=b/2;this.bottom=-b/2;this.Pd=new THREE.tg(a/-2,a/2,b/2,b/-2,f,g);this.yd=new THREE.mc(c,a/b,d,e);this.zoom=1;Qe(this)};THREE.zj.prototype=Object.create(THREE.Wb.prototype);function Qe(a){a.Ca=a.yd.Ca;a.Ia=a.yd.Ia;a.yd.Xd=a.Xd/a.zoom;a.yd.mf();a.oa=a.yd.oa;a.Fn=v;a.Yr=D}THREE.zj.prototype.xo=function(a,b){this.yd.ji=a/b;this.left=-a/2;this.right=a/2;this.top=b/2;this.bottom=-b/2};
THREE.zj.prototype.mf=function(){if(this.Fn)Qe(this);else{Qe(this);var a=this.yd.ji,b=(this.yd.Ca+this.yd.Ia)/2,b=Math.tan(this.Xd/2)*b,a=2*b*a/2,b=b/this.zoom,a=a/this.zoom;this.Pd.left=-a;this.Pd.right=a;this.Pd.top=b;this.Pd.bottom=-b;this.Pd.mf();this.Ca=this.Pd.Ca;this.Ia=this.Pd.Ia;this.oa=this.Pd.oa;this.Fn=D;this.Yr=v}};
THREE.Hh=function(a,b){THREE.I.call(this);for(var c=0.707*a,d=0.707*b,c=[[a,0,0],[b,0,0],[-a,0,0],[-b,0,0],[0,a,0],[0,b,0],[0,-a,0],[0,-b,0],[0,0,a],[0,0,b],[0,0,-a],[0,0,-b],[c,c,0],[d,d,0],[-c,-c,0],[-d,-d,0],[c,-c,0],[d,-d,0],[-c,c,0],[-d,d,0],[c,0,c],[d,0,d],[-c,0,-c],[-d,0,-d],[c,0,-c],[d,0,-d],[-c,0,c],[-d,0,d],[0,c,c],[0,d,d],[0,-c,-c],[0,-d,-d],[0,c,-c],[0,d,-d],[0,-c,c],[0,-d,d]],d=0,e=c.length;d<e;d++)this.f.push(new THREE.e(c[d][0],c[d][1],c[d][2]))};THREE.Hh.prototype=Object.create(THREE.I.prototype);
THREE.np=function(a,b,c,d){THREE.I.call(this);var a=a||50,c=r!==c?c:0,d=r!==d?d:2*Math.PI,b=r!==b?Math.max(3,b):8,e,f=[];e=new THREE.e;var g=new THREE.l(0.5,0.5);this.f.push(e);f.push(g);for(e=0;e<=b;e++){var h=new THREE.e;h.x=a*Math.cos(c+e/b*d);h.y=a*Math.sin(c+e/b*d);this.f.push(h);f.push(new THREE.l((h.x/a+1)/2,-(h.y/a+1)/2+1))}c=new THREE.e(0,0,-1);for(e=1;e<=b;e++)this.m.push(new THREE.O(e,e+1,0,[c,c,c])),this.C[0].push([f[e],f[e+1],g]);ce(this);be(this);this.Lb=new THREE.De(new THREE.e,a)};
THREE.np.prototype=Object.create(THREE.I.prototype);
THREE.Ul=function(a,b,c,d,e,f){function g(a,b,c,d,e,f,g,n){var t,x=h.nd,L=h.ad,E=e/2,y=f/2,M=h.f.length;if("x"===a&&"y"===b||"y"===a&&"x"===b)t="z";else if("x"===a&&"z"===b||"z"===a&&"x"===b)t="y",L=h.Fk;else if("z"===a&&"y"===b||"y"===a&&"z"===b)t="x",x=h.Fk;var B=x+1,K=L+1,J=e/x,H=f/L,O=new THREE.e;O[t]=0<g?1:-1;for(e=0;e<K;e++)for(f=0;f<B;f++){var C=new THREE.e;C[a]=(f*J-E)*c;C[b]=(e*H-y)*d;C[t]=g;h.f.push(C)}for(e=0;e<L;e++)for(f=0;f<x;f++)a=new THREE.da(f+B*e+M,f+B*(e+1)+M,f+1+B*(e+1)+M,f+1+
B*e+M),a.r.copy(O),a.o.push(O.d(),O.d(),O.d(),O.d()),a.va=n,h.m.push(a),h.C[0].push([new THREE.l(f/x,1-e/L),new THREE.l(f/x,1-(e+1)/L),new THREE.l((f+1)/x,1-(e+1)/L),new THREE.l((f+1)/x,1-e/L)])}THREE.I.call(this);var h=this;this.width=a;this.height=b;this.depth=c;this.nd=d||1;this.ad=e||1;this.Fk=f||1;a=this.width/2;b=this.height/2;c=this.depth/2;g("z","y",-1,-1,this.depth,this.height,a,0);g("z","y",1,-1,this.depth,this.height,-a,1);g("x","z",1,1,this.width,this.depth,b,2);g("x","z",1,-1,this.width,
this.depth,-b,3);g("x","y",1,-1,this.width,this.height,c,4);g("x","y",-1,-1,this.width,this.height,-c,5);ce(this);$d(this)};THREE.Ul.prototype=Object.create(THREE.I.prototype);
THREE.Nh=function(a,b,c,d,e,f){THREE.I.call(this);var a=r!==a?a:20,b=r!==b?b:20,c=r!==c?c:100,g=c/2,d=d||8,e=e||1,h,i,k=[],l=[];for(i=0;i<=e;i++){var m=[],p=[],s=i/e,q=s*(b-a)+a;for(h=0;h<=d;h++){var n=h/d,t=new THREE.e;t.x=q*Math.sin(2*n*Math.PI);t.y=-s*c+g;t.a=q*Math.cos(2*n*Math.PI);this.f.push(t);m.push(this.f.length-1);p.push(new THREE.l(n,1-s))}k.push(m);l.push(p)}c=(b-a)/c;for(h=0;h<d;h++){0!==a?(m=this.f[k[0][h]].d(),p=this.f[k[0][h+1]].d()):(m=this.f[k[1][h]].d(),p=this.f[k[1][h+1]].d());
m.hj(Math.sqrt(m.x*m.x+m.a*m.a)*c).normalize();p.hj(Math.sqrt(p.x*p.x+p.a*p.a)*c).normalize();for(i=0;i<e;i++){var s=k[i][h],q=k[i+1][h],n=k[i+1][h+1],t=k[i][h+1],x=m.d(),L=m.d(),E=p.d(),y=p.d(),M=l[i][h].d(),B=l[i+1][h].d(),K=l[i+1][h+1].d(),J=l[i][h+1].d();this.m.push(new THREE.da(s,q,n,t,[x,L,E,y]));this.C[0].push([M,B,K,J])}}if(!f&&0<a){this.f.push(new THREE.e(0,g,0));for(h=0;h<d;h++)s=k[0][h],q=k[0][h+1],n=this.f.length-1,x=new THREE.e(0,1,0),L=new THREE.e(0,1,0),E=new THREE.e(0,1,0),M=l[0][h].d(),
B=l[0][h+1].d(),K=new THREE.l(B.tj,0),this.m.push(new THREE.O(s,q,n,[x,L,E])),this.C[0].push([M,B,K])}if(!f&&0<b){this.f.push(new THREE.e(0,-g,0));for(h=0;h<d;h++)s=k[i][h+1],q=k[i][h],n=this.f.length-1,x=new THREE.e(0,-1,0),L=new THREE.e(0,-1,0),E=new THREE.e(0,-1,0),M=l[i][h+1].d(),B=l[i][h].d(),K=new THREE.l(B.tj,1),this.m.push(new THREE.O(s,q,n,[x,L,E])),this.C[0].push([M,B,K])}ce(this);be(this)};THREE.Nh.prototype=Object.create(THREE.I.prototype);
THREE.La=function(a,b){"undefined"!==typeof a&&(THREE.I.call(this),a=a instanceof Array?a:[a],this.Dt=qe(a[a.length-1]),this.rk(a,b),ce(this),be(this))};THREE.La.prototype=Object.create(THREE.I.prototype);THREE.La.prototype.rk=function(a,b){for(var c=a.length,d=0;d<c;d++)this.qk(a[d],b)};
THREE.La.prototype.qk=function(a,b){function c(a,b,c){b||console.log("die");return b.d().V(c).v(a)}function d(a,b,c){var d=THREE.La.Aa,e=THREE.La.Id,f=THREE.La.bi,g=THREE.La.xq,h=THREE.La.yq,i=THREE.La.zq;d.set(a.x-b.x,a.y-b.y);e.set(a.x-c.x,a.y-c.y);d=d.normalize();e=e.normalize();f.set(-d.y,d.x);g.set(e.y,-e.x);h.copy(a).v(f);i.copy(a).v(g);if(h.eb(i))return g.d();h.copy(b).v(f);i.copy(c).v(g);f=d.Qa(g);g=i.Wa(h).Qa(g);0===f&&(console.log("Either infinite or no solutions!"),0===g?console.log("Its finite solutions."):
console.log("Too bad, no solutions."));g/=f;return 0>g?(b=Math.atan2(b.y-a.y,b.x-a.x),a=Math.atan2(c.y-a.y,c.x-a.x),b>a&&(a+=2*Math.PI),c=(b+a)/2,a=-Math.cos(c),c=-Math.sin(c),new THREE.l(a,c)):d.V(g).v(h).Wa(a).d()}function e(c,d){var e,f;for(R=c.length;0<=--R;){e=R;f=R-1;0>f&&(f=c.length-1);for(var g=0,h=s+2*l,g=0;g<h;g++){var i=ia*g,k=ia*(g+1),m=d+e+i,i=d+f+i,n=d+f+k,k=d+e+k,p=c,q=g,t=h,y=e,x=f,m=m+P,i=i+P,n=n+P,k=k+P;C.m.push(new THREE.da(m,i,n,k,w,w,L));m=E.Kr(C,a,p,b,m,i,n,k,q,t,y,x);C.C[0].push(m)}}}
function f(a,b,c){C.f.push(new THREE.e(a,b,c))}function g(c,d,e,f){c+=P;d+=P;e+=P;C.m.push(new THREE.O(c,d,e,w,w,x));c=f?E.vn(C,a,b,c,d,e):E.wn(C,a,b,c,d,e);C.C[0].push(c)}var h=r!==b.$m?b.$m:100,i=r!==b.xk?b.xk:6,k=r!==b.wk?b.wk:i-2,l=r!==b.dr?b.dr:3,m=r!==b.vk?b.vk:v,p=r!==b.Ad?b.Ad:12,s=r!==b.Tt?b.Tt:1,q=b.ww,n,t=D,x=b.q,L=b.vw,E=r!==b.Tj?b.Tj:THREE.La.Em,y,M,B,K;q&&(n=q.Li(s),t=v,m=D,y=r!==b.frames?b.frames:new THREE.Zh.Yl(q,s,D),M=new THREE.e,B=new THREE.e,K=new THREE.e);m||(k=i=l=0);var J,H,
O,C=this,P=this.f.length,p=a.bp?Ke(a,p):{shape:re(a,p),Lc:Je(a,p)},F=p.shape,p=p.Lc;if(q=!THREE.ea.T.Ue(F)){F=F.reverse();H=0;for(O=p.length;H<O;H++)J=p[H],THREE.ea.T.Ue(J)&&(p[H]=J.reverse());q=D}var U=THREE.ea.T.So(F,p),q=F;H=0;for(O=p.length;H<O;H++)J=p[H],F=F.concat(J);var G,V,fa,W,ia=F.length,ra=U.length,Ha=[],R=0,ha=q.length;G=ha-1;for(V=R+1;R<ha;R++,G++,V++)G===ha&&(G=0),V===ha&&(V=0),Ha[R]=d(q[R],q[G],q[V]);var qa=[],ka,Q=Ha.concat();H=0;for(O=p.length;H<O;H++){J=p[H];ka=[];R=0;ha=J.length;
G=ha-1;for(V=R+1;R<ha;R++,G++,V++)G===ha&&(G=0),V===ha&&(V=0),ka[R]=d(J[R],J[G],J[V]);qa.push(ka);Q=Q.concat(ka)}for(G=0;G<l;G++){J=G/l;fa=i*(1-J);V=k*Math.sin(J*Math.PI/2);R=0;for(ha=q.length;R<ha;R++)W=c(q[R],Ha[R],V),f(W.x,W.y,-fa);H=0;for(O=p.length;H<O;H++){J=p[H];ka=qa[H];R=0;for(ha=J.length;R<ha;R++)W=c(J[R],ka[R],V),f(W.x,W.y,-fa)}}V=k;for(R=0;R<ia;R++)W=m?c(F[R],Q[R],V):F[R],t?(B.copy(y.Ye[0]).V(W.x),M.copy(y.mi[0]).V(W.y),K.copy(n[0]).v(B).v(M),f(K.x,K.y,K.a)):f(W.x,W.y,0);for(J=1;J<=s;J++)for(R=
0;R<ia;R++)W=m?c(F[R],Q[R],V):F[R],t?(B.copy(y.Ye[J]).V(W.x),M.copy(y.mi[J]).V(W.y),K.copy(n[J]).v(B).v(M),f(K.x,K.y,K.a)):f(W.x,W.y,h/s*J);for(G=l-1;0<=G;G--){J=G/l;fa=i*(1-J);V=k*Math.sin(J*Math.PI/2);R=0;for(ha=q.length;R<ha;R++)W=c(q[R],Ha[R],V),f(W.x,W.y,h+fa);H=0;for(O=p.length;H<O;H++){J=p[H];ka=qa[H];R=0;for(ha=J.length;R<ha;R++)W=c(J[R],ka[R],V),t?f(W.x,W.y+n[s-1].y,n[s-1].x+fa):f(W.x,W.y,h+fa)}}if(m){i=0*ia;for(R=0;R<ra;R++)h=U[R],g(h[2]+i,h[1]+i,h[0]+i,v);i=ia*(s+2*l);for(R=0;R<ra;R++)h=
U[R],g(h[0]+i,h[1]+i,h[2]+i,D)}else{for(R=0;R<ra;R++)h=U[R],g(h[2],h[1],h[0],v);for(R=0;R<ra;R++)h=U[R],g(h[0]+ia*s,h[1]+ia*s,h[2]+ia*s,D)}h=0;e(q,h);h+=q.length;H=0;for(O=p.length;H<O;H++)J=p[H],e(J,h),h+=J.length};
THREE.La.Em={wn:function(a,b,c,d,e,f){b=a.f[e].x;e=a.f[e].y;c=a.f[f].x;f=a.f[f].y;return[new THREE.l(a.f[d].x,a.f[d].y),new THREE.l(b,e),new THREE.l(c,f)]},vn:function(a,b,c,d,e,f){return this.wn(a,b,c,d,e,f)},Kr:function(a,b,c,d,e,f,g,h){var b=a.f[e].x,c=a.f[e].y,e=a.f[e].a,d=a.f[f].x,i=a.f[f].y,f=a.f[f].a,k=a.f[g].x,l=a.f[g].y,g=a.f[g].a,m=a.f[h].x,p=a.f[h].y,a=a.f[h].a;return 0.01>Math.abs(c-i)?[new THREE.l(b,1-e),new THREE.l(d,1-f),new THREE.l(k,1-g),new THREE.l(m,1-a)]:[new THREE.l(c,1-e),new THREE.l(i,
1-f),new THREE.l(l,1-g),new THREE.l(p,1-a)]}};THREE.La.Aa=new THREE.l;THREE.La.Id=new THREE.l;THREE.La.bi=new THREE.l;THREE.La.xq=new THREE.l;THREE.La.yq=new THREE.l;THREE.La.zq=new THREE.l;THREE.Rj=function(a,b){THREE.I.call(this);D===a instanceof Array&&(a=[a]);this.Dt=qe(a[a.length-1]);this.rk(a,b);ce(this);be(this)};THREE.Rj.prototype=Object.create(THREE.I.prototype);THREE.Rj.prototype.rk=function(a,b){for(var c=0,d=a.length;c<d;c++)this.qk(a[c],b);return this};
THREE.Rj.prototype.qk=function(a,b){r===b&&(b={});var c=b.q,d=r===b.Tj?THREE.La.Em:b.Tj,e,f,g,h=this.f.length;e=a.bp?Ke(a,r!==b.Ad?b.Ad:12):{shape:re(a,r!==b.Ad?b.Ad:12),Lc:Je(a,r!==b.Ad?b.Ad:12)};var i=e.shape,k=e.Lc;if(!THREE.ea.T.Ue(i)){i=i.reverse();e=0;for(f=k.length;e<f;e++)g=k[e],THREE.ea.T.Ue(g)&&(k[e]=g.reverse())}var l=THREE.ea.T.So(i,k);e=0;for(f=k.length;e<f;e++)g=k[e],i=i.concat(g);k=i.length;f=l.length;for(e=0;e<k;e++)g=i[e],this.f.push(new THREE.e(g.x,g.y,0));for(e=0;e<f;e++)k=l[e],
i=k[0]+h,g=k[1]+h,k=k[2]+h,this.m.push(new THREE.O(i,g,k,w,w,c)),this.C[0].push(d.vn(this,a,b,i,g,k))};
THREE.Cp=function(a,b,c){THREE.I.call(this);var b=b||12,c=c||2*Math.PI,d=[],e;e=new THREE.D;var c=c/b,f=Math.cos(c),c=Math.sin(c);e.set(f,-c,0,0,c,f,0,0,0,0,1,0,0,0,0,1);for(f=0;f<a.length;f++)d[f]=a[f].d(),this.f.push(d[f]);for(var g=b+1,c=0;c<g;c++)for(f=0;f<d.length;f++)d[f]=e.aa(d[f].d()),this.f.push(d[f]);for(c=0;c<b;c++){d=0;for(e=a.length;d<e-1;d++)this.m.push(new THREE.da(c*e+d,(c+1)%g*e+d,(c+1)%g*e+(d+1)%e,c*e+(d+1)%e)),this.C[0].push([new THREE.l(1-c/b,d/e),new THREE.l(1-(c+1)/b,d/e),new THREE.l(1-
(c+1)/b,(d+1)/e),new THREE.l(1-c/b,(d+1)/e)])}ce(this);be(this);this.zd()};THREE.Cp.prototype=Object.create(THREE.I.prototype);
THREE.lm=function(a,b,c,d){THREE.I.call(this);this.width=a;this.height=b;this.nd=c||1;this.ad=d||1;for(var c=a/2,e=b/2,d=this.nd,f=this.ad,g=d+1,h=f+1,i=this.width/d,k=this.height/f,l=new THREE.e(0,0,1),a=0;a<h;a++)for(b=0;b<g;b++)this.f.push(new THREE.e(b*i-c,-(a*k-e),0));for(a=0;a<f;a++)for(b=0;b<d;b++)c=new THREE.da(b+g*a,b+g*(a+1),b+1+g*(a+1),b+1+g*a),c.r.copy(l),c.o.push(l.d(),l.d(),l.d(),l.d()),this.m.push(c),this.C[0].push([new THREE.l(b/d,1-a/f),new THREE.l(b/d,1-(a+1)/f),new THREE.l((b+1)/
d,1-(a+1)/f),new THREE.l((b+1)/d,1-a/f)]);ce(this)};THREE.lm.prototype=Object.create(THREE.I.prototype);
THREE.ud=function(a,b,c,d,e,f,g){THREE.I.call(this);this.X=a||50;this.nd=Math.max(3,Math.floor(b)||8);this.ad=Math.max(2,Math.floor(c)||6);for(var d=r!==d?d:0,e=r!==e?e:2*Math.PI,f=r!==f?f:0,g=r!==g?g:Math.PI,h=[],i=[],c=0;c<=this.ad;c++){for(var k=[],l=[],b=0;b<=this.nd;b++){var m=b/this.nd,p=c/this.ad,s=new THREE.e;s.x=-this.X*Math.cos(d+m*e)*Math.sin(f+p*g);s.y=this.X*Math.cos(f+p*g);s.a=this.X*Math.sin(d+m*e)*Math.sin(f+p*g);this.f.push(s);k.push(this.f.length-1);l.push(new THREE.l(m,1-p))}h.push(k);
i.push(l)}for(c=0;c<this.ad;c++)for(b=0;b<this.nd;b++){var d=h[c][b+1],e=h[c][b],f=h[c+1][b],g=h[c+1][b+1],k=this.f[d].d().normalize(),l=this.f[e].d().normalize(),m=this.f[f].d().normalize(),p=this.f[g].d().normalize(),s=i[c][b+1].d(),q=i[c][b].d(),n=i[c+1][b].d(),t=i[c+1][b+1].d();Math.abs(this.f[d].y)===this.X?(this.m.push(new THREE.O(d,f,g,[k,m,p])),this.C[0].push([s,n,t])):Math.abs(this.f[f].y)===this.X?(this.m.push(new THREE.O(d,e,f,[k,l,m])),this.C[0].push([s,q,n])):(this.m.push(new THREE.da(d,
e,f,g,[k,l,m,p])),this.C[0].push([s,q,n,t]))}ce(this);be(this);this.Lb=new THREE.De(new THREE.e,a)};THREE.ud.prototype=Object.create(THREE.I.prototype);THREE.dq=function(a,b){var c=THREE.ab.Jr(a,b);b.$m=r!==b.height?b.height:50;r===b.xk&&(b.xk=10);r===b.wk&&(b.wk=8);r===b.vk&&(b.vk=D);THREE.La.call(this,c,b)};THREE.dq.prototype=Object.create(THREE.La.prototype);
THREE.Cm=function(a,b,c,d,e){THREE.I.call(this);this.X=a||100;this.lf=b||40;this.Pb=c||8;this.$a=d||6;this.arc=e||2*Math.PI;e=new THREE.e;a=[];b=[];for(c=0;c<=this.Pb;c++)for(d=0;d<=this.$a;d++){var f=d/this.$a*this.arc,g=2*c/this.Pb*Math.PI;e.x=this.X*Math.cos(f);e.y=this.X*Math.sin(f);var h=new THREE.e;h.x=(this.X+this.lf*Math.cos(g))*Math.cos(f);h.y=(this.X+this.lf*Math.cos(g))*Math.sin(f);h.a=this.lf*Math.sin(g);this.f.push(h);a.push(new THREE.l(d/this.$a,c/this.Pb));b.push(h.d().Wa(e).normalize())}for(c=
1;c<=this.Pb;c++)for(d=1;d<=this.$a;d++){var e=(this.$a+1)*c+d-1,f=(this.$a+1)*(c-1)+d-1,g=(this.$a+1)*(c-1)+d,h=(this.$a+1)*c+d,i=new THREE.da(e,f,g,h,[b[e],b[f],b[g],b[h]]);i.r.v(b[e]);i.r.v(b[f]);i.r.v(b[g]);i.r.v(b[h]);i.r.normalize();this.m.push(i);this.C[0].push([a[e].d(),a[f].d(),a[g].d(),a[h].d()])}ce(this)};THREE.Cm.prototype=Object.create(THREE.I.prototype);
THREE.hq=function(a,b,c,d,e,f,g){function h(a,b,c,d,e,f){var g=Math.cos(a),b=Math.sin(a),a=a*(c/d),c=Math.cos(a),g=g*0.5*e*(2+c),b=0.5*e*(2+c)*b,e=0.5*f*e*Math.sin(a);return new THREE.e(g,b,e)}THREE.I.call(this);this.X=a||200;this.lf=b||40;this.Pb=c||64;this.$a=d||8;this.fg=e||2;this.po=f||3;this.En=g||1;this.fc=Array(this.Pb);c=new THREE.e;d=new THREE.e;e=new THREE.e;for(a=0;a<this.Pb;++a){this.fc[a]=Array(this.$a);for(b=0;b<this.$a;++b){var i=2*(a/this.Pb)*this.fg*Math.PI,g=2*(b/this.$a)*Math.PI,
f=h(i,g,this.po,this.fg,this.X,this.En),i=h(i+0.01,g,this.po,this.fg,this.X,this.En);c.sub(i,f);d.add(i,f);Mc(e,c,d);Mc(d,e,c);e.normalize();d.normalize();i=-this.lf*Math.cos(g);g=this.lf*Math.sin(g);f.x+=i*d.x+g*e.x;f.y+=i*d.y+g*e.y;f.a+=i*d.a+g*e.a;this.fc[a][b]=this.f.push(new THREE.e(f.x,f.y,f.a))-1}}for(a=0;a<this.Pb;++a)for(b=0;b<this.$a;++b){var e=(a+1)%this.Pb,f=(b+1)%this.$a,c=this.fc[a][b],d=this.fc[e][b],e=this.fc[e][f],f=this.fc[a][f],g=new THREE.l(a/this.Pb,b/this.$a),i=new THREE.l((a+
1)/this.Pb,b/this.$a),k=new THREE.l((a+1)/this.Pb,(b+1)/this.$a),l=new THREE.l(a/this.Pb,(b+1)/this.$a);this.m.push(new THREE.da(c,d,e,f));this.C[0].push([g,i,k,l])}ce(this);be(this);this.zd()};THREE.hq.prototype=Object.create(THREE.I.prototype);
THREE.Zh=function(a,b,c,d,e,f){THREE.I.call(this);this.path=a;this.he=b||64;this.X=c||1;this.ge=d||8;this.closed=e||D;f&&(this.debug=new THREE.z);this.fc=[];var g,h,e=this.he+1,i,k,l,f=new THREE.e,m,p,s,b=new THREE.Zh.Yl(this.path,this.he,this.closed);m=b.Po;p=b.Ye;s=b.mi;this.Po=m;this.Ye=p;this.mi=s;for(b=0;b<e;b++){this.fc[b]=[];d=b/(e-1);l=a.Ug(d);d=m[b];g=p[b];h=s[b];this.debug&&(this.debug.add(new THREE.od(d,l,c,255)),this.debug.add(new THREE.od(g,l,c,16711680)),this.debug.add(new THREE.od(h,
l,c,65280)));for(d=0;d<this.ge;d++)i=2*(d/this.ge)*Math.PI,k=-this.X*Math.cos(i),i=this.X*Math.sin(i),f.copy(l),f.x+=k*g.x+i*h.x,f.y+=k*g.y+i*h.y,f.a+=k*g.a+i*h.a,this.fc[b][d]=this.f.push(new THREE.e(f.x,f.y,f.a))-1}for(b=0;b<this.he;b++)for(d=0;d<this.ge;d++)e=this.closed?(b+1)%this.he:b+1,f=(d+1)%this.ge,a=this.fc[b][d],c=this.fc[e][d],e=this.fc[e][f],f=this.fc[b][f],m=new THREE.l(b/this.he,d/this.ge),p=new THREE.l((b+1)/this.he,d/this.ge),s=new THREE.l((b+1)/this.he,(d+1)/this.ge),g=new THREE.l(b/
this.he,(d+1)/this.ge),this.m.push(new THREE.da(a,c,e,f)),this.C[0].push([m,p,s,g]);ce(this);be(this);this.zd()};THREE.Zh.prototype=Object.create(THREE.I.prototype);
THREE.Zh.Yl=function(a,b,c){var d=new THREE.e,e=[],f=[],g=[],h=new THREE.e,i=new THREE.D,b=b+1,k,l,m;this.Po=e;this.Ye=f;this.mi=g;for(k=0;k<b;k++){l=k/(b-1);m=e;var p=k,s=a;l=ne(s,l);l=s.Mi(l);m[p]=l;e[k].normalize()}f[0]=new THREE.e;g[0]=new THREE.e;a=Number.MAX_VALUE;k=Math.abs(e[0].x);l=Math.abs(e[0].y);m=Math.abs(e[0].a);k<=a&&(a=k,d.set(1,0,0));l<=a&&(a=l,d.set(0,1,0));m<=a&&d.set(0,0,1);Mc(h,e[0],d).normalize();Mc(f[0],e[0],h);Mc(g[0],e[0],f[0]);for(k=1;k<b;k++)f[k]=f[k-1].d(),g[k]=g[k-1].d(),
Mc(h,e[k-1],e[k]),1E-4<h.length()&&(h.normalize(),d=Math.acos(e[k-1].Qa(e[k])),Uc(i,h,d).aa(f[k])),Mc(g[k],e[k],f[k]);if(c){d=Math.acos(f[0].Qa(f[b-1]));d/=b-1;0<e[0].Qa(Mc(h,f[0],f[b-1]))&&(d=-d);for(k=1;k<b;k++)Uc(i,e[k],d*k).aa(f[k]),Mc(g[k],e[k],f[k])}};
THREE.Vh=function(a,b,c,d){function e(a){var b=a.normalize().d();b.index=i.f.push(b)-1;var c=Math.atan2(a.a,-a.x)/2/Math.PI+0.5,a=Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.a*a.a))/Math.PI+0.5;b.sa=new THREE.l(c,1-a);return b}function f(a,b,c,d){1>d?(d=new THREE.O(a.index,b.index,c.index,[a.d(),b.d(),c.d()]),d.qa.v(a).v(b).v(c).Yc(3),d.r=d.qa.d().normalize(),i.m.push(d),d=Math.atan2(d.qa.a,-d.qa.x),i.C[0].push([h(a.sa,a,d),h(b.sa,b,d),h(c.sa,c,d)])):(d-=1,f(a,g(a,b),g(a,c),d),f(g(a,b),b,g(b,c),d),f(g(a,
c),g(b,c),c,d),f(g(a,b),g(b,c),g(a,c),d))}function g(a,b){m[a.index]||(m[a.index]=[]);m[b.index]||(m[b.index]=[]);var c=m[a.index][b.index];r===c&&(m[a.index][b.index]=m[b.index][a.index]=c=e((new THREE.e).add(a,b).Yc(2)));return c}function h(a,b,c){0>c&&1===a.x&&(a=new THREE.l(a.x-1,a.y));0===b.x&&0===b.a&&(a=new THREE.l(c/2/Math.PI+0.5,a.y));return a}THREE.I.call(this);for(var c=c||1,d=d||0,i=this,k=0,l=a.length;k<l;k++)e(new THREE.e(a[k][0],a[k][1],a[k][2]));for(var m=[],a=this.f,k=0,l=b.length;k<
l;k++)f(a[b[k][0]],a[b[k][1]],a[b[k][2]],d);$d(this);k=0;for(l=this.f.length;k<l;k++)this.f[k].V(c);ce(this);this.Lb=new THREE.De(new THREE.e,c)};THREE.Vh.prototype=Object.create(THREE.I.prototype);
THREE.Dj=function(a,b){var c=(1+Math.sqrt(5))/2;THREE.Vh.call(this,[[-1,c,0],[1,c,0],[-1,-c,0],[1,-c,0],[0,-1,c],[0,1,c],[0,-1,-c],[0,1,-c],[c,0,-1],[c,0,1],[-c,0,-1],[-c,0,1]],[[0,11,5],[0,5,1],[0,1,7],[0,7,10],[0,10,11],[1,5,9],[5,11,4],[11,10,2],[10,7,6],[7,1,8],[3,9,4],[3,4,2],[3,2,6],[3,6,8],[3,8,9],[4,9,5],[2,4,11],[6,2,10],[8,6,7],[9,8,1]],a,b)};THREE.Dj.prototype=Object.create(THREE.I.prototype);
THREE.Mp=function(a,b){THREE.Vh.call(this,[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],[[0,2,4],[0,4,3],[0,3,5],[0,5,2],[1,2,5],[1,5,3],[1,3,4],[1,4,2]],a,b)};THREE.Mp.prototype=Object.create(THREE.I.prototype);THREE.cq=function(a,b){THREE.Vh.call(this,[[1,1,1],[-1,-1,1],[-1,1,-1],[1,-1,-1]],[[2,1,0],[0,3,2],[1,3,0],[2,3,1]],a,b)};THREE.cq.prototype=Object.create(THREE.I.prototype);
THREE.Rp=function(a,b,c,d){THREE.I.call(this);var e=this.f,f=this.m,g=this.C[0],d=r===d?D:d,h,i,k,l,m=b+1;for(h=0;h<=c;h++){l=h/c;for(i=0;i<=b;i++)k=i/b,k=a(k,l),e.push(k)}var p,s,q,n;for(h=0;h<c;h++)for(i=0;i<b;i++)a=h*m+i,e=h*m+i+1,l=(h+1)*m+i,k=(h+1)*m+i+1,p=new THREE.l(i/b,h/c),s=new THREE.l((i+1)/b,h/c),q=new THREE.l(i/b,(h+1)/c),n=new THREE.l((i+1)/b,(h+1)/c),d?(f.push(new THREE.O(a,e,l)),f.push(new THREE.O(e,k,l)),g.push([p,s,q]),g.push([s,n,q])):(f.push(new THREE.da(a,e,k,l)),g.push([p,s,
n,q]));ce(this);be(this);this.zd()};THREE.Rp.prototype=Object.create(THREE.I.prototype);
THREE.pp=function(a){function b(a){var b=a.length();return new THREE.l(a.x/b,a.y/b)}THREE.I.call(this);for(var c=[[0,1,2],[0,2,1]],d=3;d<a.length;d++){var e=d,f=a[e].d(),g=f.length();f.x+=2E-6*g*(Math.random()-0.5);f.y+=2E-6*g*(Math.random()-0.5);f.a+=2E-6*g*(Math.random()-0.5);for(var g=[],h=0;h<c.length;){var i=c[h],k=f,l=a[i[0]],m;m=l;var p=a[i[1]],s=new THREE.e,q=new THREE.e;s.sub(a[i[2]],p);q.sub(m,p);Ac(s,q);s.normalize();m=s;l=m.Qa(l);if(m.Qa(k)>=l){for(k=0;3>k;k++){l=[i[k],i[(k+1)%3]];m=v;
for(p=0;p<g.length;p++)if(g[p][0]===l[1]&&g[p][1]===l[0]){g[p]=g[g.length-1];g.pop();m=D;break}m&&g.push(l)}c[h]=c[c.length-1];c.pop()}else h++}for(p=0;p<g.length;p++)c.push([g[p][0],g[p][1],e])}e=0;f=Array(a.length);for(d=0;d<c.length;d++){g=c[d];for(h=0;3>h;h++)r===f[g[h]]&&(f[g[h]]=e++,this.f.push(a[g[h]])),g[h]=f[g[h]]}for(d=0;d<c.length;d++)this.m.push(new THREE.O(c[d][0],c[d][1],c[d][2]));for(d=0;d<this.m.length;d++)g=this.m[d],this.C[0].push([b(this.f[g.p]),b(this.f[g.c]),b(this.f[g.s])]);
ce(this);be(this);this.zd()};THREE.pp.prototype=Object.create(THREE.I.prototype);THREE.kp=function(a){var b=new THREE.I;b.f.push(new THREE.e,new THREE.e(a||1,0,0),new THREE.e,new THREE.e(0,a||1,0),new THREE.e,new THREE.e(0,0,a||1));b.Xa.push(new THREE.u(16711680),new THREE.u(16755200),new THREE.u(65280),new THREE.u(11206400),new THREE.u(255),new THREE.u(43775));a=new THREE.Gb({n:THREE.wg});THREE.Fa.call(this,b,a,THREE.xf)};THREE.kp.prototype=Object.create(THREE.Fa.prototype);
THREE.od=function(a,b,c,d){THREE.z.call(this);r===d&&(d=16776960);r===c&&(c=20);var e=new THREE.I;e.f.push(new THREE.e(0,0,0));e.f.push(new THREE.e(0,1,0));this.Qi=new THREE.Fa(e,new THREE.Gb({color:d}));this.add(this.Qi);e=new THREE.Nh(0,0.05,0.25,5,1);this.Kg=new THREE.R(e,new THREE.Ma({color:d}));this.Kg.position.set(0,1,0);this.add(this.Kg);b instanceof THREE.e&&(this.position=b);Re(this,a);this.fj(c)};THREE.od.prototype=Object.create(THREE.z.prototype);
function Re(a,b){var c=Ac(new THREE.e(0,1,0),b),b=Math.acos((new THREE.e(0,1,0)).Qa(b.d().normalize()));a.J=Uc(new THREE.D,c.normalize(),b);uc(a.rotation,a.J,a.Qe)}THREE.od.prototype.fj=function(a){this.scale.set(a,a,a)};function Se(a,b){Nb(a.Qi.q.color,b);Nb(a.Kg.q.color,b)}
THREE.lc=function(a){function b(a,b,d){c(a,d);c(b,d)}function c(a,b){d.t.f.push(new THREE.e);d.t.Xa.push(new THREE.u(b));r===d.bj[a]&&(d.bj[a]=[]);d.bj[a].push(d.t.f.length-1)}THREE.Fa.call(this);var d=this;this.t=new THREE.I;this.q=new THREE.Gb({color:16777215,n:THREE.ve});this.type=THREE.xf;this.F=a.F;this.tc=D;this.bj={};b("n1","n2",16755200);b("n2","n4",16755200);b("n4","n3",16755200);b("n3","n1",16755200);b("f1","f2",16755200);b("f2","f4",16755200);b("f4","f3",16755200);b("f3","f1",16755200);
b("n1","f1",16755200);b("n2","f2",16755200);b("n3","f3",16755200);b("n4","f4",16755200);b("p","n1",16711680);b("p","n2",16711680);b("p","n3",16711680);b("p","n4",16711680);b("u1","u2",43775);b("u2","u3",43775);b("u3","u1",43775);b("c","t",16777215);b("p","c",3355443);b("cn1","cn2",3355443);b("cn3","cn4",3355443);b("cf1","cf2",3355443);b("cf3","cf4",3355443);this.Bk=a;this.update(a)};THREE.lc.prototype=Object.create(THREE.Fa.prototype);
THREE.lc.prototype.update=function(){function a(a,d,e,f){THREE.lc.Zj.set(d,e,f);THREE.lc.Xj.uj(THREE.lc.Zj,THREE.lc.Fm);a=b.bj[a];if(r!==a){d=0;for(e=a.length;d<e;d++)b.t.f[a[d]].copy(THREE.lc.Zj)}}var b=this;THREE.lc.Fm.oa.copy(this.Bk.oa);a("c",0,0,-1);a("t",0,0,1);a("n1",-1,-1,-1);a("n2",1,-1,-1);a("n3",-1,1,-1);a("n4",1,1,-1);a("f1",-1,-1,1);a("f2",1,-1,1);a("f3",-1,1,1);a("f4",1,1,1);a("u1",0.7,1.1,-1);a("u2",-0.7,1.1,-1);a("u3",0,2,-1);a("cf1",-1,0,1);a("cf2",1,0,1);a("cf3",0,-1,1);a("cf4",
0,1,1);a("cn1",-1,0,-1);a("cn2",1,0,-1);a("cn3",0,-1,-1);a("cn4",0,1,-1);this.t.ta=v};THREE.lc.Xj=new THREE.Lj;THREE.lc.Zj=new THREE.e;THREE.lc.Fm=new THREE.Wb;
THREE.Wl=function(a,b,c){THREE.z.call(this);this.ra=a;this.position=a.position;this.direction=new THREE.e;this.direction.sub(a.target.position,a.position);this.color=a.color.d();var d=THREE.bb.qc(a.mb,0,1);this.color.h*=d;this.color.g*=d;this.color.c*=d;var d=Wb(this.color),e=new THREE.ud(b,16,8),f=new THREE.Hh(1.25*b,2.25*b),g=new THREE.Ma({color:d,A:D}),h=new THREE.Gb({color:d,A:D});this.zb=new THREE.od(this.direction,w,c,d);this.ua=new THREE.R(e,g);this.zb.Kg.q.A=D;this.zb.Qi.q.A=D;this.$d=new THREE.Fa(f,
h,THREE.xf);this.add(this.zb);this.add(this.ua);this.add(this.$d);this.ua.ca.Mc=v;this.ua.ca.Wg=a;this.ua.ca.Vg=this;this.ib=w;a.target.ca.Qo&&(b=new THREE.ud(b,8,4),c=new THREE.Ma({color:d,Q:v,A:D}),this.ib=new THREE.R(b,c),this.ib.position=a.target.position,this.ib.ca.Mc=v,this.ib.ca.Wg=a.target,this.ib.ca.Vg=this.ib,a=new THREE.we({color:d,Sd:4,Sg:4,opacity:0.75,za:v,A:D}),d=new THREE.I,d.f.push(this.position.d()),d.f.push(this.ib.position.d()),ae(d),this.kc=new THREE.Fa(d,a),this.kc.ca.Mc=v);
this.ca.Mc=v};THREE.Wl.prototype=Object.create(THREE.z.prototype);
THREE.Wl.prototype.update=function(){this.direction.sub(this.ra.target.position,this.ra.position);Re(this.zb,this.direction);this.color.copy(this.ra.color);var a=THREE.bb.qc(this.ra.mb,0,1);this.color.h*=a;this.color.g*=a;this.color.c*=a;Se(this.zb,Wb(this.color));this.ua.q.color.copy(this.color);this.$d.q.color.copy(this.color);this.ib.q.color.copy(this.color);this.kc.q.color.copy(this.color);this.kc.t.f[0].copy(this.ra.position);this.kc.t.f[1].copy(this.ra.target.position);ae(this.kc.t);this.kc.t.ta=
v};
THREE.am=function(a,b,c){THREE.z.call(this);this.ra=a;this.position=a.position;var d=THREE.bb.qc(a.mb,0,1);this.color=a.color.d();this.color.h*=d;this.color.g*=d;this.color.c*=d;var e=Wb(this.color);this.Ra=a.Ra.d();this.Ra.h*=d;this.Ra.g*=d;this.Ra.c*=d;for(var d=Wb(this.Ra),f=new THREE.ud(b,16,8,0,2*Math.PI,0,0.5*Math.PI),g=new THREE.ud(b,16,8,0,2*Math.PI,0.5*Math.PI,Math.PI),h=new THREE.Ma({color:e,A:D}),i=new THREE.Ma({color:d,A:D}),k=0,l=f.m.length;k<l;k++)f.m[k].va=0;k=0;for(l=g.m.length;k<l;k++)g.m[k].va=
1;THREE.na.be(f,g);this.ua=new THREE.R(f,new THREE.Hb([h,i]));this.zb=new THREE.od(new THREE.e(0,1,0),new THREE.e(0,1.1*(b+c),0),c,e);this.zb.rotation.x=Math.PI;this.Mn=new THREE.od(new THREE.e(0,1,0),new THREE.e(0,-1.1*(b+c),0),c,d);b=new THREE.z;b.rotation.x=0.5*-Math.PI;b.add(this.ua);b.add(this.zb);b.add(this.Mn);this.add(b);this.ua.ca.Mc=v;this.ua.ca.Wg=a;this.ua.ca.Vg=this;this.ca.Mc=v;this.target=new THREE.e;this.nb(this.target)};THREE.am.prototype=Object.create(THREE.z.prototype);
THREE.am.prototype.update=function(){var a=THREE.bb.qc(this.ra.mb,0,1);this.color.copy(this.ra.color);this.Ra.copy(this.ra.Ra);this.color.h*=a;this.color.g*=a;this.color.c*=a;this.Ra.h*=a;this.Ra.g*=a;this.Ra.c*=a;this.ua.q.ja[0].color.copy(this.color);this.ua.q.ja[1].color.copy(this.Ra);Se(this.zb,Wb(this.color));Se(this.Mn,Wb(this.Ra));this.nb(this.target)};
THREE.mm=function(a,b){THREE.z.call(this);this.ra=a;this.position=a.position;this.color=a.color.d();var c=THREE.bb.qc(a.mb,0,1);this.color.h*=c;this.color.g*=c;this.color.c*=c;var d=Wb(this.color),c=new THREE.ud(b,16,8),e=new THREE.Hh(1.25*b,2.25*b),f=new THREE.Dj(1,2),g=new THREE.Ma({color:d,A:D}),h=new THREE.Gb({color:d,A:D}),d=new THREE.Ma({color:d,A:D,Q:v,opacity:0.1,za:v});this.ua=new THREE.R(c,g);this.$d=new THREE.Fa(e,h,THREE.xf);this.Ve=new THREE.R(f,d);c=a.Mb;0===c?this.Ve.visible=D:this.Ve.scale.set(c,
c,c);this.add(this.ua);this.add(this.$d);this.add(this.Ve);this.ua.ca.Mc=v;this.ua.ca.Wg=a;this.ua.ca.Vg=this;this.ca.Mc=v};THREE.mm.prototype=Object.create(THREE.z.prototype);
THREE.mm.prototype.update=function(){this.color.copy(this.ra.color);var a=THREE.bb.qc(this.ra.mb,0,1);this.color.h*=a;this.color.g*=a;this.color.c*=a;this.ua.q.color.copy(this.color);this.$d.q.color.copy(this.color);this.Ve.q.color.copy(this.color);a=this.ra.Mb;0===a?this.Ve.visible=D:(this.Ve.visible=v,this.Ve.scale.set(a,a,a))};
THREE.zm=function(a,b,c){THREE.z.call(this);this.ra=a;this.position=a.position;this.direction=new THREE.e;this.direction.sub(a.target.position,a.position);this.color=a.color.d();var d=THREE.bb.qc(a.mb,0,1);this.color.h*=d;this.color.g*=d;this.color.c*=d;var d=Wb(this.color),e=new THREE.ud(b,16,8),f=new THREE.Hh(1.25*b,2.25*b),g=new THREE.Nh(1E-4,1,1,8,1,v),h=new THREE.D;Wc(h,-Math.PI/2);h.translate(new THREE.e(0,-0.5,0));g.If(h);var i=new THREE.Ma({color:d,A:D}),h=new THREE.Gb({color:d,A:D}),k=new THREE.Ma({color:d,
A:D,Q:v,opacity:0.3,za:v});this.zb=new THREE.od(this.direction,w,c,d);this.ua=new THREE.R(e,i);this.Pi=new THREE.R(g,k);c=a.Mb?a.Mb:1E4;e=2*c*Math.tan(0.5*a.Ke);this.Pi.scale.set(e,e,c);this.zb.Kg.q.A=D;this.zb.Qi.q.A=D;this.$d=new THREE.Fa(f,h,THREE.xf);this.Ni=new THREE.Oh;this.Ni.add(this.zb);this.Ni.add(this.ua);this.Ni.add(this.$d);this.add(this.Ni);this.add(this.Pi);this.nb(a.target.position);this.ua.ca.Mc=v;this.ua.ca.Wg=a;this.ua.ca.Vg=this;this.ib=w;a.target.ca.Qo&&(b=new THREE.ud(b,8,4),
f=new THREE.Ma({color:d,Q:v,A:D}),this.ib=new THREE.R(b,f),this.ib.position=a.target.position,this.ib.ca.Mc=v,this.ib.ca.Wg=a.target,this.ib.ca.Vg=this.ib,a=new THREE.we({color:d,Sd:4,Sg:4,opacity:0.75,za:v,A:D}),d=new THREE.I,d.f.push(this.position.d()),d.f.push(this.ib.position.d()),ae(d),this.kc=new THREE.Fa(d,a),this.kc.ca.Mc=v);this.ca.Mc=v};THREE.zm.prototype=Object.create(THREE.z.prototype);
THREE.zm.prototype.update=function(){this.direction.sub(this.ra.target.position,this.ra.position);Re(this.zb,this.direction);this.nb(this.ra.target.position);var a=this.ra.Mb?this.ra.Mb:1E4,b=2*a*Math.tan(0.5*this.ra.Ke);this.Pi.scale.set(b,b,a);this.color.copy(this.ra.color);a=THREE.bb.qc(this.ra.mb,0,1);this.color.h*=a;this.color.g*=a;this.color.c*=a;Se(this.zb,Wb(this.color));this.ua.q.color.copy(this.color);this.$d.q.color.copy(this.color);this.Pi.q.color.copy(this.color);this.ib.q.color.copy(this.color);
this.kc.q.color.copy(this.color);this.kc.t.f[0].copy(this.ra.position);this.kc.t.f[1].copy(this.ra.target.position);ae(this.kc.t);this.kc.t.ta=v};THREE.Ju=function(a){this.Vt=r===a?1:a;this.nA=D;this.Vz=v;this.debug=D};THREE.na.Ws=function(a,b){return Math.min(a,b)+"_"+Math.max(a,b)};
THREE.na.Dv=function(a){function b(a,b){r===g[a]&&(g[a]=[]);g[a].push(b)}var c,d,e,f,g={},h=THREE.na.Ws;c=0;for(d=a.m.length;c<d;c++)e=a.m[c],e instanceof THREE.O?(f=h(e.p,e.c),b(f,c),f=h(e.c,e.s),b(f,c),f=h(e.s,e.p),b(f,c)):e instanceof THREE.da&&(f=h(e.p,e.c),b(f,c),f=h(e.c,e.s),b(f,c),f=h(e.s,e.S),b(f,c),f=h(e.S,e.p),b(f,c));return g};THREE.Ej=function(){THREE.z.call(this);this.B=Ua()};THREE.Ej.prototype=Object.create(THREE.z.prototype);
THREE.Rh=function(a,b,c,d,e){THREE.z.call(this);this.dh=[];this.i=new THREE.e;this.jn=r;r!==a&&this.add(a,b,c,d,e)};THREE.Rh.prototype=Object.create(THREE.z.prototype);THREE.Rh.prototype.add=function(a,b,c,d,e,f){r===b&&(b=-1);r===c&&(c=0);r===f&&(f=1);r===e&&(e=new THREE.u(16777215));r===d&&(d=THREE.sg);c=Math.min(c,Math.max(0,c));this.dh.push({sj:a,size:b,Mb:c,x:0,y:0,a:0,scale:1,rotation:1,opacity:f,color:e,kb:d})};
THREE.fm=function(a,b){THREE.R.call(this,a,b);this.bn={};this.sk=[];var c=this.t.G.length,d=c-1,c=c/1,e=0,e={Pt:e,tw:d,length:d-e+1,Sf:c,duration:(d-e)/c,Vk:0,Lg:0,Ie:D,time:0,direction:1,Ed:1,Pf:D,de:D};this.bn.__default=e;this.sk.push(e);(d=this.bn.__default)&&(d.Ed=1)};THREE.fm.prototype=Object.create(THREE.R.prototype);
THREE.fm.prototype.update=function(a){for(var b=0,c=this.sk.length;b<c;b++){var d=this.sk[b];if(d.Ie){var e=d.duration/d.length;d.time+=d.direction*a;if(d.de){if(d.time>d.duration||0>d.time)d.direction*=-1,d.time>d.duration&&(d.time=d.duration,d.Pf=v),0>d.time&&(d.time=0,d.Pf=D)}else d.time%=d.duration,0>d.time&&(d.time+=d.duration);var f=d.Pt+THREE.bb.qc(Math.floor(d.time/e),0,d.length-1),g=d.Ed;f!==d.Lg&&(this.Nc[d.Vk]=0,this.Nc[d.Lg]=1*g,this.Nc[f]=0,d.Vk=d.Lg,d.Lg=f);e=d.time%e/e;d.Pf&&(e=1-e);
this.Nc[d.Lg]=e*g;this.Nc[d.Vk]=(1-e)*g}}};
THREE.Dp=function(){function a(a){var c=b.createProgram(),d=b.createShader(b.FRAGMENT_SHADER),e=b.createShader(b.VERTEX_SHADER);b.shaderSource(d,a.K);b.shaderSource(e,a.N);b.compileShader(d);b.compileShader(e);b.attachShader(c,d);b.attachShader(c,e);b.linkProgram(c);return c}var b,c,d,e,f,g,h,i,k,l,m,p;this.Zg=function(s){b=s.Xc;c=s;d=new Float32Array(16);e=new Uint16Array(6);s=0;d[s++]=-1;d[s++]=-1;d[s++]=0;d[s++]=0;d[s++]=1;d[s++]=-1;d[s++]=1;d[s++]=0;d[s++]=1;d[s++]=1;d[s++]=1;d[s++]=1;d[s++]=
-1;d[s++]=1;d[s++]=0;d[s++]=1;s=0;e[s++]=0;e[s++]=1;e[s++]=2;e[s++]=0;e[s++]=2;e[s++]=3;f=b.createBuffer();g=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,f);b.bufferData(b.ARRAY_BUFFER,d,b.STATIC_DRAW);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,g);b.bufferData(b.ELEMENT_ARRAY_BUFFER,e,b.STATIC_DRAW);h=b.createTexture();i=b.createTexture();b.bindTexture(b.TEXTURE_2D,h);b.texImage2D(b.TEXTURE_2D,0,b.RGB,16,16,0,b.RGB,b.UNSIGNED_BYTE,w);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,
b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.bindTexture(b.TEXTURE_2D,i);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,16,16,0,b.RGBA,b.UNSIGNED_BYTE,w);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);
0>=b.getParameter(b.MAX_VERTEX_TEXTURE_IMAGE_UNITS)?(k=D,l=a(THREE.xm.gs)):(k=v,l=a(THREE.xm.hs));m={};p={};m.dp=b.getAttribLocation(l,"position");m.sa=b.getAttribLocation(l,"uv");p.zl=b.getUniformLocation(l,"renderType");p.map=b.getUniformLocation(l,"map");p.Ps=b.getUniformLocation(l,"occlusionMap");p.opacity=b.getUniformLocation(l,"opacity");p.color=b.getUniformLocation(l,"color");p.scale=b.getUniformLocation(l,"scale");p.rotation=b.getUniformLocation(l,"rotation");p.ej=b.getUniformLocation(l,"screenPosition")};
this.B=function(a,d,e,t){var a=a.bk,x=a.length;if(x){var L=new THREE.e,E=t/e,y=0.5*e,M=0.5*t,B=16/t,K=new THREE.l(B*E,B),J=new THREE.e(1,1,0),H=new THREE.l(1,1),O=p,B=m;b.useProgram(l);b.enableVertexAttribArray(m.dp);b.enableVertexAttribArray(m.sa);b.uniform1i(O.Ps,0);b.uniform1i(O.map,1);b.bindBuffer(b.ARRAY_BUFFER,f);b.vertexAttribPointer(B.dp,2,b.FLOAT,D,16,0);b.vertexAttribPointer(B.sa,2,b.FLOAT,D,16,8);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,g);b.disable(b.CULL_FACE);b.depthMask(D);var C,P,F,U,G;
for(C=0;C<x;C++)if(B=16/t,K.set(B*E,B),U=a[C],L.set(U.F.elements[12],U.F.elements[13],U.F.elements[14]),d.xa.aa(L),d.oa.aa(L),J.copy(L),H.x=J.x*y+y,H.y=J.y*M+M,k||0<H.x&&H.x<e&&0<H.y&&H.y<t){b.activeTexture(b.TEXTURE1);b.bindTexture(b.TEXTURE_2D,h);b.copyTexImage2D(b.TEXTURE_2D,0,b.RGB,H.x-8,H.y-8,16,16,0);b.uniform1i(O.zl,0);b.uniform2f(O.scale,K.x,K.y);b.uniform3f(O.ej,J.x,J.y,J.a);b.disable(b.BLEND);b.enable(b.DEPTH_TEST);b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0);b.activeTexture(b.TEXTURE0);
b.bindTexture(b.TEXTURE_2D,i);b.copyTexImage2D(b.TEXTURE_2D,0,b.RGBA,H.x-8,H.y-8,16,16,0);b.uniform1i(O.zl,1);b.disable(b.DEPTH_TEST);b.activeTexture(b.TEXTURE1);b.bindTexture(b.TEXTURE_2D,h);b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0);U.i.copy(J);if(U.jn)U.jn(U);else{P=U;F=r;G=P.dh.length;var V=r,fa=2*-P.i.x,W=2*-P.i.y;for(F=0;F<G;F++)V=P.dh[F],V.x=P.i.x+fa*V.Mb,V.y=P.i.y+W*V.Mb,V.gu=0.25*V.x*Math.PI,V.rotation+=0.25*(V.gu-V.rotation)}b.uniform1i(O.zl,2);b.enable(b.BLEND);P=0;for(F=U.dh.length;P<
F;P++)G=U.dh[P],0.001<G.opacity&&0.001<G.scale&&(J.x=G.x,J.y=G.y,J.a=G.a,B=G.size*G.scale/t,K.x=B*E,K.y=B,b.uniform3f(O.ej,J.x,J.y,J.a),b.uniform2f(O.scale,K.x,K.y),b.uniform1f(O.rotation,G.rotation),b.uniform1f(O.opacity,G.opacity),b.uniform3f(O.color,G.color.h,G.color.g,G.color.c),c.ig(G.kb,G.blendEquation,G.Oe,G.Ne),c.ph(G.sj,1),b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0))}b.enable(b.CULL_FACE);b.enable(b.DEPTH_TEST);b.depthMask(v)}}};
THREE.Qj=function(){var a,b,c,d,e,f,g=new THREE.vf,h=new THREE.D,i=new THREE.e,k=new THREE.e;this.Zg=function(g){a=g.Xc;b=g;var g=THREE.Pj.ln,h=THREE.nc.d(g.P);c=new THREE.Ta({K:g.K,N:g.N,P:h});d=new THREE.Ta({K:g.K,N:g.N,P:h,G:v});e=new THREE.Ta({K:g.K,N:g.N,P:h,ya:v});f=new THREE.Ta({K:g.K,N:g.N,P:h,G:v,ya:v});c.Ld=v;d.Ld=v;e.Ld=v;f.Ld=v};this.B=function(a,c){b.sh&&b.Ct&&this.update(a,c)};this.update=function(l,m){var p,s,q,n,t,x,L,E,y,M=[];n=0;a.clearColor(1,1,1,1);a.disable(a.BLEND);a.enable(a.CULL_FACE);
a.frontFace(a.CCW);b.Bo===THREE.Mh?a.cullFace(a.FRONT):a.cullFace(a.BACK);b.df(v);p=0;for(s=l.bc.length;p<s;p++)if(q=l.bc[p],q.pc)if(q instanceof THREE.Bc&&q.Gl)for(t=0;t<q.yt;t++){var B;if(q.jj[t])B=q.jj[t];else{y=q;L=t;B=new THREE.Bc;B.ds=v;B.$i=v;B.pc=v;B.rh=y.rh;B.qh=y.qh;B.Dl=y.Dl;B.El=y.El;B.Cl=y.Cl;B.Fl=y.Fl;B.ie=y.ie;B.je=y.je;B.jg=y.yo[L];B.vh=y.Bt[L];B.th=y.zt[L];B.lo=[];B.rl=[];E=B.lo;x=B.rl;for(var K=0;8>K;K++)E[K]=new THREE.e,x[K]=new THREE.e;E=y.Ao[L];y=y.zo[L];x[0].set(-1,-1,E);x[1].set(1,
-1,E);x[2].set(-1,1,E);x[3].set(1,1,E);x[4].set(-1,-1,y);x[5].set(1,-1,y);x[6].set(-1,1,y);x[7].set(1,1,y);B.Xs=m;x=new THREE.Oh;x.position=q.At;x.add(B);x.add(B.target);m.add(x);q.jj[t]=B;console.log("Created virtualLight",B)}L=q;E=t;y=L.jj[E];y.position.copy(L.position);y.target.position.copy(L.target.position);y.nb(y.target);y.ie=L.ie;y.je=L.je;y.jg=L.yo[E];x=L.Ao[E];L=L.zo[E];y=y.rl;y[0].a=x;y[1].a=x;y[2].a=x;y[3].a=x;y[4].a=L;y[5].a=L;y[6].a=L;y[7].a=L;M[n]=B;n++}else M[n]=q,n++;p=0;for(s=M.length;p<
s;p++){q=M[p];q.ef||(q.ef=new THREE.xg(q.vh,q.th,{gb:THREE.Gd,Bb:THREE.Gd,ia:THREE.vg}),q.uh=new THREE.l(q.vh,q.th),q.ff=new THREE.D);if(!q.Cd){if(q instanceof THREE.zf)q.Cd=new THREE.mc(q.xt,q.vh/q.th,q.rh,q.qh);else if(q instanceof THREE.Bc)q.Cd=new THREE.tg(q.Dl,q.El,q.Fl,q.Cl,q.rh,q.qh);else{console.error("Unsupported light type for shadow");continue}l.add(q.Cd);b.uk&&l.Eb()}q.ie&&!q.Eg&&(q.Eg=new THREE.lc(q.Cd),q.Cd.add(q.Eg));if(q.ds&&B.Xs==m){t=m;n=q.Cd;x=q.rl;y=q.lo;i.set(Infinity,Infinity,
Infinity);k.set(-Infinity,-Infinity,-Infinity);for(L=0;8>L;L++)E=y[L],E.copy(x[L]),THREE.Qj.Xj.uj(E,t),n.xa.aa(E),E.x<i.x&&(i.x=E.x),E.x>k.x&&(k.x=E.x),E.y<i.y&&(i.y=E.y),E.y>k.y&&(k.y=E.y),E.a<i.a&&(i.a=E.a),E.a>k.a&&(k.a=E.a);n.left=i.x;n.right=k.x;n.top=k.y;n.bottom=i.y;n.mf()}n=q.ef;x=q.ff;t=q.Cd;t.position.copy(od(q.F));t.nb(od(q.target.F));t.Eb();t.xa.Ob(t.F);q.Eg&&(q.Eg.visible=q.ie);q.ie&&q.Eg.update();x.set(0.5,0,0,0.5,0,0.5,0,0.5,0,0,0.5,0.5,0,0,0,1);x.Xe(t.oa);x.Xe(t.xa);h.multiply(t.oa,
t.xa);Kd(g,h);b.gj(n);b.clear();y=l.cc;q=0;for(n=y.length;q<n;q++)if(L=y[q],x=L.object,L.B=D,x.visible&&x.pc&&(!(x instanceof THREE.R||x instanceof THREE.Ib)||!x.Se||g.contains(x)))x.Ic.multiply(t.xa,x.F),L.B=v;q=0;for(n=y.length;q<n;q++)L=y[q],L.B&&(x=L.object,L=L.buffer,K=x.q instanceof THREE.Hb?x.q.ja[0]:x.q,E=0<x.t.G.length&&K.G,K=x instanceof THREE.ac&&K.ya,E=x.wi?x.wi:K?E?f:e:E?d:c,L instanceof THREE.qd?b.wl(t,l.bc,w,E,L,x):b.vl(t,l.bc,w,E,L,x));y=l.Kd;q=0;for(n=y.length;q<n;q++)L=y[q],x=L.object,
x.visible&&x.pc&&(x.Ic.multiply(t.xa,x.F),b.xl(t,l.bc,w,c,x))}p=b.yn();s=b.xn();a.clearColor(p.h,p.g,p.c,s);a.enable(a.BLEND);b.Bo===THREE.Mh&&a.cullFace(a.BACK)}};THREE.Qj.Xj=new THREE.Lj;
THREE.Zp=function(){function a(a,b){return a.a!==b.a?b.a-a.a:b.id-a.id}var b,c,d,e,f,g,h,i,k;this.Zg=function(a){b=a.Xc;c=a;d=new Float32Array(16);e=new Uint16Array(6);a=0;d[a++]=-1;d[a++]=-1;d[a++]=0;d[a++]=0;d[a++]=1;d[a++]=-1;d[a++]=1;d[a++]=0;d[a++]=1;d[a++]=1;d[a++]=1;d[a++]=1;d[a++]=-1;d[a++]=1;d[a++]=0;d[a++]=1;a=0;e[a++]=0;e[a++]=1;e[a++]=2;e[a++]=0;e[a++]=2;e[a++]=3;f=b.createBuffer();g=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,f);b.bufferData(b.ARRAY_BUFFER,d,b.STATIC_DRAW);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,
g);b.bufferData(b.ELEMENT_ARRAY_BUFFER,e,b.STATIC_DRAW);var a=THREE.Vp.Ot,m=b.createProgram(),p=b.createShader(b.FRAGMENT_SHADER),s=b.createShader(b.VERTEX_SHADER);b.shaderSource(p,a.K);b.shaderSource(s,a.N);b.compileShader(p);b.compileShader(s);b.attachShader(m,p);b.attachShader(m,s);b.linkProgram(m);h=m;i={};k={};i.position=b.getAttribLocation(h,"position");i.sa=b.getAttribLocation(h,"uv");k.lg=b.getUniformLocation(h,"uvOffset");k.mg=b.getUniformLocation(h,"uvScale");k.rotation=b.getUniformLocation(h,
"rotation");k.scale=b.getUniformLocation(h,"scale");k.Hf=b.getUniformLocation(h,"alignment");k.color=b.getUniformLocation(h,"color");k.map=b.getUniformLocation(h,"map");k.opacity=b.getUniformLocation(h,"opacity");k.Tc=b.getUniformLocation(h,"useScreenCoordinates");k.Db=b.getUniformLocation(h,"sizeAttenuation");k.ej=b.getUniformLocation(h,"screenPosition");k.ao=b.getUniformLocation(h,"modelViewMatrix");k.oa=b.getUniformLocation(h,"projectionMatrix");k.Ji=b.getUniformLocation(h,"fogType");k.Gi=b.getUniformLocation(h,
"fogDensity");k.Ii=b.getUniformLocation(h,"fogNear");k.Hi=b.getUniformLocation(h,"fogFar");k.Fi=b.getUniformLocation(h,"fogColor");k.xd=b.getUniformLocation(h,"alphaTest")};this.B=function(d,e,p,s){var q=d.ik,n=q.length;if(n){var t=i,x=k,L=s/p,p=0.5*p,E=0.5*s;b.useProgram(h);b.enableVertexAttribArray(t.position);b.enableVertexAttribArray(t.sa);b.disable(b.CULL_FACE);b.enable(b.BLEND);b.bindBuffer(b.ARRAY_BUFFER,f);b.vertexAttribPointer(t.position,2,b.FLOAT,D,16,0);b.vertexAttribPointer(t.sa,2,b.FLOAT,
D,16,8);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,g);b.uniformMatrix4fv(x.oa,D,e.oa.elements);b.activeTexture(b.TEXTURE0);b.uniform1i(x.map,0);var y=t=0,M=d.A;M?(b.uniform3f(x.Fi,M.color.h,M.color.g,M.color.c),M instanceof THREE.pg?(b.uniform1f(x.Ii,M.Ca),b.uniform1f(x.Hi,M.Ia),b.uniform1i(x.Ji,1),y=t=1):M instanceof THREE.tf&&(b.uniform1f(x.Gi,M.yi),b.uniform1i(x.Ji,2),y=t=2)):(b.uniform1i(x.Ji,0),y=t=0);for(var B,K,J=[],M=0;M<n;M++)B=q[M],K=B.q,B.visible&&0!==K.opacity&&(K.Tc?B.a=-B.position.a:(B.Ic.multiply(e.xa,
B.F),B.a=-B.Ic.elements[14]));q.sort(a);for(M=0;M<n;M++)B=q[M],K=B.q,B.visible&&0!==K.opacity&&K.map&&(K.map.L&&K.map.L.width)&&(b.uniform1f(x.xd,K.xd),K.Tc?(b.uniform1i(x.Tc,1),b.uniform3f(x.ej,(B.position.x-p)/p,(E-B.position.y)/E,Math.max(0,Math.min(1,B.position.a)))):(b.uniform1i(x.Tc,0),b.uniform1i(x.Db,K.Db?1:0),b.uniformMatrix4fv(x.ao,D,B.Ic.elements)),e=d.A&&K.A?y:0,t!==e&&(b.uniform1i(x.Ji,e),t=e),e=1/(K.nh?s:1),J[0]=e*L*B.scale.x,J[1]=e*B.scale.y,b.uniform2f(x.mg,K.mg.x,K.mg.y),b.uniform2f(x.lg,
K.lg.x,K.lg.y),b.uniform2f(x.Hf,K.Hf.x,K.Hf.y),b.uniform1f(x.opacity,K.opacity),b.uniform3f(x.color,K.color.h,K.color.g,K.color.c),b.uniform1f(x.rotation,B.rotation),b.uniform2fv(x.scale,J),c.ig(K.kb,K.blendEquation,K.Oe,K.Ne),c.df(K.rc),c.oh(K.Bd),c.ph(K.map,0),b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0));b.enable(b.CULL_FACE)}}};
THREE.vu=function(){this.enabled=D;this.yl=w;var a,b,c,d,e,f,g=new THREE.vf,h=new THREE.D;this.Zg=function(g){a=g.Xc;b=g;var g=THREE.Pj.ln,h=THREE.nc.d(g.P);c=new THREE.Ta({K:g.K,N:g.N,P:h});d=new THREE.Ta({K:g.K,N:g.N,P:h,G:v});e=new THREE.Ta({K:g.K,N:g.N,P:h,ya:v});f=new THREE.Ta({K:g.K,N:g.N,P:h,G:v,ya:v});c.Ld=v;d.Ld=v;e.Ld=v;f.Ld=v};this.B=function(a,b){this.enabled&&this.update(a,b)};this.update=function(i,k){var l,m,p,s,q,n;a.clearColor(1,1,1,1);a.disable(a.BLEND);b.df(v);b.uk&&i.Eb();k.xa.Ob(k.F);
h.multiply(k.oa,k.xa);Kd(g,h);b.gj(this.yl);b.clear();n=i.cc;l=0;for(m=n.length;l<m;l++)if(p=n[l],q=p.object,p.B=D,q.visible&&(!(q instanceof THREE.R||q instanceof THREE.Ib)||!q.Se||g.contains(q)))q.Ic.multiply(k.xa,q.F),p.B=v;var t;l=0;for(m=n.length;l<m;l++)if(p=n[l],p.B&&(q=p.object,p=p.buffer,!(q instanceof THREE.Ib)||q.wi))(t=q.q instanceof THREE.Hb?q.q.ja[0]:q.q)&&b.Bl(q.q),s=0<q.t.G.length&&t.G,t=q instanceof THREE.ac&&t.ya,s=q.wi?q.wi:t?s?f:e:s?d:c,p instanceof THREE.qd?b.wl(k,i.bc,w,s,p,
q):b.vl(k,i.bc,w,s,p,q);n=i.Kd;l=0;for(m=n.length;l<m;l++)p=n[l],q=p.object,q.visible&&(q.Ic.multiply(k.xa,q.F),b.xl(k,i.bc,w,c,q));l=b.yn();m=b.xn();a.clearColor(l.h,l.g,l.c,m);a.enable(a.BLEND)}};
THREE.xm={hs:{N:"uniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform int renderType;\nuniform sampler2D occlusionMap;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif( renderType == 2 ) {\nvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) ) +\ntexture2D( occlusionMap, vec2( 0.5, 0.1 ) ) +\ntexture2D( occlusionMap, vec2( 0.9, 0.1 ) ) +\ntexture2D( occlusionMap, vec2( 0.9, 0.5 ) ) +\ntexture2D( occlusionMap, vec2( 0.9, 0.9 ) ) +\ntexture2D( occlusionMap, vec2( 0.5, 0.9 ) ) +\ntexture2D( occlusionMap, vec2( 0.1, 0.9 ) ) +\ntexture2D( occlusionMap, vec2( 0.1, 0.5 ) ) +\ntexture2D( occlusionMap, vec2( 0.5, 0.5 ) );\nvVisibility = (       visibility.r / 9.0 ) *\n( 1.0 - visibility.g / 9.0 ) *\n(       visibility.b / 9.0 ) *\n( 1.0 - visibility.a / 9.0 );\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",K:"precision mediump float;\nuniform sampler2D map;\nuniform float opacity;\nuniform int renderType;\nuniform vec3 color;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nif( renderType == 0 ) {\ngl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\n} else if( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * vVisibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"},
gs:{N:"uniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform int renderType;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif( renderType == 2 ) {\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",K:"precision mediump float;\nuniform sampler2D map;\nuniform sampler2D occlusionMap;\nuniform float opacity;\nuniform int renderType;\nuniform vec3 color;\nvarying vec2 vUV;\nvoid main() {\nif( renderType == 0 ) {\ngl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );\n} else if( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nfloat visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a +\ntexture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a +\ntexture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a +\ntexture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;\nvisibility = ( 1.0 - visibility / 4.0 );\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * visibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"}};
THREE.Vp={Ot:{N:"uniform int useScreenCoordinates;\nuniform int sizeAttenuation;\nuniform vec3 screenPosition;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 scale;\nuniform vec2 alignment;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uvOffset + uv * uvScale;\nvec2 alignedPosition = position + alignment;\nvec2 rotatedPosition;\nrotatedPosition.x = ( cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y ) * scale.x;\nrotatedPosition.y = ( sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y ) * scale.y;\nvec4 finalPosition;\nif( useScreenCoordinates != 0 ) {\nfinalPosition = vec4( screenPosition.xy + rotatedPosition, screenPosition.z, 1.0 );\n} else {\nfinalPosition = projectionMatrix * modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\nfinalPosition.xy += rotatedPosition * ( sizeAttenuation == 1 ? 1.0 : finalPosition.z );\n}\ngl_Position = finalPosition;\n}",
K:"precision mediump float;\nuniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvoid main() {\nvec4 texture = texture2D( map, vUV );\nif ( texture.a < alphaTest ) discard;\ngl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\nif ( fogType > 0 ) {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat fogFactor = 0.0;\nif ( fogType == 1 ) {\nfogFactor = smoothstep( fogNear, fogFar, depth );\n} else {\nconst float LOG2 = 1.442695;\nfloat fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n}\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}\n}"}};
function Te(a,b,c,d,e){this.Ef=b;this.mk=c;this.Xc=d;this.ok=a;this.Vm=e||0}function Ue(a,b){if("function"!==typeof a)throw Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",b));}function Ve(){this.oc=[];this.nk=w;var a=this;this.nn=function(){Ve.prototype.nn.apply(a,arguments)}}
Te.prototype={Ie:v,dd:w,execute:function(a){var b;this.Ie&&this.Ef&&(a=this.dd?this.dd.concat(a):a,b=this.Ef.apply(this.Xc,a),this.mk&&this.detach());return b},detach:function(){return this.Hn()?this.ok.remove(this.Ef,this.Xc):w},Hn:function(){return!!this.ok&&!!this.Ef},Dq:function(){delete this.ok;delete this.Ef;delete this.Xc},toString:function(){return"[SignalBinding isOnce:"+this.mk+", isBound:"+this.Hn()+", active:"+this.Ie+"]"}};
Ve.prototype={$n:D,Wm:v,Ie:v,Eq:function(a,b,c,d){var e=this.Um(a,c);if(-1!==e){if(a=this.oc[e],a.mk!==b)throw Error("You cannot add"+(b?"":"Once")+"() then add"+(!b?"":"Once")+"() the same listener without removing the relationship first.");}else a=new Te(this,a,b,c,d),this.Bq(a);this.$n&&this.nk&&a.execute(this.nk);return a},Bq:function(a){var b=this.oc.length;do--b;while(this.oc[b]&&a.Vm<=this.oc[b].Vm);this.oc.splice(b+1,0,a)},Um:function(a,b){for(var c=this.oc.length,d;c--;)if(d=this.oc[c],d.Ef===
a&&d.Xc===b)return c;return-1},add:function(a,b,c){Ue(a,"add");return this.Eq(a,D,b,c)},remove:function(a,b){Ue(a,"remove");var c=this.Um(a,b);-1!==c&&(this.oc[c].Dq(),this.oc.splice(c,1));return a},nn:function(a){if(this.Ie){var b=Array.prototype.slice.call(arguments),c=this.oc.length,d;this.$n&&(this.nk=b);if(c){d=this.oc.slice();this.Wm=v;do c--;while(d[c]&&this.Wm&&d[c].execute(b)!==D)}}},toString:function(){return"[Signal active:"+this.Ie+" numListeners:"+this.oc.length+"]"}};var lf=Ve;
lf.Xp=Ve;"function"===typeof define&&define.Wu?define(function(){return lf}):"undefined"!==typeof module&&module.Fr?module.Fr=lf:this.Jz=lf;var mf=signals.Xp;
THREE.ru=function(){function a(a,d,e){N=a;d=d||Oa;e!==r&&(a=e.split("/"),a.pop(),ub=(1>a.length?".":a.join("/"))+"/");if((a=N.evaluate("//dae:asset",N,R,XPathResult.ORDERED_NODE_ITERATOR_TYPE,w).iterateNext())&&a.childNodes)for(e=0;e<a.childNodes.length;e++){var i=a.childNodes[e];switch(i.nodeName){case "unit":i.getAttribute("meter");break;case "up_axis":bb=i.textContent.charAt(0)}}if(!Ca.ui||bb===Ca.Eh)Xa=w;else switch(bb){case "X":Xa="Y"===Ca.Eh?"XtoY":"XtoZ";break;case "Y":Xa="X"===Ca.Eh?"YtoX":
"YtoZ";break;case "Z":Xa="X"===Ca.Eh?"ZtoX":"ZtoY"}Ba=b("//dae:library_images/dae:image",g,"image");hb=b("//dae:library_materials/dae:material",H,"material");ib=b("//dae:library_effects/dae:effect",U,"effect");gb=b("//dae:library_geometries/dae:geometry",t,"geometry");db=b(".//dae:library_cameras/dae:camera",ra,"camera");sa=b("//dae:library_controllers/dae:controller",h,"controller");Ia=b("//dae:library_animations/dae:animation",V,"animation");Jb=b(".//dae:library_visual_scenes/dae:visual_scene",
l,"visual_scene");Na=[];Ga=[];(a=N.evaluate(".//dae:scene/dae:instance_visual_scene",N,R,XPathResult.ORDERED_NODE_ITERATOR_TYPE,w).iterateNext())?(a=a.getAttribute("url").replace(/^#/,""),La=Jb[0<a.length?a:"visual_scene0"]):La=w;ja=new THREE.z;for(a=0;a<La.Sa.length;a++)ja.add(f(La.Sa[a]));Ib=[];c(ja);a={xc:ja,oy:Na,Nz:Ga,Pq:Ib,qr:{images:Ba,ja:hb,Qd:db,qw:ib,Z:gb,controllers:sa,Pq:Ia,sA:Jb,xc:La}};d&&d(a);return a}function b(a,b,c){for(var a=N.evaluate(a,N,R,XPathResult.ORDERED_NODE_ITERATOR_TYPE,
w),d={},e=a.iterateNext(),f=0;e;){e=(new b).parse(e);if(!e.id||0==e.id.length)e.id=c+f++;d[e.id]=e;e=a.iterateNext()}return d}function c(a){var b=La.Tg(a.name,v),d=w;if(b&&b.keys){d={Sf:60,w:[{Yi:b,keys:b.keys,kg:b.kg}],Yi:a,name:"animation_"+a.name,length:0};Ib.push(d);for(var e=0,f=b.keys.length;e<f;e++)d.length=Math.max(d.length,b.keys[e].time)}else d={w:[{keys:[],kg:[]}]};e=0;for(f=a.children.length;e<f;e++)for(var b=0,g=c(a.children[e]).w.length;b<g;b++)d.w.push({keys:[],kg:[]});return d}function d(a,
b,c,e){a.qf=a.qf||new THREE.D;a.qf.copy(a.J);if(a.Rd&&a.Rd.length){var f=a.Rd[0].Qb.ih[c];f instanceof THREE.D&&a.qf.copy(f)}e&&a.qf.multiply(e,a.qf);b.push(a);for(e=0;e<a.Sa.length;e++)d(a.Sa[e],b,c,a.qf)}function e(a,b,c){var e,f=sa[b.url];if(!f||!f.Sc)console.log("ColladaLoader: Could not find skin controller.");else if(!b.le||!b.le.length)console.log("ColladaLoader: Could not find the skeleton for the skin. ");else{var c=1E6,g=-c,h=0;for(e in Ia)for(var i=Ia[e],j=0;j<i.Qb.length;j++){var k=i.Qb[j];
k.create();c=Math.min(c,k.startTime);g=Math.max(g,k.Wd);h=Math.max(h,k.input.length)}e=h;for(var b=La.Tg(b.le[0],v)||La.Ki(b.le[0],v),l,m,g=new THREE.e,n,j=0;j<a.f.length;j++)f.Sc.dn.aa(a.f[j]);for(c=0;c<e;c++){h=[];i=[];for(j=0;j<a.f.length;j++)i.push(new THREE.e);d(b,h,c);j=h;k=f.Sc;for(m=0;m<j.length;m++)if(l=j[m],n=-1,"JOINT"==l.type){for(var p=0;p<k.Oi.length;p++)if(l.Ka==k.Oi[p]){n=p;break}if(0<=n){p=k.Tk[n];l.Ww=p;l.Fo=new THREE.D;l.Fo.multiply(l.qf,p);l.Uc=[];for(p=0;p<k.Uc.length;p++)for(var q=
0;q<k.Uc[p].length;q++){var s=k.Uc[p][q];s.fs==n&&l.Uc.push(s)}}else throw"ColladaLoader: Could not find joint '"+l.Ka+"'.";}for(j=0;j<h.length;j++)if("JOINT"==h[j].type)for(k=0;k<h[j].Uc.length;k++)l=h[j].Uc[k],m=l.index,l=l.Ed,n=a.f[m],m=i[m],g.x=n.x,g.y=n.y,g.a=n.a,h[j].Fo.aa(g),m.x+=g.x*l,m.y+=g.y*l,m.a+=g.a*l;a.G.push({name:"target_"+c,f:i})}}}function f(a){var b=new THREE.z,c,d,g,h;for(g=0;g<a.controllers.length;g++){var i=sa[a.controllers[g].url];switch(i.type){case "skin":if(gb[i.Sc.source]){var k=
new n;k.url=i.Sc.source;k.sc=a.controllers[g].sc;a.Z.push(k);c=a.controllers[g]}else sa[i.Sc.source]&&(d=i=sa[i.Sc.source],i.cd&&gb[i.cd.source]&&(k=new n,k.url=i.cd.source,k.sc=a.controllers[g].sc,a.Z.push(k)));break;case "morph":gb[i.cd.source]&&(k=new n,k.url=i.cd.source,k.sc=a.controllers[g].sc,a.Z.push(k),d=a.controllers[g]),console.log("ColladaLoader: Morph-controller partially supported.")}}k={};for(g=0;g<a.Z.length;g++){h=a.Z[g];var i=h.sc,j=gb[h.url],l={},m=[],p=0,q;if(j&&j.ce&&j.ce.ed){0==
b.name.length&&(b.name=j.id);if(i)for(h=0;h<i.length;h++){q=i[h];var t=hb[q.target],y=ib[t.Gn.url].ij.q;if(j.Ud){if(!(y in k)){var x=y.d();x.Rc=THREE.Cc;k[y]=x}y=k[y]}y.opacity=!y.opacity?1:y.opacity;l[q.Io]=p;m.push(y);q=y;q.name=t.name==w||""===t.name?t.id:t.name;p++}i=q||new THREE.Xb({color:14540253,Da:THREE.og,Rc:j.Ud?THREE.Cc:THREE.uf});j=j.ce.$c;if(1<p){i=new THREE.Hb(m);for(h=0;h<j.m.length;h++)m=j.m[h],m.va=l[m.rr]}if(c!==r)e(j,c),i.G=v,i=new THREE.ac(j,i,D),i.le=c.le,i.Lz=sa[c.url],i.Mz=
c,i.name="skin_"+Ga.length,Ga.push(i);else if(d!==r){h=j;l=d instanceof s?sa[d.url]:d;if(!l||!l.cd)console.log("could not find morph controller!");else{l=l.cd;for(m=0;m<l.Sb.length;m++)p=gb[l.Sb[m]],p.ce&&(p.ce.ed&&p.ce.ed.length)&&(p=p.ce.ed[0].t,p.f.length===h.f.length&&h.G.push({name:"target_1",f:p.f}));h.G.push({name:"target_Z",f:h.f})}i.G=v;i=new THREE.R(j,i);i.name="morph_"+Na.length;Na.push(i)}else i=new THREE.R(j,i);1<a.Z.length?b.add(i):b=i}}for(g=0;g<a.Qd.length;g++)b=db[a.Qd[g].url],b=
new THREE.mc(b.Xd,b.cn,b.fp,b.ep);b.name=a.id||"";b.J=a.J;g=kd(a.J);b.position=g[0];b.ic=g[1];b.ld=v;b.scale=g[2];Ca.ir&&b.t&&(g=THREE.na.xb(b.t),b.ic.aa(g.Xe(b.scale)),b.position.Wa(g));for(g=0;g<a.Sa.length;g++)b.add(f(a.Sa[g]));return b}function g(){this.$g=this.id=""}function h(){this.type=this.name=this.id="";this.cd=this.Sc=w}function i(){this.Uc=this.Sb=this.source=this.method=w}function k(){this.source="";this.dn=w;this.Tk=[];this.Oi=[];this.Uc=[]}function l(){this.name=this.id="";this.Sa=
[];this.xc=new THREE.z}function m(){this.Ka=this.name=this.id="";this.Sa=[];this.controllers=[];this.jf=[];this.Z=[];this.Rd=[];this.J=new THREE.D}function p(){this.type=this.Ka="";this.data=[];this.U=w}function s(){this.url="";this.le=[];this.sc=[]}function q(){this.target=this.Io=""}function n(){this.url="";this.sc=[]}function t(){this.id="";this.ce=w}function x(a){this.t=a.id;this.ed=[];this.$c=this.f=w}function L(){this.q="";this.count=0;this.bd=[];this.pf=w;this.fg=[];this.t=new THREE.I}function E(){L.call(this);
this.pf=[]}function y(){L.call(this);this.pf=3}function M(){this.source="";this.Ho=this.count=0;this.dd=[]}function B(){this.input={}}function K(){this.Qc="";this.offset=0;this.source="";this.set=0}function J(a){this.id=a;this.type=w}function H(){this.name=this.id="";this.Gn=w}function O(){this.color=new THREE.u(0);Ob(this.color,Math.random(),Math.random(),Math.random());this.color.p=1;this.jd=this.Yt=this.sj=w}function C(a,b){this.type=a;this.Vd=b;this.q=w}function P(a){this.Vd=a;this.ia=this.$g=
w}function F(a){this.Vd=a;this.Fs=this.ts=this.Es=this.ku=this.ju=this.source=w}function U(){this.name=this.id="";this.Qb=this.Ch=this.ij=w}function G(){this.url=""}function V(){this.name=this.id="";this.source={};this.Qb=[];this.Nf=[]}function fa(a){this.gi=a;this.target=this.source="";this.cg=this.ii=this.Qq=this.yr=this.Ka=this.tn=w}function W(a){this.id="";this.gi=a;this.bd=[];this.Wd=this.startTime=this.bs=this.hf=this.ih=this.input=w;this.duration=0}function ia(a){this.Sb=[];this.time=a}function ra(){this.Kl=
this.name=this.id=""}function Ha(){this.url=""}function R(a){return"dae"==a?"http://www.collada.org/2005/11/COLLADASchema":w}function ha(a){for(var a=ka(a),b=[],c=0,d=a.length;c<d;c++)b.push(parseFloat(a[c]));return b}function qa(a){for(var a=ka(a),b=[],c=0,d=a.length;c<d;c++)b.push(parseInt(a[c],10));return b}function ka(a){return 0<a.length?a.replace(/^\s+/,"").replace(/\s+$/,"").split(/\s+/):[]}function Q(a,b,c){return a.hasAttribute(b)?parseInt(a.getAttribute(b),10):c}function S(a,b){a.Ud=D;var c=
N.evaluate(".//dae:extra//dae:double_sided",b,R,XPathResult.ORDERED_NODE_ITERATOR_TYPE,w);if(c&&(c=c.iterateNext())&&1===parseInt(c.textContent,10))a.Ud=v}function ga(a,b){if(Ca.ui&&bb!==Ca.Eh)switch(Xa){case "XtoY":var c=a[0];a[0]=b*a[1];a[1]=c;break;case "XtoZ":c=a[2];a[2]=a[1];a[1]=a[0];a[0]=c;break;case "YtoX":c=a[0];a[0]=a[1];a[1]=b*c;break;case "YtoZ":c=a[1];a[1]=b*a[2];a[2]=c;break;case "ZtoX":c=a[0];a[0]=a[1];a[1]=a[2];a[2]=c;break;case "ZtoY":c=a[1],a[1]=a[2],a[2]=b*c}}function T(a,b){var c=
[a[b],a[b+1],a[b+2]];ga(c,-1);return new THREE.e(c[0],c[1],c[2])}function X(a){if(Ca.ui){var b=[a[0],a[4],a[8]];ga(b,-1);a[0]=b[0];a[4]=b[1];a[8]=b[2];b=[a[1],a[5],a[9]];ga(b,-1);a[1]=b[0];a[5]=b[1];a[9]=b[2];b=[a[2],a[6],a[10]];ga(b,-1);a[2]=b[0];a[6]=b[1];a[10]=b[2];b=[a[0],a[1],a[2]];ga(b,-1);a[0]=b[0];a[1]=b[1];a[2]=b[2];b=[a[4],a[5],a[6]];ga(b,-1);a[4]=b[0];a[5]=b[1];a[6]=b[2];b=[a[8],a[9],a[10]];ga(b,-1);a[8]=b[0];a[9]=b[1];a[10]=b[2];b=[a[3],a[7],a[11]];ga(b,-1);a[3]=b[0];a[7]=b[1];a[11]=b[2]}return new THREE.D(a[0],
a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15])}function ca(a){if(Ca.ui)switch(a){case "X":switch(Xa){case "XtoY":case "XtoZ":case "YtoX":a="Y";break;case "ZtoX":a="Z"}break;case "Y":switch(Xa){case "XtoY":case "YtoX":case "ZtoX":a="X";break;case "XtoZ":case "YtoZ":case "ZtoY":a="Z"}break;case "Z":switch(Xa){case "XtoZ":a="X";break;case "YtoZ":case "ZtoX":case "ZtoY":a="Y"}}return a}var N=w,ja=w,La,Oa=w,za={},Ba={},Ia={},sa={},gb={},hb={},ib={},db={},Ib,Jb,ub,Na,
Ga,nb=THREE.Gc,Ca={ir:D,ui:D,Ut:v,Eh:"Y",kn:w},bb="Y",Xa=w,Ma=Math.PI/180;g.prototype.parse=function(a){this.id=a.getAttribute("id");for(var b=0;b<a.childNodes.length;b++){var c=a.childNodes[b];"init_from"==c.nodeName&&(this.$g=c.textContent)}return this};h.prototype.parse=function(a){this.id=a.getAttribute("id");this.name=a.getAttribute("name");this.type="none";for(var b=0;b<a.childNodes.length;b++){var c=a.childNodes[b];switch(c.nodeName){case "skin":this.Sc=(new k).parse(c);this.type=c.nodeName;
break;case "morph":this.cd=(new i).parse(c),this.type=c.nodeName}}return this};i.prototype.parse=function(a){var b={},c=[],d;this.method=a.getAttribute("method");this.source=a.getAttribute("source").replace(/^#/,"");for(d=0;d<a.childNodes.length;d++){var e=a.childNodes[d];if(1==e.nodeType)switch(e.nodeName){case "source":e=(new J).parse(e);b[e.id]=e;break;case "targets":c=this.Ys(e);break;default:console.log(e.nodeName)}}for(d=0;d<c.length;d++)switch(a=c[d],e=b[a.source],a.Qc){case "MORPH_TARGET":this.Sb=
e.cf();break;case "MORPH_WEIGHT":this.Uc=e.cf()}return this};i.prototype.Ys=function(a){for(var b=[],c=0;c<a.childNodes.length;c++){var d=a.childNodes[c];if(1==d.nodeType)switch(d.nodeName){case "input":b.push((new K).parse(d))}}return b};k.prototype.parse=function(a){var b={},c,d;this.source=a.getAttribute("source").replace(/^#/,"");this.Tk=[];this.Oi=[];this.Uc=[];for(var e=0;e<a.childNodes.length;e++){var f=a.childNodes[e];if(1==f.nodeType)switch(f.nodeName){case "bind_shape_matrix":f=ha(f.textContent);
this.dn=X(f);break;case "source":f=(new J).parse(f);b[f.id]=f;break;case "joints":c=f;break;case "vertex_weights":d=f;break;default:console.log(f.nodeName)}}this.Zs(c,b);this.dt(d,b);return this};k.prototype.Zs=function(a,b){for(var c=0;c<a.childNodes.length;c++){var d=a.childNodes[c];if(1==d.nodeType)switch(d.nodeName){case "input":var d=(new K).parse(d),e=b[d.source];"JOINT"==d.Qc?this.Oi=e.cf():"INV_BIND_MATRIX"==d.Qc&&(this.Tk=e.cf())}}};k.prototype.dt=function(a,b){for(var c,d,e=[],f=0;f<a.childNodes.length;f++){var g=
a.childNodes[f];if(1==g.nodeType)switch(g.nodeName){case "input":e.push((new K).parse(g));break;case "v":c=qa(g.textContent);break;case "vcount":d=qa(g.textContent)}}for(f=g=0;f<d.length;f++){for(var h=d[f],j=[],i=0;i<h;i++){for(var k={},l=0;l<e.length;l++){var m=e[l],n=c[g+m.offset];switch(m.Qc){case "JOINT":k.fs=n;break;case "WEIGHT":k.Ed=b[m.source].data[n]}}j.push(k);g+=e.length}for(i=0;i<j.length;i++)j[i].index=f;this.Uc.push(j)}};l.prototype.Tg=function(a,b){for(var c=0;c<this.Sa.length;c++){var d=
this.Sa[c].Tg(a,b);if(d)return d}return w};l.prototype.Ki=function(a,b){for(var c=0;c<this.Sa.length;c++){var d=this.Sa[c].Ki(a,b);if(d)return d}return w};l.prototype.parse=function(a){this.id=a.getAttribute("id");this.name=a.getAttribute("name");this.Sa=[];for(var b=0;b<a.childNodes.length;b++){var c=a.childNodes[b];if(1==c.nodeType)switch(c.nodeName){case "node":this.Sa.push((new m).parse(c))}}return this};m.prototype.Tg=function(a,b){if(this.id==a)return this;if(b)for(var c=0;c<this.Sa.length;c++){var d=
this.Sa[c].Tg(a,b);if(d)return d}return w};m.prototype.Ki=function(a,b){if(this.Ka==a)return this;if(b)for(var c=0;c<this.Sa.length;c++){var d=this.Sa[c].Ki(a,b);if(d)return d}return w};m.prototype.Nr=function(a){for(var b=0;b<this.jf.length;b++)if(this.jf[b].Ka==a)return this.jf[b];return w};m.prototype.parse=function(a){var b;this.id=a.getAttribute("id");this.Ka=a.getAttribute("sid");this.name=a.getAttribute("name");this.type=a.getAttribute("type");this.type="JOINT"==this.type?this.type:"NODE";
this.Sa=[];this.jf=[];this.Z=[];this.Qd=[];this.controllers=[];this.J=new THREE.D;for(var c=0;c<a.childNodes.length;c++)if(b=a.childNodes[c],1==b.nodeType)switch(b.nodeName){case "node":this.Sa.push((new m).parse(b));break;case "instance_camera":this.Qd.push((new Ha).parse(b));break;case "instance_controller":this.controllers.push((new s).parse(b));break;case "instance_geometry":this.Z.push((new n).parse(b));break;case "instance_light":break;case "instance_node":b=b.getAttribute("url").replace(/^#/,
"");(b=N.evaluate(".//dae:library_nodes//dae:node[@id='"+b+"']",N,R,XPathResult.ORDERED_NODE_ITERATOR_TYPE,w).iterateNext())&&this.Sa.push((new m).parse(b));break;case "rotate":case "translate":case "scale":case "matrix":case "lookat":case "skew":this.jf.push((new p).parse(b));break;case "extra":break;default:console.log(b.nodeName)}a=[];c=1E6;b=-1E6;for(var d in Ia)for(var e=Ia[d],f=0;f<e.Nf.length;f++){var g=e.Nf[f],h=e.Qb[f];d=g.target.split("/")[0];d==this.id&&(h.create(),g.Qb=h,c=Math.min(c,
h.startTime),b=Math.max(b,h.Wd),a.push(g))}a.length&&(this.startTime=c,this.Wd=b);if((this.Rd=a)&&this.Rd.length){d=[];a=[];c=0;for(e=this.Rd.length;c<e;c++){var j=this.Rd[c],f=j.tn,g=j.Qb,h=g.input,i=this.Nr(j.Ka),k;if(j.ii){k=[];b=0;for(var l=j.ii.length;b<l;b++){var q=j.ii[b];-1<q&&3>q&&(q=ca(["X","Y","Z"][q]),q={Pu:0,Qu:1,Ru:2}[q]);k[b]=q}}else k=ca(j.cg);if(i){-1===a.indexOf(f)&&a.push(f);b=0;for(l=h.length;b<l;b++){var q=h[b],j=g.getData(i.type,b),t;t=w;for(var y=0,x=d.length;y<x&&t==w;y++){var B=
d[y];if(B.time===q)t=B;else if(B.time>q)break}if(!t){t=new ia(q);y=-1;x=0;for(B=d.length;x<B&&-1==y;x++)d[x].time>=q&&(y=x);q=y;d.splice(-1==q?d.length:q,0,t)}t.Zm(f,i,k,j)}}else console.log('Could not find transform "'+j.Ka+'" in node '+this.id)}for(c=0;c<a.length;c++){e=a[c];for(b=0;b<d.length;b++)if(t=d[b],!t.Yg(e)){f=t;g=e;i=r;a:{h=b?b-1:0;for(h=0<=h?h:h+d.length;0<=h;h--)if(i=d[h],i.Yg(g))break a;i=w}k=r;a:{for(h=b+1;h<d.length;h++)if(k=d[h],k.Yg(g))break a;k=w}if(i&&k){h=(f.time-i.time)/(k.time-
i.time);i=i.Qk(g);k=k.Qk(g).data;l=i.data;j=r;if("matrix"===i.type)j=l;else if(l.length){j=[];for(q=0;q<l.length;++q)j[q]=l[q]+(k[q]-l[q])*h}else j=l+(k-l)*h;f.Zm(g,i.transform,i.cg,j)}}}this.keys=d;this.kg=a}this.yc();return this};m.prototype.yc=function(){Jd(this.J);for(var a=0;a<this.jf.length;a++)this.jf[a].apply(this.J)};p.prototype.parse=function(a){this.Ka=a.getAttribute("sid");this.type=a.nodeName;this.data=ha(a.textContent);this.nr();return this};p.prototype.nr=function(){switch(this.type){case "matrix":this.U=
X(this.data);break;case "rotate":this.Ke=this.data[3]*Ma;case "translate":ga(this.data,-1);this.U=new THREE.e(this.data[0],this.data[1],this.data[2]);break;case "scale":ga(this.data,1);this.U=new THREE.e(this.data[0],this.data[1],this.data[2]);break;default:console.log("Can not convert Transform of type "+this.type)}};p.prototype.apply=function(a){switch(this.type){case "matrix":a.Xe(this.U);break;case "translate":a.translate(this.U);break;case "rotate":var b=this.U,c=this.Ke,d=a.elements;if(1===
b.x&&0===b.y&&0===b.a)Wc(a,c);else if(0===b.x&&1===b.y&&0===b.a){var d=c,a=a.elements,e=a[0],b=a[1],f=a[2],g=a[3],h=a[8],i=a[9],c=a[10],k=a[11],l=Math.cos(d),d=Math.sin(d);a[0]=l*e-d*h;a[1]=l*b-d*i;a[2]=l*f-d*c;a[3]=l*g-d*k;a[8]=l*h+d*e;a[9]=l*i+d*b;a[10]=l*c+d*f;a[11]=l*k+d*g}else if(0===b.x&&0===b.y&&1===b.a)d=c,a=a.elements,e=a[0],b=a[1],f=a[2],g=a[3],h=a[4],i=a[5],c=a[6],k=a[7],l=Math.cos(d),d=Math.sin(d),a[0]=l*e+d*h,a[1]=l*b+d*i,a[2]=l*f+d*c,a[3]=l*g+d*k,a[4]=l*h-d*e,a[5]=l*i-d*b,a[6]=l*c-d*
f,a[7]=l*k-d*g;else{var a=b.x,e=b.y,b=b.a,f=Math.sqrt(a*a+e*e+b*b),a=a/f,e=e/f,b=b/f,f=a*a,g=e*e,h=b*b,i=Math.cos(c),c=Math.sin(c),k=1-i,l=a*e*k,m=a*b*k,k=e*b*k,a=a*c,n=e*c,c=b*c,b=f+(1-f)*i,f=l+c,e=m-n,l=l-c,g=g+(1-g)*i,c=k+a,m=m+n,k=k-a,h=h+(1-h)*i,i=d[0],a=d[1],n=d[2],p=d[3],q=d[4],s=d[5],t=d[6],y=d[7],x=d[8],B=d[9],C=d[10],E=d[11];d[0]=b*i+f*q+e*x;d[1]=b*a+f*s+e*B;d[2]=b*n+f*t+e*C;d[3]=b*p+f*y+e*E;d[4]=l*i+g*q+c*x;d[5]=l*a+g*s+c*B;d[6]=l*n+g*t+c*C;d[7]=l*p+g*y+c*E;d[8]=m*i+k*q+h*x;d[9]=m*a+k*
s+h*B;d[10]=m*n+k*t+h*C;d[11]=m*p+k*y+h*E}break;case "scale":a.scale(this.U)}};p.prototype.update=function(a,b){var c=["X","Y","Z","ANGLE"];switch(this.type){case "matrix":if(b)if(1===b.length)switch(b[0]){case 0:this.U.ty=a[0];this.U.xy=a[1];this.U.By=a[2];this.U.Fy=a[3];break;case 1:this.U.uy=a[0];this.U.yy=a[1];this.U.Cy=a[2];this.U.Gy=a[3];break;case 2:this.U.vy=a[0];this.U.zy=a[1];this.U.Dy=a[2];this.U.Hy=a[3];break;case 3:this.U.wy=a[0],this.U.Ay=a[1],this.U.Ey=a[2],this.U.Iy=a[3]}else 2===
b.length?this.U["n"+(b[0]+1)+(b[1]+1)]=a:console.log("Incorrect addressing of matrix in transform.");else this.U.copy(a);break;case "translate":case "scale":"[object Array]"===Object.prototype.toString.call(b)&&(b=c[b[0]]);switch(b){case "X":this.U.x=a;break;case "Y":this.U.y=a;break;case "Z":this.U.a=a;break;default:this.U.x=a[0],this.U.y=a[1],this.U.a=a[2]}break;case "rotate":switch("[object Array]"===Object.prototype.toString.call(b)&&(b=c[b[0]]),b){case "X":this.U.x=a;break;case "Y":this.U.y=
a;break;case "Z":this.U.a=a;break;case "ANGLE":this.Ke=a*Ma;break;default:this.U.x=a[0],this.U.y=a[1],this.U.a=a[2],this.Ke=a[3]*Ma}}};s.prototype.parse=function(a){this.url=a.getAttribute("url").replace(/^#/,"");this.le=[];this.sc=[];for(var b=0;b<a.childNodes.length;b++){var c=a.childNodes[b];if(1===c.nodeType)switch(c.nodeName){case "skeleton":this.le.push(c.textContent.replace(/^#/,""));break;case "bind_material":if(c=N.evaluate(".//dae:instance_material",c,R,XPathResult.ORDERED_NODE_ITERATOR_TYPE,
w))for(var d=c.iterateNext();d;)this.sc.push((new q).parse(d)),d=c.iterateNext()}}return this};q.prototype.parse=function(a){this.Io=a.getAttribute("symbol");this.target=a.getAttribute("target").replace(/^#/,"");return this};n.prototype.parse=function(a){this.url=a.getAttribute("url").replace(/^#/,"");this.sc=[];for(var b=0;b<a.childNodes.length;b++){var c=a.childNodes[b];if(1==c.nodeType&&"bind_material"==c.nodeName){if(a=N.evaluate(".//dae:instance_material",c,R,XPathResult.ORDERED_NODE_ITERATOR_TYPE,
w))for(b=a.iterateNext();b;)this.sc.push((new q).parse(b)),b=a.iterateNext();break}}return this};t.prototype.parse=function(a){this.id=a.getAttribute("id");S(this,a);for(var b=0;b<a.childNodes.length;b++){var c=a.childNodes[b];switch(c.nodeName){case "mesh":this.ce=(new x(this)).parse(c)}}return this};x.prototype.parse=function(a){this.ed=[];var b;for(b=0;b<a.childNodes.length;b++){var c=a.childNodes[b];switch(c.nodeName){case "source":var d=c.getAttribute("id");za[d]==r&&(za[d]=(new J(d)).parse(c));
break;case "vertices":this.f=(new B).parse(c);break;case "triangles":this.ed.push((new y).parse(c));break;case "polygons":this.ed.push((new L).parse(c));break;case "polylist":this.ed.push((new E).parse(c))}}this.$c=new THREE.I;a=za[this.f.input.POSITION.source].data;for(b=0;b<a.length;b+=3)this.$c.f.push(T(a,b).d());for(b=0;b<this.ed.length;b++)a=this.ed[b],a.vt(this.f),this.Pr(a,this.$c);ce(this.$c);be(this.$c);this.$c.fn&&(this.$c.zd(),delete this.$c.fn);this.$c.si();return this};x.prototype.Pr=
function(a,b){var c,d,e=a.fg,f=a.bd,g,h,i,k,l,m=0,n=3,p=0,q=[];for(c=0;c<f.length;c++)switch(g=f[c],n=g.offset+1,p=p<n?n:p,g.Qc){case "TEXCOORD":q.push(g.set)}for(var s=0;s<e.length;++s)for(var t=e[s],y=0;y<t.length;){var x=[],B=[],C=w,E=[],n=a.pf?a.pf.length?a.pf[m++]:a.pf:t.length/p;for(c=0;c<n;c++)for(d=0;d<f.length;d++)switch(g=f[d],k=za[g.source],h=t[y+c*p+g.offset],l=k.Ff.dd.length,i=h*l,g.Qc){case "VERTEX":x.push(h);break;case "NORMAL":B.push(T(k.data,i));break;case "TEXCOORD":C=C||{};C[g.set]===
r&&(C[g.set]=[]);C[g.set].push(new THREE.l(k.data[i],k.data[i+1]));break;case "COLOR":E.push(Ob(new THREE.u,k.data[i],k.data[i+1],k.data[i+2]))}if(0==B.length)if(g=this.f.input.Au){k=za[g.source];l=k.Ff.dd.length;c=0;for(h=x.length;c<h;c++)B.push(T(k.data,x[c]*l))}else b.fn=v;if(!C&&(C={},g=this.f.input.Ku)){q.push(g.set);k=za[g.source];l=k.Ff.dd.length;c=0;for(h=x.length;c<h;c++)i=x[c]*l,C[g.set]===r&&(C[g.set]=[]),C[g.set].push(new THREE.l(k.data[i],1-k.data[i+1]))}if(0==E.length&&(g=this.f.input.ou)){k=
za[g.source];l=k.Ff.dd.length;c=0;for(h=x.length;c<h;c++)i=x[c]*l,E.push(Ob(new THREE.u,k.data[i],k.data[i+1],k.data[i+2]))}d=w;g=[];if(3===n)g.push(new THREE.O(x[0],x[1],x[2],B,E.length?E:new THREE.u));else if(4===n)g.push(new THREE.da(x[0],x[1],x[2],x[3],B,E.length?E:new THREE.u));else if(4<n&&Ca.Ut){E=E.length?E:new THREE.u;for(d=1;d<n-1;)g.push(new THREE.O(x[0],x[d],x[d+1],[B[0],B[d++],B[d]],E))}if(g.length){c=0;for(h=g.length;c<h;c++){d=g[c];d.rr=a.q;b.m.push(d);for(d=0;d<q.length;d++)x=C[q[d]],
x=4<n?[x[0],x[c+1],x[c+2]]:4===n?[x[0],x[1],x[2],x[3]]:[x[0],x[1],x[2]],b.C[d]||(b.C[d]=[]),b.C[d].push(x)}}else console.log("dropped face with vcount "+n+" for geometry with id: "+b.id);y+=p*n}};L.prototype.vt=function(a){for(var b=0;b<this.bd.length;b++)this.bd[b].source==a.id&&(this.bd[b].source=a.input.POSITION.source)};L.prototype.parse=function(a){this.q=a.getAttribute("material");this.count=Q(a,"count",0);for(var b=0;b<a.childNodes.length;b++){var c=a.childNodes[b];switch(c.nodeName){case "input":this.bd.push((new K).parse(a.childNodes[b]));
break;case "vcount":this.pf=qa(c.textContent);break;case "p":this.fg.push(qa(c.textContent));break;case "ph":console.warn("polygon holes not yet supported!")}}return this};E.prototype=Object.create(L.prototype);y.prototype=Object.create(L.prototype);M.prototype.parse=function(a){this.dd=[];this.source=a.getAttribute("source");this.count=Q(a,"count",0);this.Ho=Q(a,"stride",0);for(var b=0;b<a.childNodes.length;b++){var c=a.childNodes[b];if("param"==c.nodeName){var d={};d.name=c.getAttribute("name");
d.type=c.getAttribute("type");this.dd.push(d)}}return this};B.prototype.parse=function(a){this.id=a.getAttribute("id");for(var b=0;b<a.childNodes.length;b++)if("input"==a.childNodes[b].nodeName){var c=(new K).parse(a.childNodes[b]);this.input[c.Qc]=c}return this};K.prototype.parse=function(a){this.Qc=a.getAttribute("semantic");this.source=a.getAttribute("source").replace(/^#/,"");this.set=Q(a,"set",-1);this.offset=Q(a,"offset",0);"TEXCOORD"==this.Qc&&0>this.set&&(this.set=0);return this};J.prototype.parse=
function(a){this.id=a.getAttribute("id");for(var b=0;b<a.childNodes.length;b++){var c=a.childNodes[b];switch(c.nodeName){case "bool_array":for(var d=ka(c.textContent),e=[],f=0,g=d.length;f<g;f++)e.push("true"==d[f]||"1"==d[f]?v:D);this.data=e;this.type=c.nodeName;break;case "float_array":this.data=ha(c.textContent);this.type=c.nodeName;break;case "int_array":this.data=qa(c.textContent);this.type=c.nodeName;break;case "IDREF_array":case "Name_array":this.data=ka(c.textContent);this.type=c.nodeName;
break;case "technique_common":for(d=0;d<c.childNodes.length;d++)if("accessor"==c.childNodes[d].nodeName){this.Ff=(new M).parse(c.childNodes[d]);break}}}return this};J.prototype.cf=function(){var a=[],b=this.Ff.dd[0];switch(b.type){case "IDREF":case "Name":case "name":case "float":return this.data;case "float4x4":for(b=0;b<this.data.length;b+=16){var c=this.data.slice(b,b+16),c=X(c);a.push(c)}break;default:console.log("ColladaLoader: Source: Read dont know how to read "+b.type+".")}return a};H.prototype.parse=
function(a){this.id=a.getAttribute("id");this.name=a.getAttribute("name");for(var b=0;b<a.childNodes.length;b++)if("instance_effect"==a.childNodes[b].nodeName){this.Gn=(new G).parse(a.childNodes[b]);break}return this};O.prototype.isTexture=function(){return this.sj!=w};O.prototype.parse=function(a){for(var b=0;b<a.childNodes.length;b++){var c=a.childNodes[b];if(1==c.nodeType)switch(c.nodeName){case "color":c=ha(c.textContent);this.color=new THREE.u(0);Ob(this.color,c[0],c[1],c[2]);this.color.p=c[3];
break;case "texture":this.sj=c.getAttribute("texture"),this.Yt=c.getAttribute("texcoord"),this.jd={Rs:0,Ss:0,pt:1,qt:1,hu:1,iu:1},this.ct(c)}}return this};O.prototype.ct=function(a){if(a.childNodes){a.childNodes[1]&&"extra"===a.childNodes[1].nodeName&&(a=a.childNodes[1],a.childNodes[1]&&"technique"===a.childNodes[1].nodeName&&(a=a.childNodes[1]));for(var b=0;b<a.childNodes.length;b++){var c=a.childNodes[b];switch(c.nodeName){case "offsetU":case "offsetV":case "repeatU":case "repeatV":this.jd[c.nodeName]=
parseFloat(c.textContent);break;case "wrapU":case "wrapV":this.jd[c.nodeName]=parseInt(c.textContent);break;default:this.jd[c.nodeName]=c.textContent}}}};C.prototype.parse=function(a){for(var b=0;b<a.childNodes.length;b++){var c=a.childNodes[b];if(1==c.nodeType)switch(c.nodeName){case "ambient":case "emission":case "diffuse":case "specular":case "transparent":this[c.nodeName]=(new O).parse(c);break;case "shininess":case "reflectivity":case "index_of_refraction":case "transparency":var d;d=N.evaluate(".//dae:float",
c,R,XPathResult.ORDERED_NODE_ITERATOR_TYPE,w);for(var e=d.iterateNext(),f=[];e;)f.push(e),e=d.iterateNext();d=f;0<d.length&&(this[c.nodeName]=parseFloat(d[0].textContent))}}this.create();return this};C.prototype.create=function(){var a={},b=this.transparency!==r&&1>this.transparency,c;for(c in this)switch(c){case "ambient":case "emission":case "diffuse":case "specular":var d=this[c];if(d instanceof O)if(d.isTexture()){if(this.Vd.Qb&&this.Vd.Ch&&this.Vd.Qb.source==this.Vd.Ch.Ka){var e=Ba[this.Vd.Ch.$g];
e&&(e=THREE.rd.Rn(ub+e.$g),e.Ub=d.jd.hu?THREE.Fc:THREE.re,e.Vb=d.jd.iu?THREE.Fc:THREE.re,e.offset.x=d.jd.Rs,e.offset.y=d.jd.Ss,e.repeat.x=d.jd.pt,e.repeat.y=d.jd.qt,a.map=e,"emission"===c&&(a.emissive=16777215))}}else if("diffuse"===c||!b)"emission"===c?a.emissive=Wb(d.color):a[c]=Wb(d.color);break;case "shininess":a[c]=this[c];break;case "reflectivity":a[c]=this[c];0<a[c]&&(a.envMap=Ca.kn);a.combine=THREE.em;break;case "index_of_refraction":a.refractionRatio=this[c];1!==this[c]&&(a.envMap=Ca.kn);
break;case "transparency":b&&(a.transparent=v,a.opacity=this[c],b=v)}a.shading=nb;a.side=this.Vd.Ud?THREE.Cc:THREE.uf;switch(this.type){case "constant":a.color=a.rw;this.q=new THREE.Ma(a);break;case "phong":case "blinn":a.color=a.Of;this.q=new THREE.Yb(a);break;default:a.color=a.Of,this.q=new THREE.Xb(a)}return this.q};P.prototype.parse=function(a){for(var b=0;b<a.childNodes.length;b++){var c=a.childNodes[b];if(1==c.nodeType)switch(c.nodeName){case "init_from":this.$g=c.textContent;break;case "format":this.ia=
c.textContent;break;default:console.log("unhandled Surface prop: "+c.nodeName)}}return this};F.prototype.parse=function(a){for(var b=0;b<a.childNodes.length;b++){var c=a.childNodes[b];if(1==c.nodeType)switch(c.nodeName){case "source":this.source=c.textContent;break;case "minfilter":this.Es=c.textContent;break;case "magfilter":this.ts=c.textContent;break;case "mipfilter":this.Fs=c.textContent;break;case "wrap_s":this.ju=c.textContent;break;case "wrap_t":this.ku=c.textContent;break;default:console.log("unhandled Sampler2D prop: "+
c.nodeName)}}return this};U.prototype.create=function(){if(this.ij==w)return w};U.prototype.parse=function(a){this.id=a.getAttribute("id");this.name=a.getAttribute("name");S(this,a);this.ij=w;for(var b=0;b<a.childNodes.length;b++){var c=a.childNodes[b];if(1==c.nodeType)switch(c.nodeName){case "profile_COMMON":this.bt(this.io(c))}}return this};U.prototype.$s=function(a){for(var b=a.getAttribute("sid"),c=0;c<a.childNodes.length;c++){var d=a.childNodes[c];if(1==d.nodeType)switch(d.nodeName){case "surface":this.Ch=
(new P(this)).parse(d);this.Ch.Ka=b;break;case "sampler2D":this.Qb=(new F(this)).parse(d);this.Qb.Ka=b;break;case "extra":break;default:console.log(d.nodeName)}}};U.prototype.io=function(a){for(var b,c=0;c<a.childNodes.length;c++){var d=a.childNodes[c];if(1==d.nodeType)switch(d.nodeName){case "profile_COMMON":this.io(d);break;case "technique":b=d;break;case "newparam":this.$s(d);break;case "image":d=(new g).parse(d);Ba[d.id]=d;break;case "extra":break;default:console.log(d.nodeName)}}return b};U.prototype.bt=
function(a){for(var b=0;b<a.childNodes.length;b++){var c=a.childNodes[b];if(1==c.nodeType)switch(c.nodeName){case "constant":case "lambert":case "blinn":case "phong":this.ij=(new C(c.nodeName,this)).parse(c)}}};G.prototype.parse=function(a){this.url=a.getAttribute("url").replace(/^#/,"");return this};V.prototype.parse=function(a){this.id=a.getAttribute("id");this.name=a.getAttribute("name");this.source={};for(var b=0;b<a.childNodes.length;b++){var c=a.childNodes[b];if(1==c.nodeType)switch(c.nodeName){case "animation":var c=
(new V).parse(c),d;for(d in c.source)this.source[d]=c.source[d];for(var e=0;e<c.Nf.length;e++)this.Nf.push(c.Nf[e]),this.Qb.push(c.Qb[e]);break;case "source":d=(new J).parse(c);this.source[d.id]=d;break;case "sampler":this.Qb.push((new W(this)).parse(c));break;case "channel":this.Nf.push((new fa(this)).parse(c))}}return this};fa.prototype.parse=function(a){this.source=a.getAttribute("source").replace(/^#/,"");this.target=a.getAttribute("target");var b=this.target.split("/");b.shift();var a=b.shift(),
c=0<=a.indexOf("."),d=0<=a.indexOf("(");if(c)b=a.split("."),this.Ka=b.shift(),this.cg=b.shift();else if(d){b=a.split("(");this.Ka=b.shift();for(var e=0;e<b.length;e++)b[e]=parseInt(b[e].replace(/\)/,""));this.ii=b}else this.Ka=a;this.tn=a;this.yr=c;this.Qq=d;return this};W.prototype.parse=function(a){this.id=a.getAttribute("id");this.bd=[];for(var b=0;b<a.childNodes.length;b++){var c=a.childNodes[b];if(1==c.nodeType)switch(c.nodeName){case "input":this.bd.push((new K).parse(c))}}return this};W.prototype.create=
function(){for(var a=0;a<this.bd.length;a++){var b=this.bd[a],c=this.gi.source[b.source];switch(b.Qc){case "INPUT":this.input=c.cf();break;case "OUTPUT":this.ih=c.cf();this.hf=c.Ff.Ho;break;case "INTERPOLATION":this.bs=c.cf();break;case "IN_TANGENT":break;case "OUT_TANGENT":break;default:console.log(b.Qc)}}this.duration=this.Wd=this.startTime=0;if(this.input.length){this.startTime=1E8;this.Wd=-1E8;for(a=0;a<this.input.length;a++)this.startTime=Math.min(this.startTime,this.input[a]),this.Wd=Math.max(this.Wd,
this.input[a]);this.duration=this.Wd-this.startTime}};W.prototype.getData=function(a,b){var c;if("matrix"===a&&16===this.hf)c=this.ih[b];else if(1<this.hf){c=[];for(var b=b*this.hf,d=0;d<this.hf;++d)c[d]=this.ih[b+d];if(3===this.hf)switch(a){case "rotate":case "translate":ga(c,-1);break;case "scale":ga(c,1)}else 4===this.hf&&"matrix"===a&&ga(c,-1)}else c=this.ih[b];return c};ia.prototype.Zm=function(a,b,c,d){this.Sb.push({Ka:a,cg:c,transform:b,data:d})};ia.prototype.apply=function(a){for(var b=0;b<
this.Sb.length;++b){var c=this.Sb[b];(!a||c.Ka===a)&&c.transform.update(c.data,c.cg)}};ia.prototype.Qk=function(a){for(var b=0;b<this.Sb.length;++b)if(this.Sb[b].Ka===a)return this.Sb[b];return w};ia.prototype.Yg=function(a){for(var b=0;b<this.Sb.length;++b)if(this.Sb[b].Ka===a)return v;return D};ia.prototype.yb=function(a,b){for(var c=0;c<this.Sb.length;++c){var d=this.Sb[c],e=a.Qk(d.Ka);if("matrix"!==d.transform.type&&e){var f=(b-this.time)/(a.time-this.time),g=e.data,h=d.data;if(0>f||1<f)console.log("Key.interpolate: Warning! Scale out of bounds:"+
f),f=0>f?0:1;if(h.length)for(var e=[],i=0;i<h.length;++i)e[i]=h[i]+(g[i]-h[i])*f;else e=h+(g-h)*f}else e=d.data;d.transform.update(e,d.cg)}};ra.prototype.parse=function(a){this.id=a.getAttribute("id");this.name=a.getAttribute("name");for(var b=0;b<a.childNodes.length;b++){var c=a.childNodes[b];if(1==c.nodeType)switch(c.nodeName){case "optics":this.at(c)}}return this};ra.prototype.at=function(a){for(var b=0;b<a.childNodes.length;b++)if("technique_common"==a.childNodes[b].nodeName)for(var c=a.childNodes[b],
d=0;d<c.childNodes.length;d++)if(this.Kl=c.childNodes[d].nodeName,"perspective"==this.Kl)for(var e=c.childNodes[d],f=0;f<e.childNodes.length;f++){var g=e.childNodes[f];switch(g.nodeName){case "yfov":this.CA=g.textContent;break;case "xfov":this.yA=g.textContent;break;case "znear":this.fp=g.textContent;break;case "zfar":this.ep=g.textContent;break;case "aspect_ratio":this.cn=g.textContent}}else if("orthographic"==this.Kl){e=c.childNodes[d];for(f=0;f<e.childNodes.length;f++)switch(g=e.childNodes[f],
g.nodeName){case "xmag":this.zA=g.textContent;break;case "ymag":this.DA=g.textContent;break;case "znear":this.fp=g.textContent;break;case "zfar":this.ep=g.textContent;break;case "aspect_ratio":this.cn=g.textContent}}};Ha.prototype.parse=function(a){this.url=a.getAttribute("url").replace(/^#/,"");return this};return{load:function(b,c,d){var e=0;if(document.implementation&&document.implementation.createDocument){var f=new XMLHttpRequest;f.onreadystatechange=function(){if(4==f.readyState){if(0==f.status||
200==f.status)if(f.responseXML)Oa=c,a(f.responseXML,r,b);else if(f.responseText){Oa=c;var g=(new DOMParser).parseFromString(f.responseText,"application/xml");a(g,r,b)}else console.error("ColladaLoader: Empty or non-existing file ("+b+")")}else 3==f.readyState&&d&&(0==e&&(e=f.getResponseHeader("Content-Length")),d({total:e,loaded:f.responseText.length}))};f.open("GET",b,v);f.send(w)}else alert("Don't know how to parse XML!")},parse:a,Dz:function(a){nb=a},Yu:e,Z:gb,options:Ca}};
THREE.Cu=function(a){var b=this,c=new THREE.z;c.add(a);var d=new THREE.z;d.position.y=10;d.add(c);var e=D,f=D,g=D,h=D,i=D,k=D,l=new THREE.e,m=Math.PI/2;document.addEventListener("mousemove",function(a){if(b.enabled!==D){var e=a.qy||a.sy||a.uA||0;d.rotation.y-=0.002*(a.py||a.ry||a.tA||0);c.rotation.x-=0.002*e;c.rotation.x=Math.max(-m,Math.min(m,c.rotation.x))}},D);document.addEventListener("keydown",function(a){switch(a.keyCode){case 38:case 87:e=v;break;case 37:case 65:g=v;break;case 40:case 83:f=
v;break;case 39:case 68:h=v;break;case 32:k===v&&(l.y+=10),k=D}},D);document.addEventListener("keyup",function(a){switch(a.keyCode){case 38:case 87:e=D;break;case 37:case 65:g=D;break;case 40:case 83:f=D;break;case 39:case 68:h=D}},D);this.enabled=D;this.Iw=function(){return d};this.Xw=function(a){k=i=a};this.update=function(a){b.enabled!==D&&(a*=0.1,l.x+=0.08*-l.x*a,l.a+=0.08*-l.a*a,l.y-=0.25*a,e&&(l.a-=0.12*a),f&&(l.a+=0.12*a),g&&(l.x-=0.12*a),h&&(l.x+=0.12*a),i===v&&(l.y=Math.max(0,l.y)),d.translate(l.x,
d.pk.set(1,0,0)),d.translate(l.y,d.pk.set(0,1,0)),d.translate(l.a,d.pk.set(0,0,1)),10>d.position.y&&(l.y=0,d.position.y=10,k=v))}};try{window.Ou&&document.createElement("canvas").getContext("experimental-webgl")}catch(nf){}new mf;
