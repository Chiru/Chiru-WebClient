/*

 JS Signals <http://millermedeiros.github.com/js-signals/>
 Released under the MIT license
 Author: Miller Medeiros
 Version: 1.0.0 - Build: 268 (2012/11/29 05:48 PM)
*/
'use strict';var n=void 0,t=!0,u=null,w=!1;function da(){return function(){}}var va,Ja=window,Xa=n;function $a(a,b,c){if(c===Xa&&1===a.nodeType)if(c="data-"+b.replace(kb,"-$1").toLowerCase(),c=a.getAttribute(c),"string"==typeof c){try{c="true"===c?t:"false"===c?w:"null"===c?u:+c+""===c?+c:mb.test(c)?x.parseJSON(c):c}catch(d){}x.data(a,b,c)}else c=Xa;return c}function nb(a){for(var b in a)if(!("data"===b&&x.isEmptyObject(a[b]))&&"toJSON"!==b)return w;return t}function Ab(){return w}
function Eb(){return t}function Gb(a){return!a||!a.parentNode||11===a.parentNode.nodeType}function Hb(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}
function Ib(a,b,c){b=b||0;if(x.isFunction(b))return x.grep(a,function(a,d){return!!b.call(a,d,a)===c});if(b.nodeType)return x.grep(a,function(a){return a===b===c});if("string"==typeof b){var d=x.grep(a,function(a){return 1===a.nodeType});if(Qb.test(b))return x.filter(b,d,!c);b=x.filter(b,d)}return x.grep(a,function(a){return 0<=x.inArray(a,b)===c})}function Tb(a){var b=Wb.split("|"),a=a.createDocumentFragment();if(a.createElement)for(;b.length;)a.createElement(b.pop());return a}
function Xb(a,b){if(1===b.nodeType&&x.hasData(a)){var c,d,e;d=x.ia(a);var f=x.ia(b,d),g=d.oe;if(g)for(c in delete f.handle,f.oe={},g){d=0;for(e=g[c].length;d<e;d++)x.event.add(b,c,g[c][d])}f.data&&(f.data=x.extend({},f.data))}}
function Yb(a,b){var c;1===b.nodeType&&(b.Ct&&b.Ct(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),x.support.Yl&&a.innerHTML&&!x.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&Zb.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.selected=a.defaultSelected:"input"===c||"textarea"===c?b.defaultValue=a.defaultValue:"script"===c&&b.text!==a.text&&(b.text=a.text),
b.removeAttribute(x.expando))}function $b(a){return"undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName("*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll("*"):[]}function ac(a){Zb.test(a.type)&&(a.defaultChecked=a.checked)}function ic(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=jc.length;e--;)if(b=jc[e]+c,b in a)return b;return d}function pc(a,b){return a=b||a,"none"===x.css(a,"display")||!x.contains(a.ownerDocument,a)}
function qc(a,b){for(var c,d,e=[],f=0,g=a.length;f<g;f++)c=a[f],c.style&&(e[f]=x.ia(c,"olddisplay"),b?(!e[f]&&"none"===c.style.display&&(c.style.display=""),""===c.style.display&&pc(c)&&(e[f]=x.ia(c,"olddisplay",sc(c.nodeName)))):(d=Kc(c,"display"),!e[f]&&"none"!==d&&x.ia(c,"olddisplay",d)));for(f=0;f<g;f++)if(c=a[f],c.style&&(!b||"none"===c.style.display||""===c.style.display))c.style.display=b?e[f]||"":"none";return a}
function Lc(a,b,c){return(a=Mc.exec(b))?Math.max(0,a[1]-(c||0))+(a[2]||"px"):b}function Sc(a,b,c,d){for(var b=c===(d?"border":"content")?4:"width"===b?1:0,e=0;4>b;b+=2)"margin"===c&&(e+=x.css(a,c+Tc[b],t)),d?("content"===c&&(e-=parseFloat(Kc(a,"padding"+Tc[b]))||0),"margin"!==c&&(e-=parseFloat(Kc(a,"border"+Tc[b]+"Width"))||0)):(e+=parseFloat(Kc(a,"padding"+Tc[b]))||0,"padding"!==c&&(e+=parseFloat(Kc(a,"border"+Tc[b]+"Width"))||0));return e}
function Uc(a,b,c){var d="width"===b?a.offsetWidth:a.offsetHeight,e=t,f=x.support.boxSizing&&"border-box"===x.css(a,"boxSizing");if(0>=d||d==u){d=Kc(a,b);if(0>d||d==u)d=a.style[b];if(Vc.test(d))return d;e=f&&(x.support.Go||d===a.style[b]);d=parseFloat(d)||0}return d+Sc(a,b,c||(f?"border":"content"),e)+"px"}
function sc(a){if(Wc[a])return Wc[a];var b=x("<"+a+">").appendTo(cd.body),c=b.css("display");b.remove();if("none"===c||""===c){dd=cd.body.appendChild(dd||x.extend(cd.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!ed||!dd.createElement)ed=(dd.contentWindow||dd.contentDocument).document,ed.write("<!doctype html><html><body>"),ed.close();b=ed.body.appendChild(ed.createElement(a));c=Kc(b,"display");cd.body.removeChild(dd)}return Wc[a]=c,c}
function fd(a,b,c,d){var e;if(x.isArray(b))x.each(b,function(b,e){c||gd.test(a)?d(a,e):fd(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(!c&&"object"===x.type(b))for(e in b)fd(a+"["+e+"]",b[e],c,d);else d(a,b)}function hd(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e,f=b.toLowerCase().split(id),g=0,h=f.length;if(x.isFunction(c))for(;g<h;g++)d=f[g],(e=/^\+/.test(d))&&(d=d.substr(1)||"*"),d=a[d]=a[d]||[],d[e?"unshift":"push"](c)}}
function od(a,b,c,d,e,f){e=e||b.fd[0];f=f||{};f[e]=t;for(var g,e=a[e],h=0,i=e?e.length:0,j=a===pd;h<i&&(j||!g);h++)g=e[h](b,c,d),"string"==typeof g&&(!j||f[g]?g=Xa:(b.fd.unshift(g),g=od(a,b,c,d,g,f)));return(j||!g)&&!f["*"]&&(g=od(a,b,c,d,"*",f)),g}function qd(a,b){var c,d,e=x.af.gu||{};for(c in b)b[c]!==Xa&&((e[c]?a:d||(d={}))[c]=b[c]);d&&x.extend(t,a,d)}function rd(){try{return new Ja.XMLHttpRequest}catch(a){}}function sd(){return setTimeout(function(){td=Xa},0),td=x.now()}
function ud(a,b,c){function d(){for(var b=td||sd(),b=Math.max(0,i.startTime+i.duration-b),c=1-(b/i.duration||0),d=0,e=i.ji.length;d<e;d++)i.ji[d].pq(c);return h.notifyWith(a,[i,c,b]),1>c&&e?b:(h.resolveWith(a,[i]),w)}var e,f=0,g=vd.length,h=x.Deferred().always(function(){delete d.na}),i=h.promise({na:a,props:x.extend({},b),mc:x.extend(t,{Fq:{}},c),fD:b,eD:c,startTime:td||sd(),duration:c.duration,ji:[],Oo:function(b,c){var d=x.ps(a,i.mc,b,c,i.mc.Fq[b]||i.mc.uh);return i.ji.push(d),d},stop:function(b){for(var c=
0,d=b?i.ji.length:0;c<d;c++)i.ji[c].pq(1);return b?h.resolveWith(a,[i,b]):h.rejectWith(a,[i,b]),this}}),b=i.props,c=i.mc.Fq,j,l,k,p;for(e in b)if(j=x.hf(e),l=c[j],k=b[e],x.isArray(k)&&(l=k[1],k=b[e]=k[0]),e!==j&&(b[j]=k,delete b[e]),(p=x.cssHooks[j])&&"expand"in p)for(e in k=p.expand(k),delete b[j],k)e in b||(b[e]=k[e],c[e]=l);else c[j]=l;for(;f<g;f++)if(e=vd[f].call(i,a,b,i.mc))return e;var r=i;x.each(b,function(a,b){for(var c=(wd[a]||[]).concat(wd["*"]),d=0,e=c.length;d<e&&!c[d].call(r,a,b);d++);
});return x.isFunction(i.mc.start)&&i.mc.start.call(a,i),x.fx.cx(x.extend(d,{$s:i,queue:i.mc.queue,na:a})),i.progress(i.mc.progress).done(i.mc.done,i.mc.complete).fail(i.mc.fail).always(i.mc.always)}function Ed(a,b,c,d,e){return new Ed.prototype.init(a,b,c,d,e)}function Fd(a,b){for(var c,d={height:a},e=0,b=b?1:0;4>e;e+=2-b)c=Tc[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function Gd(a){return x.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:w}
var Hd,Id,cd=Ja.document,Jd=Ja.location,Kd=Ja.navigator,Ld=Ja.jQuery,Md=Ja.pk,Nd=Array.prototype.push,Od=Array.prototype.slice,ae=Array.prototype.indexOf,be=Object.prototype.toString,ce=Object.prototype.hasOwnProperty,de=String.prototype.trim;function x(a,b){return new x.fn.init(a,b,Hd)}
var ee=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,fe=/\S/,id=/\s+/,ge=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,he=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,ie=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,je=/^[\],:{}\s]*$/,ke=/(?:^|:|,)(?:\s*\[)+/g,le=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,me=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,ne=/^-ms-/,oe=/-([\da-z])/gi;function pe(a,b){return(b+"").toUpperCase()}
function qe(){cd.addEventListener?(cd.removeEventListener("DOMContentLoaded",qe,w),x.ready()):"complete"===cd.readyState&&(cd.detachEvent("onreadystatechange",qe),x.ready())}var re={};
x.fn=x.prototype={constructor:x,init:function(a,b,c){var d,e;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if("string"==typeof a){"<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&3<=a.length?d=[u,a,u]:d=he.exec(a);if(d&&(d[1]||!b)){if(d[1])return b=b instanceof x?b[0]:b,e=b&&b.nodeType?b.ownerDocument||b:cd,a=x.Nv(d[1],e,t),ie.test(d[1])&&x.isPlainObject(b)&&this.attr.call(a,b,t),x.merge(this,a);if((b=cd.getElementById(d[2]))&&b.parentNode){if(b.id!==d[2])return c.find(a);
this.length=1;this[0]=b}return this.context=cd,this.Na=a,this}return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a)}return x.isFunction(a)?c.ready(a):(a.Na!==Xa&&(this.Na=a.Na,this.context=a.context),x.makeArray(a,this))},Na:"",jquery:"1.8.3",length:0,size:function(){return this.length},toArray:function(){return Od.call(this)},get:function(a){return a==u?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a,b,c){a=x.merge(this.constructor(),a);return a.Fm=this,a.context=this.context,
"find"===b?a.Na=this.Na+(this.Na?" ":"")+c:b&&(a.Na=this.Na+"."+b+"("+c+")"),a},each:function(a,b){return x.each(this,a,b)},ready:function(a){return x.ready.promise().done(a),this},eq:function(a){return a=+a,-1===a?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(Od.apply(this,arguments),"slice",Od.call(arguments).join(","))},map:function(a){return this.pushStack(x.map(this,function(b,c){return a.call(b,
c,b)}))},end:function(){return this.Fm||this.constructor(u)},push:Nd,sort:[].sort,splice:[].splice};x.fn.init.prototype=x.fn;
x.extend=x.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=w;"boolean"==typeof g&&(j=g,g=arguments[1]||{},h=2);"object"!=typeof g&&!x.isFunction(g)&&(g={});for(i===h&&(g=this,--h);h<i;h++)if((a=arguments[h])!=u)for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(x.isPlainObject(d)||(e=x.isArray(d)))?(e?(e=w,f=c&&x.isArray(c)?c:[]):f=c&&x.isPlainObject(c)?c:{},g[b]=x.extend(j,f,d)):d!==Xa&&(g[b]=d));return g};
x.extend({noConflict:function(a){return Ja.pk===x&&(Ja.pk=Md),a&&Ja.jQuery===x&&(Ja.jQuery=Ld),x},cm:w,Hm:1,holdReady:function(a){a?x.Hm++:x.ready(t)},ready:function(a){if(!(a===t?--x.Hm:x.cm)){if(!cd.body)return setTimeout(x.ready,1);x.cm=t;a!==t&&0<--x.Hm||(Id.resolveWith(cd,[x]),x.fn.trigger&&x(cd).trigger("ready").off("ready"))}},isFunction:function(a){return"function"===x.type(a)},isArray:Array.isArray||function(a){return"array"===x.type(a)},isWindow:function(a){return a!=u&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&
isFinite(a)},type:function(a){return a==u?String(a):re[be.call(a)]||"object"},isPlainObject:function(a){if(!a||"object"!==x.type(a)||a.nodeType||x.isWindow(a))return w;try{if(a.constructor&&!ce.call(a,"constructor")&&!ce.call(a.constructor.prototype,"isPrototypeOf"))return w}catch(b){return w}for(var c in a);return c===Xa||ce.call(a,c)},isEmptyObject:function(a){for(var b in a)return w;return t},error:function(a){throw Error(a);},Nv:function(a,b,c){var d;return!a||"string"!=typeof a?u:("boolean"==
typeof b&&(c=b,b=0),b=b||cd,(d=ie.exec(a))?[b.createElement(d[1])]:(d=x.Jo([a],b,c?u:[]),x.merge([],(d.Ko?x.clone(d.Sl):d.Sl).childNodes)))},parseJSON:function(a){if(!a||"string"!=typeof a)return u;a=x.trim(a);if(Ja.JSON&&Ja.JSON.parse)return Ja.JSON.parse(a);if(je.test(a.replace(le,"@").replace(me,"]").replace(ke,"")))return(new Function("return "+a))();x.error("Invalid JSON: "+a)},parseXML:function(a){var b,c;if(!a||"string"!=typeof a)return u;try{Ja.DOMParser?(c=new DOMParser,b=c.parseFromString(a,
"text/xml")):(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a))}catch(d){b=Xa}return(!b||!b.documentElement||b.getElementsByTagName("parsererror").length)&&x.error("Invalid XML: "+a),b},noop:da(),globalEval:function(a){a&&fe.test(a)&&(Ja.execScript||function(a){Ja.eval.call(Ja,a)})(a)},hf:function(a){return a.replace(ne,"ms-").replace(oe,pe)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=f===Xa||
x.isFunction(a);if(c)if(g)for(d in a){if(b.apply(a[d],c)===w)break}else for(;e<f&&b.apply(a[e++],c)!==w;);else if(g)for(d in a){if(b.call(a[d],d,a[d])===w)break}else for(;e<f&&b.call(a[e],e,a[e++])!==w;);return a},trim:de&&!de.call("\ufeff\u00a0")?function(a){return a==u?"":de.call(a)}:function(a){return a==u?"":(a+"").replace(ge,"")},makeArray:function(a,b){var c,d=b||[];return a!=u&&(c=x.type(a),a.length==u||"string"===c||"function"===c||"regexp"===c||x.isWindow(a)?Nd.call(d,a):x.merge(d,a)),d},
inArray:function(a,b,c){var d;if(b){if(ae)return ae.call(b,a,c);d=b.length;for(c=c?0>c?Math.max(0,d+c):c:0;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){var c=b.length,d=a.length,e=0;if("number"==typeof c)for(;e<c;e++)a[d++]=b[e];else for(;b[e]!==Xa;)a[d++]=b[e++];return a.length=d,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,c=!!c;f<g;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return e},map:function(a,b,c){var d,e,f=[],g=0,h=a.length;if(a instanceof x||h!==Xa&&"number"==
typeof h&&(0<h&&a[0]&&a[h-1]||0===h||x.isArray(a)))for(;g<h;g++)d=b(a[g],g,c),d!=u&&(f[f.length]=d);else for(e in a)d=b(a[e],e,c),d!=u&&(f[f.length]=d);return f.concat.apply([],f)},ta:1,proxy:function(a,b){var c,d,e;return"string"==typeof b&&(c=a[b],b=a,a=c),x.isFunction(a)?(d=Od.call(arguments,2),e=function(){return a.apply(b,d.concat(Od.call(arguments)))},e.ta=a.ta=a.ta||x.ta++,e):Xa},Gd:function(a,b,c,d,e,f,g){var h,i=c==u,j=0,l=a.length;if(c&&"object"==typeof c){for(j in c)x.Gd(a,b,j,c[j],1,f,
d);e=1}else if(d!==Xa){h=g===Xa&&x.isFunction(d);i&&(h?(h=b,b=function(a,b,c){return h.call(x(a),c)}):(b.call(a,d),b=u));if(b)for(;j<l;j++)b(a[j],c,h?d.call(a[j],j,b(a[j],c)):d,g);e=1}return e?a:i?b.call(a):l?b(a[0],c):f},now:function(){return(new Date).getTime()}});
x.ready.promise=function(a){if(!Id)if(Id=x.Deferred(),"complete"===cd.readyState)setTimeout(x.ready,1);else if(cd.addEventListener)cd.addEventListener("DOMContentLoaded",qe,w),Ja.addEventListener("load",x.ready,w);else{cd.attachEvent("onreadystatechange",qe);Ja.attachEvent("onload",x.ready);var b=w;try{b=Ja.frameElement==u&&cd.documentElement}catch(c){}b&&b.doScroll&&function e(){if(!x.cm){try{b.doScroll("left")}catch(a){return setTimeout(e,50)}x.ready()}}()}return Id.promise(a)};
x.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){re["[object "+b+"]"]=b.toLowerCase()});Hd=x(cd);var se={};
x.Callbacks=function(a){function b(c){e=a.memory&&c;f=t;j=h||0;h=0;i=l.length;for(g=t;l&&j<i;j++)if(l[j].apply(c[0],c[1])===w&&a.uE){e=w;break}g=w;l&&(k?k.length&&b(k.shift()):e?l=[]:p.disable())}var c;if("string"==typeof a){if(!(c=se[a])){c=a;var d=se[c]={};c=(x.each(c.split(id),function(a,b){d[b]=t}),d)}}else c=x.extend({},a);var a=c,e,f,g,h,i,j,l=[],k=!a.$C&&[],p={add:function(){if(l){var c=l.length;(function q(b){x.each(b,function(b,c){var d=x.type(c);"function"===d?(!a.unique||!p.has(c))&&l.push(c):
c&&c.length&&"string"!==d&&q(c)})})(arguments);g?i=l.length:e&&(h=c,b(e))}return this},remove:function(){return l&&x.each(arguments,function(a,b){for(var c;-1<(c=x.inArray(b,l,c));)l.splice(c,1),g&&(c<=i&&i--,c<=j&&j--)}),this},has:function(a){return-1<x.inArray(a,l)},empty:function(){return l=[],this},disable:function(){return l=k=e=Xa,this},disabled:function(){return!l},lock:function(){return k=Xa,e||p.disable(),this},locked:function(){return!k},fireWith:function(a,c){return c=c||[],c=[a,c.slice?
c.slice():c],l&&(!f||k)&&(g?k.push(c):b(c)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!f}};return p};
x.extend({Deferred:function(a){var b=[["resolve","done",x.Callbacks("once memory"),"resolved"],["reject","fail",x.Callbacks("once memory"),"rejected"],["notify","progress",x.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return x.Deferred(function(c){x.each(b,function(b,d){var j=d[0],l=a[b];e[d[1]](x.isFunction(l)?function(){var a=l.apply(this,arguments);a&&x.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):
c[j+"With"](this===e?c:this,[a])}:c[j])});a=u}).promise()},promise:function(a){return a!=u?x.extend(a,d):d}},e={};return d.pipe=d.then,x.each(b,function(a,g){var h=g[2],i=g[3];d[g[1]]=h.add;i&&h.add(function(){c=i},b[a^1][2].disable,b[2][2].lock);e[g[0]]=h.fire;e[g[0]+"With"]=h.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){function b(a,b,c){return function(d){b[a]=this;c[a]=1<arguments.length?Od.call(arguments):d;c===h?g.notifyWith(b,c):--f||g.resolveWith(b,c)}}var c=0,d=Od.call(arguments),
e=d.length,f=1!==e||a&&x.isFunction(a.promise)?e:0,g=1===f?a:x.Deferred(),h,i,j;if(1<e){h=Array(e);i=Array(e);for(j=Array(e);c<e;c++)d[c]&&x.isFunction(d[c].promise)?d[c].promise().done(b(c,j,d)).fail(g.reject).progress(b(c,i,h)):--f}return f||g.resolveWith(j,d),g.promise()}});var te=x,ue;var ve,we,xe,ye,ze,Ae,Be,Ce,De,Ee,Fe,Ge=cd.createElement("div");Ge.setAttribute("className","t");Ge.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";we=Ge.getElementsByTagName("*");
xe=Ge.getElementsByTagName("a")[0];
if(!we||!xe||!we.length)ue={};else{ye=cd.createElement("select");ze=ye.appendChild(cd.createElement("option"));Ae=Ge.getElementsByTagName("input")[0];xe.style.cssText="top:1px;float:left;opacity:.5";ve={leadingWhitespace:3===Ge.firstChild.nodeType,tbody:!Ge.getElementsByTagName("tbody").length,htmlSerialize:!!Ge.getElementsByTagName("link").length,style:/top/.test(xe.getAttribute("style")),hrefNormalized:"/a"===xe.getAttribute("href"),opacity:/^0.5/.test(xe.style.opacity),cssFloat:!!xe.style.cssFloat,
At:"on"===Ae.value,Kv:ze.selected,pu:"t"!==Ge.className,enctype:!!cd.createElement("form").enctype,Yl:"<:nav></:nav>"!==cd.createElement("nav").cloneNode(t).outerHTML,boxModel:"CSS1Compat"===cd.compatMode,submitBubbles:t,changeBubbles:t,iu:w,Hl:t,noCloneEvent:t,rp:w,zq:w,iq:t,Go:t,$p:w};Ae.checked=t;ve.vv=Ae.cloneNode(t).checked;ye.disabled=t;ve.Jv=!ze.disabled;try{delete Ge.test}catch(Ze){ve.Hl=w}!Ge.addEventListener&&Ge.attachEvent&&Ge.fireEvent&&(Ge.attachEvent("onclick",Fe=function(){ve.noCloneEvent=
w}),Ge.cloneNode(t).fireEvent("onclick"),Ge.detachEvent("onclick",Fe));Ae=cd.createElement("input");Ae.value="t";Ae.setAttribute("type","radio");ve.fw="t"===Ae.value;Ae.setAttribute("checked","checked");Ae.setAttribute("name","t");Ge.appendChild(Ae);Be=cd.createDocumentFragment();Be.appendChild(Ge.lastChild);ve.Mo=Be.cloneNode(t).cloneNode(t).lastChild.checked;ve.bt=Ae.checked;Be.removeChild(Ae);Be.appendChild(Ge);if(Ge.attachEvent)for(De in{submit:t,change:t,focusin:t})Ce="on"+De,(Ee=Ce in Ge)||
(Ge.setAttribute(Ce,"return;"),Ee="function"==typeof Ge[Ce]),ve[De+"Bubbles"]=Ee;ue=(x(function(){var a,b,c,d,e=cd.getElementsByTagName("body")[0];e&&(a=cd.createElement("div"),a.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",e.insertBefore(a,e.firstChild),b=cd.createElement("div"),a.appendChild(b),b.innerHTML="<table><tr><td></td><td>t</td></tr></table>",c=b.getElementsByTagName("td"),c[0].style.cssText="padding:0;margin:0;border:0;display:none",
Ee=0===c[0].offsetHeight,c[0].style.display="",c[1].style.display="none",ve.iw=Ee&&0===c[0].offsetHeight,b.innerHTML="",b.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",ve.boxSizing=4===b.offsetWidth,ve.Vt=1!==e.offsetTop,Ja.getComputedStyle&&(ve.$p="1%"!==(Ja.getComputedStyle(b,u)||{}).top,ve.Go="4px"===(Ja.getComputedStyle(b,u)||{width:"4px"}).width,d=cd.createElement("div"),
d.style.cssText=b.style.cssText="padding:0;margin:0;border:0;display:block;overflow:hidden;",d.style.marginRight=d.style.width="0",b.style.width="1px",b.appendChild(d),ve.iq=!parseFloat((Ja.getComputedStyle(d,u)||{}).marginRight)),"undefined"!=typeof b.style.zoom&&(b.innerHTML="",b.style.cssText="padding:0;margin:0;border:0;display:block;overflow:hidden;width:1px;padding:1px;display:inline;zoom:1",ve.rp=3===b.offsetWidth,b.style.display="block",b.style.overflow="visible",b.innerHTML="<div></div>",
b.firstChild.style.width="5px",ve.zq=3!==b.offsetWidth,a.style.zoom=1),e.removeChild(a))}),Be.removeChild(Ge),we=xe=ye=ze=Ae=Be=Ge=u,ve)}te.support=ue;var mb=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,kb=/([A-Z])/g;
x.extend({de:{},So:[],ZE:0,expando:"jQuery"+(x.fn.jquery+Math.random()).replace(/\D/g,""),wv:{gA:t,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",yy:t},hasData:function(a){return a=a.nodeType?x.de[a[x.expando]]:a[x.expando],!!a&&!nb(a)},data:function(a,b,c,d){if(x.bh(a)){var e,f,g=x.expando,h="string"==typeof b,i=a.nodeType,j=i?x.de:a,l=i?a[g]:a[g]&&g;if(l&&j[l]&&(d||j[l].data)||!(h&&c===Xa)){l||(i?a[g]=l=x.So.pop()||x.ta++:l=g);j[l]||(j[l]={},i||(j[l].toJSON=x.noop));if("object"==typeof b||
"function"==typeof b)d?j[l]=x.extend(j[l],b):j[l].data=x.extend(j[l].data,b);return e=j[l],d||(e.data||(e.data={}),e=e.data),c!==Xa&&(e[x.hf(b)]=c),h?(f=e[b],f==u&&(f=e[x.hf(b)])):f=e,f}}},removeData:function(a,b,c){if(x.bh(a)){var d,e,f,g=a.nodeType,h=g?x.de:a,i=g?a[x.expando]:x.expando;if(h[i]){if(b&&(d=c?h[i]:h[i].data)){x.isArray(b)||(b in d?b=[b]:(b=x.hf(b),b in d?b=[b]:b=b.split(" ")));e=0;for(f=b.length;e<f;e++)delete d[b[e]];if(!(c?nb:x.isEmptyObject)(d))return}if(!c&&(delete h[i].data,!nb(h[i])))return;
g?x.fh([a],t):x.support.Hl||h!=h.window?delete h[i]:h[i]=u}}},ia:function(a,b,c){return x.data(a,b,c,t)},bh:function(a){var b=a.nodeName&&x.wv[a.nodeName.toLowerCase()];return!b||b!==t&&a.getAttribute("classid")===b}});
x.fn.extend({data:function(a,b){var c,d,e,f,g,h=this[0],i=0,j=u;if(a===Xa){if(this.length&&(j=x.data(h),1===h.nodeType&&!x.ia(h,"parsedAttrs"))){e=h.attributes;for(g=e.length;i<g;i++)f=e[i].name,f.indexOf("data-")||(f=x.hf(f.substring(5)),$a(h,f,j[f]));x.ia(h,"parsedAttrs",t)}return j}return"object"==typeof a?this.each(function(){x.data(this,a)}):(c=a.split(".",2),c[1]=c[1]?"."+c[1]:"",d=c[1]+"!",x.Gd(this,function(b){if(b===Xa)return j=this.triggerHandler("getData"+d,[c[0]]),j===Xa&&h&&(j=x.data(h,
a),j=$a(h,a,j)),j===Xa&&c[1]?this.data(c[0]):j;c[1]=b;this.each(function(){var e=x(this);e.triggerHandler("setData"+d,c);x.data(this,a,b);e.triggerHandler("changeData"+d,c)})},u,b,1<arguments.length,u,w))},removeData:function(a){return this.each(function(){x.removeData(this,a)})}});
x.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=x.ia(a,b),c&&(!d||x.isArray(c)?d=x.ia(a,b,x.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){function c(){x.dequeue(a,b)}var b=b||"fx",d=x.queue(a,b),e=d.length,f=d.shift(),g=x.kl(a,b);"inprogress"===f&&(f=d.shift(),e--);f&&("fx"===b&&d.unshift("inprogress"),delete g.stop,f.call(a,c,g));!e&&g&&g.empty.fire()},kl:function(a,b){var c=b+"queueHooks";return x.ia(a,c)||x.ia(a,c,{empty:x.Callbacks("once memory").add(function(){x.removeData(a,
b+"queue",t);x.removeData(a,c,t)})})}});
x.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?x.queue(this[0],a):b===Xa?this:this.each(function(){var c=x.queue(this,a,b);x.kl(this,a);"fx"===a&&"inprogress"!==c[0]&&x.dequeue(this,a)})},dequeue:function(a){return this.each(function(){x.dequeue(this,a)})},delay:function(a,b){return a=x.fx?x.fx.gk[a]||a:a,b=b||"fx",this.queue(b,function(b,d){var e=setTimeout(b,a);d.stop=function(){clearTimeout(e)}})},clearQueue:function(a){return this.queue(a||"fx",
[])},promise:function(a,b){function c(){--e||f.resolveWith(g,[g])}var d,e=1,f=x.Deferred(),g=this,h=this.length;"string"!=typeof a&&(b=a,a=Xa);for(a=a||"fx";h--;)(d=x.ia(g[h],a+"queueHooks"))&&d.empty&&(e++,d.empty.add(c));return c(),f.promise(b)}});
var $e,af,bf,cf=/[\t\r\n]/g,df=/\r/g,ef=/^(?:button|input)$/i,ff=/^(?:button|input|object|select|textarea)$/i,gf=/^a(?:rea|)$/i,hf=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,jf=x.support.pu;
x.fn.extend({attr:function(a,b){return x.Gd(this,x.attr,a,b,1<arguments.length)},removeAttr:function(a){return this.each(function(){x.removeAttr(this,a)})},prop:function(a,b){return x.Gd(this,x.prop,a,b,1<arguments.length)},removeProp:function(a){return a=x.Ph[a]||a,this.each(function(){try{this[a]=Xa,delete this[a]}catch(b){}})},addClass:function(a){var b,c,d,e,f,g,h;if(x.isFunction(a))return this.each(function(b){x(this).addClass(a.call(this,b,this.className))});if(a&&"string"==typeof a){b=a.split(id);
c=0;for(d=this.length;c<d;c++)if(e=this[c],1===e.nodeType)if(!e.className&&1===b.length)e.className=a;else{f=" "+e.className+" ";g=0;for(h=b.length;g<h;g++)0>f.indexOf(" "+b[g]+" ")&&(f+=b[g]+" ");e.className=x.trim(f)}}return this},removeClass:function(a){var b,c,d,e,f,g,h;if(x.isFunction(a))return this.each(function(b){x(this).removeClass(a.call(this,b,this.className))});if(a&&"string"==typeof a||a===Xa){b=(a||"").split(id);g=0;for(h=this.length;g<h;g++)if(d=this[g],1===d.nodeType&&d.className){c=
(" "+d.className+" ").replace(cf," ");e=0;for(f=b.length;e<f;e++)for(;0<=c.indexOf(" "+b[e]+" ");)c=c.replace(" "+b[e]+" "," ");d.className=a?x.trim(c):""}}return this},toggleClass:function(a,b){var c=typeof a,d="boolean"==typeof b;return x.isFunction(a)?this.each(function(c){x(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var e,f=0,g=x(this),h=b,i=a.split(id);e=i[f++];)h=d?h:!g.hasClass(e),g[h?"addClass":"removeClass"](e);else if("undefined"===c||
"boolean"===c)this.className&&x.ia(this,"__className__",this.className),this.className=this.className||a===w?"":x.ia(this,"__className__")||""})},hasClass:function(a){for(var a=" "+a+" ",b=0,c=this.length;b<c;b++)if(1===this[b].nodeType&&0<=(" "+this[b].className+" ").replace(cf," ").indexOf(a))return t;return w},val:function(a){var b,c,d,e=this[0];if(arguments.length)return d=x.isFunction(a),this.each(function(c){var e,h=x(this);if(1===this.nodeType&&(d?e=a.call(this,c,h.val()):e=a,e==u?e="":"number"==
typeof e?e+="":x.isArray(e)&&(e=x.map(e,function(a){return a==u?"":a+""})),b=x.Je[this.type]||x.Je[this.nodeName.toLowerCase()],!b||!("set"in b)||b.set(this,e,"value")===Xa))this.value=e});if(e)return b=x.Je[e.type]||x.Je[e.nodeName.toLowerCase()],b&&"get"in b&&(c=b.get(e,"value"))!==Xa?c:(c=e.value,"string"==typeof c?c.replace(df,""):c==u?"":c)}});
x.extend({Je:{Vp:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){for(var b,c=a.options,d=a.selectedIndex,e=(a="select-one"===a.type||0>d)?u:[],f=a?d+1:c.length,g=0>d?f:a?d:0;g<f;g++)if(b=c[g],(b.selected||g===d)&&(x.support.Jv?!b.disabled:b.getAttribute("disabled")===u)&&(!b.parentNode.disabled||!x.nodeName(b.parentNode,"optgroup"))){b=x(b).val();if(a)return b;e.push(b)}return e},set:function(a,b){var c=x.makeArray(b);return x(a).find("option").each(function(){this.selected=
0<=x.inArray(x(this).val(),c)}),c.length||(a.selectedIndex=-1),c}}},Dy:{},attr:function(a,b,c,d){var e,f,g=a.nodeType;if(a&&!(3===g||8===g||2===g)){if(d&&x.isFunction(x.fn[b]))return x(a)[b](c);if("undefined"==typeof a.getAttribute)return x.prop(a,b,c);(d=1!==g||!x.isXMLDoc(a))&&(b=b.toLowerCase(),f=x.cf[b]||(hf.test(b)?af:$e));if(c!==Xa){if(c===u){x.removeAttr(a,b);return}return f&&"set"in f&&d&&(e=f.set(a,c,b))!==Xa?e:(a.setAttribute(b,c+""),c)}return f&&"get"in f&&d&&(e=f.get(a,b))!==u?e:(e=a.getAttribute(b),
e===u?Xa:e)}},removeAttr:function(a,b){var c,d,e,f,g=0;if(b&&1===a.nodeType)for(d=b.split(id);g<d.length;g++)(e=d[g])&&(c=x.Ph[e]||e,f=hf.test(e),f||x.attr(a,e,""),a.removeAttribute(jf?e:c),f&&c in a&&(a[c]=w))},cf:{type:{set:function(a,b){if(ef.test(a.nodeName)&&a.parentNode)x.error("type property can't be changed");else if(!x.support.fw&&"radio"===b&&x.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}},value:{get:function(a,b){return $e&&x.nodeName(a,"button")?
$e.get(a,b):b in a?a.value:u},set:function(a,b,c){if($e&&x.nodeName(a,"button"))return $e.set(a,b,c);a.value=b}}},Ph:{AE:"tabIndex",FD:"readOnly","for":"htmlFor","class":"className",fC:"maxLength",bz:"cellSpacing",az:"cellPadding",SD:"rowSpan",oz:"colSpan",XE:"useMap",xA:"frameBorder",Ht:"contentEditable"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&!(3===g||8===g||2===g))return f=1!==g||!x.isXMLDoc(a),f&&(b=x.Ph[b]||b,e=x.pd[b]),c!==Xa?e&&"set"in e&&(d=e.set(a,c,b))!==Xa?d:a[b]=c:e&&"get"in
e&&(d=e.get(a,b))!==u?d:a[b]},pd:{tabIndex:{get:function(a){var b=a.getAttributeNode("tabindex");return b&&b.specified?parseInt(b.value,10):ff.test(a.nodeName)||gf.test(a.nodeName)&&a.href?0:Xa}}}});af={get:function(a,b){var c,d=x.prop(a,b);return d===t||"boolean"!=typeof d&&(c=a.getAttributeNode(b))&&c.nodeValue!==w?b.toLowerCase():Xa},set:function(a,b,c){var d;return b===w?x.removeAttr(a,c):(d=x.Ph[c]||c,d in a&&(a[d]=t),a.setAttribute(c,c.toLowerCase())),c}};
jf||(bf={name:t,id:t,coords:t},$e=x.Je.button={get:function(a,b){var c;return c=a.getAttributeNode(b),c&&(bf[b]?""!==c.value:c.specified)?c.value:Xa},set:function(a,b,c){var d=a.getAttributeNode(c);return d||(d=cd.createAttribute(c),a.setAttributeNode(d)),d.value=b+""}},x.each(["width","height"],function(a,b){x.cf[b]=x.extend(x.cf[b],{set:function(a,d){if(""===d)return a.setAttribute(b,"auto"),d}})}),x.cf.Ht={get:$e.get,set:function(a,b,c){""===b&&(b="false");$e.set(a,b,c)}});
x.support.hrefNormalized||x.each(["href","src","width","height"],function(a,b){x.cf[b]=x.extend(x.cf[b],{get:function(a){a=a.getAttribute(b,2);return a===u?Xa:a}})});x.support.style||(x.cf.style={get:function(a){return a.style.cssText.toLowerCase()||Xa},set:function(a,b){return a.style.cssText=b+""}});x.support.Kv||(x.pd.selected=x.extend(x.pd.selected,{get:function(a){a=a.parentNode;return a&&(a.selectedIndex,a.parentNode&&a.parentNode.selectedIndex),u}}));x.support.enctype||(x.Ph.enctype="encoding");
x.support.At||x.each(["radio","checkbox"],function(){x.Je[this]={get:function(a){return a.getAttribute("value")===u?"on":a.value}}});x.each(["radio","checkbox"],function(){x.Je[this]=x.extend(x.Je[this],{set:function(a,b){if(x.isArray(b))return a.checked=0<=x.inArray(x(a).val(),b)}})});var kf=/^(?:textarea|input|select)$/i,lf=/^([^\.]*|)(?:\.(.+)|)$/,mf=/(?:^|\s)hover(\.\S+|)\b/,nf=/^key/,of=/^(?:mouse|contextmenu)|click/,pf=/^(?:focusinfocus|focusoutblur)$/;
function qf(a){return x.event.Ic.hover?a:a.replace(mf,"mouseenter$1 mouseleave$1")}
x.event={add:function(a,b,c,d,e){var f,g,h,i,j,l,k,p,r;if(!(3===a.nodeType||8===a.nodeType||!b||!c||!(f=x.ia(a)))){c.re&&(k=c,c=k.re,e=k.Na);c.ta||(c.ta=x.ta++);(h=f.oe)||(f.oe=h={});(g=f.handle)||(f.handle=g=function(a){return"undefined"==typeof x||a&&x.event.$m===a.type?Xa:x.event.jf.apply(g.na,arguments)},g.na=a);b=x.trim(qf(b)).split(" ");for(f=0;f<b.length;f++){i=lf.exec(b[f])||[];j=i[1];l=(i[2]||"").split(".").sort();r=x.event.Ic[j]||{};j=(e?r.qh:r.wl)||j;r=x.event.Ic[j]||{};i=x.extend({type:j,
Lh:i[1],data:d,re:c,ta:c.ta,Na:e,Jj:e&&x.Cc.match.Jj.test(e),namespace:l.join(".")},k);p=h[j];if(!p&&(p=h[j]=[],p.Gl=0,!r.Uh||r.Uh.call(a,d,l,g)===w))a.addEventListener?a.addEventListener(j,g,w):a.attachEvent&&a.attachEvent("on"+j,g);r.add&&(r.add.call(a,i),i.re.ta||(i.re.ta=c.ta));e?p.splice(p.Gl++,0,i):p.push(i);x.event.global[j]=t}a=u}},global:{},remove:function(a,b,c,d,e){var f,g,h,i,j,l,k,p,r,s,q=x.hasData(a)&&x.ia(a);if(q&&(k=q.oe)){b=x.trim(qf(b||"")).split(" ");for(f=0;f<b.length;f++)if(g=
lf.exec(b[f])||[],h=i=g[1],g=g[2],h){p=x.event.Ic[h]||{};h=(d?p.qh:p.wl)||h;r=k[h]||[];j=r.length;g=g?RegExp("(^|\\.)"+g.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):u;for(l=0;l<r.length;l++)s=r[l],(e||i===s.Lh)&&(!c||c.ta===s.ta)&&(!g||g.test(s.namespace))&&(!d||d===s.Na||"**"===d&&s.Na)&&(r.splice(l--,1),s.Na&&r.Gl--,p.remove&&p.remove.call(a,s));0===r.length&&j!==r.length&&((!p.hi||p.hi.call(a,g,q.handle)===w)&&x.jq(a,h,q.handle),delete k[h])}else for(h in k)x.event.remove(a,h+b[f],c,d,t);
x.isEmptyObject(k)&&(delete q.handle,x.removeData(a,"events",t))}},Mt:{getData:t,setData:t,ez:t},trigger:function(a,b,c,d){if(!c||3!==c.nodeType&&8!==c.nodeType){var e,f,g,h,i,j,l,k=a.type||a;h=[];if(!pf.test(k+x.event.$m)&&(0<=k.indexOf("!")&&(k=k.slice(0,-1),e=t),0<=k.indexOf(".")&&(h=k.split("."),k=h.shift(),h.sort()),c&&!x.event.Mt[k]||x.event.global[k]))if(a="object"==typeof a?a[x.expando]?a:new x.Event(k,a):new x.Event(k),a.type=k,a.zj=t,a.du=e,a.namespace=h.join("."),a.Rp=a.namespace?RegExp("(^|\\.)"+
h.join("\\.(?:.*\\.|)")+"(\\.|$)"):u,h=0>k.indexOf(":")?"on"+k:"",c){if(a.result=Xa,a.target||(a.target=c),b=b!=u?x.makeArray(b):[],b.unshift(a),i=x.event.Ic[k]||{},!(i.trigger&&i.trigger.apply(c,b)===w)){l=[[c,i.wl||k]];if(!d&&!i.uv&&!x.isWindow(c)){f=i.qh||k;e=pf.test(f+k)?c:c.parentNode;for(g=c;e;e=e.parentNode)l.push([e,f]),g=e;g===(c.ownerDocument||cd)&&l.push([g.defaultView||g.parentWindow||Ja,f])}for(f=0;f<l.length&&!a.isPropagationStopped();f++)e=l[f][0],a.type=l[f][1],(j=(x.ia(e,"events")||
{})[a.type]&&x.ia(e,"handle"))&&j.apply(e,b),(j=h&&e[h])&&x.bh(e)&&j.apply&&j.apply(e,b)===w&&a.preventDefault();return a.type=k,!d&&!a.isDefaultPrevented()&&(!i.Fd||i.Fd.apply(c.ownerDocument,b)===w)&&("click"!==k||!x.nodeName(c,"a"))&&x.bh(c)&&h&&c[k]&&("focus"!==k&&"blur"!==k||0!==a.target.offsetWidth)&&!x.isWindow(c)&&(g=c[h],g&&(c[h]=u),x.event.$m=k,c[k](),x.event.$m=Xa,g&&(c[h]=g)),a.result}}else for(f in c=x.de,c)c[f].oe&&c[f].oe[k]&&x.event.trigger(a,b,c[f].handle.na,t)}},jf:function(a){var a=
x.event.$o(a||Ja.event),b,c,d,e,f,g,h=(x.ia(this,"events")||{})[a.type]||[],i=h.Gl,j=Od.call(arguments),l=!a.du&&!a.namespace,k=x.event.Ic[a.type]||{},p=[];j[0]=a;a.delegateTarget=this;if(!(k.aw&&k.aw.call(this,a)===w)){if(i&&(!a.button||"click"!==a.type))for(c=a.target;c!=this;c=c.parentNode||this)if(c.disabled!==t||"click"!==a.type){e={};f=[];for(b=0;b<i;b++)d=h[b],g=d.Na,e[g]===Xa&&(e[g]=d.Jj?0<=x(g,this).index(c):x.find(g,this,u,[c]).length),e[g]&&f.push(d);f.length&&p.push({na:c,matches:f})}h.length>
i&&p.push({na:this,matches:h.slice(i)});for(b=0;b<p.length&&!a.isPropagationStopped();b++){e=p[b];a.currentTarget=e.na;for(c=0;c<e.matches.length&&!a.isImmediatePropagationStopped();c++)if(d=e.matches[c],l||!a.namespace&&!d.namespace||a.Rp&&a.Rp.test(d.namespace))a.data=d.data,a.yj=d,d=((x.event.Ic[d.Lh]||{}).handle||d.re).apply(e.na,j),d!==Xa&&(a.result=d,d===w&&(a.preventDefault(),a.stopPropagation()))}return k.cq&&k.cq.call(this,a),a.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
Ql:{},Ou:{props:["char","charCode","key","keyCode"],filter:function(a,b){return a.which==u&&(a.which=b.charCode!=u?b.charCode:b.keyCode),a}},tv:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button,g=b.fromElement;return a.pageX==u&&b.clientX!=u&&(c=a.target.ownerDocument||cd,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||
0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?b.toElement:g),!a.which&&f!==Xa&&(a.which=f&1?1:f&2?3:f&4?2:0),a}},$o:function(a){if(a[x.expando])return a;var b,c,d=a,e=x.event.Ql[a.type]||{},f=e.props?this.props.concat(e.props):this.props,a=x.Event(d);for(b=f.length;b;)c=f[--b],a[c]=d[c];return a.target||(a.target=d.srcElement||cd),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,
e.filter?e.filter(a,d):a},Ic:{load:{uv:t},focus:{qh:"focusin"},blur:{qh:"focusout"},Hy:{Uh:function(a,b,c){x.isWindow(this)&&(this.onbeforeunload=c)},hi:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=u)}}},ck:function(a,b,c,d){a=x.extend(new x.Event,c,{type:a,wp:t,originalEvent:{}});d?x.event.trigger(a,u,b):x.event.jf.call(b,a);a.isDefaultPrevented()&&c.preventDefault()}};x.event.handle=x.event.jf;
x.jq=cd.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,w)}:function(a,b,c){b="on"+b;a.detachEvent&&("undefined"==typeof a[b]&&(a[b]=u),a.detachEvent(b,c))};x.Event=function(a,b){if(!(this instanceof x.Event))return new x.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===w||a.ou&&a.ou()?Eb:Ab):this.type=a;b&&x.extend(this,b);this.timeStamp=a&&a.timeStamp||x.now();this[x.expando]=t};
x.Event.prototype={preventDefault:function(){this.isDefaultPrevented=Eb;var a=this.originalEvent;a&&(a.preventDefault?a.preventDefault():a.returnValue=w)},stopPropagation:function(){this.isPropagationStopped=Eb;var a=this.originalEvent;a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=t)},isDefaultPrevented:Ab,isPropagationStopped:Ab,isImmediatePropagationStopped:Ab};
x.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){x.event.Ic[a]={qh:b,wl:b,handle:function(a){var d,e=a.relatedTarget,f=a.yj;if(!e||e!==this&&!x.contains(this,e))a.type=f.Lh,d=f.re.apply(this,arguments),a.type=b;return d}}});
x.support.submitBubbles||(x.event.Ic.submit={Uh:function(){if(x.nodeName(this,"form"))return w;x.event.add(this,"click._submit keypress._submit",function(a){a=a.target;(a=x.nodeName(a,"input")||x.nodeName(a,"button")?a.form:Xa)&&!x.ia(a,"_submit_attached")&&(x.event.add(a,"submit._submit",function(a){a.vo=t}),x.ia(a,"_submit_attached",t))})},cq:function(a){a.vo&&(delete a.vo,this.parentNode&&!a.zj&&x.event.ck("submit",this.parentNode,a,t))},hi:function(){if(x.nodeName(this,"form"))return w;x.event.remove(this,
"._submit")}});
x.support.changeBubbles||(x.event.Ic.change={Uh:function(){if(kf.test(this.nodeName)){if("checkbox"===this.type||"radio"===this.type)x.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this.so=t)}),x.event.add(this,"click._change",function(a){this.so&&!a.zj&&(this.so=w);x.event.ck("change",this,a,t)});return w}x.event.add(this,"beforeactivate._change",function(a){a=a.target;kf.test(a.nodeName)&&!x.ia(a,"_change_attached")&&(x.event.add(a,"change._change",
function(a){this.parentNode&&!a.wp&&!a.zj&&x.event.ck("change",this.parentNode,a,t)}),x.ia(a,"_change_attached",t))})},handle:function(a){var b=a.target;if(this!==b||a.wp||a.zj||"radio"!==b.type&&"checkbox"!==b.type)return a.yj.re.apply(this,arguments)},hi:function(){return x.event.remove(this,"._change"),!kf.test(this.nodeName)}});
x.support.iu||x.each({focus:"focusin",blur:"focusout"},function(a,b){function c(a){x.event.ck(b,a.target,x.event.$o(a),t)}var d=0;x.event.Ic[b]={Uh:function(){0===d++&&cd.addEventListener(a,c,t)},hi:function(){0===--d&&cd.removeEventListener(a,c,t)}}});
x.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=Xa);for(g in a)this.on(g,b,c,a[g],e);return this}c==u&&d==u?(d=b,c=b=Xa):d==u&&("string"==typeof b?(d=c,c=Xa):(d=c,c=b,b=Xa));if(d===w)d=Ab;else if(!d)return this;return 1===e&&(f=d,d=function(a){return x().off(a),f.apply(this,arguments)},d.ta=f.ta||(f.ta=x.ta++)),this.each(function(){x.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&
a.yj)return d=a.yj,x(a.delegateTarget).off(d.namespace?d.Lh+"."+d.namespace:d.Lh,d.Na,d.re),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}if(b===w||"function"==typeof b)c=b,b=Xa;return c===w&&(c=Ab),this.each(function(){x.event.remove(this,a,c,b)})},bind:function(a,b,c){return this.on(a,u,b,c)},unbind:function(a,b){return this.off(a,u,b)},live:function(a,b,c){return x(this.context).on(a,this.Na,b,c),this},die:function(a,b){return x(this.context).off(a,this.Na||"**",b),this},
delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)},trigger:function(a,b){return this.each(function(){x.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return x.event.trigger(a,b,this[0],t)},toggle:function(a){function b(b){var d=(x.ia(this,"lastToggle"+a.ta)||0)%e;return x.ia(this,"lastToggle"+a.ta,d+1),b.preventDefault(),c[d].apply(this,arguments)||w}var c=arguments,d=a.ta||x.ta++,e=
0;for(b.ta=d;e<c.length;)c[e++].ta=d;return this.click(b)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});
x.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){x.fn[b]=function(a,d){return d==u&&(d=a,a=u),0<arguments.length?this.on(b,u,a,d):this.trigger(b)};nf.test(b)&&(x.event.Ql[b]=x.event.Ou);of.test(b)&&(x.event.Ql[b]=x.event.tv)});
function rf(a,b,c,d){var c=c||[],b=b||sf,e,f,g,h,i=b.nodeType;if(!a||"string"!=typeof a)return c;if(1!==i&&9!==i)return[];g=tf(b);if(!g&&!d&&(e=uf.exec(a)))if(h=e[1])if(9===i){f=b.getElementById(h);if(!f||!f.parentNode)return c;if(f.id===h)return c.push(f),c}else{if(b.ownerDocument&&(f=b.ownerDocument.getElementById(h))&&vf(b,f)&&f.id===h)return c.push(f),c}else{if(e[2])return wf.apply(c,xf.call(b.getElementsByTagName(a),0)),c;if((h=e[3])&&yf&&b.getElementsByClassName)return wf.apply(c,xf.call(b.getElementsByClassName(h),
0)),c}return zf(a.replace(Af,"$1"),b,c,d,g)}function Bf(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}}function Cf(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function Df(a){return Ef(function(b){return b=+b,Ef(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function Ff(a,b,c){if(a===b)return c;for(a=a.nextSibling;a;){if(a===b)return-1;a=a.nextSibling}return 1}
function Gf(a,b){var c,d,e,f,g,h,i;if(g=Hf[If][a+" "])return b?0:g.slice(0);g=a;h=[];for(i=Jf.bw;g;){if(!c||(d=Kf.exec(g)))d&&(g=g.slice(d[0].length)||g),h.push(e=[]);c=w;if(d=Xf.exec(g))e.push(c=new Yf(d.shift())),g=g.slice(c.length),c.type=d[0].replace(Af," ");for(f in Jf.filter)(d=Zf[f].exec(g))&&(!i[f]||(d=i[f](d)))&&(e.push(c=new Yf(d.shift())),g=g.slice(c.length),c.type=f,c.matches=d);if(!c)break}return b?g.length:g?rf.error(a):Hf(a,h).slice(0)}
function $f(a,b,c){var d=b.dir,e=c&&"parentNode"===b.dir,f=ag++;return b.first?function(b,c,f){for(;b=b[d];)if(e||1===b.nodeType)return a(b,c,f)}:function(b,c,i){if(i)for(;b=b[d];){if((e||1===b.nodeType)&&a(b,c,i))return b}else for(var j,l=bg+" "+f+" ",k=l+cg;b=b[d];)if(e||1===b.nodeType){if((j=b[If])===k)return b.Um;if("string"==typeof j&&0===j.indexOf(l)){if(b.Um)return b}else{b[If]=k;if(a(b,c,i))return b.Um=t,b;b.Um=w}}}}
function dg(a){return 1<a.length?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return w;return t}:a[0]}function eg(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=b!=u;h<i;h++)if(f=a[h])if(!c||c(f,d,e))g.push(f),j&&b.push(h);return g}
function fg(a,b,c,d,e,f){return d&&!d[If]&&(d=fg(d)),e&&!e[If]&&(e=fg(e,f)),Ef(function(f,h,i,j){var l,k,p=[],r=[],s=h.length,q;if(!(q=f)){q=b||"*";for(var v=i.nodeType?[i]:i,y=[],F=0,C=v.length;F<C;F++)rf(q,v[F],y);q=y}q=a&&(f||!b)?eg(q,p,a,i,j):q;v=c?e||(f?a:s||d)?[]:h:q;c&&c(q,v,i,j);if(d){l=eg(v,r);d(l,[],i,j);for(i=l.length;i--;)if(k=l[i])v[r[i]]=!(q[r[i]]=k)}if(f){if(e||a){if(e){l=[];for(i=v.length;i--;)(k=v[i])&&l.push(q[i]=k);e(u,v=[],l,j)}for(i=v.length;i--;)(k=v[i])&&-1<(l=e?gg.call(f,k):
p[i])&&(f[l]=!(h[l]=k))}}else v=eg(v===h?v.splice(s,v.length):v),e?e(u,h,v,j):wf.apply(h,v)})}
function hg(a){var b,c,d,e=a.length,f=Jf.Hg[a[0].type];c=f||Jf.Hg[" "];for(var g=f?1:0,h=$f(function(a){return a===b},c,t),i=$f(function(a){return-1<gg.call(b,a)},c,t),j=[function(a,c,d){return!f&&(d||c!==ig)||((b=c).nodeType?h(a,c,d):i(a,c,d))}];g<e;g++)if(c=Jf.Hg[a[g].type])j=[$f(dg(j),c)];else{c=Jf.filter[a[g].type].apply(u,a[g].matches);if(c[If]){for(d=++g;d<e&&!Jf.Hg[a[d].type];d++);return fg(1<g&&dg(j),1<g&&a.slice(0,g-1).join("").replace(Af,"$1"),c,g<d&&hg(a.slice(g,d)),d<e&&hg(a=a.slice(d)),
d<e&&a.join(""))}j.push(c)}return dg(j)}
function zf(a,b,c,d,e){var f,g,h,i,j=Gf(a);if(!d&&1===j.length){g=j[0]=j[0].slice(0);if(2<g.length&&"ID"===(h=g[0]).type&&9===b.nodeType&&!e&&Jf.Hg[g[1].type]){b=Jf.find.wk(h.matches[0].replace(jg,""),b,e)[0];if(!b)return c;a=a.slice(g.shift().length)}for(f=Zf.Xr.test(a)?-1:g.length-1;0<=f;f--){h=g[f];if(Jf.Hg[i=h.type])break;if(i=Jf.find[i])if(d=i(h.matches[0].replace(jg,""),kg.test(g[0].type)&&b.parentNode||b,e)){g.splice(f,1);a=d.length&&g.join("");if(!a)return wf.apply(c,xf.call(d,0)),c;break}}}return lg(a,
j)(d,b,e,c,kg.test(a)),c}function mg(){}var cg,ng,Jf,og,tf,vf,lg,pg,qg,ig,rg=t,If=("sizcache"+Math.random()).replace(".",""),Yf=String,sf=Ja.document,sg=sf.documentElement,bg=0,ag=0,tg=[].pop,wf=[].push,xf=[].slice,gg=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]===a)return b;return-1};function Ef(a,b){return a[If]=b==u||b,a}function ug(){var a={},b=[];return Ef(function(c,d){return b.push(c)>Jf.xt&&delete a[b.shift()],a[c+" "]=d},a)}
var vg=ug(),Hf=ug(),wg=ug(),xg="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[-\\w]|[^\\x00-\\xa0])+)[\\x20\\t\\r\\n\\f]*(?:([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+"(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+".replace("w","w#")+")|)|)[\\x20\\t\\r\\n\\f]*\\]",yg=":((?:\\\\.|[-\\w]|[^\\x00-\\xa0])+)(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+xg+")|[^:]|\\\\.)*|.*))\\)|)",Af=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,Kf=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,Xf=/^[\x20\t\r\n\f]*([\x20\t\r\n\f>+~])[\x20\t\r\n\f]*/,
zg=RegExp(yg),uf=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,kg=/[\x20\t\r\n\f]*[+~]/,Ag=/h\d/i,Bg=/input|select|textarea|button/i,jg=/\\(?!\\)/g,Zf={wk:/^#((?:\\.|[-\w]|[^\x00-\xa0])+)/,ln:/^\.((?:\\.|[-\w]|[^\x00-\xa0])+)/,Bn:/^\[name=['"]?((?:\\.|[-\w]|[^\x00-\xa0])+)['"]?\]/,Nk:RegExp("^("+"(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+".replace("w","w*")+")"),en:RegExp("^"+xg),Gn:RegExp("^"+yg),Xr:/:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i,rk:RegExp("^:(only|nth|first|last)-child(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)",
"i"),Jj:RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")};function Cg(a){var b=sf.createElement("div");try{return a(b)}catch(c){return w}finally{}}
var Dg=Cg(function(a){return a.appendChild(sf.createComment("")),!a.getElementsByTagName("*").length}),Eg=Cg(function(a){return a.innerHTML="<a href='#'></a>",a.firstChild&&"undefined"!==typeof a.firstChild.getAttribute&&"#"===a.firstChild.getAttribute("href")}),Fg=Cg(function(a){a.innerHTML="<select></select>";a=typeof a.lastChild.getAttribute("multiple");return"boolean"!==a&&"string"!==a}),yf=Cg(function(a){return a.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!a.getElementsByClassName||
!a.getElementsByClassName("e").length?w:(a.lastChild.className="e",2===a.getElementsByClassName("e").length)}),Gg=Cg(function(a){a.id=If+0;a.innerHTML="<a name='"+If+"'></a><div name='"+If+"'></div>";sg.insertBefore(a,sg.firstChild);var b=sf.getElementsByName&&sf.getElementsByName(If).length===2+sf.getElementsByName(If+0).length;return ng=!sf.getElementById(If),sg.removeChild(a),b});try{xf.call(sg.childNodes,0)[0].nodeType}catch(Hg){xf=function(a){for(var b,c=[];b=this[a];a++)c.push(b);return c}}
rf.matches=function(a,b){return rf(a,u,u,b)};rf.matchesSelector=function(a,b){return 0<rf(b,u,u,[a]).length};og=rf.qu=function(a){var b,c="",d=0;if(b=a.nodeType)if(1===b||9===b||11===b){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=og(a)}else{if(3===b||4===b)return a.nodeValue}else for(;b=a[d];d++)c+=og(b);return c};tf=rf.Ku=function(a){return(a=a&&(a.ownerDocument||a).documentElement)?"HTML"!==a.nodeName:w};
vf=rf.contains=sg.contains?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||!(1===d.nodeType&&c.contains&&c.contains(d)))}:sg.compareDocumentPosition?function(a,b){return b&&!!(a.compareDocumentPosition(b)&16)}:function(a,b){for(;b=b.parentNode;)if(b===a)return t;return w};
rf.attr=function(a,b){var c,d=tf(a);return d||(b=b.toLowerCase()),(c=Jf.dt[b])?c(a):d||Fg?a.getAttribute(b):(c=a.getAttributeNode(b),c?"boolean"==typeof a[b]?a[b]?b:u:c.specified?c.value:u:u)};
Jf=rf.sw={xt:50,wz:Ef,match:Zf,dt:Eg?{}:{href:function(a){return a.getAttribute("href",2)},type:function(a){return a.getAttribute("type")}},find:{wk:ng?function(a,b,c){if("undefined"!==typeof b.getElementById&&!c)return(a=b.getElementById(a))&&a.parentNode?[a]:[]}:function(a,b,c){if("undefined"!==typeof b.getElementById&&!c)return(b=b.getElementById(a))?b.id===a||"undefined"!==typeof b.getAttributeNode&&b.getAttributeNode("id").value===a?[b]:n:[]},Nk:Dg?function(a,b){if("undefined"!==typeof b.getElementsByTagName)return b.getElementsByTagName(a)}:
function(a,b){var c=b.getElementsByTagName(a);if("*"===a){for(var d,e=[],f=0;d=c[f];f++)1===d.nodeType&&e.push(d);return e}return c},Bn:Gg&&function(a,b){if("undefined"!==typeof b.getElementsByName)return b.getElementsByName(name)},ln:yf&&function(a,b,c){if("undefined"!==typeof b.getElementsByClassName&&!c)return b.getElementsByClassName(a)}},Hg:{">":{dir:"parentNode",first:t}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:t},"~":{dir:"previousSibling"}},bw:{en:function(a){return a[1]=a[1].replace(jg,
""),a[3]=(a[4]||a[5]||"").replace(jg,""),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},rk:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1]?(a[2]||rf.error(a[0]),a[3]=+(a[3]?a[4]+(a[5]||1):2*("even"===a[2]||"odd"===a[2])),a[4]=+(a[6]+a[7]||"odd"===a[2])):a[2]&&rf.error(a[0]),a},Gn:function(a){var b,c;if(Zf.rk.test(a[0]))return u;if(a[3])a[2]=a[3];else if(b=a[4])zg.test(b)&&(c=Gf(b,t))&&(c=b.indexOf(")",b.length-c)-b.length)&&(b=b.slice(0,c),a[0]=a[0].slice(0,c)),a[2]=b;return a.slice(0,3)}},
filter:{wk:ng?function(a){return a=a.replace(jg,""),function(b){return b.getAttribute("id")===a}}:function(a){return a=a.replace(jg,""),function(b){return(b="undefined"!==typeof b.getAttributeNode&&b.getAttributeNode("id"))&&b.value===a}},Nk:function(a){return"*"===a?function(){return t}:(a=a.replace(jg,"").toLowerCase(),function(b){return b.nodeName&&b.nodeName.toLowerCase()===a})},ln:function(a){var b=vg[If][a+" "];return b||(b=RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"))&&vg(a,
function(a){return b.test(a.className||"undefined"!==typeof a.getAttribute&&a.getAttribute("class")||"")})},en:function(a,b,c){return function(d){d=rf.attr(d,a);return d==u?"!="===b:b?(d+="","="===b?d===c:"!="===b?d!==c:"^="===b?c&&0===d.indexOf(c):"*="===b?c&&-1<d.indexOf(c):"$="===b?c&&d.substr(d.length-c.length)===c:"~="===b?-1<(" "+d+" ").indexOf(c):"|="===b?d===c||d.substr(0,c.length+1)===c+"-":w):t}},rk:function(a,b,c,d){return"nth"===a?function(a){var b,g;b=a.parentNode;if(1===c&&0===d)return t;
if(b){g=0;for(b=b.firstChild;b&&!(1===b.nodeType&&(g++,a===b));b=b.nextSibling);}return g-=d,g===c||0===g%c&&0<=g/c}:function(b){var c=b;switch(a){case "only":case "first":for(;c=c.previousSibling;)if(1===c.nodeType)return w;if("first"===a)return t;c=b;case "last":for(;c=c.nextSibling;)if(1===c.nodeType)return w;return t}}},Gn:function(a,b){var c,d=Jf.Fg[a]||Jf.rq[a.toLowerCase()]||rf.error("unsupported pseudo: "+a);return d[If]?d(b):1<d.length?(c=[a,a,"",b],Jf.rq.hasOwnProperty(a.toLowerCase())?
Ef(function(a,c){for(var g,h=d(a,b),i=h.length;i--;)g=gg.call(a,h[i]),a[g]=!(c[g]=h[i])}):function(a){return d(a,0,c)}):d}},Fg:{not:Ef(function(a){var b=[],c=[],d=lg(a.replace(Af,"$1"));return d[If]?Ef(function(a,b,c,h){for(var h=d(a,u,h,[]),i=a.length;i--;)if(c=h[i])a[i]=!(b[i]=c)}):function(a,f,g){return b[0]=a,d(b,u,g,c),!c.pop()}}),has:Ef(function(a){return function(b){return 0<rf(a,b).length}}),contains:Ef(function(a){return function(b){return-1<(b.textContent||b.innerText||og(b)).indexOf(a)}}),
enabled:function(a){return a.disabled===w},disabled:function(a){return a.disabled===t},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===t},parent:function(a){return!Jf.Fg.empty(a)},empty:function(a){for(var b,a=a.firstChild;a;){if("@"<a.nodeName||3===(b=a.nodeType)||4===b)return w;a=a.nextSibling}return t},OA:function(a){return Ag.test(a.nodeName)},text:function(a){var b,
c;return"input"===a.nodeName.toLowerCase()&&"text"===(b=a.type)&&((c=a.getAttribute("type"))==u||c.toLowerCase()===b)},AD:Bf("radio"),gz:Bf("checkbox"),file:Bf("file"),Wv:Bf("password"),J:Bf("image"),submit:Cf("submit"),reset:Cf("reset"),button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},input:function(a){return Bg.test(a.nodeName)},focus:function(a){var b=a.ownerDocument;return a===b.activeElement&&(!b.hasFocus||b.hasFocus())&&!(!a.type&&!a.href&&
!~a.tabIndex)},Qc:function(a){return a===a.ownerDocument.activeElement},first:Df(function(){return[0]}),last:Df(function(a,b){return[b-1]}),eq:Df(function(a,b,c){return[0>c?c+b:c]}),kA:Df(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),WC:Df(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),CB:Df(function(a,b,c){for(b=0>c?c+b:c;0<=--b;)a.push(b);return a}),MA:Df(function(a,b,c){for(c=0>c?c+b:c;++c<b;)a.push(c);return a})}};
pg=sg.compareDocumentPosition?function(a,b){return a===b?(qg=t,0):(!a.compareDocumentPosition||!b.compareDocumentPosition?a.compareDocumentPosition:a.compareDocumentPosition(b)&4)?-1:1}:function(a,b){if(a===b)return qg=t,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[];c=a.parentNode;d=b.parentNode;var g=c;if(c===d)return Ff(a,b);if(!c)return-1;if(!d)return 1;for(;g;)e.unshift(g),g=g.parentNode;for(g=d;g;)f.unshift(g),g=g.parentNode;c=e.length;d=f.length;for(g=
0;g<c&&g<d;g++)if(e[g]!==f[g])return Ff(e[g],f[g]);return g===c?Ff(a,f[g],-1):Ff(e[g],b,1)};[0,0].sort(pg);rg=!qg;rf.ar=function(a){var b,c=[],d=1,e=0;qg=rg;a.sort(pg);if(qg){for(;b=a[d];d++)b===a[d-1]&&(e=c.push(d));for(;e--;)a.splice(c[e],1)}return a};rf.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};
lg=rf.compile=function(a,b){var c,d=[],e=[],f=wg[If][a+" "];if(!f){b||(b=Gf(a));for(c=b.length;c--;)f=hg(b[c]),f[If]?d.push(f):e.push(f);var g=0<d.length,h=0<e.length,i=function(a,b,c,f,r){var s,q,v=[],y=0,F="0",C=a&&[],z=r!=u,G=ig,B=a||h&&Jf.find.Nk("*",r&&b.parentNode||b),J=bg+=G==u?1:Math.E;for(z&&(ig=b!==sf&&b,cg=i.Vo);(r=B[F])!=u;F++){if(h&&r){for(s=0;q=e[s];s++)if(q(r,b,c)){f.push(r);break}z&&(bg=J,cg=++i.Vo)}g&&((r=!q&&r)&&y--,a&&C.push(r))}y+=F;if(g&&F!==y){for(s=0;q=d[s];s++)q(C,v,b,c);if(a){if(0<
y)for(;F--;)!C[F]&&!v[F]&&(v[F]=tg.call(f));v=eg(v)}wf.apply(f,v);z&&!a&&0<v.length&&1<y+d.length&&rf.ar(f)}return z&&(bg=J,ig=G),C};c=(i.Vo=0,g?Ef(i):i);f=wg(a,c)}return f};
if(sf.querySelectorAll){var Ig,Jg=zf,Kg=/'|\\/g,Lg=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,Mg=[":focus"],Ng=[":active"],Og=sg.matchesSelector||sg.mozMatchesSelector||sg.webkitMatchesSelector||sg.VC||sg.msMatchesSelector;Cg(function(a){a.innerHTML="<select><option selected=''></option></select>";a.querySelectorAll("[selected]").length||Mg.push("\\[[\\x20\\t\\r\\n\\f]*(?:checked|disabled|ismap|multiple|readonly|selected|value)");a.querySelectorAll(":checked").length||Mg.push(":checked")});Cg(function(a){a.innerHTML=
"<p test=''></p>";a.querySelectorAll("[test^='']").length&&Mg.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:\"\"|'')");a.innerHTML="<input type='hidden'/>";a.querySelectorAll(":enabled").length||Mg.push(":enabled",":disabled")});Mg=RegExp(Mg.join("|"));zf=function(a,b,c,d,e){if(!d&&!e&&!Mg.test(a)){var f,g,h=t,i=If;g=b;f=9===b.nodeType&&a;if(1===b.nodeType&&"object"!==b.nodeName.toLowerCase()){f=Gf(a);(h=b.getAttribute("id"))?i=h.replace(Kg,"\\$&"):b.setAttribute("id",i);i="[id='"+i+"'] ";for(g=f.length;g--;)f[g]=
i+f[g].join("");g=kg.test(a)&&b.parentNode||b;f=f.join(",")}if(f)try{return wf.apply(c,xf.call(g.querySelectorAll(f),0)),c}catch(j){}finally{h||b.removeAttribute("id")}}return Jg(a,b,c,d,e)};Og&&(Cg(function(a){Ig=Og.call(a,"div");try{Og.call(a,"[test!='']:sizzle"),Ng.push("!=",yg)}catch(b){}}),Ng=RegExp(Ng.join("|")),rf.matchesSelector=function(a,b){b=b.replace(Lg,"='$1']");if(!tf(a)&&!Ng.test(b)&&!Mg.test(b))try{var c=Og.call(a,b);if(c||Ig||a.document&&11!==a.document.nodeType)return c}catch(d){}return 0<
rf(b,u,u,[a]).length})}Jf.Fg.UC=Jf.Fg.eq;Jf.lg=mg.prototype=Jf.Fg;Jf.rq=new mg;rf.attr=x.attr;x.find=rf;x.Cc=rf.sw;x.Cc[":"]=x.Cc.Fg;x.unique=rf.ar;x.text=rf.qu;x.isXMLDoc=rf.Ku;x.contains=rf.contains;var Pg=/Until$/,Qg=/^(?:parents|prev(?:Until|All))/,Qb=/^.[^:#\[\.,]*$/,Rg=x.Cc.match.Jj,Sg={children:t,contents:t,next:t,prev:t};
x.fn.extend({find:function(a){var b,c,d,e,f,g,h=this;if("string"!=typeof a)return x(a).filter(function(){b=0;for(c=h.length;b<c;b++)if(x.contains(h[b],this))return t});g=this.pushStack("","find",a);b=0;for(c=this.length;b<c;b++)if(d=g.length,x.find(a,this[b],g),0<b)for(e=d;e<g.length;e++)for(f=0;f<d;f++)if(g[f]===g[e]){g.splice(e--,1);break}return g},has:function(a){var b,c=x(a,this),d=c.length;return this.filter(function(){for(b=0;b<d;b++)if(x.contains(this,c[b]))return t})},not:function(a){return this.pushStack(Ib(this,
a,w),"not",a)},filter:function(a){return this.pushStack(Ib(this,a,t),"filter",a)},is:function(a){return!!a&&("string"==typeof a?Rg.test(a)?0<=x(a,this.context).index(this[0]):0<x.filter(a,this).length:0<this.filter(a).length)},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=Rg.test(a)||"string"!=typeof a?x(a,b||this.context):0;d<e;d++)for(c=this[d];c&&c.ownerDocument&&c!==b&&11!==c.nodeType;){if(g?-1<g.index(c):x.find.matchesSelector(c,a)){f.push(c);break}c=c.parentNode}return f=1<f.length?
x.unique(f):f,this.pushStack(f,"closest",a)},index:function(a){return a?"string"==typeof a?x.inArray(this[0],x(a)):x.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,b){var c="string"==typeof a?x(a,b):x.makeArray(a&&a.nodeType?[a]:a),d=x.merge(this.get(),c);return this.pushStack(Gb(c[0])||Gb(d[0])?d:x.unique(d))},Us:function(a){return this.add(a==u?this.Fm:this.Fm.filter(a))}});x.fn.andSelf=x.fn.Us;
x.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:u},parents:function(a){return x.dir(a,"parentNode")},parentsUntil:function(a,b,c){return x.dir(a,"parentNode",c)},next:function(a){return Hb(a,"nextSibling")},prev:function(a){return Hb(a,"previousSibling")},nextAll:function(a){return x.dir(a,"nextSibling")},prevAll:function(a){return x.dir(a,"previousSibling")},nextUntil:function(a,b,c){return x.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return x.dir(a,"previousSibling",
c)},siblings:function(a){return x.Aq((a.parentNode||{}).firstChild,a)},children:function(a){return x.Aq(a.firstChild)},contents:function(a){return x.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:x.merge([],a.childNodes)}},function(a,b){x.fn[a]=function(c,d){var e=x.map(this,b,c);return Pg.test(a)||(d=c),d&&"string"==typeof d&&(e=x.filter(d,e)),e=1<this.length&&!Sg[a]?x.unique(e):e,1<this.length&&Qg.test(a)&&(e=e.reverse()),this.pushStack(e,a,Od.call(arguments).join(","))}});
x.extend({filter:function(a,b,c){return c&&(a=":not("+a+")"),1===b.length?x.find.matchesSelector(b[0],a)?[b[0]]:[]:x.find.matches(a,b)},dir:function(a,b,c){for(var d=[],a=a[b];a&&9!==a.nodeType&&(c===Xa||1!==a.nodeType||!x(a).is(c));)1===a.nodeType&&d.push(a),a=a[b];return d},Aq:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});
var Wb="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Tg=/ jQuery\d+="(?:null|\d+)"/g,Ug=/^\s+/,Vg=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Wg=/<([\w:]+)/,Xg=/<tbody/i,Yg=/<|&#?\w+;/,Zg=/<(?:script|style|link)/i,$g=/<(?:script|object|embed|option|style)/i,ah=RegExp("<(?:"+Wb+")[\\s/>]","i"),Zb=/^(?:checkbox|radio)$/,bh=/checked\s*(?:[^=]|=\s*.checked.)/i,ch=
/\/(java|ecma)script/i,dh=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,eh={Vp:[1,"<select multiple='multiple'>","</select>"],gB:[1,"<fieldset>","</fieldset>"],ax:[1,"<table>","</table>"],ME:[2,"<table><tbody>","</tbody></table>"],Zw:[3,"<table><tbody><tr>","</tr></tbody></table>"],lz:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],bg:[1,"<map>","</map>"],Fd:[0,"",""]},fh=Tb(cd),gh=fh.appendChild(cd.createElement("div"));eh.aD=eh.Vp;eh.tbody=eh.EE=eh.mz=eh.caption=eh.ax;eh.FE=eh.Zw;
x.support.htmlSerialize||(eh.Fd=[1,"X<div>","</div>"]);
x.fn.extend({text:function(a){return x.Gd(this,function(a){return a===Xa?x.text(this):this.empty().append((this[0]&&this[0].ownerDocument||cd).createTextNode(a))},u,a,arguments.length)},wrapAll:function(a){if(x.isFunction(a))return this.each(function(b){x(this).wrapAll(a.call(this,b))});if(this[0]){var b=x(a,this[0].ownerDocument).eq(0).clone(t);this[0].parentNode&&b.insertBefore(this[0]);b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},
wrapInner:function(a){return x.isFunction(a)?this.each(function(b){x(this).wrapInner(a.call(this,b))}):this.each(function(){var b=x(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=x.isFunction(a);return this.each(function(c){x(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){x.nodeName(this,"body")||x(this).replaceWith(this.childNodes)}).end()},append:function(){return this.kg(arguments,t,function(a){(1===this.nodeType||11===
this.nodeType)&&this.appendChild(a)})},prepend:function(){return this.kg(arguments,t,function(a){(1===this.nodeType||11===this.nodeType)&&this.insertBefore(a,this.firstChild)})},before:function(){if(!Gb(this[0]))return this.kg(arguments,w,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=x.Al(arguments);return this.pushStack(x.merge(a,this),"before",this.Na)}},after:function(){if(!Gb(this[0]))return this.kg(arguments,w,function(a){this.parentNode.insertBefore(a,this.nextSibling)});
if(arguments.length){var a=x.Al(arguments);return this.pushStack(x.merge(this,a),"after",this.Na)}},remove:function(a,b){for(var c,d=0;(c=this[d])!=u;d++)if(!a||x.filter(a,[c]).length)!b&&1===c.nodeType&&(x.fh(c.getElementsByTagName("*")),x.fh([c])),c.parentNode&&c.parentNode.removeChild(c);return this},empty:function(){for(var a,b=0;(a=this[b])!=u;b++)for(1===a.nodeType&&x.fh(a.getElementsByTagName("*"));a.firstChild;)a.removeChild(a.firstChild);return this},clone:function(a,b){return a=a==u?w:a,
b=b==u?a:b,this.map(function(){return x.clone(this,a,b)})},html:function(a){return x.Gd(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===Xa)return 1===c.nodeType?c.innerHTML.replace(Tg,""):Xa;if("string"==typeof a&&!Zg.test(a)&&(x.support.htmlSerialize||!ah.test(a))&&(x.support.leadingWhitespace||!Ug.test(a))&&!eh[(Wg.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Vg,"<$1></$2>");try{for(;d<e;d++)c=this[d]||{},1===c.nodeType&&(x.fh(c.getElementsByTagName("*")),c.innerHTML=a);c=0}catch(f){}}c&&
this.empty().append(a)},u,a,arguments.length)},replaceWith:function(a){return Gb(this[0])?this.length?this.pushStack(x(x.isFunction(a)?a():a),"replaceWith",a):this:x.isFunction(a)?this.each(function(b){var c=x(this),d=c.html();c.replaceWith(a.call(this,b,d))}):("string"!=typeof a&&(a=x(a).detach()),this.each(function(){var b=this.nextSibling,c=this.parentNode;x(this).remove();b?x(b).before(a):x(c).append(a)}))},detach:function(a){return this.remove(a,t)},kg:function(a,b,c){var a=[].concat.apply([],
a),d,e,f,g=0,h=a[0],i=[],j=this.length;if(!x.support.Mo&&1<j&&"string"==typeof h&&bh.test(h))return this.each(function(){x(this).kg(a,b,c)});if(x.isFunction(h))return this.each(function(d){var e=x(this);a[0]=h.call(this,d,b?e.html():Xa);e.kg(a,b,c)});if(this[0]){d=x.Jo(a,this,i);f=d.Sl;e=f.firstChild;1===f.childNodes.length&&(f=e);if(e){b=b&&x.nodeName(e,"tr");for(d=d.Ko||j-1;g<j;g++)c.call(b&&x.nodeName(this[g],"table")?this[g].getElementsByTagName("tbody")[0]||this[g].appendChild(this[g].ownerDocument.createElement("tbody")):
this[g],g===d?f:x.clone(f,t,t))}f=e=u;i.length&&x.each(i,function(a,b){b.src?x.ajax?x.ajax({url:b.src,type:"GET",dataType:"script",async:w,global:w,"throws":t}):x.error("no ajax"):x.globalEval((b.text||b.textContent||b.innerHTML||"").replace(dh,""));b.parentNode&&b.parentNode.removeChild(b)})}return this}});
x.Jo=function(a,b,c){var d,e,f,g=a[0];return b=b||cd,b=!b.nodeType&&b[0]||b,b=b.ownerDocument||b,1===a.length&&"string"==typeof g&&512>g.length&&b===cd&&"<"===g.charAt(0)&&!$g.test(g)&&(x.support.Mo||!bh.test(g))&&(x.support.Yl||!ah.test(g))&&(e=t,d=x.ap[g],f=d!==Xa),d||(d=b.createDocumentFragment(),x.Al(a,b,d,c),e&&(x.ap[g]=f&&d)),{Sl:d,Ko:e}};x.ap={};
x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){x.fn[a]=function(c){var d,e=0,f=[],c=x(c),g=c.length;d=1===this.length&&this[0].parentNode;if((d==u||d&&11===d.nodeType&&1===d.childNodes.length)&&1===g)return c[b](this[0]),this;for(;e<g;e++)d=(0<e?this.clone(t):this).get(),x(c[e])[b](d),f=f.concat(d);return this.pushStack(f,a,c.Na)}});
x.extend({clone:function(a,b,c){var d,e,f,g;x.support.Yl||x.isXMLDoc(a)||!ah.test("<"+a.nodeName+">")?g=a.cloneNode(t):(gh.innerHTML=a.outerHTML,gh.removeChild(g=gh.firstChild));if((!x.support.noCloneEvent||!x.support.vv)&&(1===a.nodeType||11===a.nodeType)&&!x.isXMLDoc(a)){Yb(a,g);d=$b(a);e=$b(g);for(f=0;d[f];++f)e[f]&&Yb(d[f],e[f])}if(b&&(Xb(a,g),c)){d=$b(a);e=$b(g);for(f=0;d[f];++f)Xb(d[f],e[f])}return g},Al:function(a,b,c,d){var e,f,g,h,i,j,l,k=b===cd&&fh,p=[];if(!b||"undefined"==typeof b.createDocumentFragment)b=
cd;for(e=0;(g=a[e])!=u;e++)if("number"==typeof g&&(g+=""),g){if("string"==typeof g)if(Yg.test(g)){k=k||Tb(b);j=b.createElement("div");k.appendChild(j);g=g.replace(Vg,"<$1></$2>");f=(Wg.exec(g)||["",""])[1].toLowerCase();h=eh[f]||eh.Fd;i=h[0];for(j.innerHTML=h[1]+g+h[2];i--;)j=j.lastChild;if(!x.support.tbody){i=Xg.test(g);h="table"===f&&!i?j.firstChild&&j.firstChild.childNodes:"<table>"===h[1]&&!i?j.childNodes:[];for(f=h.length-1;0<=f;--f)x.nodeName(h[f],"tbody")&&!h[f].childNodes.length&&h[f].parentNode.removeChild(h[f])}!x.support.leadingWhitespace&&
Ug.test(g)&&j.insertBefore(b.createTextNode(Ug.exec(g)[0]),j.firstChild);g=j.childNodes;j.parentNode.removeChild(j)}else g=b.createTextNode(g);g.nodeType?p.push(g):x.merge(p,g)}j&&(g=j=k=u);if(!x.support.bt)for(e=0;(g=p[e])!=u;e++)x.nodeName(g,"input")?ac(g):"undefined"!=typeof g.getElementsByTagName&&x.grep(g.getElementsByTagName("input"),ac);if(c){a=function(a){if(!a.type||ch.test(a.type))return d?d.push(a.parentNode?a.parentNode.removeChild(a):a):c.appendChild(a)};for(e=0;(g=p[e])!=u;e++)if(!x.nodeName(g,
"script")||!a(g))c.appendChild(g),"undefined"!=typeof g.getElementsByTagName&&(l=x.grep(x.merge([],g.getElementsByTagName("script")),a),p.splice.apply(p,[e+1,0].concat(l)),e+=l.length)}return p},fh:function(a,b){for(var c,d,e,f,g=0,h=x.expando,i=x.de,j=x.support.Hl,l=x.event.Ic;(e=a[g])!=u;g++)if(b||x.bh(e))if(c=(d=e[h])&&i[d]){if(c.oe)for(f in c.oe)l[f]?x.event.remove(e,f):x.jq(e,f,c.handle);i[d]&&(delete i[d],j?delete e[h]:e.removeAttribute?e.removeAttribute(h):e[h]=u,x.So.push(d))}}});var hh,ih;
x.lx=function(){var a=Kd.userAgent,a=a.toLowerCase(),a=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||0>a.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}};hh=x.lx();ih={};hh.browser&&(ih[hh.browser]=t,ih.version=hh.version);ih.iz?ih.webkit=t:ih.webkit&&(ih.safari=t);x.browser=ih;
x.sub=function(){function a(b,d){return new a.fn.init(b,d)}x.extend(t,a,this);a.vE=this;a.fn=a.prototype=this();a.fn.constructor=a;a.sub=this.sub;a.fn.init=function(c,d){return d&&d instanceof x&&!(d instanceof a)&&(d=a(d)),x.fn.init.call(this,c,d,b)};a.fn.init.prototype=a.fn;var b=a(cd);return a};
var Kc,dd,ed,jh=/alpha\([^)]*\)/i,kh=/opacity=([^)]*)/,lh=/^(top|right|bottom|left)$/,mh=/^(none|table(?!-c[ea]).+)/,nh=/^margin/,Mc=RegExp("^("+ee+")(.*)$","i"),Vc=RegExp("^("+ee+")(?!px)[a-z%]+$","i"),oh=RegExp("^([-+])=("+ee+")","i"),Wc={xx:"block"},ph={position:"absolute",visibility:"hidden",display:"block"},qh={letterSpacing:0,fontWeight:400},Tc=["Top","Right","Bottom","Left"],jc=["Webkit","O","Moz","ms"],rh=x.fn.toggle;
x.fn.extend({css:function(a,b){return x.Gd(this,function(a,b,e){return e!==Xa?x.style(a,b,e):x.css(a,b)},a,b,1<arguments.length)},show:function(){return qc(this,t)},hide:function(){return qc(this)},toggle:function(a,b){var c="boolean"==typeof a;return x.isFunction(a)&&x.isFunction(b)?rh.apply(this,arguments):this.each(function(){(c?a:pc(this))?x(this).show():x(this).hide()})}});
x.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Kc(a,"opacity");return""===c?"1":c}}}},Cl:{sA:t,fontWeight:t,lineHeight:t,opacity:t,orphans:t,widows:t,zIndex:t,zoom:t},nh:{"float":x.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&!(3===a.nodeType||8===a.nodeType||!a.style)){var e,f,g,h=x.hf(b),i=a.style,b=x.nh[h]||(x.nh[h]=ic(i,h));g=x.cssHooks[b]||x.cssHooks[h];if(c===Xa)return g&&"get"in g&&(e=g.get(a,w,d))!==Xa?e:i[b];f=typeof c;"string"===f&&(e=oh.exec(c))&&
(c=(e[1]+1)*e[2]+parseFloat(x.css(a,b)),f="number");if(!(c==u||"number"===f&&isNaN(c)))if("number"===f&&!x.Cl[h]&&(c+="px"),!g||!("set"in g)||(c=g.set(a,c,d))!==Xa)try{i[b]=c}catch(j){}}},css:function(a,b,c,d){var e,f,g,h=x.hf(b);return b=x.nh[h]||(x.nh[h]=ic(a.style,h)),g=x.cssHooks[b]||x.cssHooks[h],g&&"get"in g&&(e=g.get(a,t,d)),e===Xa&&(e=Kc(a,b)),"normal"===e&&b in qh&&(e=qh[b]),c||d!==Xa?(f=parseFloat(e),c||x.isNumeric(f)?f||0:e):e},Iq:function(a,b,c){var d,e={};for(d in b)e[d]=a.style[d],a.style[d]=
b[d];c=c.call(a);for(d in b)a.style[d]=e[d];return c}});
Ja.getComputedStyle?Kc=function(a,b){var c,d,e,f,g=Ja.getComputedStyle(a,u),h=a.style;return g&&(c=g.getPropertyValue(b)||g[b],""===c&&!x.contains(a.ownerDocument,a)&&(c=x.style(a,b)),Vc.test(c)&&nh.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=c,c=g.width,h.width=d,h.minWidth=e,h.maxWidth=f)),c}:cd.documentElement.currentStyle&&(Kc=function(a,b){var c,d,e=a.currentStyle&&a.currentStyle[b],f=a.style;return e==u&&f&&f[b]&&(e=f[b]),Vc.test(e)&&!lh.test(b)&&(c=f.left,d=
a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),f.left="fontSize"===b?"1em":e,e=f.pixelLeft+"px",f.left=c,d&&(a.runtimeStyle.left=d)),""===e?"auto":e});x.each(["height","width"],function(a,b){x.cssHooks[b]={get:function(a,d,e){if(d)return 0===a.offsetWidth&&mh.test(Kc(a,"display"))?x.Iq(a,ph,function(){return Uc(a,b,e)}):Uc(a,b,e)},set:function(a,d,e){return Lc(0,d,e?Sc(a,b,e,x.support.boxSizing&&"border-box"===x.css(a,"boxSizing")):0)}}});
x.support.opacity||(x.cssHooks.opacity={get:function(a,b){return kh.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?0.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=x.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1;if(1<=b&&(""===x.trim(f.replace(jh,""))&&c.removeAttribute)&&(c.removeAttribute("filter"),d&&!d.filter))return;c.filter=jh.test(f)?f.replace(jh,e):f+" "+e}});
x(function(){x.support.iq||(x.cssHooks.marginRight={get:function(a,b){return x.Iq(a,{display:"inline-block"},function(){if(b)return Kc(a,"marginRight")})}});!x.support.$p&&x.fn.position&&x.each(["top","left"],function(a,b){x.cssHooks[b]={get:function(a,d){if(d){var e=Kc(a,b);return Vc.test(e)?x(a).position()[b]+"px":e}}}})});
x.Cc&&x.Cc.lg&&(x.Cc.lg.hidden=function(a){return 0===a.offsetWidth&&0===a.offsetHeight||!x.support.iw&&"none"===(a.style&&a.style.display||Kc(a,"display"))},x.Cc.lg.visible=function(a){return!x.Cc.lg.hidden(a)});x.each({margin:"",padding:"",border:"Width"},function(a,b){x.cssHooks[a+b]={expand:function(c){for(var d="string"==typeof c?c.split(" "):[c],e={},c=0;4>c;c++)e[a+Tc[c]+b]=d[c]||d[c-2]||d[0];return e}};nh.test(a)||(x.cssHooks[a+b].set=Lc)});
var sh=/%20/g,gd=/\[\]$/,th=/\r?\n/g,uh=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,vh=/^(?:select|textarea)/i;
x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?x.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||vh.test(this.nodeName)||uh.test(this.type))}).map(function(a,b){var c=x(this).val();return c==u?u:x.isArray(c)?x.map(c,function(a){return{name:b.name,value:a.replace(th,"\r\n")}}):{name:b.name,value:c.replace(th,"\r\n")}}).get()}});
x.param=function(a,b){function c(a,b){b=x.isFunction(b)?b():b==u?"":b;e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)}var d,e=[];b===Xa&&(b=x.af&&x.af.ex);if(x.isArray(a)||a.jquery&&!x.isPlainObject(a))x.each(a,function(){c(this.name,this.value)});else for(d in a)fd(d,a[d],b,c);return e.join("&").replace(sh,"+")};
var wh,xh,yh=/#.*$/,zh=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,Ah=/^(?:GET|HEAD)$/,Bh=/^\/\//,Ch=/\?/,Dh=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Eh=/([?&])_=[^&]*/,Fh=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Gh=x.fn.load,pd={},Wh={},Xh=["*/"]+["*"];try{xh=Jd.href}catch(Yh){xh=cd.createElement("a"),xh.href="",xh=xh.href}wh=Fh.exec(xh.toLowerCase())||[];
x.fn.load=function(a,b,c){if("string"!=typeof a&&Gh)return Gh.apply(this,arguments);if(!this.length)return this;var d,e,f,g=this,h=a.indexOf(" ");return 0<=h&&(d=a.slice(h,a.length),a=a.slice(0,h)),x.isFunction(b)?(c=b,b=Xa):b&&"object"==typeof b&&(e="POST"),x.ajax({url:a,type:e,dataType:"html",data:b,complete:function(a,b){c&&g.each(c,f||[a.responseText,b,a])}}).done(function(a){f=arguments;g.html(d?x("<div>").append(a.replace(Dh,"")).find(d):a)}),this};
x.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){x.fn[b]=function(a){return this.on(b,a)}});x.each(["get","post"],function(a,b){x[b]=function(a,d,e,f){return x.isFunction(d)&&(f=f||e,e=d,d=Xa),x.ajax({type:b,url:a,data:d,success:e,dataType:f})}});
x.extend({getScript:function(a,b){return x.get(a,Xa,b,"script")},getJSON:function(a,b,c){return x.get(a,b,c,"json")},ajaxSetup:function(a,b){return b?qd(a,x.af):(b=a,a=x.af),qd(a,b),a},af:{url:xh,vp:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test(wh[1]),global:t,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",cw:t,async:t,Ni:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",Nu:"application/json, text/javascript","*":Xh},contents:{xml:/xml/,
html:/html/,Nu:/json/},nw:{xml:"responseXML",text:"responseText"},mh:{"* text":Ja.cy,"text html":t,"text json":x.parseJSON,"text xml":x.parseXML},gu:{context:t,url:t}},ajaxPrefilter:hd(pd),zo:hd(Wh),ajax:function(a,b){function c(a,b,c,f){var i,l,y,z,B,F=b;if(2!==C){C=2;h&&clearTimeout(h);g=Xa;e=f||"";G.readyState=0<a?4:0;if(c){z=k;var f=G,J,aa,ia,Ia,S=z.contents,ja=z.fd,wa=z.nw;for(aa in wa)aa in c&&(f[wa[aa]]=c[aa]);for(;"*"===ja[0];)ja.shift(),J===Xa&&(J=z.sm||f.getResponseHeader("content-type"));
if(J)for(aa in S)if(S[aa]&&S[aa].test(J)){ja.unshift(aa);break}if(ja[0]in c)ia=ja[0];else{for(aa in c){if(!ja[0]||z.mh[aa+" "+ja[0]]){ia=aa;break}Ia||(Ia=aa)}ia=ia||Ia}z=ia?(ia!==ja[0]&&ja.unshift(ia),c[ia]):n}if(200<=a&&300>a||304===a)if(k.Cu&&(B=G.getResponseHeader("Last-Modified"),B&&(x.lastModified[d]=B),B=G.getResponseHeader("Etag"),B&&(x.Ol[d]=B)),304===a)F="notmodified",i=t;else{var ba;a:{c=k;i=z;var Q;B=c.fd.slice();F=B[0];J={};aa=0;c.Pt&&(i=c.Pt(i,c.dataType));if(B[1])for(ba in c.mh)J[ba.toLowerCase()]=
c.mh[ba];for(;l=B[++aa];)if("*"!==l){if("*"!==F&&F!==l){ba=J[F+" "+l]||J["* "+l];if(!ba)for(Q in J)if(y=Q.split(" "),y[1]===l&&(ba=J[F+" "+y[0]]||J["* "+y[0]])){ba===t?ba=J[Q]:J[Q]!==t&&(l=y[0],B.splice(aa--,0,l));break}if(ba!==t)if(ba&&c["throws"])i=ba(i);else try{i=ba(i)}catch(T){ba={state:"parsererror",error:ba?T:"No conversion from "+F+" to "+l};break a}}F=l}ba={state:"success",data:i}}i=ba;F=i.state;l=i.data;y=i.error;i=!y}else if(y=F,!F||a)F="error",0>a&&(a=0);G.status=a;G.statusText=(b||F)+
"";i?s.resolveWith(p,[l,F,G]):s.rejectWith(p,[G,F,y]);G.Gq(v);v=Xa;j&&r.trigger("ajax"+(i?"Success":"Error"),[G,k,i?l:y]);q.fireWith(p,[G,F]);j&&(r.trigger("ajaxComplete",[G,k]),--x.Qc||x.event.trigger("ajaxStop"))}}"object"==typeof a&&(b=a,a=Xa);var b=b||{},d,e,f,g,h,i,j,l,k=x.ajaxSetup({},b),p=k.context||k,r=p!==k&&(p.nodeType||p instanceof x)?x(p):x.event,s=x.Deferred(),q=x.Callbacks("once memory"),v=k.Gq||{},y={},F={},C=0,z="canceled",G={readyState:0,setRequestHeader:function(a,b){if(!C){var c=
a.toLowerCase(),a=F[c]=F[c]||a;y[a]=b}return this},getAllResponseHeaders:function(){return 2===C?e:u},getResponseHeader:function(a){var b;if(2===C){if(!f)for(f={};b=zh.exec(e);)f[b[1].toLowerCase()]=b[2];b=f[a.toLowerCase()]}return b===Xa?u:b},overrideMimeType:function(a){return C||(k.sm=a),this},abort:function(a){return a=a||z,g&&g.abort(a),c(0,a),this}};s.promise(G);G.success=G.done;G.error=G.fail;G.complete=q.add;G.Gq=function(a){if(a){var b;if(2>C)for(b in a)v[b]=[v[b],a[b]];else b=a[G.status],
G.always(b)}return this};k.url=((a||k.url)+"").replace(yh,"").replace(Bh,wh[1]+"//");k.fd=x.trim(k.dataType||"*").toLowerCase().split(id);k.hg==u&&(i=Fh.exec(k.url.toLowerCase()),k.hg=!(!i||i[1]===wh[1]&&i[2]===wh[2]&&(i[3]||("http:"===i[1]?80:443))==(wh[3]||("http:"===wh[1]?80:443))));k.data&&k.cw&&"string"!=typeof k.data&&(k.data=x.param(k.data,k.ex));od(pd,k,b,G);if(2===C)return G;j=k.global;k.type=k.type.toUpperCase();k.Xl=!Ah.test(k.type);j&&0===x.Qc++&&x.event.trigger("ajaxStart");if(!k.Xl&&
(k.data&&(k.url+=(Ch.test(k.url)?"&":"?")+k.data,delete k.data),d=k.url,k.de===w)){i=x.now();var B=k.url.replace(Eh,"$1_="+i);k.url=B+(B===k.url?(Ch.test(k.url)?"&":"?")+"_="+i:"")}(k.data&&k.Xl&&k.contentType!==w||b.contentType)&&G.setRequestHeader("Content-Type",k.contentType);k.Cu&&(d=d||k.url,x.lastModified[d]&&G.setRequestHeader("If-Modified-Since",x.lastModified[d]),x.Ol[d]&&G.setRequestHeader("If-None-Match",x.Ol[d]));G.setRequestHeader("Accept",k.fd[0]&&k.Ni[k.fd[0]]?k.Ni[k.fd[0]]+("*"!==
k.fd[0]?", "+Xh+"; q=0.01":""):k.Ni["*"]);for(l in k.headers)G.setRequestHeader(l,k.headers[l]);if(!k.rt||k.rt.call(p,G,k)!==w&&2!==C){z="abort";for(l in{success:1,error:1,complete:1})G[l](k[l]);if(g=od(Wh,k,b,G)){G.readyState=1;j&&r.trigger("ajaxSend",[G,k]);k.async&&0<k.timeout&&(h=setTimeout(function(){G.abort("timeout")},k.timeout));try{C=1,g.send(y,c)}catch(J){if(!(2>C))throw J;c(-1,J)}}else c(-1,"No Transport");return G}return G.abort()},Qc:0,lastModified:{},Ol:{}});
var Zh=[],$h=/\?/,ai=/(=)\?(?=&|$)|\?\?/,bi=x.now();x.ajaxSetup({xp:"callback",zg:function(){var a=Zh.pop()||x.expando+"_"+bi++;return this[a]=t,a}});
x.ajaxPrefilter("json jsonp",function(a,b,c){var d,e,f,g=a.data,h=a.url,i=a.xp!==w,j=i&&ai.test(h),l=i&&!j&&"string"==typeof g&&!(a.contentType||"").indexOf("application/x-www-form-urlencoded")&&ai.test(g);if("jsonp"===a.fd[0]||j||l)return d=a.zg=x.isFunction(a.zg)?a.zg():a.zg,e=Ja[d],j?a.url=h.replace(ai,"$1"+d):l?a.data=g.replace(ai,"$1"+d):i&&(a.url+=($h.test(h)?"&":"?")+a.xp+"="+d),a.mh["script json"]=function(){return f||x.error(d+" was not called"),f[0]},a.fd[0]="json",Ja[d]=function(){f=arguments},
c.always(function(){Ja[d]=e;a[d]&&(a.zg=b.zg,Zh.push(d));f&&x.isFunction(e)&&e(f[0]);f=e=Xa}),"script"});x.ajaxSetup({Ni:{qw:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{qw:/javascript|ecmascript/},mh:{"text script":function(a){return x.globalEval(a),a}}});x.ajaxPrefilter("script",function(a){a.de===Xa&&(a.de=w);a.hg&&(a.type="GET",a.global=w)});
x.zo("script",function(a){if(a.hg){var b,c=cd.head||cd.getElementsByTagName("head")[0]||cd.documentElement;return{send:function(d,e){b=cd.createElement("script");b.async="async";a.rw&&(b.charset=a.rw);b.src=a.url;b.onload=b.onreadystatechange=function(a,d){if(d||!b.readyState||/loaded|complete/.test(b.readyState))b.onload=b.onreadystatechange=u,c&&b.parentNode&&c.removeChild(b),b=Xa,d||e(200,"success")};c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(0,1)}}}});
var ci,di=Ja.ActiveXObject?function(){for(var a in ci)ci[a](0,1)}:w,ei=0;x.af.hr=Ja.ActiveXObject?function(){var a;if(!(a=!this.vp&&rd()))a:{try{a=new Ja.ActiveXObject("Microsoft.XMLHTTP");break a}catch(b){}a=n}return a}:rd;var fi=x.af.hr();x.extend(x.support,{ajax:!!fi,Jt:!!fi&&"withCredentials"in fi});
x.support.ajax&&x.zo(function(a){if(!a.hg||x.support.Jt){var b;return{send:function(c,d){var e,f,g=a.hr();a.nx?g.open(a.type,a.url,a.async,a.nx,a.Wv):g.open(a.type,a.url,a.async);if(a.ir)for(f in a.ir)g[f]=a.ir[f];a.sm&&g.overrideMimeType&&g.overrideMimeType(a.sm);!a.hg&&!c["X-Requested-With"]&&(c["X-Requested-With"]="XMLHttpRequest");try{for(f in c)g.setRequestHeader(f,c[f])}catch(h){}g.send(a.Xl&&a.data||u);b=function(c,f){var h,k,p,r,s;try{if(b&&(f||4===g.readyState))if(b=Xa,e&&(g.onreadystatechange=
x.noop,di&&delete ci[e]),f)4!==g.readyState&&g.abort();else{h=g.status;p=g.getAllResponseHeaders();r={};(s=g.responseXML)&&s.documentElement&&(r.xml=s);try{r.text=g.responseText}catch(q){}try{k=g.statusText}catch(v){k=""}!h&&a.vp&&!a.hg?h=r.text?200:404:1223===h&&(h=204)}}catch(y){f||d(-1,y)}r&&d(h,k,r,p)};a.async?4===g.readyState?setTimeout(b,0):(e=++ei,di&&(ci||(ci={},x(Ja).unload(di)),ci[e]=b),g.onreadystatechange=b):b()},abort:function(){b&&b(0,1)}}}});
var td,gi,hi=/^(?:toggle|show|hide)$/,ii=RegExp("^(?:([-+])=|)("+ee+")([a-z%]*)$","i"),ji=/queueHooks$/,vd=[function(a,b,c){var d,e,f,g,h,i,j=this,l=a.style,k={},p=[],r=a.nodeType&&pc(a);c.queue||(h=x.kl(a,"fx"),h.mk==u&&(h.mk=0,i=h.empty.fire,h.empty.fire=function(){h.mk||i()}),h.mk++,j.always(function(){j.always(function(){h.mk--;x.queue(a,"fx").length||h.empty.fire()})}));1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[l.overflow,l.overflowX,l.overflowY],"inline"===x.css(a,"display")&&
"none"===x.css(a,"float")&&(!x.support.rp||"inline"===sc(a.nodeName)?l.display="inline-block":l.zoom=1));c.overflow&&(l.overflow="hidden",x.support.zq||j.done(function(){l.overflow=c.overflow[0];l.overflowX=c.overflow[1];l.overflowY=c.overflow[2]}));for(d in b)f=b[d],hi.exec(f)&&(delete b[d],e=e||"toggle"===f,f!==(r?"hide":"show")&&p.push(d));if(b=p.length){f=x.ia(a,"fxshow")||x.ia(a,"fxshow",{});"hidden"in f&&(r=f.hidden);e&&(f.hidden=!r);r?x(a).show():j.done(function(){x(a).hide()});j.done(function(){var b;
x.removeData(a,"fxshow",t);for(b in k)x.style(a,b,k[b])});for(d=0;d<b;d++)e=p[d],g=j.Oo(e,r?f[e]:0),k[e]=f[e]||x.style(a,e),e in f||(f[e]=g.start,r&&(g.end=g.start,g.start="width"===e||"height"===e?1:0))}}],wd={"*":[function(a,b){var c,d,e=this.Oo(a,b),f=ii.exec(b),g=e.Dl(),h=+g||0,i=1,j=20;if(f){c=+f[2];d=f[3]||(x.Cl[a]?"":"px");if("px"!==d&&h){h=x.css(e.na,a,t)||c||1;do i=i||".5",h/=i,x.style(e.na,a,h+d);while(i!==(i=e.Dl()/g)&&1!==i&&--j)}e.br=d;e.start=h;e.end=f[1]?h+(f[1]+1)*c:c}return e}]};
x.jn=x.extend(ud,{PE:function(a,b){x.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;d<e;d++)c=a[d],wd[c]=wd[c]||[],wd[c].unshift(b)},vD:function(a,b){b?vd.unshift(a):vd.push(a)}});x.ps=Ed;
Ed.prototype={constructor:Ed,init:function(a,b,c,d,e,f){this.na=a;this.prop=c;this.uh=e||"swing";this.options=b;this.start=this.now=this.Dl();this.end=d;this.br=f||(x.Cl[c]?"":"px")},Dl:function(){var a=Ed.pd[this.prop];return a&&a.get?a.get(this):Ed.pd.Fd.get(this)},pq:function(a){var b,c=Ed.pd[this.prop];return this.options.duration?this.Qj=b=x.uh[this.uh](a,this.options.duration*a,0,1,this.options.duration):this.Qj=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.na,
this.now,this),c&&c.set?c.set(this):Ed.pd.Fd.set(this),this}};Ed.prototype.init.prototype=Ed.prototype;Ed.pd={Fd:{get:function(a){var b;return a.na[a.prop]==u||a.na.style&&a.na.style[a.prop]!=u?(b=x.css(a.na,a.prop,w,""),!b||"auto"===b?0:b):a.na[a.prop]},set:function(a){x.fx.step[a.prop]?x.fx.step[a.prop](a):a.na.style&&(a.na.style[x.nh[a.prop]]!=u||x.cssHooks[a.prop])?x.style(a.na,a.prop,a.now+a.br):a.na[a.prop]=a.now}}};
Ed.pd.scrollTop=Ed.pd.scrollLeft={set:function(a){a.na.nodeType&&a.na.parentNode&&(a.na[a.prop]=a.now)}};x.each(["toggle","show","hide"],function(a,b){var c=x.fn[b];x.fn[b]=function(d,e,f){return d==u||"boolean"==typeof d||!a&&x.isFunction(d)&&x.isFunction(e)?c.apply(this,arguments):this.animate(Fd(b,t),d,e,f)}});
x.fn.extend({fadeTo:function(a,b,c,d){return this.filter(pc).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){function e(){var b=ud(this,x.extend({},a),g);f&&b.stop(t)}var f=x.isEmptyObject(a),g=x.speed(b,c,d);return f||g.queue===w?this.each(e):this.queue(g.queue,e)},stop:function(a,b,c){function d(a){var b=a.stop;delete a.stop;b(c)}return"string"!=typeof a&&(c=b,b=a,a=Xa),b&&a!==w&&this.queue(a||"fx",[]),this.each(function(){var b=t,f=a!=u&&a+"queueHooks",g=x.jk,
h=x.ia(this);if(f)h[f]&&h[f].stop&&d(h[f]);else for(f in h)h[f]&&h[f].stop&&ji.test(f)&&d(h[f]);for(f=g.length;f--;)g[f].na===this&&(a==u||g[f].queue===a)&&(g[f].$s.stop(c),b=w,g.splice(f,1));(b||!c)&&x.dequeue(this,a)})}});x.each({slideDown:Fd("show"),slideUp:Fd("hide"),slideToggle:Fd("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){x.fn[a]=function(a,d,e){return this.animate(b,a,d,e)}});
x.speed=function(a,b,c){var d=a&&"object"==typeof a?x.extend({},a):{complete:c||!c&&b||x.isFunction(a)&&a,duration:a,uh:c&&b||b&&!x.isFunction(b)&&b};d.duration=x.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in x.fx.gk?x.fx.gk[d.duration]:x.fx.gk.Fd;if(d.queue==u||d.queue===t)d.queue="fx";return d.Up=d.complete,d.complete=function(){x.isFunction(d.Up)&&d.Up.call(this);d.queue&&x.dequeue(this,d.queue)},d};x.uh={zB:function(a){return a},yE:function(a){return 0.5-Math.cos(a*Math.PI)/2}};
x.jk=[];x.fx=Ed.prototype.init;x.fx.bx=function(){var a,b=x.jk,c=0;for(td=x.now();c<b.length;c++)a=b[c],!a()&&b[c]===a&&b.splice(c--,1);b.length||x.fx.stop();td=Xa};x.fx.cx=function(a){a()&&x.jk.push(a)&&!gi&&(gi=setInterval(x.fx.bx,x.fx.interval))};x.fx.interval=13;x.fx.stop=function(){clearInterval(gi);gi=u};x.fx.gk={qE:600,qA:200,Fd:400};x.fx.step={};x.Cc&&x.Cc.lg&&(x.Cc.lg.vy=function(a){return x.grep(x.jk,function(b){return a===b.na}).length});var ki=/^(?:body|html)$/i;
x.fn.offset=function(a){if(arguments.length)return a===Xa?this:this.each(function(b){x.offset.vw(this,a,b)});var b,c,d,e,f,g,h,i={top:0,left:0},j=this[0],l=j&&j.ownerDocument;if(l)return(c=l.body)===j?x.offset.tt(j):(b=l.documentElement,x.contains(b,j)?("undefined"!=typeof j.getBoundingClientRect&&(i=j.getBoundingClientRect()),d=Gd(l),e=b.clientTop||c.clientTop||0,f=b.clientLeft||c.clientLeft||0,g=d.pageYOffset||b.scrollTop,h=d.pageXOffset||b.scrollLeft,{top:i.top+g-e,left:i.left+h-f}):i)};
x.offset={tt:function(a){var b=a.offsetTop,c=a.offsetLeft;return x.support.Vt&&(b+=parseFloat(x.css(a,"marginTop"))||0,c+=parseFloat(x.css(a,"marginLeft"))||0),{top:b,left:c}},vw:function(a,b,c){var d=x.css(a,"position");"static"===d&&(a.style.position="relative");var e=x(a),f=e.offset(),g=x.css(a,"top"),h=x.css(a,"left"),i={},j={},l,k;("absolute"===d||"fixed"===d)&&-1<x.inArray("auto",[g,h])?(j=e.position(),l=j.top,k=j.left):(l=parseFloat(g)||0,k=parseFloat(h)||0);x.isFunction(b)&&(b=b.call(a,c,
f));b.top!=u&&(i.top=b.top-f.top+l);b.left!=u&&(i.left=b.left-f.left+k);"using"in b?b.YE.call(a,i):e.css(i)}};
x.fn.extend({position:function(){if(this[0]){var a=this[0],b=this.offsetParent(),c=this.offset(),d=ki.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat(x.css(a,"marginTop"))||0,c.left-=parseFloat(x.css(a,"marginLeft"))||0,d.top+=parseFloat(x.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(x.css(b[0],"borderLeftWidth"))||0,{top:c.top-d.top,left:c.left-d.left}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||cd.body;a&&!ki.test(a.nodeName)&&"static"===
x.css(a,"position");)a=a.offsetParent;return a||cd.body})}});x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);x.fn[a]=function(d){return x.Gd(this,function(a,d,g){var h=Gd(a);if(g===Xa)return h?b in h?h[b]:h.document.documentElement[d]:a[d];h?h.scrollTo(c?x(h).scrollLeft():g,c?g:x(h).scrollTop()):a[d]=g},a,d,arguments.length,u)}});
x.each({Px:"height",jy:"width"},function(a,b){x.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){x.fn[d]=function(d,f){var g=arguments.length&&(c||"boolean"!=typeof d),h=c||(d===t||f===t?"margin":"border");return x.Gd(this,function(b,c,d){var e;return x.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):d===Xa?x.css(b,c,d,h):x.style(b,c,d,h)},b,g?d:Xa,g,u)}})});
Ja.jQuery=Ja.pk=x;"function"==typeof define&&define.Zs&&define.Zs.jQuery&&define("jquery",[],function(){return x});"use strict";var THREE=THREE||{Ln:"54dev"};self.console=self.console||{info:da(),log:da(),debug:da(),warn:da(),error:da()};self.Gr=self.Gr||Array;self.Er=self.Er||Array;String.prototype.kj=String.prototype.kj||function(a){var a=String(a),b=this.lastIndexOf(a);return(-1<b&&b)===this.length-a.length};
String.prototype.trim=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")};for(var li=0,mi=["ms","moz","webkit","o"],ni=0;ni<mi.length&&!window.requestAnimationFrame;++ni)window.requestAnimationFrame=window[mi[ni]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[mi[ni]+"CancelAnimationFrame"]||window[mi[ni]+"CancelRequestAnimationFrame"];
n===window.requestAnimationFrame&&(window.requestAnimationFrame=function(a){var b=Date.now(),c=Math.max(0,16-(b-li)),d=window.setTimeout(function(){a(b+c)},c);li=b+c;return d});window.cancelAnimationFrame=window.cancelAnimationFrame||function(a){window.clearTimeout(a)};THREE.yr=0;THREE.xr=1;THREE.ri=2;THREE.Gx=3;THREE.Fr=0;THREE.Mx=1;THREE.Qe=0;THREE.Lf=1;THREE.sc=2;THREE.Tx=0;THREE.Pg=1;THREE.Oc=2;THREE.Sg=0;THREE.Pe=1;THREE.Wg=2;THREE.En=0;THREE.Tg=1;THREE.hn=2;THREE.Xn=3;THREE.Pr=4;THREE.qn=5;
THREE.gn=100;THREE.hs=101;THREE.as=102;THREE.ws=200;THREE.Tr=201;THREE.gs=202;THREE.Wr=203;THREE.Wn=204;THREE.Fn=205;THREE.Br=206;THREE.Ur=207;THREE.Cr=208;THREE.Vr=209;THREE.fs=210;THREE.yi=0;THREE.zn=1;THREE.wx=2;THREE.$n=da();THREE.Ex=da();THREE.wr=da();THREE.ds=da();THREE.$x=da();THREE.Nc=1E3;THREE.Le=1001;THREE.Fk=1002;THREE.Rg=1003;THREE.Dn=1004;THREE.Cn=1005;THREE.Td=1006;THREE.Kr=1007;THREE.Dk=1008;THREE.Pk=1009;THREE.qr=1010;THREE.cs=1011;THREE.us=1012;THREE.Hr=1013;THREE.qs=1014;
THREE.uk=1015;THREE.rs=1016;THREE.ss=1017;THREE.ts=1018;THREE.mr=1019;THREE.Hk=1020;THREE.Vg=1021;THREE.Mr=1022;THREE.Lr=1023;THREE.On=2001;THREE.Zr=2002;THREE.Mn=2003;THREE.Nn=2004;THREE.mn=function(a){this.it=n!==a?a:t;this.elapsedTime=this.Am=this.startTime=0;this.Sj=w};THREE.mn.prototype.start=function(){this.Am=this.startTime=Date.now();this.Sj=t};
THREE.mn.prototype.stop=function(){var a=0;this.it&&!this.Sj&&this.start();if(this.Sj){var b=Date.now(),a=0.001*(b-this.Am);this.Am=b;this.elapsedTime+=a}this.Sj=w};THREE.t=function(a){n!==a&&this.set(a);return this};
THREE.t.prototype={constructor:THREE.t,g:1,f:1,c:1,copy:function(a){this.g=a.g;this.f=a.f;this.c=a.c;return this},set:function(a){switch(typeof a){case "number":oi(this,a);break;case "string":/^rgb\((\d+),(\d+),(\d+)\)$/i.test(a)?(a=/^rgb\((\d+),(\d+),(\d+)\)$/i.exec(a),this.g=Math.min(255,parseInt(a[1],10))/255,this.f=Math.min(255,parseInt(a[2],10))/255,this.c=Math.min(255,parseInt(a[3],10))/255):/^rgb\((\d+)\%,(\d+)\%,(\d+)\%\)$/i.test(a)?(a=/^rgb\((\d+)\%,(\d+)\%,(\d+)\%\)$/i.exec(a),this.g=Math.min(100,
parseInt(a[1],10))/100,this.f=Math.min(100,parseInt(a[2],10))/100,this.c=Math.min(100,parseInt(a[3],10))/100):/^\#([0-9a-f]{6})$/i.test(a)?(a=/^\#([0-9a-f]{6})$/i.exec(a),oi(this,parseInt(a[1],16))):/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(a)?(a=/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(a),oi(this,parseInt(a[1]+a[1]+a[2]+a[2]+a[3]+a[3],16))):/^(\w+)$/i.test(a)&&oi(this,THREE.tr[a])}},aa:function(a,b){this.g+=(a.g-this.g)*b;this.f+=(a.f-this.f)*b;this.c+=(a.c-this.c)*b;return this},clone:function(){return pi(new THREE.t,
this.g,this.f,this.c)}};function qi(a){return"rgb("+(255*a.g|0)+","+(255*a.f|0)+","+(255*a.c|0)+")"}function oi(a,b){b=Math.floor(b);a.g=(b>>16&255)/255;a.f=(b>>8&255)/255;a.c=(b&255)/255}function ri(a){return 255*a.g<<16^255*a.f<<8^255*a.c<<0}function pi(a,b,c,d){a.g=b;a.f=c;a.c=d;return a}function si(a,b){a.g=b.g*b.g;a.f=b.f*b.f;a.c=b.c*b.c}
THREE.tr={uy:15792383,xy:16444375,Ay:65535,By:8388564,Fy:15794175,Iy:16119260,Ny:16770244,Oy:0,Py:16772045,blue:255,Qy:9055202,Vy:10824234,Xy:14596231,Yy:6266528,fz:8388352,hz:13789470,sz:16744272,tz:6591981,uz:16775388,xz:14423100,Az:65535,Bz:139,Cz:35723,Dz:12092939,Ez:11119017,Fz:25600,Gz:11119017,Hz:12433259,Iz:9109643,Jz:5597999,Kz:16747520,Lz:10040012,Mz:9109504,Nz:15308410,Oz:9419919,Pz:4734347,Qz:3100495,Rz:3100495,Sz:52945,Tz:9699539,Yz:16716947,Zz:49151,aA:6908265,bA:6908265,eA:2003199,
tA:11674146,uA:16775920,wA:2263842,zA:16711935,AA:14474460,GA:16316671,HA:16766720,IA:14329120,JA:8421504,green:32768,KA:11403055,LA:8421504,QA:15794160,RA:16738740,SA:13458524,TA:4915330,aB:16777200,bB:15787660,dB:15132410,eB:16773365,fB:8190976,hB:16775885,iB:11393254,jB:15761536,kB:14745599,lB:16448210,mB:13882323,nB:9498256,oB:13882323,pB:16758465,qB:16752762,rB:2142890,sB:8900346,tB:7833753,uB:7833753,vB:11584734,wB:16777184,xB:65280,yB:3329330,AB:16445670,HB:16711935,cC:8388608,gC:6737322,hC:205,
iC:12211667,jC:9662683,kC:3978097,lC:8087790,mC:64154,nC:4772300,oC:13047173,pC:1644912,tC:16121850,uC:16770273,vC:16770229,RC:16768685,SC:128,XC:16643558,YC:8421376,ZC:7048739,bD:16753920,cD:16729344,dD:14315734,gD:15657130,hD:10025880,iD:11529966,jD:14381203,kD:16773077,nD:16767673,oD:13468991,rD:16761035,sD:14524637,uD:11591910,xD:8388736,red:16711680,QD:12357519,TD:4286945,UD:9127187,VD:16416882,WD:16032864,YD:3050327,ZD:16774638,gE:10506797,iE:12632256,mE:8900331,nE:6970061,oE:7372944,pE:7372944,
rE:16775930,sE:65407,tE:4620980,tan:13808780,CE:32896,GE:14204888,HE:16737095,OE:4251856,aF:15631086,gF:16113331,hF:16777215,iF:16119285,mF:16776960,nF:10145074};THREE.k=function(a,b){this.x=a||0;this.y=b||0};
THREE.k.prototype={constructor:THREE.k,set:function(a,b){this.x=a;this.y=b;return this},Wj:function(a){this.y=a;return this},copy:function(a){this.x=a.x;this.y=a.y;return this},add:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this},u:function(a){this.x+=a.x;this.y+=a.y;return this},sub:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this},Wa:function(a){this.x-=a.x;this.y-=a.y;return this},T:function(a){this.x*=a;this.y*=a;return this},gd:function(a){a?(this.x/=a,this.y/=a):this.set(0,0);
return this},Gj:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);return this},$i:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);return this},Kj:function(){return this.T(-1)},fa:function(a){return this.x*a.x+this.y*a.y},Fh:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.Fh())},normalize:function(){return this.gd(this.length())},Sb:function(a){return Math.sqrt(this.sh(a))},sh:function(a){var b=
this.x-a.x,a=this.y-a.y;return b*b+a*a},Uj:function(a){return this.normalize().T(a)},aa:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;return this},kb:function(a){return a.x===this.x&&a.y===this.y},clone:function(){return new THREE.k(this.x,this.y)}};THREE.d=function(a,b,c){this.x=a||0;this.y=b||0;this.a=c||0};
THREE.d.prototype={constructor:THREE.d,set:function(a,b,c){this.x=a;this.y=b;this.a=c;return this},Wj:function(a){this.y=a;return this},copy:function(a){this.x=a.x;this.y=a.y;this.a=a.a;return this},add:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.a=a.a+b.a;return this},u:function(a){this.x+=a.x;this.y+=a.y;this.a+=a.a;return this},sub:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.a=a.a-b.a;return this},Wa:function(a){this.x-=a.x;this.y-=a.y;this.a-=a.a;return this},multiply:function(a,b){this.x=
a.x*b.x;this.y=a.y*b.y;this.a=a.a*b.a;return this},sf:function(a){this.x*=a.x;this.y*=a.y;this.a*=a.a;return this},T:function(a){this.x*=a;this.y*=a;this.a*=a;return this},gd:function(a){a?(this.x/=a,this.y/=a,this.a/=a):this.a=this.y=this.x=0;return this},Gj:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);this.a>a.a&&(this.a=a.a);return this},$i:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);this.a<a.a?this.a=a.a:this.a>b.a&&
(this.a=b.a);return this},Kj:function(){return this.T(-1)},fa:function(a){return this.x*a.x+this.y*a.y+this.a*a.a},Fh:function(){return this.x*this.x+this.y*this.y+this.a*this.a},length:function(){return Math.sqrt(this.Fh())},zp:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.a)},normalize:function(){return this.gd(this.length())},Uj:function(a){return this.normalize().T(a)},aa:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.a+=(a.a-this.a)*b;return this},Sb:function(a){return Math.sqrt(this.sh(a))},
sh:function(a){var b=this.x-a.x,c=this.y-a.y,a=this.a-a.a;return b*b+c*c+a*a},kb:function(a){return a.x===this.x&&a.y===this.y&&a.a===this.a},clone:function(){return new THREE.d(this.x,this.y,this.a)}};
function ti(a,b,c){function d(a){return Math.min(Math.max(a,-1),1)}var b=b.elements,e=b[0],f=b[4],g=b[8],h=b[1],i=b[5],j=b[9],l=b[2],k=b[6],b=b[10];n===c||"XYZ"===c?(a.y=Math.asin(d(g)),0.99999>Math.abs(g)?(a.x=Math.atan2(-j,b),a.a=Math.atan2(-f,e)):(a.x=Math.atan2(k,i),a.a=0)):"YXZ"===c?(a.x=Math.asin(-d(j)),0.99999>Math.abs(j)?(a.y=Math.atan2(g,b),a.a=Math.atan2(h,i)):(a.y=Math.atan2(-l,e),a.a=0)):"ZXY"===c?(a.x=Math.asin(d(k)),0.99999>Math.abs(k)?(a.y=Math.atan2(-l,b),a.a=Math.atan2(-f,i)):(a.y=
0,a.a=Math.atan2(h,e))):"ZYX"===c?(a.y=Math.asin(-d(l)),0.99999>Math.abs(l)?(a.x=Math.atan2(k,b),a.a=Math.atan2(h,e)):(a.x=0,a.a=Math.atan2(-f,i))):"YZX"===c?(a.a=Math.asin(d(h)),0.99999>Math.abs(h)?(a.x=Math.atan2(-j,i),a.y=Math.atan2(-l,e)):(a.x=0,a.y=Math.atan2(g,b))):"XZY"===c&&(a.a=Math.asin(-d(f)),0.99999>Math.abs(f)?(a.x=Math.atan2(k,i),a.y=Math.atan2(g,e)):(a.x=Math.atan2(-j,b),a.y=0))}function ui(a,b){var c=a.x,d=a.y,e=a.a;a.x=d*b.a-e*b.y;a.y=e*b.x-c*b.a;a.a=c*b.y-d*b.x;return a}
function vi(a,b,c){a.x=b.y*c.a-b.a*c.y;a.y=b.a*c.x-b.x*c.a;a.a=b.x*c.y-b.y*c.x;return a}THREE.xc=function(a,b,c,d){this.x=a||0;this.y=b||0;this.a=c||0;this.j=n!==d?d:1};
THREE.xc.prototype={constructor:THREE.xc,set:function(a,b,c,d){this.x=a;this.y=b;this.a=c;this.j=d;return this},Wj:function(a){this.y=a;return this},copy:function(a){this.x=a.x;this.y=a.y;this.a=a.a;this.j=n!==a.j?a.j:1;return this},add:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.a=a.a+b.a;this.j=a.j+b.j;return this},u:function(a){this.x+=a.x;this.y+=a.y;this.a+=a.a;this.j+=a.j;return this},sub:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.a=a.a-b.a;this.j=a.j-b.j;return this},Wa:function(a){this.x-=
a.x;this.y-=a.y;this.a-=a.a;this.j-=a.j;return this},T:function(a){this.x*=a;this.y*=a;this.a*=a;this.j*=a;return this},gd:function(a){a?(this.x/=a,this.y/=a,this.a/=a,this.j/=a):(this.a=this.y=this.x=0,this.j=1);return this},Gj:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);this.a>a.a&&(this.a=a.a);this.j>a.j&&(this.j=a.j);return this},$i:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);this.a<a.a?this.a=a.a:this.a>b.a&&(this.a=
b.a);this.j<a.j?this.j=a.j:this.j>b.j&&(this.j=b.j);return this},Kj:function(){return this.T(-1)},fa:function(a){return this.x*a.x+this.y*a.y+this.a*a.a+this.j*a.j},Fh:function(){return this.fa(this)},length:function(){return Math.sqrt(this.Fh())},zp:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.a)+Math.abs(this.j)},normalize:function(){return this.gd(this.length())},Uj:function(a){return this.normalize().T(a)},aa:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.a+=
(a.a-this.a)*b;this.j+=(a.j-this.j)*b;return this},kb:function(a){return a.x===this.x&&a.y===this.y&&a.a===this.a&&a.j===this.j},clone:function(){return new THREE.xc(this.x,this.y,this.a,this.j)}};THREE.Ng=function(a,b){n===a&&n===b?(this.min=new THREE.k,this.max=new THREE.k,this.Hh()):(this.min=a.clone(),this.max=n===b?(new THREE.k).copy(this.min):b.clone())};
THREE.Ng.prototype={constructor:THREE.Ng,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},sq:function(a){if(0<a.length){var b=a[0];this.min.copy(b);this.max.copy(b);for(var c=1,d=a.length;c<d;c++)b=a[c],b.x<this.min.x?this.min.x=b.x:b.x>this.max.x&&(this.max.x=b.x),b.y<this.min.y?this.min.y=b.y:b.y>this.max.y&&(this.max.y=b.y)}else this.Hh();return this},copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},Hh:function(){this.min.x=this.min.y=Infinity;this.max.x=
this.max.y=-Infinity;return this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},rb:function(){return(new THREE.k).add(this.min,this.max).T(0.5)},size:function(){return(new THREE.k).sub(this.max,this.min)},Pl:function(a){this.min.Wa(a);this.max.u(a);return this},getParameter:function(a){return new THREE.k((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y))},ke:function(a){return THREE.Ng.Ea.copy(a).$i(this.min,this.max).Wa(a).length()},translate:function(a){this.min.u(a);
this.max.u(a);return this},scale:function(a){a=this.size().T(0.5*(a-1));this.Pl(a);return this},kb:function(a){return a.min.kb(this.min)&&a.max.kb(this.max)},clone:function(){return(new THREE.Ng).copy(this)}};THREE.Ng.Ea=new THREE.k;THREE.Ke=function(a,b){n===a&&n===b?(this.min=new THREE.d,this.max=new THREE.d,this.Hh()):(this.min=a.clone(),this.max=n===b?(new THREE.d).copy(this.min):b.clone())};
THREE.Ke.prototype={constructor:THREE.Ke,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},sq:function(a){if(0<a.length){var b=a[0];this.min.copy(b);this.max.copy(b);for(var c=1,d=a.length;c<d;c++)b=a[c],b.x<this.min.x?this.min.x=b.x:b.x>this.max.x&&(this.max.x=b.x),b.y<this.min.y?this.min.y=b.y:b.y>this.max.y&&(this.max.y=b.y),b.a<this.min.a?this.min.a=b.a:b.a>this.max.a&&(this.max.a=b.a)}else this.Hh();return this},copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},
Hh:function(){this.min.x=this.min.y=this.min.a=Infinity;this.max.x=this.max.y=this.max.a=-Infinity;return this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.a<this.min.a},rb:function(){return(new THREE.d).add(this.min,this.max).T(0.5)},size:function(){return(new THREE.d).sub(this.max,this.min)},Pl:function(a){this.min.Wa(a);this.max.u(a);return this},getParameter:function(a){return new THREE.d((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-
this.min.y),(a.a-this.min.a)/(this.max.a-this.min.a))},ke:function(a){return THREE.Ke.Ea.copy(a).$i(this.min,this.max).Wa(a).length()},translate:function(a){this.min.u(a);this.max.u(a);return this},scale:function(a){a=this.size().T(0.5*(a-1));this.Pl(a);return this},kb:function(a){return a.min.kb(this.min)&&a.max.kb(this.max)},clone:function(){return(new THREE.Ke).copy(this)}};THREE.Ke.Ea=new THREE.d;THREE.Vd=function(){this.elements=new Float32Array(9)};
THREE.Vd.prototype={constructor:THREE.Vd,X:function(a){var b=this.elements,c=a.x,d=a.y,e=a.a;a.x=b[0]*c+b[3]*d+b[6]*e;a.y=b[1]*c+b[4]*d+b[7]*e;a.a=b[2]*c+b[5]*d+b[8]*e;return a},wm:function(a){for(var b=THREE.Vd.Ea,c=0,d=a.length;c<d;c+=3)b.x=a[c],b.y=a[c+1],b.a=a[c+2],this.X(b),a[c]=b.x,a[c+1]=b.y,a[c+2]=b.a;return a},Gb:function(a){var b=a.elements,a=b[10]*b[5]-b[6]*b[9],c=-b[10]*b[1]+b[2]*b[9],d=b[6]*b[1]-b[2]*b[5],e=-b[10]*b[4]+b[6]*b[8],f=b[10]*b[0]-b[2]*b[8],g=-b[6]*b[0]+b[2]*b[4],h=b[9]*b[4]-
b[5]*b[8],i=-b[9]*b[0]+b[1]*b[8],j=b[5]*b[0]-b[1]*b[4],b=b[0]*a+b[1]*e+b[2]*h;0===b&&console.warn("Matrix3.getInverse(): determinant == 0");var b=1/b,l=this.elements;l[0]=b*a;l[1]=b*c;l[2]=b*d;l[3]=b*e;l[4]=b*f;l[5]=b*g;l[6]=b*h;l[7]=b*i;l[8]=b*j;return this},ii:function(){var a,b=this.elements;a=b[1];b[1]=b[3];b[3]=a;a=b[2];b[2]=b[6];b[6]=a;a=b[5];b[5]=b[7];b[7]=a;return this}};THREE.Vd.Ea=new THREE.d;
THREE.D=function(a,b,c,d,e,f,g,h,i,j,l,k,p,r,s,q){this.elements=new Float32Array(16);this.set(n!==a?a:1,b||0,c||0,d||0,e||0,n!==f?f:1,g||0,h||0,i||0,j||0,n!==l?l:1,k||0,p||0,r||0,s||0,n!==q?q:1)};
THREE.D.prototype={constructor:THREE.D,set:function(a,b,c,d,e,f,g,h,i,j,l,k,p,r,s,q){var v=this.elements;v[0]=a;v[4]=b;v[8]=c;v[12]=d;v[1]=e;v[5]=f;v[9]=g;v[13]=h;v[2]=i;v[6]=j;v[10]=l;v[14]=k;v[3]=p;v[7]=r;v[11]=s;v[15]=q;return this},copy:function(a){a=a.elements;this.set(a[0],a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15]);return this},tb:function(a,b,c){var d=this.elements,e=THREE.D.Ea,f=THREE.D.Yd,g=THREE.D.Ji;g.sub(a,b).normalize();0===g.length()&&(g.a=1);vi(e,
c,g).normalize();0===e.length()&&(g.x+=1E-4,vi(e,c,g).normalize());vi(f,g,e);d[0]=e.x;d[4]=f.x;d[8]=g.x;d[1]=e.y;d[5]=f.y;d[9]=g.y;d[2]=e.a;d[6]=f.a;d[10]=g.a;return this},multiply:function(a,b){var c=a.elements,d=b.elements,e=this.elements,f=c[0],g=c[4],h=c[8],i=c[12],j=c[1],l=c[5],k=c[9],p=c[13],r=c[2],s=c[6],q=c[10],v=c[14],y=c[3],F=c[7],C=c[11],c=c[15],z=d[0],G=d[4],B=d[8],J=d[12],O=d[1],I=d[5],P=d[9],E=d[13],R=d[2],K=d[6],V=d[10],M=d[14],W=d[3],la=d[7],X=d[11],d=d[15];e[0]=f*z+g*O+h*R+i*W;e[4]=
f*G+g*I+h*K+i*la;e[8]=f*B+g*P+h*V+i*X;e[12]=f*J+g*E+h*M+i*d;e[1]=j*z+l*O+k*R+p*W;e[5]=j*G+l*I+k*K+p*la;e[9]=j*B+l*P+k*V+p*X;e[13]=j*J+l*E+k*M+p*d;e[2]=r*z+s*O+q*R+v*W;e[6]=r*G+s*I+q*K+v*la;e[10]=r*B+s*P+q*V+v*X;e[14]=r*J+s*E+q*M+v*d;e[3]=y*z+F*O+C*R+c*W;e[7]=y*G+F*I+C*K+c*la;e[11]=y*B+F*P+C*V+c*X;e[15]=y*J+F*E+C*M+c*d;return this},sf:function(a){return this.multiply(this,a)},T:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=
a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this},X:function(a){var b=this.elements,c=a.x,d=a.y,e=a.a,f=1/(b[3]*c+b[7]*d+b[11]*e+b[15]);a.x=(b[0]*c+b[4]*d+b[8]*e+b[12])*f;a.y=(b[1]*c+b[5]*d+b[9]*e+b[13])*f;a.a=(b[2]*c+b[6]*d+b[10]*e+b[14])*f;return a},wm:function(a){for(var b=THREE.D.Ea,c=0,d=a.length;c<d;c+=3)b.x=a[c],b.y=a[c+1],b.a=a[c+2],this.X(b),a[c]=b.x,a[c+1]=b.y,a[c+2]=b.a;return a},ii:function(){var a=this.elements,b;b=a[1];a[1]=a[4];a[4]=b;b=a[2];a[2]=a[8];a[8]=b;b=a[6];a[6]=a[9];
a[9]=b;b=a[3];a[3]=a[12];a[12]=b;b=a[7];a[7]=a[13];a[13]=b;b=a[11];a[11]=a[14];a[14]=b;return this},Gb:function(a){var b=this.elements,c=a.elements,d=c[0],e=c[4],f=c[8],g=c[12],h=c[1],i=c[5],j=c[9],l=c[13],k=c[2],p=c[6],r=c[10],s=c[14],q=c[3],v=c[7],y=c[11],c=c[15];b[0]=j*s*v-l*r*v+l*p*y-i*s*y-j*p*c+i*r*c;b[4]=g*r*v-f*s*v-g*p*y+e*s*y+f*p*c-e*r*c;b[8]=f*l*v-g*j*v+g*i*y-e*l*y-f*i*c+e*j*c;b[12]=g*j*p-f*l*p-g*i*r+e*l*r+f*i*s-e*j*s;b[1]=l*r*q-j*s*q-l*k*y+h*s*y+j*k*c-h*r*c;b[5]=f*s*q-g*r*q+g*k*y-d*s*y-
f*k*c+d*r*c;b[9]=g*j*q-f*l*q-g*h*y+d*l*y+f*h*c-d*j*c;b[13]=f*l*k-g*j*k+g*h*r-d*l*r-f*h*s+d*j*s;b[2]=i*s*q-l*p*q+l*k*v-h*s*v-i*k*c+h*p*c;b[6]=g*p*q-e*s*q-g*k*v+d*s*v+e*k*c-d*p*c;b[10]=e*l*q-g*i*q+g*h*v-d*l*v-e*h*c+d*i*c;b[14]=g*i*k-e*l*k-g*h*p+d*l*p+e*h*s-d*i*s;b[3]=j*p*q-i*r*q-j*k*v+h*r*v+i*k*y-h*p*y;b[7]=e*r*q-f*p*q+f*k*v-d*r*v-e*k*y+d*p*y;b[11]=f*i*q-e*j*q-f*h*v+d*j*v+e*h*y-d*i*y;b[15]=e*j*k-f*i*k+f*h*p-d*j*p-e*h*r+d*i*r;a=a.elements;b=a[0];c=a[4];d=a[8];e=a[12];f=a[1];g=a[5];h=a[9];i=a[13];j=a[2];
l=a[6];k=a[10];p=a[14];r=a[3];s=a[7];q=a[11];a=a[15];this.T(1/(e*h*l*r-d*i*l*r-e*g*k*r+c*i*k*r+d*g*p*r-c*h*p*r-e*h*j*s+d*i*j*s+e*f*k*s-b*i*k*s-d*f*p*s+b*h*p*s+e*g*j*q-c*i*j*q-e*f*l*q+b*i*l*q+c*f*p*q-b*g*p*q-d*g*j*a+c*h*j*a+d*f*l*a-b*h*l*a-c*f*k*a+b*g*k*a));return this},translate:function(a){var b=this.elements,c=a.x,d=a.y,a=a.a;b[12]=b[0]*c+b[4]*d+b[8]*a+b[12];b[13]=b[1]*c+b[5]*d+b[9]*a+b[13];b[14]=b[2]*c+b[6]*d+b[10]*a+b[14];b[15]=b[3]*c+b[7]*d+b[11]*a+b[15];return this},scale:function(a){var b=
this.elements,c=a.x,d=a.y,a=a.a;b[0]*=c;b[4]*=d;b[8]*=a;b[1]*=c;b[5]*=d;b[9]*=a;b[2]*=c;b[6]*=d;b[10]*=a;b[3]*=c;b[7]*=d;b[11]*=a;return this},clone:function(){var a=this.elements;return new THREE.D(a[0],a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15])}};
function wi(a,b,c,d,e,f,g){a=a.elements;a[0]=2*f/(c-b);a[4]=0;a[8]=(c+b)/(c-b);a[12]=0;a[1]=0;a[5]=2*f/(e-d);a[9]=(e+d)/(e-d);a[13]=0;a[2]=0;a[6]=0;a[10]=-(g+f)/(g-f);a[14]=-2*g*f/(g-f);a[3]=0;a[7]=0;a[11]=-1;a[15]=0}function xi(a,b,c){var d=Math.cos(c),c=Math.sin(c),e=1-d,f=b.x,g=b.y,b=b.a,h=e*f,i=e*g;a.set(h*f+d,h*g-c*b,h*b+c*g,0,h*g+c*b,i*g+d,i*b-c*f,0,h*b-c*g,i*b+c*f,e*b*b+d,0,0,0,0,1);return a}function yi(a,b,c,d){a.set(1,0,0,b,0,1,0,c,0,0,1,d,0,0,0,1);return a}
function zi(a){a=a.elements;return Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],Math.max(a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10])))}function Ai(a,b){var c=a.elements,d=c[4],e=c[5],f=c[6],g=c[7],h=c[8],i=c[9],j=c[10],l=c[11],k=Math.cos(b),b=Math.sin(b);c[4]=k*d+b*h;c[5]=k*e+b*i;c[6]=k*f+b*j;c[7]=k*g+b*l;c[8]=k*h-b*d;c[9]=k*i-b*e;c[10]=k*j-b*f;c[11]=k*l-b*g}
function Bi(a,b){var c=a.elements,b=b.elements,d=THREE.D.Ea,e=1/d.set(b[0],b[1],b[2]).length(),f=1/d.set(b[4],b[5],b[6]).length(),d=1/d.set(b[8],b[9],b[10]).length();c[0]=b[0]*e;c[1]=b[1]*e;c[2]=b[2]*e;c[4]=b[4]*f;c[5]=b[5]*f;c[6]=b[6]*f;c[8]=b[8]*d;c[9]=b[9]*d;c[10]=b[10]*d;return a}
function Ci(a,b,c,d){var e=a.elements,f=THREE.D.Ea,g=THREE.D.Yd,h=THREE.D.Ji;f.set(e[0],e[1],e[2]);g.set(e[4],e[5],e[6]);h.set(e[8],e[9],e[10]);b=b instanceof THREE.d?b:new THREE.d;c=c instanceof THREE.vc?c:new THREE.vc;d=d instanceof THREE.d?d:new THREE.d;d.x=f.length();d.y=g.length();d.a=h.length();b.x=e[12];b.y=e[13];b.a=e[14];e=THREE.D.Qk;e.copy(a);e.elements[0]/=d.x;e.elements[1]/=d.x;e.elements[2]/=d.x;e.elements[4]/=d.y;e.elements[5]/=d.y;e.elements[6]/=d.y;e.elements[8]/=d.a;e.elements[9]/=
d.a;e.elements[10]/=d.a;var a=c,f=e.elements,g=f[0],e=f[4],h=f[8],i=f[1],j=f[5],l=f[9],k=f[2],p=f[6],f=f[10],r=g+j+f;0<r?(g=0.5/Math.sqrt(r+1),a.j=0.25/g,a.x=(p-l)*g,a.y=(h-k)*g,a.a=(i-e)*g):g>j&&g>f?(g=2*Math.sqrt(1+g-j-f),a.j=(p-l)/g,a.x=0.25*g,a.y=(e+i)/g,a.a=(h+k)/g):j>f?(g=2*Math.sqrt(1+j-g-f),a.j=(h-k)/g,a.x=(e+i)/g,a.y=0.25*g,a.a=(l+p)/g):(g=2*Math.sqrt(1+f-g-j),a.j=(i-e)/g,a.x=(h+k)/g,a.y=(l+p)/g,a.a=0.25*g);return[b,c,d]}
function Di(a,b){var c=a.elements,d=b.x,e=b.y,f=b.a,g=b.j,h=d+d,i=e+e,j=f+f,b=d*h,l=d*i,d=d*j,k=e*i,e=e*j,f=f*j,h=g*h,i=g*i,g=g*j;c[0]=1-(k+f);c[4]=l-g;c[8]=d+i;c[1]=l+g;c[5]=1-(b+f);c[9]=e-h;c[2]=d-i;c[6]=e+h;c[10]=1-(b+k)}
function Ei(a,b,c){var a=a.elements,d=b.x,e=b.y,b=b.a,f=Math.cos(d),d=Math.sin(d),g=Math.cos(e),e=Math.sin(e),h=Math.cos(b),b=Math.sin(b);if(n===c||"XYZ"===c){var i=f*h,j=f*b,l=d*h,k=d*b;a[0]=g*h;a[4]=-g*b;a[8]=e;a[1]=j+l*e;a[5]=i-k*e;a[9]=-d*g;a[2]=k-i*e;a[6]=l+j*e;a[10]=f*g}else"YXZ"===c?(i=g*h,j=g*b,l=e*h,k=e*b,a[0]=i+k*d,a[4]=l*d-j,a[8]=f*e,a[1]=f*b,a[5]=f*h,a[9]=-d,a[2]=j*d-l,a[6]=k+i*d,a[10]=f*g):"ZXY"===c?(i=g*h,j=g*b,l=e*h,k=e*b,a[0]=i-k*d,a[4]=-f*b,a[8]=l+j*d,a[1]=j+l*d,a[5]=f*h,a[9]=k-i*
d,a[2]=-f*e,a[6]=d,a[10]=f*g):"ZYX"===c?(i=f*h,j=f*b,l=d*h,k=d*b,a[0]=g*h,a[4]=l*e-j,a[8]=i*e+k,a[1]=g*b,a[5]=k*e+i,a[9]=j*e-l,a[2]=-e,a[6]=d*g,a[10]=f*g):"YZX"===c?(i=f*g,j=f*e,l=d*g,k=d*e,a[0]=g*h,a[4]=k-i*b,a[8]=l*b+j,a[1]=b,a[5]=f*h,a[9]=-d*h,a[2]=-e*h,a[6]=j*b+l,a[10]=i-k*b):"XZY"===c&&(i=f*g,j=f*e,l=d*g,k=d*e,a[0]=g*h,a[4]=-b,a[8]=e*h,a[1]=i*b+k,a[5]=f*h,a[9]=j*b-l,a[2]=l*b-j,a[6]=d*h,a[10]=k*b+i)}function Fi(a,b){var c=a.elements;c[12]=b.x;c[13]=b.y;c[14]=b.a}
function Gi(a){a=a.elements;return THREE.D.Ea.set(a[12],a[13],a[14])}function Hi(a,b,c){a=a.elements;b[c]=a[0];b[c+1]=a[1];b[c+2]=a[2];b[c+3]=a[3];b[c+4]=a[4];b[c+5]=a[5];b[c+6]=a[6];b[c+7]=a[7];b[c+8]=a[8];b[c+9]=a[9];b[c+10]=a[10];b[c+11]=a[11];b[c+12]=a[12];b[c+13]=a[13];b[c+14]=a[14];b[c+15]=a[15]}function Ii(a,b){var c=a.elements,d=b.x,e=b.y,f=b.a,g=b.j;b.x=c[0]*d+c[4]*e+c[8]*f+c[12]*g;b.y=c[1]*d+c[5]*e+c[9]*f+c[13]*g;b.a=c[2]*d+c[6]*e+c[10]*f+c[14]*g;b.j=c[3]*d+c[7]*e+c[11]*f+c[15]*g}
function Ji(a){a.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}THREE.D.Ea=new THREE.d;THREE.D.Yd=new THREE.d;THREE.D.Ji=new THREE.d;THREE.D.Qk=new THREE.D;THREE.D.Bs=new THREE.D;THREE.dd=function(a,b){this.origin=n!==a?a.clone():new THREE.d;this.direction=n!==b?b.clone():new THREE.d};
THREE.dd.prototype={constructor:THREE.dd,set:function(a,b){this.origin.copy(a);this.direction.copy(b);return this},copy:function(a){this.origin.copy(a.origin);this.direction.copy(a.direction);return this},ke:function(a){var b=THREE.dd.Ea.sub(a,this.origin).fa(this.direction);THREE.dd.Ea.copy(this.direction).T(b).u(this.origin);return THREE.dd.Ea.Sb(a)},kb:function(a){return a.origin.kb(this.origin)&&a.direction.kb(this.direction)},clone:function(){return(new THREE.dd).copy(this)}};
function Ki(a,b,c){n===c?c=a.direction.clone():c.copy(a.direction);return c.T(b).u(a.origin)}THREE.dd.Ea=new THREE.d;THREE.dd.Yd=new THREE.d;THREE.Nf=function(){this.aq=[new THREE.uc,new THREE.uc,new THREE.uc,new THREE.uc,new THREE.uc,new THREE.uc]};
function Li(a,b){var c=a.aq,d=b.elements,b=d[0],e=d[1],f=d[2],g=d[3],h=d[4],i=d[5],j=d[6],l=d[7],k=d[8],p=d[9],r=d[10],s=d[11],q=d[12],v=d[13],y=d[14],d=d[15],F=c[0],C=d-q;F.n.set(g-b,l-h,s-k);F.ab=C;F=c[1];q=d+q;F.n.set(g+b,l+h,s+k);F.ab=q;h=c[2];k=d+v;h.n.set(g+e,l+i,s+p);h.ab=k;h=c[3];v=d-v;h.n.set(g-e,l-i,s-p);h.ab=v;e=c[4];i=d-y;e.n.set(g-f,l-j,s-r);e.ab=i;e=c[5];d+=y;e.n.set(g+f,l+j,s+r);e.ab=d;for(b=0;6>b;b++)c[b].normalize()}
THREE.Nf.prototype.contains=function(a){for(var b=this.aq,c=a.A,d=Gi(c),a=-a.s.Eb.V*zi(c),e=c=0;6>e;e++)if(c=b[e].ke(d),c<=a)return w;return t};THREE.Nf.Ea=new THREE.d;THREE.uc=function(a,b){n===a&&n===b?(this.n=new THREE.d,this.ab=0):(this.n=a.clone(),this.ab=b||0)};
THREE.uc.prototype={constructor:THREE.uc,set:function(a,b){this.n.copy(a);this.ab=b;return this},copy:function(a){this.n.copy(a.n);this.ab=a.ab;return this},normalize:function(){var a=1/this.n.length();this.n.T(a);this.ab*=a;return this},ke:function(a){return this.n.fa(a)+this.ab},translate:function(a){this.ab=-a.fa(this.n);return this},kb:function(a){return a.n.kb(this.n)&&a.ab==this.ab},clone:function(){return(new THREE.uc).copy(this)}};THREE.uc.Ea=new THREE.d;THREE.uc.Yd=new THREE.d;
THREE.Ik=function(){function a(){f=d-b;g=e-c}var b=0,c=0,d=0,e=0,f=0,g=0,h=t;this.lp=function(){return b};this.mp=function(){return c};this.kp=function(){return f};this.ip=function(){return g};this.qg=function(){return b};this.vg=function(){return c};this.ug=function(){return d};this.pg=function(){return e};this.set=function(f,g,l,k){h=w;b=f;c=g;d=l;e=k;a()};this.Zf=function(f,g){t===h?(h=w,b=f,c=g,d=f,e=g):(b=b<f?b:f,c=c<g?c:g,d=d>f?d:f,e=e>g?e:g);a()};this.Ts=function(f,g,l,k,p,r){t===h?(h=w,b=
f<l?f<p?f:p:l<p?l:p,c=g<k?g<r?g:r:k<r?k:r,d=f>l?f>p?f:p:l>p?l:p,e=g>k?g>r?g:r:k>r?k:r):(b=f<l?f<p?f<b?f:b:p<b?p:b:l<p?l<b?l:b:p<b?p:b,c=g<k?g<r?g<c?g:c:r<c?r:c:k<r?k<c?k:c:r<c?r:c,d=f>l?f>p?f>d?f:d:p>d?p:d:l>p?l>d?l:d:p>d?p:d,e=g>k?g>r?g>e?g:e:r>e?r:e:k>r?k>e?k:e:r>e?r:e);a()};this.Ws=function(f){t===h?(h=w,b=f.qg(),c=f.vg(),d=f.ug(),e=f.pg()):(b=b<f.qg()?b:f.qg(),c=c<f.vg()?c:f.vg(),d=d>f.ug()?d:f.ug(),e=e>f.pg()?e:f.pg());a()};this.$l=function(f){b-=f;c-=f;d+=f;e+=f;a()};this.Gj=function(f){b=b>
f.qg()?b:f.qg();c=c>f.vg()?c:f.vg();d=d<f.ug()?d:f.ug();e=e<f.pg()?e:f.pg();a()};this.yg=function(a){return d<a.qg()||b>a.ug()||e<a.vg()||c>a.pg()?w:t};this.empty=function(){h=t;e=d=c=b=0;a()};this.Iu=function(){return h}};THREE.Wd=function(a,b){n===a&&n===b?(this.rb=new THREE.d,this.V=0):(this.rb=a.clone(),this.V=b||0)};
THREE.Wd.prototype={constructor:THREE.Wd,set:function(a,b){this.rb.copy(a);this.V=b;return this},copy:function(a){this.rb.copy(a.rb);this.V=a.V;return this},empty:function(){return 0>=this.V},ke:function(a){return a.Sb(this.rb)-this.V},translate:function(){this.rb.u(this.offset);return this},scale:function(a){this.V*=a;return this},kb:function(a){return a.rb.kb(this.rb)&&a.V===this.V},clone:function(){return(new THREE.Zx).copy(this)}};
THREE.ib={Ac:function(a,b,c){return a<b?b:a>c?c:a},jz:function(a,b){return a<b?b:a},UB:function(a,b,c,d,e){return d+(a-b)*(e-d)/(c-b)},gw:function(){return(65280*Math.random()+255*Math.random())/65535},DD:function(a,b){return a+Math.floor(Math.random()*(b-a+1))},BD:function(a,b){return a+Math.random()*(b-a)},CD:function(a){return a*(0.5-Math.random())},hE:function(a){return 0>a?-1:0<a?1:0},$z:function(a){return a*THREE.ib.ys},zD:function(a){return a*THREE.ib.Es}};THREE.ib.ys=Math.PI/180;
THREE.ib.Es=180/Math.PI;THREE.vc=function(a,b,c,d){this.x=a||0;this.y=b||0;this.a=c||0;this.j=n!==d?d:1};
THREE.vc.prototype={constructor:THREE.vc,set:function(a,b,c,d){this.x=a;this.y=b;this.a=c;this.j=d;return this},copy:function(a){this.x=a.x;this.y=a.y;this.a=a.a;this.j=a.j;return this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.a*this.a+this.j*this.j)},normalize:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y+this.a*this.a+this.j*this.j);0===a?(this.a=this.y=this.x=0,this.j=1):(a=1/a,this.x*=a,this.y*=a,this.a*=a,this.j*=a);return this},multiply:function(a,b){var c=
a.x,d=a.y,e=a.a,f=a.j,g=b.x,h=b.y,i=b.a,j=b.j;this.x=c*j+d*i-e*h+f*g;this.y=-c*i+d*j+e*g+f*h;this.a=c*h-d*g+e*j+f*i;this.j=-c*g-d*h-e*i+f*j;return this},sf:function(a){var b=this.x,c=this.y,d=this.a,e=this.j,f=a.x,g=a.y,h=a.a,a=a.j;this.x=b*a+e*f+c*h-d*g;this.y=c*a+e*g+d*f-b*h;this.a=d*a+e*h+b*g-c*f;this.j=e*a-b*f-c*g-d*h;return this},X:function(a,b){b||(b=a);var c=a.x,d=a.y,e=a.a,f=this.x,g=this.y,h=this.a,i=this.j,j=i*c+g*e-h*d,l=i*d+h*c-f*e,k=i*e+f*d-g*c,c=-f*c-g*d-h*e;b.x=j*i+c*-f+l*-h-k*-g;b.y=
l*i+c*-g+k*-f-j*-h;b.a=k*i+c*-h+j*-g-l*-f;return b},clone:function(){return new THREE.vc(this.x,this.y,this.a,this.j)}};
THREE.vc.Fw=function(a,b,c,d){var e=a.j*b.j+a.x*b.x+a.y*b.y+a.a*b.a;0>e?(c.j=-b.j,c.x=-b.x,c.y=-b.y,c.a=-b.a,e=-e):c.copy(b);if(1<=Math.abs(e))c.j=a.j,c.x=a.x,c.y=a.y,c.a=a.a;else{var b=Math.acos(e),f=Math.sqrt(1-e*e);0.001>Math.abs(f)?(c.j=0.5*(a.j+c.j),c.x=0.5*(a.x+c.x),c.y=0.5*(a.y+c.y),c.a=0.5*(a.a+c.a)):(e=Math.sin((1-d)*b)/f,d=Math.sin(d*b)/f,c.j=a.j*e+c.j*d,c.x=a.x*e+c.x*d,c.y=a.y*e+c.y*d,c.a=a.a*e+c.a*d)}};
THREE.ay=function(a){function b(a,b,c,d,e,f,g){a=0.5*(c-a);d=0.5*(d-b);return(2*(b-c)+a+d)*g+(-3*(b-c)-2*a-d)*f+a*e+b}this.M=a;var c=[],d={x:0,y:0,a:0},e,f,g,h,i,j,l,k,p;this.VA=function(a){this.M=[];for(var b=0;b<a.length;b++)this.M[b]={x:a[b][0],y:a[b][1],a:a[b][2]}};this.Ga=function(a){e=(this.M.length-1)*a;f=Math.floor(e);g=e-f;c[0]=0===f?f:f-1;c[1]=f;c[2]=f>this.M.length-2?this.M.length-1:f+1;c[3]=f>this.M.length-3?this.M.length-1:f+2;j=this.M[c[0]];l=this.M[c[1]];k=this.M[c[2]];p=this.M[c[3]];
h=g*g;i=g*h;d.x=b(j.x,l.x,k.x,p.x,g,h,i);d.y=b(j.y,l.y,k.y,p.y,g,h,i);d.a=b(j.a,l.a,k.a,p.a,g,h,i);return d};this.CA=function(){var a,b,c=this.M.length,d=[];for(a=0;a<c;a++)b=this.M[a],d[a]=[b.x,b.y,b.a];return d};this.rg=function(a){var b,c,d,e=0,f=new THREE.d,g=new THREE.d,h=[],i=0;h[0]=0;a||(a=100);c=this.M.length*a;f.copy(this.M[0]);for(a=1;a<c;a++)b=a/c,d=this.Ga(b),g.copy(d),i+=g.Sb(f),f.copy(d),b*=this.M.length-1,b=Math.floor(b),b!=e&&(h[b]=i,e=b);h[h.length]=i;return{No:h,total:i}};this.MD=
function(a){var b,c,d,e,f,g,h=[],i=new THREE.d,j=this.rg();h.push(i.copy(this.M[0]).clone());for(b=1;b<this.M.length;b++){c=j.No[b]-j.No[b-1];g=Math.ceil(a*c/j.total);e=(b-1)/(this.M.length-1);f=b/(this.M.length-1);for(c=1;c<g-1;c++)d=e+c*(1/g)*(f-e),d=this.Ga(d),h.push(i.copy(d).clone());h.push(i.copy(this.M[b]).clone())}this.M=h}};THREE.gy=function(a){console.warn("THREE.Vertex has been DEPRECATED. Use THREE.Vector3 instead.");return a};
THREE.fy=function(a,b){console.warn("THREE.UV has been DEPRECATED. Use THREE.Vector2 instead.");return new THREE.k(a,b)};THREE.tk=function(){var a={};this.addEventListener=function(b,c){n===a[b]&&(a[b]=[]);-1===a[b].indexOf(c)&&a[b].push(c)};this.dispatchEvent=function(b){var c=a[b.type];if(n!==c)for(var d=0,e=c.length;d<e;d++)c[d](b)};this.removeEventListener=function(b,c){var d=a[b].indexOf(c);-1!==d&&a[b].splice(d,1)}};var Mi=THREE;
Mi.Ci=function(a,b,c,d){this.Od=new Mi.dd(a,b);0<this.Od.direction.length()&&this.Od.direction.normalize();this.Ba=c||0;this.Fa=d||Infinity};var Ni=new Mi.Wd,Oi=new Mi.dd,Pi=new Mi.uc,Qi=new Mi.d,Ri=new Mi.D;function Si(a,b){return a.bb-b.bb}var Ti=new Mi.d,Ui=new Mi.d,Vi=new Mi.d;function Wi(a,b,c){var d=Qi;Ti.sub(c,a);Ui.sub(b,a);Vi.sub(d,a);var d=Ti.fa(Ti),a=Ti.fa(Ui),b=Ti.fa(Vi),e=Ui.fa(Ui),c=Ui.fa(Vi),f=1/(d*e-a*a),e=(e*b-a*c)*f,d=(d*c-a*b)*f;return 0<=e&&0<=d&&1>e+d}
Mi.Ci.prototype.precision=1E-4;Mi.Ci.prototype.set=function(a,b){this.Od.set(a,b);0<this.Od.direction.length()&&this.Od.direction.normalize()};
Mi.Ci.prototype.YA=function(a){for(var b=[],c=0,d=a.length;c<d;c++){var e=a[c],f=this,g=b;if(e instanceof Mi.Qf)f=f.Od.ke(Gi(e.A)),f>e.scale.x||g.push({bb:f,Nd:e.position,face:u,object:e});else if(e instanceof Mi.O){Ni.set(Gi(e.A),e.s.Eb.V*zi(e.A));var h=Ni;if(f.Od.ke(h.rb)<=h.V){var h=e.s,i=h.e,j=e.o instanceof Mi.Ab,l=t===j?e.o.ga:u,k=e.o.oc,p=n,r=n,s=n,q=f.precision;Bi(e.rm,e.A);Ri.Gb(e.A);var k=Oi.copy(f.Od),v=Ri;k.direction=v.X(k.direction.u(k.origin));k.origin=v.X(k.origin);k.direction.Wa(k.origin);
for(var v=0,y=h.l.length;v<y;v++){var F=h.l[v],k=t===j?l[F.va]:e.o;if(n!==k){var C=F.n,z=F.qa,G=Pi;G.n.copy(C);G.ab=-z.fa(C);C=Oi;z=Pi;G=z.n.fa(C.direction);C=0==G?0==z.ke(C.origin)?0:n:-(C.origin.fa(z.n)+z.ab)/G;if(!(Math.abs(C)<q)&&!(0>C)&&(k=k.oc,!(k!==Mi.sc&&(p=Oi.direction.fa(Pi.n),!(k===Mi.Qe?0>p:0<p)))))if(!(C<f.Ba||C>f.Fa)){Qi=Ki(Oi,C,Qi);if(F instanceof Mi.K){if(k=i[F.q],p=i[F.c],r=i[F.r],!Wi(k,p,r))continue}else if(F instanceof Mi.Z){if(k=i[F.q],p=i[F.c],r=i[F.r],s=i[F.P],!Wi(k,p,s)&&!Wi(p,
r,s))continue}else throw Error("face type not supported");g.push({bb:C,Nd:Ki(f.Od,C),face:F,oA:v,object:e})}}}}}}b.sort(Si);return b};
THREE.w=function(){this.id=THREE.Qr++;this.name="";this.ca={};this.parent=n;this.children=[];this.ud=new THREE.d(0,1,0);this.position=new THREE.d;this.rotation=new THREE.d;this.lf=THREE.w.Rt;this.scale=new THREE.d(1,1,1);this.qd=u;this.Rj=t;this.I=new THREE.D;this.A=new THREE.D;this.rm=new THREE.D;this.cb=this.Ec=t;this.nc=new THREE.vc;this.vd=w;this.Wi=0;this.Xi=1;this.visible=t;this.Gg=this.zc=w;this.nf=t;this.ml=new THREE.d;THREE.Rr[this.id]=this};
THREE.w.prototype={constructor:THREE.w,ag:function(a){this.I.multiply(a,this.I);var a=this.scale,b=this.I,c=a.set(b.elements[0],b.elements[1],b.elements[2]).length(),d=a.set(b.elements[4],b.elements[5],b.elements[6]).length(),b=a.set(b.elements[8],b.elements[9],b.elements[10]).length();a.x=c;a.y=d;a.a=b;a=Bi(new THREE.D,this.I);ti(this.rotation,a,this.lf);a=this.position;b=this.I;a.x=b.elements[12];a.y=b.elements[13];a.a=b.elements[14]},translate:function(a,b){var c=this.I.elements,d=b.x,e=b.y,f=
b.a;b.x=d*c[0]+e*c[4]+f*c[8];b.y=d*c[1]+e*c[5]+f*c[9];b.a=d*c[2]+e*c[6]+f*c[10];b.normalize();this.position.u(b.T(a))},tb:function(a){this.I.tb(a,this.position,this.ud);this.Rj&&(w===this.vd?ti(this.rotation,this.I,this.lf):this.nc.copy(Ci(this.I)[1]))},add:function(a){if(a===this)console.warn("THREE.Object3D.add: An object can't be added as a child of itself.");else if(a instanceof THREE.w){n!==a.parent&&a.parent.remove(a);a.parent=this;this.children.push(a);for(var b=this;n!==b.parent;)b=b.parent;
n!==b&&b instanceof THREE.Di&&Xi(b,a)}},remove:function(a){var b=this.children.indexOf(a);if(-1!==b){a.parent=n;this.children.splice(b,1);for(b=this;n!==b.parent;)b=b.parent;n!==b&&b instanceof THREE.Di&&Yi(b,a)}},Jc:function(){Fi(this.I,this.position);w===this.vd?Ei(this.I,this.rotation,this.lf):Di(this.I,this.nc);if(1!==this.scale.x||1!==this.scale.y||1!==this.scale.a)this.I.scale(this.scale),this.Xi=Math.max(this.scale.x,Math.max(this.scale.y,this.scale.a));this.cb=t},Nb:function(a){t===this.Ec&&
this.Jc();if(t===this.cb||t===a)n===this.parent?this.A.copy(this.I):this.A.multiply(this.parent.A,this.I),this.cb=w,a=t;for(var b=0,c=this.children.length;b<c;b++)this.children[b].Nb(a)},clone:function(a){n===a&&(a=new THREE.w);a.name=this.name;a.ud.copy(this.ud);a.position.copy(this.position);a.rotation instanceof THREE.d&&a.rotation.copy(this.rotation);a.lf=this.lf;a.scale.copy(this.scale);a.qd=this.qd;a.Rj=this.Rj;a.I.copy(this.I);a.A.copy(this.A);a.rm.copy(this.rm);a.Ec=this.Ec;a.cb=this.cb;a.nc.copy(this.nc);
a.vd=this.vd;a.Wi=this.Wi;a.Xi=this.Xi;a.visible=this.visible;a.zc=this.zc;a.Gg=this.Gg;a.nf=this.nf;for(var b=0;b<this.children.length;b++)a.add(this.children[b].clone());return a}};function Zi(a,b){b(a);for(var c=0,d=a.children.length;c<d;c++)Zi(a.children[c],b)}THREE.w.Qk=new THREE.D;THREE.w.Rt="XYZ";THREE.Qr=0;THREE.Rr={};
THREE.Gk=function(){function a(){if(f===h){var a=new THREE.$r;g.push(a);h++;f++;return a}return g[f++]}function b(){if(j===k){var a=new THREE.dc;l.push(a);k++;j++;return a}return l[j++]}function c(a,b){return b.a-a.a}function d(a,b){var c=0,d=1,e=a.a+a.j,f=b.a+b.j,g=-a.a+a.j,h=-b.a+b.j;if(0<=e&&0<=f&&0<=g&&0<=h)return t;if(0>e&&0>f||0>g&&0>h)return w;0>e?c=Math.max(c,e/(e-f)):0>f&&(d=Math.min(d,e/(e-f)));0>g?c=Math.max(c,g/(g-h)):0>h&&(d=Math.min(d,g/(g-h)));if(d<c)return w;a.aa(b,c);b.aa(a,1-d);
return t}var e,f,g=[],h=0,i,j,l=[],k=0,p,r,s=[],q=0,v,y=[],F=0,C,z,G=[],B=0,J,O,I=[],P=0,E={nb:[],hk:[],Jb:[],elements:[]},R=new THREE.d,K=new THREE.xc,V=new THREE.D,M=new THREE.D,W=new THREE.Vd,la=new THREE.Nf,X=new THREE.xc,aa=new THREE.xc;this.wD=function(a,b){b.Aa.Gb(b.A);V.multiply(b.ra,b.Aa);V.X(a);return a};this.lk=function(a,b){b.fq.Gb(b.ra);V.multiply(b.A,b.fq);V.X(a)};this.qD=function(a,b){var c;a.a=-1;c=new THREE.d(a.x,a.y,1);this.lk(a,b);this.lk(c,b);c.Wa(a).normalize();return new THREE.Ci(a,
c)};this.dw=function(g,h,k,ja){function wa(b){for(var c=0,d=b.children.length;c<d;c++){var f=b.children[c];if(w!==f.visible){if(f instanceof THREE.Ob)E.Jb.push(f);else if(f instanceof THREE.O||f instanceof THREE.Ja){if(w===f.nf||t===la.contains(f))e=a(),e.object=f,u!==f.qd?e.a=f.qd:(R.copy(Gi(f.A)),V.X(R),e.a=R.a),E.nb.push(e)}else f instanceof THREE.We||f instanceof THREE.Qf?(e=a(),e.object=f,u!==f.qd?e.a=f.qd:(R.copy(Gi(f.A)),V.X(R),e.a=R.a),E.hk.push(e)):(e=a(),e.object=f,u!==f.qd?e.a=f.qd:(R.copy(Gi(f.A)),
V.X(R),e.a=R.a),E.nb.push(e));wa(f)}}}var ba=h.Ba,Q=h.Fa,T=w,na,U,Y,ka,N,oa,Na,za,ha,Fa,Oa,xa,ob,pb,qb;O=z=v=r=0;E.elements.length=0;g.Nb();n===h.parent&&h.Nb();h.Aa.Gb(h.A);V.multiply(h.ra,h.Aa);Li(la,V);f=0;E.nb.length=0;E.hk.length=0;E.Jb.length=0;wa(g);t===k&&E.nb.sort(c);g=0;for(k=E.nb.length;g<k;g++)if(za=E.nb[g].object,ha=za.A,j=0,za instanceof THREE.O){Fa=za.s;Y=Fa.e;Oa=Fa.l;Fa=Fa.C;W.Gb(ha);W.ii();ob=za.o instanceof THREE.Ab;pb=t===ob?za.o:u;na=0;for(U=Y.length;na<U;na++)i=b(),i.Gc.copy(Y[na]),
ha.X(i.Gc),i.h.copy(i.Gc),Ii(V,i.h),i.h.x/=i.h.j,i.h.y/=i.h.j,i.visible=i.h.a>ba&&i.h.a<Q;Y=0;for(na=Oa.length;Y<na;Y++)if(U=Oa[Y],qb=t===ob?pb.ga[U.va]:za.o,n!==qb){oa=qb.oc;if(U instanceof THREE.K)if(ka=l[U.q],N=l[U.c],Na=l[U.r],t===ka.visible&&t===N.visible&&t===Na.visible)if(T=0>(Na.h.x-ka.h.x)*(N.h.y-ka.h.y)-(Na.h.y-ka.h.y)*(N.h.x-ka.h.x),oa===THREE.sc||T===(oa===THREE.Qe))r===q?(xa=new THREE.Pn,s.push(xa),q++,r++,p=xa):p=s[r++],p.Y.copy(ka),p.ba.copy(N),p.wb.copy(Na);else continue;else continue;
else if(U instanceof THREE.Z)if(ka=l[U.q],N=l[U.c],Na=l[U.r],xa=l[U.P],t===ka.visible&&t===N.visible&&t===Na.visible&&t===xa.visible)if(T=0>(xa.h.x-ka.h.x)*(N.h.y-ka.h.y)-(xa.h.y-ka.h.y)*(N.h.x-ka.h.x)||0>(N.h.x-Na.h.x)*(xa.h.y-Na.h.y)-(N.h.y-Na.h.y)*(xa.h.x-Na.h.x),oa===THREE.sc||T===(oa===THREE.Qe)){if(v===F){var ib=new THREE.Qn;y.push(ib);F++;v++;p=ib}else p=y[v++];p.Y.copy(ka);p.ba.copy(N);p.wb.copy(Na);p.cn.copy(xa)}else continue;else continue;p.Fc.copy(U.n);w===T&&(oa===THREE.Lf||oa===THREE.sc)&&
p.Fc.Kj();W.X(p.Fc).normalize();p.fg.copy(U.qa);ha.X(p.fg);p.Zi.copy(p.fg);V.X(p.Zi);Na=U.p;ka=0;for(N=Na.length;ka<N;ka++)xa=p.Kc[ka],xa.copy(Na[ka]),w===T&&(oa===THREE.Lf||oa===THREE.sc)&&xa.Kj(),W.X(xa).normalize();p.nk=Na.length;ka=0;for(N=Fa.length;ka<N;ka++)if(xa=Fa[ka][Y],n!==xa){oa=0;for(Na=xa.length;oa<Na;oa++)p.Hf[ka][oa]=xa[oa]}p.color=U.color;p.o=qb;p.a=p.Zi.a;E.elements.push(p)}}else if(za instanceof THREE.Ja){M.multiply(V,ha);Y=za.s.e;ka=b();ka.h.copy(Y[0]);Ii(M,ka.h);ha=za.type===THREE.Pf?
2:1;na=1;for(U=Y.length;na<U;na++)ka=b(),ka.h.copy(Y[na]),Ii(M,ka.h),0<(na+1)%ha||(N=l[j-2],X.copy(ka.h),aa.copy(N.h),t===d(X,aa)&&(X.T(1/X.j),aa.T(1/aa.j),z===B?(Oa=new THREE.Rn,G.push(Oa),B++,z++,C=Oa):C=G[z++],C.Y.h.copy(X),C.ba.h.copy(aa),C.a=Math.max(X.a,aa.a),C.o=za.o,E.elements.push(C)))}g=0;for(k=E.hk.length;g<k;g++)za=E.hk[g].object,ha=za.A,za instanceof THREE.Qf&&(K.set(ha.elements[12],ha.elements[13],ha.elements[14],1),Ii(V,K),K.a/=K.j,0<K.a&&1>K.a&&(O===P?(ba=new THREE.Sn,I.push(ba),P++,
O++,J=ba):J=I[O++],J.object=za,J.x=K.x/K.j,J.y=K.y/K.j,J.a=K.a,J.rotation=za.rotation.a,J.scale.x=za.scale.x*Math.abs(J.x-(K.x+h.ra.elements[0])/(K.j+h.ra.elements[12])),J.scale.y=za.scale.y*Math.abs(J.y-(K.y+h.ra.elements[5])/(K.j+h.ra.elements[13])),J.o=za.o,E.elements.push(J)));t===ja&&E.elements.sort(c);return E}};
THREE.K=function(a,b,c,d,e,f){this.q=a;this.c=b;this.r=c;this.n=d instanceof THREE.d?d:new THREE.d;this.p=d instanceof Array?d:[];this.color=e instanceof THREE.t?e:new THREE.t;this.m=e instanceof Array?e:[];this.wd=[];this.va=n!==f?f:0;this.qa=new THREE.d};
THREE.K.prototype={constructor:THREE.K,clone:function(){var a=new THREE.K(this.q,this.c,this.r);a.n.copy(this.n);a.color.copy(this.color);a.qa.copy(this.qa);a.va=this.va;var b,c;b=0;for(c=this.p.length;b<c;b++)a.p[b]=this.p[b].clone();b=0;for(c=this.m.length;b<c;b++)a.m[b]=this.m[b].clone();b=0;for(c=this.wd.length;b<c;b++)a.wd[b]=this.wd[b].clone();return a}};
THREE.Z=function(a,b,c,d,e,f,g){this.q=a;this.c=b;this.r=c;this.P=d;this.n=e instanceof THREE.d?e:new THREE.d;this.p=e instanceof Array?e:[];this.color=f instanceof THREE.t?f:new THREE.t;this.m=f instanceof Array?f:[];this.wd=[];this.va=n!==g?g:0;this.qa=new THREE.d};
THREE.Z.prototype={constructor:THREE.Z,clone:function(){var a=new THREE.Z(this.q,this.c,this.r,this.P);a.n.copy(this.n);a.color.copy(this.color);a.qa.copy(this.qa);a.va=this.va;var b,c;b=0;for(c=this.p.length;b<c;b++)a.p[b]=this.p[b].clone();b=0;for(c=this.m.length;b<c;b++)a.m[b]=this.m[b].clone();b=0;for(c=this.wd.length;b<c;b++)a.wd[b]=this.wd[b].clone();return a}};
THREE.G=function(){this.id=THREE.un++;this.name="";this.e=[];this.$a=[];this.tf=[];this.l=[];this.Sc=[[]];this.C=[[]];this.F=[];this.we=[];this.la=[];this.Fe=[];this.Ee=[];this.Dp=[];this.Eb=this.ce=u;this.wg=w;this.jj=t;this.Io=this.Dj=this.La=this.He=this.lc=this.If=this.kf=this.xa=w;THREE.vn[this.id]=this};
THREE.G.prototype={constructor:THREE.G,ag:function(a){var b=new THREE.Vd;b.Gb(a).ii();for(var c=0,d=this.e.length;c<d;c++)a.X(this.e[c]);c=0;for(d=this.l.length;c<d;c++){var e=this.l[c];b.X(e.n).normalize();for(var f=0,g=e.p.length;f<g;f++)b.X(e.p[f]).normalize();a.X(e.qa)}},Jd:function(a){var b,c,d,e;if(n===this.Tk){e=this.Tk=Array(this.e.length);b=0;for(c=this.e.length;b<c;b++)e[b]=new THREE.d;b=0;for(c=this.l.length;b<c;b++)d=this.l[b],d instanceof THREE.K?d.p=[new THREE.d,new THREE.d,new THREE.d]:
d instanceof THREE.Z&&(d.p=[new THREE.d,new THREE.d,new THREE.d,new THREE.d])}else{e=this.Tk;b=0;for(c=this.e.length;b<c;b++)e[b].set(0,0,0)}if(a){var f,g,h,i=new THREE.d,j=new THREE.d,l=new THREE.d,k=new THREE.d,p=new THREE.d;b=0;for(c=this.l.length;b<c;b++)d=this.l[b],d instanceof THREE.K?(a=this.e[d.q],f=this.e[d.c],g=this.e[d.r],i.sub(g,f),j.sub(a,f),ui(i,j),e[d.q].u(i),e[d.c].u(i),e[d.r].u(i)):d instanceof THREE.Z&&(a=this.e[d.q],f=this.e[d.c],g=this.e[d.r],h=this.e[d.P],l.sub(h,f),j.sub(a,f),
ui(l,j),e[d.q].u(l),e[d.c].u(l),e[d.P].u(l),k.sub(h,g),p.sub(f,g),ui(k,p),e[d.c].u(k),e[d.r].u(k),e[d.P].u(k))}else{b=0;for(c=this.l.length;b<c;b++)d=this.l[b],d instanceof THREE.K?(e[d.q].u(d.n),e[d.c].u(d.n),e[d.r].u(d.n)):d instanceof THREE.Z&&(e[d.q].u(d.n),e[d.c].u(d.n),e[d.r].u(d.n),e[d.P].u(d.n))}b=0;for(c=this.e.length;b<c;b++)e[b].normalize();b=0;for(c=this.l.length;b<c;b++)d=this.l[b],d instanceof THREE.K?(d.p[0].copy(e[d.q]),d.p[1].copy(e[d.c]),d.p[2].copy(e[d.r])):d instanceof THREE.Z&&
(d.p[0].copy(e[d.q]),d.p[1].copy(e[d.c]),d.p[2].copy(e[d.r]),d.p[3].copy(e[d.P]))},kh:function(){function a(a,b,c,d,e,f,O){h=a.e[b];i=a.e[c];j=a.e[d];l=g[e];k=g[f];p=g[O];r=i.x-h.x;s=j.x-h.x;q=i.y-h.y;v=j.y-h.y;y=i.a-h.a;F=j.a-h.a;C=k.x-l.x;z=p.x-l.x;G=k.y-l.y;B=p.y-l.y;J=1/(C*B-z*G);E.set((B*r-G*s)*J,(B*q-G*v)*J,(B*y-G*F)*J);R.set((C*s-z*r)*J,(C*v-z*q)*J,(C*F-z*y)*J);I[b].u(E);I[c].u(E);I[d].u(E);P[b].u(R);P[c].u(R);P[d].u(R)}var b,c,d,e,f,g,h,i,j,l,k,p,r,s,q,v,y,F,C,z,G,B,J,O,I=[],P=[],E=new THREE.d,
R=new THREE.d,K=new THREE.d,V=new THREE.d,M=new THREE.d;b=0;for(c=this.e.length;b<c;b++)I[b]=new THREE.d,P[b]=new THREE.d;b=0;for(c=this.l.length;b<c;b++)f=this.l[b],g=this.C[0][b],f instanceof THREE.K?a(this,f.q,f.c,f.r,0,1,2):f instanceof THREE.Z&&(a(this,f.q,f.c,f.P,0,1,3),a(this,f.c,f.r,f.P,1,2,3));var W=["a","b","c","d"];b=0;for(c=this.l.length;b<c;b++){f=this.l[b];for(d=0;d<f.p.length;d++)M.copy(f.p[d]),e=f[W[d]],O=I[e],K.copy(O),K.Wa(M.T(M.fa(O))).normalize(),vi(V,f.p[d],O),e=V.fa(P[e]),e=
0>e?-1:1,f.wd[d]=new THREE.xc(K.x,K.y,K.a,e)}this.wg=t},cj:function(){this.ce=(new THREE.Ke).sq(this.e)},dj:function(){for(var a=new THREE.Wd,b=this.e,c=new THREE.d,d=0,e=0,f=b.length;e<f;e++)d=Math.max(d,c.sh(b[e]));a.rb=c;a.V=Math.sqrt(d);this.Eb=a},clone:function(){for(var a=new THREE.G,b=this.e,c=0,d=b.length;c<d;c++)a.e.push(b[c].clone());b=this.l;c=0;for(d=b.length;c<d;c++)a.l.push(b[c].clone());b=this.C[0];c=0;for(d=b.length;c<d;c++){for(var e=b[c],f=[],g=0,h=e.length;g<h;g++)f.push(new THREE.k(e[g].x,
e[g].y));a.C[0].push(f)}return a}};
function $i(a){var b={},c=[],d=[],e,f=Math.pow(10,4),g,h,i,j;g=0;for(h=a.e.length;g<h;g++)e=a.e[g],e=[Math.round(e.x*f),Math.round(e.y*f),Math.round(e.a*f)].join("_"),n===b[e]?(b[e]=g,c.push(a.e[g]),d[g]=c.length-1):d[g]=d[b[e]];g=0;for(h=a.l.length;g<h;g++)if(b=a.l[g],b instanceof THREE.K)b.q=d[b.q],b.c=d[b.c],b.r=d[b.r];else if(b instanceof THREE.Z){b.q=d[b.q];b.c=d[b.c];b.r=d[b.r];b.P=d[b.P];e=[b.q,b.c,b.r,b.P];for(f=3;0<f;f--)if(e.indexOf(b["abcd"[f]])!==f){e.splice(f,1);a.l[g]=new THREE.K(e[0],
e[1],e[2],b.n,b.color,b.va);e=0;for(i=a.C.length;e<i;e++)(j=a.C[e][g])&&j.splice(f,1);a.l[g].m=b.m;break}}a.e=c}function aj(a){for(var b=0,c=a.e,d=0,e=c.length;d<e;d++)0<d&&(b+=c[d].Sb(c[d-1])),a.Dp[d]=b}function bj(a){var b,c,d,e,f,g,h=new THREE.d,i=new THREE.d;b=0;for(c=a.l.length;b<c;b++)d=a.l[b],e=a.e[d.q],f=a.e[d.c],g=a.e[d.r],h.sub(g,f),i.sub(e,f),ui(h,i),h.normalize(),d.n.copy(h)}
function cj(a){var b,c,d;b=0;for(c=a.l.length;b<c;b++)d=a.l[b],d.qa.set(0,0,0),d instanceof THREE.K?(d.qa.u(a.e[d.q]),d.qa.u(a.e[d.c]),d.qa.u(a.e[d.r]),d.qa.gd(3)):d instanceof THREE.Z&&(d.qa.u(a.e[d.q]),d.qa.u(a.e[d.c]),d.qa.u(a.e[d.r]),d.qa.u(a.e[d.P]),d.qa.gd(4))}THREE.un=0;THREE.vn={};THREE.cd=function(){this.id=THREE.un++;this.attributes={};this.jj=w;this.zm=[];this.Eb=this.ce=u;this.wg=w;this.F=[];THREE.vn[this.id]=this};
THREE.cd.prototype={constructor:THREE.cd,ag:function(a){var b,c;this.attributes.position&&(b=this.attributes.position.b);this.attributes.n&&(c=this.attributes.n.b);n!==b&&(a.wm(b),this.xa=t);n!==c&&(b=new THREE.Vd,b.Gb(a).ii(),b.wm(c),dj(this),this.lc=t)},cj:function(){this.ce||(this.ce=new THREE.Ke);var a=this.attributes.position.b;if(a){var b=this.ce,c,d,e;3<=a.length&&(b.min.x=b.max.x=a[0],b.min.y=b.max.y=a[1],b.min.a=b.max.a=a[2]);for(var f=3,g=a.length;f<g;f+=3)c=a[f],d=a[f+1],e=a[f+2],c<b.min.x?
b.min.x=c:c>b.max.x&&(b.max.x=c),d<b.min.y?b.min.y=d:d>b.max.y&&(b.max.y=d),e<b.min.a?b.min.a=e:e>b.max.a&&(b.max.a=e)}if(n===a||0===a.length)this.ce.min.set(0,0,0),this.ce.max.set(0,0,0)},dj:function(){this.Eb||(this.Eb=new THREE.Wd);var a=this.attributes.position.b;if(a){for(var b,c=0,d,e,f=0,g=a.length;f<g;f+=3)b=a[f],d=a[f+1],e=a[f+2],b=b*b+d*d+e*e,b>c&&(c=b);this.Eb.V=Math.sqrt(c)}},Jd:function(){if(this.attributes.position){var a,b,c,d;a=this.attributes.position.b.length;if(n===this.attributes.n)this.attributes.n=
{kc:3,b:new Float32Array(a),Cg:a};else{a=0;for(b=this.attributes.n.b.length;a<b;a++)this.attributes.n.b[a]=0}var e=this.attributes.position.b,f=this.attributes.n.b,g,h,i,j,l,k,p=new THREE.d,r=new THREE.d,s=new THREE.d,q=new THREE.d,v=new THREE.d;if(this.attributes.index){var y=this.attributes.index.b,F=this.zm;c=0;for(d=F.length;c<d;++c){b=F[c].start;g=F[c].count;var C=F[c].index;a=b;for(b+=g;a<b;a+=3)g=C+y[a],h=C+y[a+1],i=C+y[a+2],j=e[3*g],l=e[3*g+1],k=e[3*g+2],p.set(j,l,k),j=e[3*h],l=e[3*h+1],k=
e[3*h+2],r.set(j,l,k),j=e[3*i],l=e[3*i+1],k=e[3*i+2],s.set(j,l,k),q.sub(s,r),v.sub(p,r),ui(q,v),f[3*g]+=q.x,f[3*g+1]+=q.y,f[3*g+2]+=q.a,f[3*h]+=q.x,f[3*h+1]+=q.y,f[3*h+2]+=q.a,f[3*i]+=q.x,f[3*i+1]+=q.y,f[3*i+2]+=q.a}}else{a=0;for(b=e.length;a<b;a+=9)j=e[a],l=e[a+1],k=e[a+2],p.set(j,l,k),j=e[a+3],l=e[a+4],k=e[a+5],r.set(j,l,k),j=e[a+6],l=e[a+7],k=e[a+8],s.set(j,l,k),q.sub(s,r),v.sub(p,r),ui(q,v),f[a]=q.x,f[a+1]=q.y,f[a+2]=q.a,f[a+3]=q.x,f[a+4]=q.y,f[a+5]=q.a,f[a+6]=q.x,f[a+7]=q.y,f[a+8]=q.a}dj(this);
this.lc=t}},kh:function(){function a(a){ia.x=d[3*a];ia.y=d[3*a+1];ia.a=d[3*a+2];Ia.copy(ia);ja=i[a];X.copy(ja);X.Wa(ia.T(ia.fa(ja))).normalize();vi(aa,Ia,ja);wa=aa.fa(j[a]);S=0>wa?-1:1;h[4*a]=X.x;h[4*a+1]=X.y;h[4*a+2]=X.a;h[4*a+3]=S}if(n===this.attributes.index||n===this.attributes.position||n===this.attributes.n||n===this.attributes.wa)console.warn("Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");else{var b=this.attributes.index.b,c=this.attributes.position.b,
d=this.attributes.n.b,e=this.attributes.wa.b,f=c.length/3;if(n===this.attributes.Vb){var g=4*f;this.attributes.Vb={kc:4,b:new Float32Array(g),Cg:g}}for(var h=this.attributes.Vb.b,i=[],j=[],g=0;g<f;g++)i[g]=new THREE.d,j[g]=new THREE.d;var l,k,p,r,s,q,v,y,F,C,z,G,B,J,O,f=new THREE.d,g=new THREE.d,I,P,E,R,K,V,M,W=this.zm;E=0;for(R=W.length;E<R;++E){P=W[E].start;K=W[E].count;var la=W[E].index;I=P;for(P+=K;I<P;I+=3)K=la+b[I],V=la+b[I+1],M=la+b[I+2],l=c[3*K],k=c[3*K+1],p=c[3*K+2],r=c[3*V],s=c[3*V+1],q=
c[3*V+2],v=c[3*M],y=c[3*M+1],F=c[3*M+2],C=e[2*K],z=e[2*K+1],G=e[2*V],B=e[2*V+1],J=e[2*M],O=e[2*M+1],r-=l,l=v-l,s-=k,k=y-k,q-=p,p=F-p,G-=C,C=J-C,B-=z,z=O-z,O=1/(G*z-C*B),f.set((z*r-B*l)*O,(z*s-B*k)*O,(z*q-B*p)*O),g.set((G*l-C*r)*O,(G*k-C*s)*O,(G*p-C*q)*O),i[K].u(f),i[V].u(f),i[M].u(f),j[K].u(g),j[V].u(g),j[M].u(g)}var X=new THREE.d,aa=new THREE.d,ia=new THREE.d,Ia=new THREE.d,S,ja,wa;E=0;for(R=W.length;E<R;++E){P=W[E].start;K=W[E].count;la=W[E].index;I=P;for(P+=K;I<P;I+=3)K=la+b[I],V=la+b[I+1],M=la+
b[I+2],a(K),a(V),a(M)}this.He=this.wg=t}}};function dj(a){for(var a=a.attributes.n.b,b,c,d,e=0,f=a.length;e<f;e+=3)b=a[e],c=a[e+1],d=a[e+2],b=1/Math.sqrt(b*b+c*c+d*d),a[e]*=b,a[e+1]*=b,a[e+2]*=b}THREE.$b=function(){THREE.w.call(this);this.Aa=new THREE.D;this.ra=new THREE.D;this.fq=new THREE.D};THREE.$b.prototype=Object.create(THREE.w.prototype);THREE.$b.prototype.tb=function(a){this.I.tb(this.position,a,this.ud);t===this.Rj&&(w===this.vd?ti(this.rotation,this.I,this.lf):this.nc.copy(Ci(this.I)[1]))};
THREE.Ug=function(a,b,c,d,e,f){THREE.$b.call(this);this.left=a;this.right=b;this.top=c;this.bottom=d;this.Ba=n!==e?e:0.1;this.Fa=n!==f?f:2E3;this.Gf()};THREE.Ug.prototype=Object.create(THREE.$b.prototype);THREE.Ug.prototype.Gf=function(){var a=this.left,b=this.right,c=this.top,d=this.bottom,e=this.Ba,f=this.Fa,g=this.ra.elements,h=b-a,i=c-d,j=f-e;g[0]=2/h;g[4]=0;g[8]=0;g[12]=-((b+a)/h);g[1]=0;g[5]=2/i;g[9]=0;g[13]=-((c+d)/i);g[2]=0;g[6]=0;g[10]=-2/j;g[14]=-((f+e)/j);g[3]=0;g[7]=0;g[11]=0;g[15]=1};
THREE.tc=function(a,b,c,d){THREE.$b.call(this);this.pe=n!==a?a:50;this.Si=n!==b?b:1;this.Ba=n!==c?c:0.1;this.Fa=n!==d?d:2E3;this.Gf()};THREE.tc.prototype=Object.create(THREE.$b.prototype);
THREE.tc.prototype.Gf=function(){if(this.Tl){var a=this.Tl/this.bp,b=Math.tan(this.pe*Math.PI/360)*this.Ba,c=-b,d=a*c,a=Math.abs(a*b-d),c=Math.abs(b-c);wi(this.ra,d+this.x*a/this.Tl,d+(this.x+this.width)*a/this.Tl,b-(this.y+this.height)*c/this.bp,b-this.y*c/this.bp,this.Ba,this.Fa)}else{var a=this.ra,b=this.pe,c=this.Si,d=this.Ba,e=this.Fa,b=d*Math.tan(b*Math.PI/360),f=-b;wi(a,f*c,b*c,f,b,d,e)}};THREE.Ob=function(a){THREE.w.call(this);this.color=new THREE.t(a)};THREE.Ob.prototype=Object.create(THREE.w.prototype);
THREE.mi=function(a){THREE.Ob.call(this,a)};THREE.mi.prototype=Object.create(THREE.Ob.prototype);
THREE.Mc=function(a,b){THREE.Ob.call(this,a);this.position=new THREE.d(0,1,0);this.target=new THREE.w;this.sb=n!==b?b:1;this.Nj=this.zc=w;this.Wh=50;this.Vh=5E3;this.Qm=-500;this.Sm=this.Rm=500;this.Pm=-500;this.Ae=w;this.Jg=0;this.Be=0.5;this.Yh=this.$h=512;this.Tm=w;this.Bw=new THREE.d(0,0,-1E3);this.zw=2;this.uq=[0,0,0];this.Cw=[512,512,512];this.Aw=[512,512,512];this.wq=[-1,0.99,0.998];this.vq=[0.99,0.998,1];this.Yj=[];this.Af=this.Pd=this.Zh=this.zf=u};THREE.Mc.prototype=Object.create(THREE.Ob.prototype);
THREE.vk=function(a,b,c){THREE.Ob.call(this,a);this.Ua=new THREE.t(b);this.position=new THREE.d(0,100,0);this.sb=n!==c?c:1};THREE.vk.prototype=Object.create(THREE.Ob.prototype);THREE.Rf=function(a,b,c){THREE.Ob.call(this,a);this.position=new THREE.d(0,0,0);this.sb=n!==b?b:1;this.bb=n!==c?c:0};THREE.Rf.prototype=Object.create(THREE.Ob.prototype);
THREE.Sf=function(a,b,c,d,e){THREE.Ob.call(this,a);this.position=new THREE.d(0,1,0);this.target=new THREE.w;this.sb=n!==b?b:1;this.bb=n!==c?c:0;this.bf=n!==d?d:Math.PI/2;this.eu=n!==e?e:10;this.Nj=this.zc=w;this.Wh=50;this.Vh=5E3;this.yw=50;this.Ae=w;this.Jg=0;this.Be=0.5;this.Yh=this.$h=512;this.Af=this.Pd=this.Zh=this.zf=u};THREE.Sf.prototype=Object.create(THREE.Ob.prototype);
THREE.Ud=function(a){(this.fE=a)?(a=document.createElement("div"),a.style.position="absolute",a.style.right="0px",a.style.top="0px",a.style.fontSize="0.8em",a.style.textAlign="left",a.style.background="rgba(0,0,0,0.25)",a.style.color="#fff",a.style.width="120px",a.style.padding="0.5em 0.5em 0.5em 0.5em",a.style.zIndex=1E3,a.innerHTML="Loading ..."):a=u;this.Tw=a;this.Iv=da();this.Hv=da();this.Gv=da()};
THREE.Ud.prototype={constructor:THREE.Ud,crossOrigin:"anonymous",mx:function(a){var b="Loaded ",b=a.total?b+((100*a.loaded/a.total).toFixed(0)+"%"):b+((a.loaded/1E3).toFixed(2)+" KB");this.Tw.innerHTML=b}};
function ej(a,b){function c(a){a=Math.log(a)/Math.LN2;return Math.floor(a)==a}function d(a){a=Math.log(a)/Math.LN2;return Math.pow(2,Math.round(a))}function e(a,e,f,h,i,j,v){var y=f.toLowerCase().kj(".dds"),F=b+"/"+f;if(y){var C=THREE.Ad.Ep(F);a[e]=C}else C=document.createElement("canvas"),a[e]=new THREE.Bb(C);a[e].Hw=f;h&&(a[e].repeat.set(h[0],h[1]),1!==h[0]&&(a[e].Yb=THREE.Nc),1!==h[1]&&(a[e].Zb=THREE.Nc));i&&a[e].offset.set(i[0],i[1]);j&&(f={repeat:THREE.Nc,pv:THREE.Fk},n!==f[j[0]]&&(a[e].Yb=f[j[0]]),
n!==f[j[1]]&&(a[e].Zb=f[j[1]]));v&&(a[e].Rb=v);if(!y){var z=a[e],a=new Image;a.onload=function(){if(!c(this.width)||!c(this.height)){var a=d(this.width),b=d(this.height);z.J.width=a;z.J.height=b;z.J.getContext("2d").drawImage(this,0,0,a,b)}else z.J=this;z.ha=t};a.crossOrigin=g.crossOrigin;a.src=F}}function f(a){return(255*a[0]<<16)+(255*a[1]<<8)+255*a[2]}var g=THREE.Ud.prototype,h="MeshLambertMaterial",i={color:15658734,opacity:1,map:u,Ma:u,eb:u,Fb:u,R:w};if(a.Ha){var j=a.Ha.toLowerCase();"phong"===
j?h="MeshPhongMaterial":"basic"===j&&(h="MeshBasicMaterial")}n!==a.qb&&n!==THREE[a.qb]&&(i.qb=THREE[a.qb]);if(n!==a.Da||1>a.opacity)i.Da=a.Da;n!==a.Bc&&(i.Bc=a.Bc);n!==a.Ld&&(i.Ld=a.Ld);n!==a.visible&&(i.visible=a.visible);n!==a.Rl&&(i.oc=THREE.Lf);n!==a.le&&(i.oc=THREE.sc);n!==a.R&&(i.R=a.R);n!==a.m&&("face"===a.m?i.m=THREE.Pe:a.m&&(i.m=THREE.Wg));a.Et?i.color=f(a.Et):a.zr&&(i.color=a.zr);a.Ft&&(i.sd=f(a.Ft));a.Dt&&(i.za=f(a.Dt));a.hx&&(i.opacity=a.hx);a.Iw&&(i.Ce=a.Iw);a.ev&&b&&e(i,"map",a.ev,a.OB,
a.NB,a.PB,a.MB);a.fv&&b&&e(i,"lightMap",a.fv,a.SB,a.RB,a.TB,a.QB);a.cv&&b&&e(i,"bumpMap",a.cv,a.KB,a.JB,a.LB,a.IB);a.Hp&&b&&e(i,"normalMap",a.Hp,a.XB,a.WB,a.YB,a.VB);a.gv&&b&&e(i,"specularMap",a.gv,a.aC,a.$B,a.bC,a.ZB);a.dv&&(i.eg=a.dv);a.Hp?(h=THREE.Un.Ap.n,j=THREE.wc.clone(h.Q),j.Mq.value=i.eb,a.Ip&&j.Wq.value.set(a.Ip,a.Ip),i.map&&(j.Lq.value=i.map,j.Xo.value=t),i.Ia&&(j.Nq.value=i.Ia,j.Yo.value=t),i.Ma&&(j.Kq.value=i.Ma,j.Wo.value=t),oi(j.Vq.value,i.color),oi(j.Zq.value,i.sd),oi(j.Uq.value,i.za),
j.Yq.value=i.Ce,n!==i.opacity&&(j.Xq.value=i.opacity),h=new THREE.Xa({L:h.L,N:h.N,Q:j,Jb:t,z:t}),i.Da&&(h.Da=t)):h=new THREE[h](i);n!==a.Ar&&(h.name=a.Ar);return h}function fj(a){for(var b=0,c=a.length;b<c;b++)if(a[b]instanceof THREE.Xa)return t;return w}function gj(a,b){for(var c=[],d=0;d<a.length;++d)c[d]=ej(a[d],b);return c}function hj(a){a=a.split("/");a.pop();return(1>a.length?".":a.join("/"))+"/"}THREE.oi=function(a){THREE.Ud.call(this,a)};THREE.oi.prototype=Object.create(THREE.Ud.prototype);
THREE.oi.prototype.load=function(a,b,c,d){c=c&&"string"===typeof c?c:hj(a);d=d&&"string"===typeof d?d:hj(a);this.km(this,a,b,c,d,this.eE?THREE.Ud.prototype.mx:u)};
THREE.oi.prototype.km=function(a,b,c,d,e,f){var g=new XMLHttpRequest;g.onreadystatechange=function(){if(4==g.readyState)if(200==g.status||0==g.status){var a=JSON.parse(g.responseText),i=new XMLHttpRequest,j=e+"/"+a.Wy,l=0;i.onreadystatechange=function(){if(4==i.readyState)if(200==i.status||0==i.status){var b=i.response;n===b&&(b=(new Uint8Array(i.PD)).buffer);var e=b,b=d,g=a.ga,s=function(){function a(b){return b%4?4-b%4:0}function b(a,c){return(new Uint8Array(a,c,1))[0]}function c(a,b){return(new Uint32Array(a,
b,1))[0]}function d(a,b){var c,f,g,h,i,j,l,k=new Uint32Array(e,b,3*a);for(c=0;c<a;c++)f=k[3*c],g=k[3*c+1],h=k[3*c+2],i=T[2*f],f=T[2*f+1],j=T[2*g],l=T[2*g+1],g=T[2*h],h=T[2*h+1],wa.C[0].push([new THREE.k(i,f),new THREE.k(j,l),new THREE.k(g,h)])}function f(a,b){var c,d,g,h,i,j,l,k,r,q=new Uint32Array(e,b,4*a);for(c=0;c<a;c++)d=q[4*c],g=q[4*c+1],h=q[4*c+2],i=q[4*c+3],j=T[2*d],d=T[2*d+1],l=T[2*g],k=T[2*g+1],g=T[2*h],r=T[2*h+1],h=T[2*i],i=T[2*i+1],wa.C[0].push([new THREE.k(j,d),new THREE.k(l,k),new THREE.k(g,
r),new THREE.k(h,i)])}function g(a,b,c){for(var d,f,h,i,b=new Uint32Array(e,b,3*a),j=new Uint16Array(e,c,a),c=0;c<a;c++)d=b[3*c],f=b[3*c+1],h=b[3*c+2],i=j[c],wa.l.push(new THREE.K(d,f,h,u,u,i))}function h(a,b,c){for(var d,f,g,i,j,b=new Uint32Array(e,b,4*a),l=new Uint16Array(e,c,a),c=0;c<a;c++)d=b[4*c],f=b[4*c+1],g=b[4*c+2],i=b[4*c+3],j=l[c],wa.l.push(new THREE.Z(d,f,g,i,u,u,j))}function i(a,b,c,d){for(var f,g,h,j,l,k,r,b=new Uint32Array(e,b,3*a),c=new Uint32Array(e,c,3*a),q=new Uint16Array(e,d,a),
d=0;d<a;d++){f=b[3*d];g=b[3*d+1];h=b[3*d+2];l=c[3*d];k=c[3*d+1];r=c[3*d+2];j=q[d];var s=Q[3*k],v=Q[3*k+1];k=Q[3*k+2];var y=Q[3*r],z=Q[3*r+1];r=Q[3*r+2];wa.l.push(new THREE.K(f,g,h,[new THREE.d(Q[3*l],Q[3*l+1],Q[3*l+2]),new THREE.d(s,v,k),new THREE.d(y,z,r)],u,j))}}function j(a,b,c,d){for(var f,g,h,i,l,k,r,q,s,b=new Uint32Array(e,b,4*a),c=new Uint32Array(e,c,4*a),v=new Uint16Array(e,d,a),d=0;d<a;d++){f=b[4*d];g=b[4*d+1];h=b[4*d+2];i=b[4*d+3];k=c[4*d];r=c[4*d+1];q=c[4*d+2];s=c[4*d+3];l=v[d];var y=Q[3*
r],z=Q[3*r+1];r=Q[3*r+2];var B=Q[3*q],C=Q[3*q+1];q=Q[3*q+2];var F=Q[3*s],H=Q[3*s+1];s=Q[3*s+2];wa.l.push(new THREE.Z(f,g,h,i,[new THREE.d(Q[3*k],Q[3*k+1],Q[3*k+2]),new THREE.d(y,z,r),new THREE.d(B,C,q),new THREE.d(F,H,s)],u,l))}}var l,k,r,s,R,K,V,M,W,la,X,aa,ia,Ia,S,ja,wa=this,ba=0,Q=[],T=[],na,U,Y;THREE.G.call(this);ja=e;U=ba;Ia=new Uint8Array(ja,U,12);la="";for(ia=0;12>ia;ia++)la+=String.fromCharCode(Ia[U+ia]);l=b(ja,U+12);b(ja,U+13);b(ja,U+14);b(ja,U+15);k=b(ja,U+16);r=b(ja,U+17);s=b(ja,U+18);
R=b(ja,U+19);K=c(ja,U+20);V=c(ja,U+20+4);M=c(ja,U+20+8);W=c(ja,U+20+12);la=c(ja,U+20+16);X=c(ja,U+20+20);aa=c(ja,U+20+24);ia=c(ja,U+20+28);Ia=c(ja,U+20+32);S=c(ja,U+20+36);ja=c(ja,U+20+40);ba+=l;U=3*k+R;Y=4*k+R;na=W*U;l=la*(U+3*r);k=X*(U+3*s);R=aa*(U+3*r+3*s);U=ia*Y;r=Ia*(Y+4*r);s=S*(Y+4*s);Y=ba;var ba=new Float32Array(e,ba,3*K),ka,N,oa,Na;for(ka=0;ka<K;ka++)N=ba[3*ka],oa=ba[3*ka+1],Na=ba[3*ka+2],wa.e.push(new THREE.d(N,oa,Na));K=ba=Y+3*K*Float32Array.BYTES_PER_ELEMENT;if(V){ba=new Int8Array(e,ba,
3*V);for(Y=0;Y<V;Y++)ka=ba[3*Y],N=ba[3*Y+1],oa=ba[3*Y+2],Q.push(ka/127,N/127,oa/127)}ba=K+3*V*Int8Array.BYTES_PER_ELEMENT;V=ba+=a(3*V);if(M){K=new Float32Array(e,ba,2*M);for(ba=0;ba<M;ba++)Y=K[2*ba],ka=K[2*ba+1],T.push(Y,ka)}M=ba=V+2*M*Float32Array.BYTES_PER_ELEMENT;na=M+na+a(2*W);V=na+l+a(2*la);l=V+k+a(2*X);k=l+R+a(2*aa);U=k+U+a(2*ia);R=U+r+a(2*Ia);r=R+s+a(2*S);X&&(s=V+3*X*Uint32Array.BYTES_PER_ELEMENT,g(X,V,s+3*X*Uint32Array.BYTES_PER_ELEMENT),d(X,s));aa&&(X=l+3*aa*Uint32Array.BYTES_PER_ELEMENT,
s=X+3*aa*Uint32Array.BYTES_PER_ELEMENT,i(aa,l,X,s+3*aa*Uint32Array.BYTES_PER_ELEMENT),d(aa,s));S&&(aa=R+4*S*Uint32Array.BYTES_PER_ELEMENT,h(S,R,aa+4*S*Uint32Array.BYTES_PER_ELEMENT),f(S,aa));ja&&(S=r+4*ja*Uint32Array.BYTES_PER_ELEMENT,aa=S+4*ja*Uint32Array.BYTES_PER_ELEMENT,j(ja,r,S,aa+4*ja*Uint32Array.BYTES_PER_ELEMENT),f(ja,aa));W&&g(W,M,M+3*W*Uint32Array.BYTES_PER_ELEMENT);la&&(W=na+3*la*Uint32Array.BYTES_PER_ELEMENT,i(la,na,W,W+3*la*Uint32Array.BYTES_PER_ELEMENT));ia&&h(ia,k,k+4*ia*Uint32Array.BYTES_PER_ELEMENT);
Ia&&(la=U+4*Ia*Uint32Array.BYTES_PER_ELEMENT,j(Ia,U,la,la+4*Ia*Uint32Array.BYTES_PER_ELEMENT));cj(this);bj(this)};s.prototype=Object.create(THREE.G.prototype);s=new s(b);b=gj(g,b);fj(b)&&s.kh();c(s,b)}else console.error("THREE.BinaryLoader: Couldn't load ["+j+"] ["+i.status+"]");else 3==i.readyState?f&&(0==l&&(l=i.getResponseHeader("Content-Length")),f({total:l,loaded:i.responseText.length})):2==i.readyState&&(l=i.getResponseHeader("Content-Length"))};i.open("GET",j,t);i.responseType="arraybuffer";
i.send(u)}else console.error("THREE.BinaryLoader: Couldn't load ["+b+"] ["+g.status+"]")};g.open("GET",b,t);g.send(u)};THREE.yk=function(){THREE.tk.call(this);this.crossOrigin=u};
THREE.yk.prototype={constructor:THREE.yk,load:function(a,b){var c=this;n===b&&(b=new Image);b.addEventListener("load",function(){c.dispatchEvent({type:"load",content:b})},w);b.addEventListener("error",function(){c.dispatchEvent({type:"error",message:"Couldn't load URL ["+a+"]"})},w);c.crossOrigin&&(b.crossOrigin=c.crossOrigin);b.src=a}};THREE.ui=function(a){THREE.Ud.call(this,a);this.withCredentials=w};THREE.ui.prototype=Object.create(THREE.Ud.prototype);
THREE.ui.prototype.load=function(a,b,c){c=c&&"string"===typeof c?c:hj(a);this.km(this,a,b,c)};
THREE.ui.prototype.km=function(a,b,c,d,e){var f=new XMLHttpRequest,g=0;f.withCredentials=this.withCredentials;f.onreadystatechange=function(){if(f.readyState===f.DONE)if(200===f.status||0===f.status)if(f.responseText){var a=JSON.parse(f.responseText);ij(a,c,d)}else console.warn("THREE.JSONLoader: ["+b+"] seems to be unreachable or file there is empty");else console.error("THREE.JSONLoader: Couldn't load ["+b+"] ["+f.status+"]");else f.readyState===f.LOADING?e&&(0===g&&(g=f.getResponseHeader("Content-Length")),
e({total:g,loaded:f.responseText.length})):f.readyState===f.Ox&&(g=f.getResponseHeader("Content-Length"))};f.open("GET",b,t);f.send(u)};
function ij(a,b,c){var d=new THREE.G,e=n!==a.scale?1/a.scale:1,f,g,h,i,j,l,k,p,r,s,q,v,y,F,C,z=a.l;s=a.e;var G=a.tf,B=a.$a,J=0;for(f=0;f<a.Hf.length;f++)a.Hf[f].length&&J++;for(f=0;f<J;f++)d.Sc[f]=[],d.C[f]=[];i=0;for(j=s.length;i<j;)l=new THREE.d,l.x=s[i++]*e,l.y=s[i++]*e,l.a=s[i++]*e,d.e.push(l);i=0;for(j=z.length;i<j;){s=z[i++];l=s&1;h=s&2;f=s&4;g=s&8;p=s&16;k=s&32;q=s&64;s&=128;l?(v=new THREE.Z,v.q=z[i++],v.c=z[i++],v.r=z[i++],v.P=z[i++],l=4):(v=new THREE.K,v.q=z[i++],v.c=z[i++],v.r=z[i++],l=
3);h&&(h=z[i++],v.va=h);h=d.l.length;if(f)for(f=0;f<J;f++)y=a.Hf[f],r=z[i++],C=y[2*r],r=y[2*r+1],d.Sc[f][h]=new THREE.k(C,r);if(g)for(f=0;f<J;f++){y=a.Hf[f];F=[];for(g=0;g<l;g++)r=z[i++],C=y[2*r],r=y[2*r+1],F[g]=new THREE.k(C,r);d.C[f][h]=F}p&&(p=3*z[i++],g=new THREE.d,g.x=G[p++],g.y=G[p++],g.a=G[p],v.n=g);if(k)for(f=0;f<l;f++)p=3*z[i++],g=new THREE.d,g.x=G[p++],g.y=G[p++],g.a=G[p],v.p.push(g);q&&(k=z[i++],k=new THREE.t(B[k]),v.color=k);if(s)for(f=0;f<l;f++)k=z[i++],k=new THREE.t(B[k]),v.m.push(k);
d.l.push(v)}if(a.Fe){i=0;for(j=a.Fe.length;i<j;i+=2)z=a.Fe[i],G=a.Fe[i+1],d.Fe.push(new THREE.xc(z,G,0,0))}if(a.Ee){i=0;for(j=a.Ee.length;i<j;i+=2)z=a.Ee[i],G=a.Ee[i+1],d.Ee.push(new THREE.xc(z,G,0,0))}d.Ta=a.Ta;d.Pi=a.Pi;if(n!==a.F){i=0;for(j=a.F.length;i<j;i++){d.F[i]={};d.F[i].name=a.F[i].name;d.F[i].e=[];B=d.F[i].e;J=a.F[i].e;z=0;for(G=J.length;z<G;z+=3)s=new THREE.d,s.x=J[z]*e,s.y=J[z+1]*e,s.a=J[z+2]*e,B.push(s)}}if(n!==a.we){i=0;for(j=a.we.length;i<j;i++){d.we[i]={};d.we[i].name=a.we[i].name;
d.we[i].$a=[];G=d.we[i].$a;B=a.we[i].$a;e=0;for(z=B.length;e<z;e+=3)J=new THREE.t(16755200),pi(J,B[e],B[e+1],B[e+2]),G.push(J)}}cj(d);bj(d);a=gj(a.ga,c);fj(a)&&d.kh();b(d,a)}THREE.Rx=function(){function a(){c++;b.dispatchEvent({type:"progress",loaded:c,total:d});c===d&&b.dispatchEvent({type:"load"})}THREE.tk.call(this);var b=this,c=0,d=0;this.add=function(b){d++;b.addEventListener("load",a,w)}};
THREE.Ei=function(){this.Iv=da();this.Hv=da();this.Gv=da();this.$y=da();this.Zy=da();this.qe={};this.xg={};this.qe.ascii={lm:THREE.ui};this.qe.binary={lm:THREE.oi}};THREE.Ei.prototype.constructor=THREE.Ei;
THREE.Ei.prototype.load=function(a,b){var c=this,d=new XMLHttpRequest;d.onreadystatechange=function(){if(4===d.readyState)if(200===d.status||0===d.status){var e=JSON.parse(d.responseText);c.parse(e,b,a)}else console.error("THREE.SceneLoader: Couldn't load ["+a+"] ["+d.status+"]")};d.open("GET",a,t);d.send(u)};
THREE.Ei.prototype.parse=function(a,b,c){function d(a,b){return"relativeToHTML"==b?a:k+"/"+a}function e(){f(B.fb,O.nb)}function f(a,b){var c,e,g,i,j,k;for(k in b)if(n===B.nb[k]){var q=b[k],v=u;if(q.type&&q.type in l.xg&&n===q.Zu){c={type:1,url:1,o:1,position:1,rotation:1,scale:1,visible:1,children:1,ca:1,Zc:1,md:1,ve:1,duration:1};e={};for(var z in q)z in c||(e[z]=q[z]);r=B.ga[q.o];q.Zu=t;c=l.xg[q.type].mm;c.addEventListener?(c.addEventListener("load",h(k,a,r,q)),c.load(d(q.url,O.li))):c.options?
c.load(d(q.url,O.li),h(k,a,r,q)):c.load(d(q.url,O.li),h(k,a,r,q),e)}else if(n!==q.s){if(p=B.$[q.s]){r=B.ga[q.o];v=r instanceof THREE.Xa;e=q.position;g=q.rotation;i=q.scale;c=q.I;j=0;q.o||(r=new THREE.Ab(B.mj[q.s]));r instanceof THREE.Ab&&0===r.ga.length&&(r=new THREE.Ab(B.mj[q.s]));if(r instanceof THREE.Ab)for(var E=0;E<r.ga.length;E++)v=v||r.ga[E]instanceof THREE.Xa;v&&p.kh();if(q.Zc)v=new THREE.ec(p,r);else if(q.md){if(v=new THREE.xi(p,r),n!==q.duration&&(v.duration=q.duration),n!==q.time&&(v.time=
q.time),n!==q.ve&&(v.ve=q.ve),r.la){for(var E=p,G=n,K=n,I=n,M=n,N=n,I=0,M=E.l.length;I<M;I++){N=E.l[I];N.Rk?N.Rk.copy(N.n):N.Rk=N.n.clone();N.Yg||(N.Yg=[]);G=0;for(K=N.p.length;G<K;G++)N.Yg[G]?N.Yg[G].copy(N.p[G]):N.Yg[G]=N.p[G].clone()}var P=new THREE.G;P.l=E.l;G=0;for(K=E.F.length;G<K;G++){if(!E.la[G]){E.la[G]={};E.la[G].lj=[];E.la[G].p=[];for(var R=E.la[G].lj,V=E.la[G].p,ha,Fa,I=0,M=E.l.length;I<M;I++)N=E.l[I],ha=new THREE.d,Fa=N instanceof THREE.K?{q:new THREE.d,c:new THREE.d,r:new THREE.d}:{q:new THREE.d,
c:new THREE.d,r:new THREE.d,P:new THREE.d},R.push(ha),V.push(Fa)}R=E.la[G];P.e=E.F[G].e;bj(P);P.Jd();I=0;for(M=E.l.length;I<M;I++)N=E.l[I],ha=R.lj[I],Fa=R.p[I],ha.copy(N.n),N instanceof THREE.K?(Fa.q.copy(N.p[0]),Fa.c.copy(N.p[1]),Fa.r.copy(N.p[2])):(Fa.q.copy(N.p[0]),Fa.c.copy(N.p[1]),Fa.r.copy(N.p[2]),Fa.P.copy(N.p[3]))}I=0;for(M=E.l.length;I<M;I++)N=E.l[I],N.n=N.Rk,N.p=N.Yg}}else v=new THREE.O(p,r);v.name=k;c?(v.Ec=w,v.I.set(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10],c[11],c[12],c[13],
c[14],c[15])):(v.position.set(e[0],e[1],e[2]),j?(v.nc.set(j[0],j[1],j[2],j[3]),v.vd=t):v.rotation.set(g[0],g[1],g[2]),v.scale.set(i[0],i[1],i[2]));v.visible=q.visible;v.zc=q.zc;v.Gg=q.Gg;a.add(v);B.nb[k]=v}}else"DirectionalLight"===q.type||"PointLight"===q.type||"AmbientLight"===q.type?(F=n!==q.color?q.color:16777215,C=n!==q.sb?q.sb:1,"DirectionalLight"===q.type?(e=q.direction,y=new THREE.Mc(F,C),y.position.set(e[0],e[1],e[2]),q.target&&(J.push({object:y,Yw:q.target}),y.target=u)):"PointLight"===
q.type?(e=q.position,c=q.bb,y=new THREE.Rf(F,C,c),y.position.set(e[0],e[1],e[2])):"AmbientLight"===q.type&&(y=new THREE.mi(F)),a.add(y),y.name=k,B.Jb[k]=y,B.nb[k]=y):"PerspectiveCamera"===q.type||"OrthographicCamera"===q.type?("PerspectiveCamera"===q.type?s=new THREE.tc(q.pe,q.Si,q.Ba,q.Fa):"OrthographicCamera"===q.type&&(s=new THREE.Ug(q.left,q.right,q.top,q.bottom,q.Ba,q.Fa)),e=q.position,s.position.set(e[0],e[1],e[2]),a.add(s),s.name=k,B.ge[k]=s,B.nb[k]=s):(e=q.position,g=q.rotation,i=q.scale,
j=0,v=new THREE.w,v.name=k,v.position.set(e[0],e[1],e[2]),j?(v.nc.set(j[0],j[1],j[2],j[3]),v.vd=t):v.rotation.set(g[0],g[1],g[2]),v.scale.set(i[0],i[1],i[2]),v.visible=n!==q.visible?q.visible:w,a.add(v),B.nb[k]=v,B.$t[k]=v);if(v){if(n!==q.ca)for(var Oa in q.ca)v.ca[Oa]=q.ca[Oa];n!==q.children&&f(v,q.children)}}}function g(a){return function(b,c){B.$[a]=b;B.mj[a]=c;e();z-=1;j()}}function h(a,b,c,d){return function(f){var f=f.content?f.content:f.Nt?f.fb:f,g=d.position,h=d.rotation,i=d.nc,l=d.scale;
f.position.set(g[0],g[1],g[2]);i?(f.nc.set(i[0],i[1],i[2],i[3]),f.vd=t):f.rotation.set(h[0],h[1],h[2]);f.scale.set(l[0],l[1],l[2]);c&&Zi(f,function(a){a.o=c});b.add(f);B.nb[a]=f;e();z-=1;j()}}function i(a){return function(b,c){B.$[a]=b;B.mj[a]=c}}function j(){if(0===z&&0===G){for(var a=0;a<J.length;a++){var c=J[a],d=B.nb[c.Yw];d?c.object.target=d:(c.object.target=new THREE.w,B.fb.add(c.object.target));c.object.target.ca.Rq=c.object}b(B)}}var l=this,k=hj(c),p,r,s,q,v,y,F,C,z,G,B,J=[],O=a,I;for(I in this.qe)a=
this.qe[I].lm,this.qe[I].mm=new a;for(I in this.xg)a=this.xg[I].lm,this.xg[I].mm=new a;G=z=0;B={fb:new THREE.Di,$:{},mj:{},ga:{},Xb:{},nb:{},ge:{},Jb:{},vh:{},$t:{}};if(O.transform&&(I=O.transform.position,a=O.transform.rotation,c=O.transform.scale,I&&B.fb.position.set(I[0],I[1],I[2]),a&&B.fb.rotation.set(a[0],a[1],a[2]),c&&B.fb.scale.set(c[0],c[1],c[2]),I||a||c))B.fb.Jc(),B.fb.Nb();I=function(a){return function(){G-=a;j()}};for(var P in O.vh)a=O.vh[P],"linear"===a.type?q=new THREE.Qg(0,a.Ba,a.Fa):
"exp2"===a.type&&(q=new THREE.Mf(0,a.ij)),a=a.color,pi(q.color,a[0],a[1],a[2]),B.vh[P]=q;for(var E in O.$)q=O.$[E],q.type in this.qe&&(z+=1);for(var R in O.nb)q=O.nb[R],q.type&&q.type in this.xg&&(z+=1);for(E in O.$)if(q=O.$[E],"cube"===q.type)p=new THREE.pn(q.width,q.height,q.depth,q.xd,q.kd,q.Il),B.$[E]=p;else if("plane"===q.type)p=new THREE.In(q.width,q.height,q.xd,q.kd),B.$[E]=p;else if("sphere"===q.type)p=new THREE.Cd(q.V,q.xd,q.kd),B.$[E]=p;else if("cylinder"===q.type)p=new THREE.si(q.KE,q.Ry,
q.height,q.yD,q.PA),B.$[E]=p;else if("torus"===q.type)p=new THREE.Zn(q.V,q.Ff,q.$D,q.aE),B.$[E]=p;else if("icosahedron"===q.type)p=new THREE.xk(q.V,q.Ww),B.$[E]=p;else if(q.type in this.qe){R={};for(v in q)"type"!==v&&"url"!==v&&(R[v]=q[v]);this.qe[q.type].mm.load(d(q.url,O.li),g(E),R)}else"embedded"===q.type&&(R=O.embeds[q.id],R.mv=O.mv,R&&ij(R,i(E),""));for(var K in O.Xb)if(E=O.Xb[K],E.url instanceof Array){G+=E.url.length;for(v=0;v<E.url.length;v++);}else G+=1;for(K in O.Xb){E=O.Xb[K];n!==E.ub&&
n!==THREE[E.ub]&&(E.ub=new THREE[E.ub]);if(E.url instanceof Array){R=E.url.length;q=[];for(v=0;v<R;v++)q[v]=d(E.url[v],O.li);v=(v=q[0].kj(".dds"))?THREE.Ad.Xu(q,E.ub,I(R)):THREE.Ad.Yu(q,E.ub,I(R))}else v=E.url.toLowerCase().kj(".dds"),R=d(E.url,O.li),q=I(1),v=v?THREE.Ad.Ep(R,E.ub,q):THREE.Ad.Gp(R,E.ub,q),n!==THREE[E.mb]&&(v.mb=THREE[E.mb]),n!==THREE[E.Kb]&&(v.Kb=THREE[E.Kb]),E.Rb&&(v.Rb=E.Rb),E.repeat&&(v.repeat.set(E.repeat[0],E.repeat[1]),1!==E.repeat[0]&&(v.Yb=THREE.Nc),1!==E.repeat[1]&&(v.Zb=
THREE.Nc)),E.offset&&v.offset.set(E.offset[0],E.offset[1]),E.wrap&&(R={repeat:THREE.Nc,pv:THREE.Fk},n!==R[E.wrap[0]]&&(v.Yb=R[E.wrap[0]]),n!==R[E.wrap[1]]&&(v.Zb=R[E.wrap[1]]));B.Xb[K]=v}var V,M;for(V in O.ga){K=O.ga[V];for(M in K.H)"envMap"===M||"map"===M||"lightMap"===M||"bumpMap"===M?K.H[M]=B.Xb[K.H[M]]:"shading"===M?K.H[M]="flat"===K.H[M]?THREE.Pg:THREE.Oc:"side"===M?K.H[M]="double"==K.H[M]?THREE.sc:"back"==K.H[M]?THREE.Lf:THREE.Qe:"blending"===M?K.H[M]=K.H[M]in THREE?THREE[K.H[M]]:THREE.Tg:"combine"===
M?K.H[M]="MixOperation"==K.H[M]?THREE.zn:THREE.yi:"vertexColors"===M?"face"==K.H[M]?K.H[M]=THREE.Pe:K.H[M]&&(K.H[M]=THREE.Wg):"wrapRGB"===M&&(I=K.H[M],K.H[M]=new THREE.d(I[0],I[1],I[2]));n!==K.H.opacity&&1>K.H.opacity&&(K.H.Da=t);K.H.eb?(I=THREE.Un.Ap.n,E=THREE.wc.clone(I.Q),v=K.H.color,R=K.H.sd,q=K.H.za,P=K.H.Ce,E.Mq.value=B.Xb[K.H.eb],K.H.xe&&E.Wq.value.set(K.H.xe[0],K.H.xe[1]),K.H.map&&(E.Lq.value=K.H.map,E.Xo.value=t),K.H.oa&&(E.Xm.value=K.H.oa,E.bu.value=t,E.kx.value=K.H.Hc),K.H.Ma&&(E.Kq.value=
K.H.Ma,E.Wo.value=t),K.H.Ia&&(E.Nq.value=B.Xb[K.H.Ia],E.Yo.value=t),K.H.Ut&&(E.Xw.value=B.Xb[K.H.Ut],E.au.value=t,E.ix.value=K.H.cA,E.jx.value=K.H.dA),oi(E.Vq.value,v),oi(E.Zq.value,R),oi(E.Uq.value,q),E.Yq.value=P,K.H.opacity&&(E.Xq.value=K.H.opacity),r=new THREE.Xa({L:I.L,N:I.N,Q:E,Jb:t,z:t})):r=new THREE[K.type](K.H);B.ga[V]=r}for(V in O.ga)if(K=O.ga[V],K.H.ga){M=[];for(v=0;v<K.H.ga.length;v++)M.push(B.ga[K.H.ga[v]]);B.ga[V].ga=M}e();B.ge&&O.ph.Yi&&(B.zz=B.ge[O.ph.Yi]);B.vh&&O.ph.z&&(B.fb.z=B.vh[O.ph.z]);
a=O.ph.Ly;B.bgColor=new THREE.t;pi(B.bgColor,a[0],a[1],a[2]);B.Jy=O.ph.Ky;j()};THREE.Yn=function(){THREE.tk.call(this);this.crossOrigin=u};THREE.Yn.prototype={constructor:THREE.Yn,load:function(a){var b=this,c=new Image;c.addEventListener("load",function(){var a=new THREE.Bb(c);a.ha=t;b.dispatchEvent({type:"load",content:a})},w);c.addEventListener("error",function(){b.dispatchEvent({type:"error",message:"Couldn't load URL ["+a+"]"})},w);b.crossOrigin&&(c.crossOrigin=b.crossOrigin);c.src=a}};
THREE.W=function(){this.id=THREE.Nr++;this.name="";this.oc=THREE.Qe;this.opacity=1;this.Da=w;this.qb=THREE.Tg;this.gf=THREE.Wn;this.ff=THREE.Fn;this.blendEquation=THREE.gn;this.Ld=this.Bc=t;this.polygonOffset=w;this.Hd=this.Oh=this.Nh=0;this.Oj=w;this.ha=this.visible=t;THREE.Or[this.id]=this};
function jj(a,b){if(n!==b)for(var c in b){var d=b[c];if(n===d)console.warn("THREE.Material: '"+c+"' parameter is undefined.");else if(c in a){var e=a[c];e instanceof THREE.t&&d instanceof THREE.t?e.copy(d):e instanceof THREE.t?e.set(d):e instanceof THREE.d&&d instanceof THREE.d?e.copy(d):a[c]=d}}}
THREE.W.prototype.clone=function(a){n===a&&(a=new THREE.W);a.name=this.name;a.oc=this.oc;a.opacity=this.opacity;a.Da=this.Da;a.qb=this.qb;a.gf=this.gf;a.ff=this.ff;a.blendEquation=this.blendEquation;a.Bc=this.Bc;a.Ld=this.Ld;a.polygonOffset=this.polygonOffset;a.Nh=this.Nh;a.Oh=this.Oh;a.Hd=this.Hd;a.Oj=this.Oj;a.visible=this.visible;return a};THREE.Nr=0;THREE.Or={};
THREE.Pb=function(a){THREE.W.call(this);this.color=new THREE.t(16777215);this.ue=1;this.jm=this.im="round";this.m=w;this.z=t;jj(this,a)};THREE.Pb.prototype=Object.create(THREE.W.prototype);THREE.Pb.prototype.clone=function(){var a=new THREE.Pb;THREE.W.prototype.clone.call(this,a);a.color.copy(this.color);a.ue=this.ue;a.im=this.im;a.jm=this.jm;a.m=this.m;a.z=this.z;return a};
THREE.Re=function(a){THREE.W.call(this);this.color=new THREE.t(16777215);this.scale=this.ue=1;this.ie=3;this.wh=1;this.m=w;this.z=t;jj(this,a)};THREE.Re.prototype=Object.create(THREE.W.prototype);THREE.Re.prototype.clone=function(){var a=new THREE.Re;THREE.W.prototype.clone.call(this,a);a.color.copy(this.color);a.ue=this.ue;a.scale=this.scale;a.ie=this.ie;a.wh=this.wh;a.m=this.m;a.z=this.z;return a};
THREE.Qa=function(a){THREE.W.call(this);this.color=new THREE.t(16777215);this.oa=this.Ia=this.Ma=this.map=u;this.Rc=THREE.yi;this.Hc=1;this.Xc=0.98;this.z=t;this.Ha=THREE.Oc;this.R=w;this.sa=1;this.yb=this.xb="round";this.m=THREE.Sg;this.F=this.Ca=w;jj(this,a)};THREE.Qa.prototype=Object.create(THREE.W.prototype);
THREE.Qa.prototype.clone=function(){var a=new THREE.Qa;THREE.W.prototype.clone.call(this,a);a.color.copy(this.color);a.map=this.map;a.Ma=this.Ma;a.Ia=this.Ia;a.oa=this.oa;a.Rc=this.Rc;a.Hc=this.Hc;a.Xc=this.Xc;a.z=this.z;a.Ha=this.Ha;a.R=this.R;a.sa=this.sa;a.xb=this.xb;a.yb=this.yb;a.m=this.m;a.Ca=this.Ca;a.F=this.F;return a};
THREE.ac=function(a){THREE.W.call(this);this.color=new THREE.t(16777215);this.za=new THREE.t(16777215);this.jb=new THREE.t(0);this.bd=w;this.Lc=new THREE.d(1,1,1);this.oa=this.Ia=this.Ma=this.map=u;this.Rc=THREE.yi;this.Hc=1;this.Xc=0.98;this.z=t;this.Ha=THREE.Oc;this.R=w;this.sa=1;this.yb=this.xb="round";this.m=THREE.Sg;this.la=this.F=this.Ca=w;jj(this,a)};THREE.ac.prototype=Object.create(THREE.W.prototype);
THREE.ac.prototype.clone=function(){var a=new THREE.ac;THREE.W.prototype.clone.call(this,a);a.color.copy(this.color);a.za.copy(this.za);a.jb.copy(this.jb);a.bd=this.bd;a.Lc.copy(this.Lc);a.map=this.map;a.Ma=this.Ma;a.Ia=this.Ia;a.oa=this.oa;a.Rc=this.Rc;a.Hc=this.Hc;a.Xc=this.Xc;a.z=this.z;a.Ha=this.Ha;a.R=this.R;a.sa=this.sa;a.xb=this.xb;a.yb=this.yb;a.m=this.m;a.Ca=this.Ca;a.F=this.F;a.la=this.la;return a};
THREE.bc=function(a){THREE.W.call(this);this.color=new THREE.t(16777215);this.za=new THREE.t(16777215);this.jb=new THREE.t(0);this.sd=new THREE.t(1118481);this.Ce=30;this.Jh=w;this.Eg=t;this.bd=w;this.Lc=new THREE.d(1,1,1);this.Fb=this.Ma=this.map=u;this.eg=1;this.eb=u;this.xe=new THREE.k(1,1);this.oa=this.Ia=u;this.Rc=THREE.yi;this.Hc=1;this.Xc=0.98;this.z=t;this.Ha=THREE.Oc;this.R=w;this.sa=1;this.yb=this.xb="round";this.m=THREE.Sg;this.la=this.F=this.Ca=w;jj(this,a)};THREE.bc.prototype=Object.create(THREE.W.prototype);
THREE.bc.prototype.clone=function(){var a=new THREE.bc;THREE.W.prototype.clone.call(this,a);a.color.copy(this.color);a.za.copy(this.za);a.jb.copy(this.jb);a.sd.copy(this.sd);a.Ce=this.Ce;a.Jh=this.Jh;a.Eg=this.Eg;a.bd=this.bd;a.Lc.copy(this.Lc);a.map=this.map;a.Ma=this.Ma;a.Fb=this.Fb;a.eg=this.eg;a.eb=this.eb;a.xe.copy(this.xe);a.Ia=this.Ia;a.oa=this.oa;a.Rc=this.Rc;a.Hc=this.Hc;a.Xc=this.Xc;a.z=this.z;a.Ha=this.Ha;a.R=this.R;a.sa=this.sa;a.xb=this.xb;a.yb=this.yb;a.m=this.m;a.Ca=this.Ca;a.F=this.F;
a.la=this.la;return a};THREE.Se=function(a){THREE.W.call(this);this.R=w;this.sa=1;jj(this,a)};THREE.Se.prototype=Object.create(THREE.W.prototype);THREE.Se.prototype.clone=function(){var a=new THREE.Pb;THREE.W.prototype.clone.call(this,a);a.R=this.R;a.sa=this.sa;return a};THREE.Te=function(a){THREE.W.call(this);this.Ha=THREE.Pg;this.R=w;this.sa=1;jj(this,a)};THREE.Te.prototype=Object.create(THREE.W.prototype);
THREE.Te.prototype.clone=function(){var a=new THREE.Te;THREE.W.prototype.clone.call(this,a);a.Ha=this.Ha;a.R=this.R;a.sa=this.sa;return a};THREE.Ab=function(a){this.ga=a instanceof Array?a:[]};THREE.Ab.prototype.clone=function(){return new THREE.Ab(this.ga.slice(0))};THREE.Ue=function(a){THREE.W.call(this);this.color=new THREE.t(16777215);this.map=u;this.size=1;this.Mb=t;this.m=w;this.z=t;jj(this,a)};THREE.Ue.prototype=Object.create(THREE.W.prototype);
THREE.Ue.prototype.clone=function(){var a=new THREE.Ue;THREE.W.prototype.clone.call(this,a);a.color.copy(this.color);a.map=this.map;a.size=this.size;a.Mb=this.Mb;a.m=this.m;a.z=this.z;return a};THREE.zi=function(a){THREE.W.call(this);this.color=new THREE.t(16777215);this.vb=da();jj(this,a)};THREE.zi.prototype=Object.create(THREE.W.prototype);THREE.zi.prototype.clone=function(){var a=new THREE.zi;THREE.W.prototype.clone.call(this,a);a.color.copy(this.color);a.vb=this.vb;return a};
THREE.Hn=function(a){this.element=a};THREE.Hn.prototype.clone=function(){return new THREE.Hn(this.element)};THREE.Xa=function(a){THREE.W.call(this);this.N=this.L="void main() {}";this.Q={};this.Fl={};this.attributes=u;this.Ha=THREE.Oc;this.R=w;this.sa=1;this.Jb=this.z=w;this.m=THREE.Sg;this.la=this.F=this.Ca=w;jj(this,a)};THREE.Xa.prototype=Object.create(THREE.W.prototype);
THREE.Xa.prototype.clone=function(){var a=new THREE.Xa;THREE.W.prototype.clone.call(this,a);a.L=this.L;a.N=this.N;a.Q=THREE.wc.clone(this.Q);a.attributes=this.attributes;a.Fl=this.Fl;a.Ha=this.Ha;a.R=this.R;a.sa=this.sa;a.z=this.z;a.Jb=this.Jb;a.m=this.m;a.Ca=this.Ca;a.F=this.F;a.la=this.la;return a};
THREE.Fi=function(a){THREE.W.call(this);this.color=new THREE.t(16777215);this.map=new THREE.Bb;this.$c=t;this.Bc=!this.$c;this.Mb=!this.$c;this.Rh=!this.Mb;this.$f=THREE.ed.rb.clone();this.z=w;this.Lg=new THREE.k(0,0);this.Mg=new THREE.k(1,1);jj(this,a);a=a||{};n===a.Bc&&(this.Bc=!this.$c);n===a.Mb&&(this.Mb=!this.$c);n===a.Rh&&(this.Rh=!this.Mb)};THREE.Fi.prototype=Object.create(THREE.W.prototype);
THREE.Fi.prototype.clone=function(){var a=new THREE.Fi;THREE.W.prototype.clone.call(this,a);a.color.copy(this.color);a.map=this.map;a.$c=this.$c;a.Mb=this.Mb;a.Rh=this.Rh;a.$f.copy(this.$f);a.Lg.copy(this.Lg);a.Mg.copy(this.Mg);a.z=this.z;return a};THREE.ed={};THREE.ed.JE=new THREE.k(1,-1);THREE.ed.IE=new THREE.k(0,-1);THREE.ed.LE=new THREE.k(-1,-1);THREE.ed.cz=new THREE.k(1,0);THREE.ed.rb=new THREE.k(0,0);THREE.ed.dz=new THREE.k(-1,0);THREE.ed.Ty=new THREE.k(1,1);THREE.ed.Sy=new THREE.k(0,1);
THREE.ed.Uy=new THREE.k(-1,1);THREE.Bb=function(a,b,c,d,e,f,g,h,i){this.id=THREE.ls++;this.name="";this.J=a;this.Lb=[];this.ub=n!==b?b:new THREE.$n;this.Yb=n!==c?c:THREE.Le;this.Zb=n!==d?d:THREE.Le;this.Kb=n!==e?e:THREE.Td;this.mb=n!==f?f:THREE.Dk;this.Rb=n!==i?i:1;this.ka=n!==g?g:THREE.Vg;this.type=n!==h?h:THREE.Pk;this.offset=new THREE.k(0,0);this.repeat=new THREE.k(1,1);this.lb=t;this.Dm=w;this.mf=t;this.an=4;this.ha=w;this.Mj=u;THREE.ms[this.id]=this};
THREE.Bb.prototype={constructor:THREE.Bb,clone:function(a){n===a&&(a=new THREE.Bb);a.J=this.J;a.Lb=this.Lb.slice(0);a.ub=this.ub;a.Yb=this.Yb;a.Zb=this.Zb;a.Kb=this.Kb;a.mb=this.mb;a.Rb=this.Rb;a.ka=this.ka;a.type=this.type;a.offset.copy(this.offset);a.repeat.copy(this.repeat);a.lb=this.lb;a.Dm=this.Dm;a.mf=this.mf;a.an=this.an;return a}};THREE.ls=0;THREE.ms={};THREE.Me=function(a,b,c,d,e,f,g,h,i,j,l){THREE.Bb.call(this,u,f,g,h,i,j,d,e,l);this.J={width:b,height:c};this.Lb=a;this.lb=w};
THREE.Me.prototype=Object.create(THREE.Bb.prototype);THREE.Me.prototype.clone=function(){var a=new THREE.Me;THREE.Bb.prototype.clone.call(this,a);return a};THREE.Oe=function(a,b,c,d,e,f,g,h,i,j,l){THREE.Bb.call(this,u,f,g,h,i,j,d,e,l);this.J={data:a,width:b,height:c}};THREE.Oe.prototype=Object.create(THREE.Bb.prototype);THREE.Oe.prototype.clone=function(){var a=new THREE.Oe;THREE.Bb.prototype.clone.call(this,a);return a};THREE.Qf=function(a){THREE.w.call(this);this.o=a};THREE.Qf.prototype=Object.create(THREE.w.prototype);
THREE.Qf.prototype.clone=function(a){n===a&&(a=new THREE.Qf(this.o));THREE.w.prototype.clone.call(this,a);return a};THREE.Qb=function(a,b){THREE.w.call(this);this.s=a;this.o=n!==b?b:new THREE.Ue({color:16777215*Math.random()});this.Bf=w;this.s&&(u===this.s.Eb&&this.s.dj(),this.Wi=a.Eb.V);this.nf=w};THREE.Qb.prototype=Object.create(THREE.w.prototype);THREE.Qb.prototype.clone=function(a){n===a&&(a=new THREE.Qb(this.s,this.o));a.Bf=this.Bf;THREE.w.prototype.clone.call(this,a);return a};
THREE.Ja=function(a,b,c){THREE.w.call(this);this.s=a;this.o=n!==b?b:new THREE.Pb({color:16777215*Math.random()});this.type=n!==c?c:THREE.yn;this.s&&(this.s.Eb||this.s.dj())};THREE.yn=0;THREE.Pf=1;THREE.Ja.prototype=Object.create(THREE.w.prototype);THREE.Ja.prototype.clone=function(a){n===a&&(a=new THREE.Ja(this.s,this.o,this.type));THREE.w.prototype.clone.call(this,a);return a};
THREE.O=function(a,b){THREE.w.call(this);this.s=a;this.o=n!==b?b:new THREE.Qa({color:16777215*Math.random(),R:t});if(this.s&&(u===this.s.Eb&&this.s.dj(),this.Wi=a.Eb.V,this.s.F.length)){this.tm=-1;this.Qp=[];this.Vc=[];this.rv={};for(var c=0;c<this.s.F.length;c++)this.Vc.push(0),this.rv[this.s.F[c].name]=c}};THREE.O.prototype=Object.create(THREE.w.prototype);THREE.O.prototype.clone=function(a){n===a&&(a=new THREE.O(this.s,this.o));THREE.w.prototype.clone.call(this,a);return a};
THREE.zd=function(a){THREE.w.call(this);this.Zc=a;this.rd=new THREE.D};THREE.zd.prototype=Object.create(THREE.w.prototype);THREE.zd.prototype.update=function(a,b){this.Ec&&(b|=this.Jc());if(b||this.cb)a?this.rd.multiply(a,this.I):this.rd.copy(this.I),this.cb=w,b=t;var c,d=this.children.length;for(c=0;c<d;c++)this.children[c].update(this.rd,b)};
THREE.ec=function(a,b,c){THREE.O.call(this,a,b);this.Qd=n!==c?c:t;this.Bu=new THREE.D;this.Ta=[];this.dh=[];var d,e,f;if(this.s&&n!==this.s.Ta){for(a=0;a<this.s.Ta.length;a++)c=this.s.Ta[a],d=c.Qj,e=c.RD,f=c.XD,b=n,n===b&&(b=new THREE.zd(this)),this.Ta.push(b),b.name=c.name,b.position.set(d[0],d[1],d[2]),b.nc.set(e[0],e[1],e[2],e[3]),b.vd=t,n!==f?b.scale.set(f[0],f[1],f[2]):b.scale.set(1,1,1);for(a=0;a<this.Ta.length;a++)c=this.s.Ta[a],b=this.Ta[a],-1===c.parent?this.add(b):this.Ta[c.parent].add(b);
a=this.Ta.length;this.Qd?(this.cg=this.dg=256<a?64:64<a?32:16<a?16:8,this.dh=new Float32Array(4*this.dg*this.cg),this.be=new THREE.Oe(this.dh,this.dg,this.cg,THREE.Vg,THREE.uk),this.be.mb=THREE.Rg,this.be.Kb=THREE.Rg,this.be.lb=w,this.be.mf=w):this.dh=new Float32Array(16*a);this.Nb(t);for(a=0;a<this.s.Ee.length;a++)c=this.s.Fe[a],d=1/c.zp(),Infinity!==d?c.T(d):c.set(1)}};THREE.ec.prototype=Object.create(THREE.O.prototype);
THREE.ec.prototype.Nb=function(a){this.Ec&&this.Jc();if(this.cb||a)this.parent?this.A.multiply(this.parent.A,this.I):this.A.copy(this.I),this.cb=w;for(var a=0,b=this.children.length;a<b;a++){var c=this.children[a];c instanceof THREE.zd?c.update(this.Bu,w):c.Nb(t)}if(n==this.xl){this.xl=[];a=0;for(b=this.Ta.length;a<b;a++)c=new THREE.D,c.Gb(this.Ta[a].rd),this.xl.push(c)}a=0;for(b=this.Ta.length;a<b;a++)THREE.ec.Tp.multiply(this.Ta[a].rd,this.xl[a]),Hi(THREE.ec.Tp,this.dh,16*a);this.Qd&&(this.be.ha=
t)};THREE.ec.prototype.clone=function(a){n===a&&(a=new THREE.ec(this.s,this.o,this.Qd));THREE.O.prototype.clone.call(this,a);return a};THREE.ec.Tp=new THREE.D;THREE.xi=function(a,b){THREE.O.call(this,a,b);this.duration=1E3;this.ve=w;this.Po=this.yp=this.time=0;this.direction=1;this.jg=w;var c=this.s.F.length-1;this.Rw=0;this.cu=c;this.length=this.cu-this.Rw+1};THREE.xi.prototype=Object.create(THREE.O.prototype);
THREE.xi.prototype.clone=function(a){n===a&&(a=new THREE.xi(this.s,this.o));a.duration=this.duration;a.ve=this.ve;a.time=this.time;a.yp=this.yp;a.Po=this.Po;a.direction=this.direction;a.jg=this.jg;THREE.O.prototype.clone.call(this,a);return a};THREE.Bd=function(a,b){THREE.w.call(this);this.s=a;this.o=b};THREE.Bd.prototype=Object.create(THREE.w.prototype);THREE.Bd.prototype.clone=function(a){n===a&&(a=new THREE.Bd(this.s,this.o));THREE.w.prototype.clone.call(this,a);return a};
THREE.Ck=function(){THREE.w.call(this);this.Sd=[]};THREE.Ck.prototype=Object.create(THREE.w.prototype);THREE.Ck.prototype.update=function(a){if(1<this.Sd.length){a.Aa.Gb(a.A);a=a.Aa;a=-(a.elements[2]*this.A.elements[12]+a.elements[6]*this.A.elements[13]+a.elements[10]*this.A.elements[14]+a.elements[14]);this.Sd[0].ym.visible=t;for(var b=1;b<this.Sd.length;b++)if(a>=this.Sd[b].bF)this.Sd[b-1].ym.visible=w,this.Sd[b].ym.visible=t;else break;for(;b<this.Sd.length;b++)this.Sd[b].ym.visible=w}};
THREE.Ck.prototype.clone=da();THREE.We=function(a){THREE.w.call(this);this.o=n!==a?a:new THREE.Fi;this.nq=this.rotation;this.rotation=0};THREE.We.prototype=Object.create(THREE.w.prototype);THREE.We.prototype.Jc=function(){Fi(this.I,this.position);this.nq.set(0,0,this.rotation);Ei(this.I,this.nq);if(1!==this.scale.x||1!==this.scale.y)this.I.scale(this.scale),this.Xi=Math.max(this.scale.x,this.scale.y);this.cb=t};
THREE.We.prototype.clone=function(a){n===a&&(a=new THREE.We(this.o));THREE.w.prototype.clone.call(this,a);return a};THREE.Di=function(){THREE.w.call(this);this.Xp=this.z=u;this.Ec=w;this.Ii=[];this.fc=[];this.Tf=[];this.Uf=[]};THREE.Di.prototype=Object.create(THREE.w.prototype);
function Xi(a,b){if(b instanceof THREE.Ob)-1===a.fc.indexOf(b)&&a.fc.push(b),b.target&&n===b.target.parent&&a.add(b.target);else if(!(b instanceof THREE.$b||b instanceof THREE.zd)&&-1===a.Ii.indexOf(b)){a.Ii.push(b);a.Tf.push(b);var c=a.Uf.indexOf(b);-1!==c&&a.Uf.splice(c,1)}for(c=0;c<b.children.length;c++)Xi(a,b.children[c])}
function Yi(a,b){if(b instanceof THREE.Ob){var c=a.fc.indexOf(b);-1!==c&&a.fc.splice(c,1)}else b instanceof THREE.$b||(c=a.Ii.indexOf(b),-1!==c&&(a.Ii.splice(c,1),a.Uf.push(b),c=a.Tf.indexOf(b),-1!==c&&a.Tf.splice(c,1)));for(c=0;c<b.children.length;c++)Yi(a,b.children[c])}THREE.Qg=function(a,b,c){this.name="";this.color=new THREE.t(a);this.Ba=n!==b?b:1;this.Fa=n!==c?c:1E3};THREE.Qg.prototype.clone=function(){return new THREE.Qg(ri(this.color),this.Ba,this.Fa)};
THREE.Mf=function(a,b){this.name="";this.color=new THREE.t(a);this.ij=n!==b?b:2.5E-4};THREE.Mf.prototype.clone=function(){return new THREE.Mf(ri(this.color),this.ij)};
THREE.zx=function(a){function b(a){F!==a&&(F=q.globalAlpha=a)}function c(a){C!==a&&(a===THREE.Tg?q.globalCompositeOperation="source-over":a===THREE.hn?q.globalCompositeOperation="lighter":a===THREE.Xn&&(q.globalCompositeOperation="darker"),C=a)}function d(a){z!==a&&(z=q.strokeStyle=a)}function e(a){G!==a&&(G=q.fillStyle=a)}console.log("THREE.CanvasRenderer",THREE.Ln);var a=a||{},f=this,g,h,i,j=new THREE.Gk,l=n!==a.canvas?a.canvas:document.createElement("canvas"),k,p,r,s,q=l.getContext("2d"),v=new THREE.t(0),
y=0,F=1,C=0,z=u,G=u,B=u,J=u,O=u,I,P,E,R,K=new THREE.dc,V=new THREE.dc,M,W,la,X,aa,ia,Ia,S,ja,wa,ba,Q,T=new THREE.t,na=new THREE.t,U=new THREE.t,Y=new THREE.t,ka=new THREE.t,N=new THREE.t,oa=new THREE.t,Na={},za={},ha,Fa,Oa,xa,ob,pb,qb,ib,Rb,Sb,Bb=new THREE.Ik,Qa=new THREE.Ik,Ka=new THREE.Ik,tb=w,Ga=new THREE.t,fb=new THREE.t,ab=new THREE.t,Pa=new THREE.d,H,ua,Aa,Ba,Lb,gb,a=16;H=document.createElement("canvas");H.width=H.height=2;ua=H.getContext("2d");ua.fillStyle="rgba(0,0,0,1)";ua.fillRect(0,0,2,
2);Aa=ua.getImageData(0,0,2,2);Ba=Aa.data;Lb=document.createElement("canvas");Lb.width=Lb.height=a;gb=Lb.getContext("2d");gb.translate(-a/2,-a/2);gb.scale(a,a);a--;this.Wt=l;this.Gw=this.fk=this.rl=t;this.info={B:{e:0,l:0}};this.tq=function(a,b){k=a;p=b;r=Math.floor(k/2);s=Math.floor(p/2);l.width=k;l.height=p;Bb.set(-r,-s,r,s);Qa.set(-r,-s,r,s);F=1;C=0;O=J=B=G=z=u};this.tw=function(a,b){v.copy(a);y=n!==b?b:1;Qa.set(-r,-s,r,s)};this.uw=function(a,b){oi(v,a);y=n!==b?b:1;Qa.set(-r,-s,r,s)};this.nu=function(){return 0};
this.clear=function(){q.setTransform(1,0,0,-1,r,s);w===Qa.Iu()&&(Qa.Gj(Bb),Qa.$l(2),1>y&&q.clearRect(Math.floor(Qa.lp()),Math.floor(Qa.mp()),Math.floor(Qa.kp()),Math.floor(Qa.ip())),0<y&&(c(THREE.Tg),b(1),e("rgba("+Math.floor(255*v.g)+","+Math.floor(255*v.f)+","+Math.floor(255*v.c)+","+y+")"),q.fillRect(Math.floor(Qa.lp()),Math.floor(Qa.mp()),Math.floor(Qa.kp()),Math.floor(Qa.ip()))),Qa.empty())};this.B=function(a,l){function m(a,b,c){for(var d=0,e=i.length;d<e;d++){var f=i[d],g=f.color;if(f instanceof
THREE.Mc){var h=Gi(f.A).normalize(),m=b.fa(h);0>=m||(m*=f.sb,c.g+=g.g*m,c.f+=g.f*m,c.c+=g.c*m)}else f instanceof THREE.Rf&&(h=Gi(f.A),m=b.fa(Pa.sub(h,a).normalize()),0>=m||(m*=0==f.bb?1:1-Math.min(a.Sb(h)/f.bb,1),0!=m&&(m*=f.sb,c.g+=g.g*m,c.f+=g.f*m,c.c+=g.c*m)))}}function k(a,d,e,g,h,i,j,H){f.info.B.e+=3;f.info.B.l++;b(H.opacity);c(H.qb);M=a.h.x;W=a.h.y;la=d.h.x;X=d.h.y;aa=e.h.x;ia=e.h.y;p(M,W,la,X,aa,ia);(H instanceof THREE.ac||H instanceof THREE.bc)&&u===H.map&&u===H.map?(N.copy(H.color),oa.copy(H.jb),
H.m===THREE.Pe&&(N.g*=j.color.g,N.f*=j.color.f,N.c*=j.color.c),t===tb?w===H.R&&H.Ha==THREE.Oc&&3==j.nk?(na.g=U.g=Y.g=Ga.g,na.f=U.f=Y.f=Ga.f,na.c=U.c=Y.c=Ga.c,m(j.Y.Gc,j.Kc[0],na),m(j.ba.Gc,j.Kc[1],U),m(j.wb.Gc,j.Kc[2],Y),na.g=na.g*N.g+oa.g,na.f=na.f*N.f+oa.f,na.c=na.c*N.c+oa.c,U.g=U.g*N.g+oa.g,U.f=U.f*N.f+oa.f,U.c=U.c*N.c+oa.c,Y.g=Y.g*N.g+oa.g,Y.f=Y.f*N.f+oa.f,Y.c=Y.c*N.c+oa.c,ka.g=0.5*(U.g+Y.g),ka.f=0.5*(U.f+Y.f),ka.c=0.5*(U.c+Y.c),Oa=G(na,U,Y,ka),F(M,W,la,X,aa,ia,0,0,Oa)):(T.g=Ga.g,T.f=Ga.f,T.c=
Ga.c,m(j.fg,j.Fc,T),T.g=T.g*N.g+oa.g,T.f=T.f*N.f+oa.f,T.c=T.c*N.c+oa.c,t===H.R?y(T,H.sa,H.xb,H.yb):z(T)):t===H.R?y(H.color,H.sa,H.xb,H.yb):z(H.color)):H instanceof THREE.Qa||H instanceof THREE.ac||H instanceof THREE.bc?u!==H.map?H.map.ub instanceof THREE.$n&&(xa=j.Hf[0],C(M,W,la,X,aa,ia,xa[g].kk,xa[g].Ie,xa[h].kk,xa[h].Ie,xa[i].kk,xa[i].Ie,H.map)):u!==H.oa?H.oa.ub instanceof THREE.ds&&(a=l.Aa,Pa.copy(j.Kc[g]),ob=0.5*(Pa.x*a.elements[0]+Pa.y*a.elements[4]+Pa.a*a.elements[8])+0.5,pb=0.5*(Pa.x*a.elements[1]+
Pa.y*a.elements[5]+Pa.a*a.elements[9])+0.5,Pa.copy(j.Kc[h]),qb=0.5*(Pa.x*a.elements[0]+Pa.y*a.elements[4]+Pa.a*a.elements[8])+0.5,ib=0.5*(Pa.x*a.elements[1]+Pa.y*a.elements[5]+Pa.a*a.elements[9])+0.5,Pa.copy(j.Kc[i]),Rb=0.5*(Pa.x*a.elements[0]+Pa.y*a.elements[4]+Pa.a*a.elements[8])+0.5,Sb=0.5*(Pa.x*a.elements[1]+Pa.y*a.elements[5]+Pa.a*a.elements[9])+0.5,C(M,W,la,X,aa,ia,ob,pb,qb,ib,Rb,Sb,H.oa)):(T.copy(H.color),H.m===THREE.Pe&&(T.g*=j.color.g,T.f*=j.color.f,T.c*=j.color.c),t===H.R?y(T,H.sa,H.xb,
H.yb):z(T)):H instanceof THREE.Se?(ha=l.Ba,Fa=l.Fa,na.g=na.f=na.c=1-Sa(a.h.a,ha,Fa),U.g=U.f=U.c=1-Sa(d.h.a,ha,Fa),Y.g=Y.f=Y.c=1-Sa(e.h.a,ha,Fa),ka.g=0.5*(U.g+Y.g),ka.f=0.5*(U.f+Y.f),ka.c=0.5*(U.c+Y.c),Oa=G(na,U,Y,ka),F(M,W,la,X,aa,ia,0,0,Oa)):H instanceof THREE.Te&&(T.g=yd(j.Fc.x),T.f=yd(j.Fc.y),T.c=yd(j.Fc.a),t===H.R?y(T,H.sa,H.xb,H.yb):z(T))}function p(a,b,c,d,e,f){q.beginPath();q.moveTo(a,b);q.lineTo(c,d);q.lineTo(e,f);q.closePath()}function v(a,b,c,d,e,f,g,h){q.beginPath();q.moveTo(a,b);q.lineTo(c,
d);q.lineTo(e,f);q.lineTo(g,h);q.closePath()}function y(a,b,c,e){B!==b&&(B=q.lineWidth=b);J!==c&&(J=q.lineCap=c);O!==e&&(O=q.lineJoin=e);d(qi(a));q.stroke();Ka.$l(2*b)}function z(a){e(qi(a));q.fill()}function C(a,b,c,d,f,g,h,i,m,j,l,k,H){if(!(H instanceof THREE.Oe||n===H.J||0==H.J.width)){if(t===H.ha){var Sa=H.Yb==THREE.Nc,p=H.Zb==THREE.Nc;Na[H.id]=q.createPattern(H.J,t===Sa&&t===p?"repeat":t===Sa&&w===p?"repeat-x":w===Sa&&t===p?"repeat-y":"no-repeat");H.ha=w}n===Na[H.id]?e("rgba(0,0,0,1)"):e(Na[H.id]);
var Sa=H.offset.x/H.repeat.x,p=H.offset.y/H.repeat.y,r=H.J.width*H.repeat.x,kc=H.J.height*H.repeat.y,h=(h+Sa)*r,i=(1-i+p)*kc,c=c-a,d=d-b,f=f-a,g=g-b,m=(m+Sa)*r-h,j=(1-j+p)*kc-i,l=(l+Sa)*r-h,k=(1-k+p)*kc-i,Sa=m*k-l*j;0===Sa?(n===za[H.id]&&(b=document.createElement("canvas"),b.width=H.J.width,b.height=H.J.height,b=b.getContext("2d"),b.drawImage(H.J,0,0),za[H.id]=b.getImageData(0,0,H.J.width,H.J.height).data),b=za[H.id],h=4*(Math.floor(h)+Math.floor(i)*H.J.width),pi(T,b[h]/255,b[h+1]/255,b[h+2]/255),
z(T)):(Sa=1/Sa,H=(k*c-j*f)*Sa,j=(k*d-j*g)*Sa,c=(m*f-l*c)*Sa,d=(m*g-l*d)*Sa,a=a-H*h-c*i,h=b-j*h-d*i,q.save(),q.transform(H,j,c,d,a,h),q.fill(),q.restore())}}function F(a,b,c,d,e,f,g,h,i){var m,j,l,k,H,Sa;H=i.width-1;Sa=i.height-1;g*=H;m=0*Sa;c-=a;d-=b;e-=a;f-=b;j=1*H-g;h=h*Sa-m;l=0*H-g;k=1*Sa-m;Sa=1/(j*k-l*h);H=(k*c-h*e)*Sa;h=(k*d-h*f)*Sa;c=(j*e-l*c)*Sa;d=(j*f-l*d)*Sa;a=a-H*g-c*m;b=b-h*g-d*m;q.save();q.transform(H,h,c,d,a,b);q.clip();q.drawImage(i,0,0);q.restore()}function G(a,b,c,d){Ba[0]=255*a.g|
0;Ba[1]=255*a.f|0;Ba[2]=255*a.c|0;Ba[4]=255*b.g|0;Ba[5]=255*b.f|0;Ba[6]=255*b.c|0;Ba[8]=255*c.g|0;Ba[9]=255*c.f|0;Ba[10]=255*c.c|0;Ba[12]=255*d.g|0;Ba[13]=255*d.f|0;Ba[14]=255*d.c|0;ua.putImageData(Aa,0,0);gb.drawImage(H,0,0);return Lb}function Sa(a,b,c){a=(a-b)/(c-b);return a*a*(3-2*a)}function yd(a){a=0.5*(a+1);return 0>a?0:1<a?1:a}function kc(a,b){var c=b.x-a.x,d=b.y-a.y,e=c*c+d*d;0!==e&&(e=1/Math.sqrt(e),c*=e,d*=e,b.x+=c,b.y+=d,a.x-=c,a.y-=d)}if(w===l instanceof THREE.$b)console.error("THREE.CanvasRenderer.render: camera is not an instance of THREE.Camera.");
else{var Xc,He,Ca,pa;t===this.rl?this.clear():q.setTransform(1,0,0,-1,r,s);f.info.B.e=0;f.info.B.l=0;g=j.dw(a,l,this.fk,this.Gw);h=g.elements;i=g.Jb;tb=0<i.length;if(t===tb){pi(Ga,0,0,0);pi(fb,0,0,0);pi(ab,0,0,0);Xc=0;for(He=i.length;Xc<He;Xc++){pa=i[Xc];var Da=pa.color;pa instanceof THREE.mi?(Ga.g+=Da.g,Ga.f+=Da.f,Ga.c+=Da.c):pa instanceof THREE.Mc?(fb.g+=Da.g,fb.f+=Da.f,fb.c+=Da.c):pa instanceof THREE.Rf&&(ab.g+=Da.g,ab.f+=Da.f,ab.c+=Da.c)}}Xc=0;for(He=h.length;Xc<He;Xc++)if(Ca=h[Xc],pa=Ca.o,!(n===
pa||w===pa.visible)){Ka.empty();if(Ca instanceof THREE.Sn){I=Ca;I.x*=r;I.y*=s;var Da=I,Fb=Ca;b(pa.opacity);c(pa.qb);var lc=n,mc=n,cc=n,dc=n,Ie=Ca=n,Mf=n;pa instanceof THREE.Ue?u===pa.map?(cc=Fb.object.scale.x,dc=Fb.object.scale.y,cc*=Fb.scale.x*r,dc*=Fb.scale.y*s,Ka.set(Da.x-cc,Da.y-dc,Da.x+cc,Da.y+dc),w!==Bb.yg(Ka)&&(e(qi(pa.color)),q.save(),q.translate(Da.x,Da.y),q.rotate(-Fb.rotation),q.scale(cc,dc),q.fillRect(-1,-1,2,2),q.restore())):(Ca=pa.map.J,Ie=Ca.width>>1,Mf=Ca.height>>1,cc=Fb.scale.x*r,
dc=Fb.scale.y*s,lc=cc*Ie,mc=dc*Mf,Ka.set(Da.x-lc,Da.y-mc,Da.x+lc,Da.y+mc),w!==Bb.yg(Ka)&&(q.save(),q.translate(Da.x,Da.y),q.rotate(-Fb.rotation),q.scale(cc,-dc),q.translate(-Ie,-Mf),q.drawImage(Ca,0,0),q.restore())):pa instanceof THREE.zi&&(lc=Fb.scale.x*r,mc=Fb.scale.y*s,Ka.set(Da.x-lc,Da.y-mc,Da.x+lc,Da.y+mc),w!==Bb.yg(Ka)&&(d(qi(pa.color)),e(qi(pa.color)),q.save(),q.translate(Da.x,Da.y),q.rotate(-Fb.rotation),q.scale(lc,mc),pa.vb(q),q.restore()))}else Ca instanceof THREE.Rn?(I=Ca.Y,P=Ca.ba,I.h.x*=
r,I.h.y*=s,P.h.x*=r,P.h.y*=s,Ka.Zf(I.h.x,I.h.y),Ka.Zf(P.h.x,P.h.y),t===Bb.yg(Ka)&&(Da=I,Fb=P,b(pa.opacity),c(pa.qb),q.beginPath(),q.moveTo(Da.h.x,Da.h.y),q.lineTo(Fb.h.x,Fb.h.y),pa instanceof THREE.Pb&&(Da=pa.ue,B!==Da&&(B=q.lineWidth=Da),Da=pa.im,J!==Da&&(J=q.lineCap=Da),Da=pa.jm,O!==Da&&(O=q.lineJoin=Da),d(qi(pa.color)),q.stroke(),Ka.$l(2*pa.ue)))):Ca instanceof THREE.Pn?(I=Ca.Y,P=Ca.ba,E=Ca.wb,I.h.x*=r,I.h.y*=s,P.h.x*=r,P.h.y*=s,E.h.x*=r,E.h.y*=s,t===pa.Oj&&(kc(I.h,P.h),kc(P.h,E.h),kc(E.h,I.h)),
Ka.Ts(I.h.x,I.h.y,P.h.x,P.h.y,E.h.x,E.h.y),t===Bb.yg(Ka)&&k(I,P,E,0,1,2,Ca,pa)):Ca instanceof THREE.Qn&&(I=Ca.Y,P=Ca.ba,E=Ca.wb,R=Ca.cn,I.h.x*=r,I.h.y*=s,P.h.x*=r,P.h.y*=s,E.h.x*=r,E.h.y*=s,R.h.x*=r,R.h.y*=s,K.h.copy(P.h),V.h.copy(R.h),t===pa.Oj&&(kc(I.h,P.h),kc(P.h,R.h),kc(R.h,I.h),kc(E.h,K.h),kc(E.h,V.h)),Ka.Zf(I.h.x,I.h.y),Ka.Zf(P.h.x,P.h.y),Ka.Zf(E.h.x,E.h.y),Ka.Zf(R.h.x,R.h.y),t===Bb.yg(Ka)&&(Da=I,Fb=P,lc=E,mc=R,cc=K,dc=V,Ie=a,f.info.B.e+=4,f.info.B.l++,b(pa.opacity),c(pa.qb),n!==pa.map&&u!==
pa.map||n!==pa.oa&&u!==pa.oa?(k(Da,Fb,mc,0,1,3,Ca,pa),k(cc,lc,dc,1,2,3,Ca,pa)):(M=Da.h.x,W=Da.h.y,la=Fb.h.x,X=Fb.h.y,aa=lc.h.x,ia=lc.h.y,Ia=mc.h.x,S=mc.h.y,ja=cc.h.x,wa=cc.h.y,ba=dc.h.x,Q=dc.h.y,pa instanceof THREE.ac||pa instanceof THREE.bc?(N.copy(pa.color),oa.copy(pa.jb),pa.m===THREE.Pe&&(N.g*=Ca.color.g,N.f*=Ca.color.f,N.c*=Ca.color.c),t===tb?w===pa.R&&pa.Ha==THREE.Oc&&4==Ca.nk?(na.g=U.g=Y.g=ka.g=Ga.g,na.f=U.f=Y.f=ka.f=Ga.f,na.c=U.c=Y.c=ka.c=Ga.c,m(Ca.Y.Gc,Ca.Kc[0],na),m(Ca.ba.Gc,Ca.Kc[1],U),
m(Ca.cn.Gc,Ca.Kc[3],Y),m(Ca.wb.Gc,Ca.Kc[2],ka),na.g=na.g*N.g+oa.g,na.f=na.f*N.f+oa.f,na.c=na.c*N.c+oa.c,U.g=U.g*N.g+oa.g,U.f=U.f*N.f+oa.f,U.c=U.c*N.c+oa.c,Y.g=Y.g*N.g+oa.g,Y.f=Y.f*N.f+oa.f,Y.c=Y.c*N.c+oa.c,ka.g=ka.g*N.g+oa.g,ka.f=ka.f*N.f+oa.f,ka.c=ka.c*N.c+oa.c,Oa=G(na,U,Y,ka),p(M,W,la,X,Ia,S),F(M,W,la,X,Ia,S,0,0,Oa),p(ja,wa,aa,ia,ba,Q),F(ja,wa,aa,ia,ba,Q,1,1,Oa)):(T.g=Ga.g,T.f=Ga.f,T.c=Ga.c,m(Ca.fg,Ca.Fc,T),T.g=T.g*N.g+oa.g,T.f=T.f*N.f+oa.f,T.c=T.c*N.c+oa.c,v(M,W,la,X,aa,ia,Ia,S),t===pa.R?y(T,pa.sa,
pa.xb,pa.yb):z(T)):(T.g=N.g+oa.g,T.f=N.f+oa.f,T.c=N.c+oa.c,v(M,W,la,X,aa,ia,Ia,S),t===pa.R?y(T,pa.sa,pa.xb,pa.yb):z(T))):pa instanceof THREE.Qa?(T.copy(pa.color),pa.m===THREE.Pe&&(T.g*=Ca.color.g,T.f*=Ca.color.f,T.c*=Ca.color.c),v(M,W,la,X,aa,ia,Ia,S),t===pa.R?y(T,pa.sa,pa.xb,pa.yb):z(T)):pa instanceof THREE.Te?(T.g=yd(Ca.Fc.x),T.f=yd(Ca.Fc.y),T.c=yd(Ca.Fc.a),v(M,W,la,X,aa,ia,Ia,S),t===pa.R?y(T,pa.sa,pa.xb,pa.yb):z(T)):pa instanceof THREE.Se&&(ha=l.Ba,Fa=l.Fa,na.g=na.f=na.c=1-Sa(Da.h.a,ha,Fa),U.g=
U.f=U.c=1-Sa(Fb.h.a,ha,Fa),Y.g=Y.f=Y.c=1-Sa(mc.h.a,ha,Fa),ka.g=ka.f=ka.c=1-Sa(lc.h.a,ha,Fa),Oa=G(na,U,Y,ka),p(M,W,la,X,Ia,S),F(M,W,la,X,Ia,S,0,0,Oa),p(ja,wa,aa,ia,ba,Q),F(ja,wa,aa,ia,ba,Q,1,1,Oa)))));Qa.Ws(Ka)}q.setTransform(1,0,0,1,0,0)}}};
THREE.i={ng:"#ifdef USE_FOG\nuniform vec3 fogColor;\n#ifdef FOG_EXP2\nuniform float fogDensity;\n#else\nuniform float fogNear;\nuniform float fogFar;\n#endif\n#endif",mg:"#ifdef USE_FOG\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n#ifdef FOG_EXP2\nconst float LOG2 = 1.442695;\nfloat fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n#else\nfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n#endif\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n#endif",Ll:"#ifdef USE_ENVMAP\nuniform float reflectivity;\nuniform samplerCube envMap;\nuniform float flipEnvMap;\nuniform int combine;\n#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\nuniform bool useRefract;\nuniform float refractionRatio;\n#else\nvarying vec3 vReflect;\n#endif\n#endif",
Kl:"#ifdef USE_ENVMAP\nvec3 reflectVec;\n#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\nvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\nif ( useRefract ) {\nreflectVec = refract( cameraToVertex, normal, refractionRatio );\n} else { \nreflectVec = reflect( cameraToVertex, normal );\n}\n#else\nreflectVec = vReflect;\n#endif\n#ifdef DOUBLE_SIDED\nfloat flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );\nvec4 cubeColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n#else\nvec4 cubeColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n#endif\n#ifdef GAMMA_INPUT\ncubeColor.xyz *= cubeColor.xyz;\n#endif\nif ( combine == 1 ) {\ngl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularStrength * reflectivity );\n} else if ( combine == 2 ) {\ngl_FragColor.xyz += cubeColor.xyz * specularStrength * reflectivity;\n} else {\ngl_FragColor.xyz = mix( gl_FragColor.xyz, gl_FragColor.xyz * cubeColor.xyz, specularStrength * reflectivity );\n}\n#endif",
Ml:"#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )\nvarying vec3 vReflect;\nuniform float refractionRatio;\nuniform bool useRefract;\n#endif",ok:"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n#ifdef USE_SKINNING\nvec4 worldPosition = modelMatrix * skinned;\n#endif\n#if defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\nvec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );\n#endif\n#if ! defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\nvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n#endif\n#endif",
Nl:"#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )\nvec3 worldNormal = mat3( modelMatrix[ 0 ].xyz, modelMatrix[ 1 ].xyz, modelMatrix[ 2 ].xyz ) * objectNormal;\nworldNormal = normalize( worldNormal );\nvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\nif ( useRefract ) {\nvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n} else {\nvReflect = reflect( cameraToVertex, worldNormal );\n}\n#endif",iv:"#ifdef USE_MAP\nuniform sampler2D map;\n#endif",
hv:"#ifdef USE_MAP\ngl_FragColor = gl_FragColor * texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) );\n#endif",pm:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )\nvarying vec2 vUv;\nuniform vec4 offsetRepeat;\n#endif",om:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )\nvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\nuniform sampler2D map;\n#endif",qm:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )\nvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",
nm:"#ifdef USE_MAP\nvec4 texelColor = texture2D( map, vUv );\n#ifdef GAMMA_INPUT\ntexelColor.xyz *= texelColor.xyz;\n#endif\ngl_FragColor = gl_FragColor * texelColor;\n#endif",fm:"#ifdef USE_LIGHTMAP\nvarying vec2 vUv2;\nuniform sampler2D lightMap;\n#endif",gm:"#ifdef USE_LIGHTMAP\nvarying vec2 vUv2;\n#endif",em:"#ifdef USE_LIGHTMAP\ngl_FragColor = gl_FragColor * texture2D( lightMap, vUv2 );\n#endif",hm:"#ifdef USE_LIGHTMAP\nvUv2 = uv2;\n#endif",wt:"#ifdef USE_BUMPMAP\nuniform sampler2D bumpMap;\nuniform float bumpScale;\nvec2 dHdxy_fwd() {\nvec2 dSTdx = dFdx( vUv );\nvec2 dSTdy = dFdy( vUv );\nfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\nfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\nfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\nreturn vec2( dBx, dBy );\n}\nvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\nvec3 vSigmaX = dFdx( surf_pos );\nvec3 vSigmaY = dFdy( surf_pos );\nvec3 vN = surf_norm;\nvec3 R1 = cross( vSigmaY, vN );\nvec3 R2 = cross( vN, vSigmaX );\nfloat fDet = dot( vSigmaX, R1 );\nvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\nreturn normalize( abs( fDet ) * surf_norm - vGrad );\n}\n#endif",
Av:"#ifdef USE_NORMALMAP\nuniform sampler2D normalMap;\nuniform vec2 normalScale;\nvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\nvec3 q0 = dFdx( eye_pos.xyz );\nvec3 q1 = dFdy( eye_pos.xyz );\nvec2 st0 = dFdx( vUv.st );\nvec2 st1 = dFdy( vUv.st );\nvec3 S = normalize(  q0 * st1.t - q1 * st0.t );\nvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\nvec3 N = normalize( surf_norm );\nvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\nmapN.xy = normalScale * mapN.xy;\nmat3 tsn = mat3( S, T, N );\nreturn normalize( tsn * mapN );\n}\n#endif",
Wm:"#ifdef USE_SPECULARMAP\nuniform sampler2D specularMap;\n#endif",Vm:"float specularStrength;\n#ifdef USE_SPECULARMAP\nvec4 texelSpecular = texture2D( specularMap, vUv );\nspecularStrength = texelSpecular.r;\n#else\nspecularStrength = 1.0;\n#endif",Ru:"uniform vec3 ambient;\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 ambientLightColor;\n#if MAX_DIR_LIGHTS > 0\nuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\nuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n#endif\n#if MAX_HEMI_LIGHTS > 0\nuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n#endif\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n#endif\n#if MAX_SPOT_LIGHTS > 0\nuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\nuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\nuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\nuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n#endif\n#ifdef WRAP_AROUND\nuniform vec3 wrapRGB;\n#endif",
Su:"vLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\nvLightBack = vec3( 0.0 );\n#endif\ntransformedNormal = normalize( transformedNormal );\n#if MAX_DIR_LIGHTS > 0\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\nvec3 dirVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( transformedNormal, dirVector );\nvec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n#ifdef DOUBLE_SIDED\nvec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n#ifdef WRAP_AROUND\nvec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n#endif\n#endif\n#ifdef WRAP_AROUND\nvec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\ndirectionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );\n#ifdef DOUBLE_SIDED\ndirectionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );\n#endif\n#endif\nvLightFront += directionalLightColor[ i ] * directionalLightWeighting;\n#ifdef DOUBLE_SIDED\nvLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;\n#endif\n}\n#endif\n#if MAX_POINT_LIGHTS > 0\nfor( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nfloat lDistance = 1.0;\nif ( pointLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\nfloat dotProduct = dot( transformedNormal, lVector );\nvec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );\n#ifdef DOUBLE_SIDED\nvec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n#ifdef WRAP_AROUND\nvec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n#endif\n#endif\n#ifdef WRAP_AROUND\nvec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\npointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );\n#ifdef DOUBLE_SIDED\npointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );\n#endif\n#endif\nvLightFront += pointLightColor[ i ] * pointLightWeighting * lDistance;\n#ifdef DOUBLE_SIDED\nvLightBack += pointLightColor[ i ] * pointLightWeightingBack * lDistance;\n#endif\n}\n#endif\n#if MAX_SPOT_LIGHTS > 0\nfor( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - worldPosition.xyz ) );\nif ( spotEffect > spotLightAngleCos[ i ] ) {\nspotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );\nfloat lDistance = 1.0;\nif ( spotLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\nfloat dotProduct = dot( transformedNormal, lVector );\nvec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );\n#ifdef DOUBLE_SIDED\nvec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n#ifdef WRAP_AROUND\nvec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n#endif\n#endif\n#ifdef WRAP_AROUND\nvec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\nspotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );\n#ifdef DOUBLE_SIDED\nspotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );\n#endif\n#endif\nvLightFront += spotLightColor[ i ] * spotLightWeighting * lDistance * spotEffect;\n#ifdef DOUBLE_SIDED\nvLightBack += spotLightColor[ i ] * spotLightWeightingBack * lDistance * spotEffect;\n#endif\n}\n}\n#endif\n#if MAX_HEMI_LIGHTS > 0\nfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\nvec3 lVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( transformedNormal, lVector );\nfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\nfloat hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;\nvLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n#ifdef DOUBLE_SIDED\nvLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\n#endif\n}\n#endif\nvLightFront = vLightFront * diffuse + ambient * ambientLightColor + emissive;\n#ifdef DOUBLE_SIDED\nvLightBack = vLightBack * diffuse + ambient * ambientLightColor + emissive;\n#endif",
Vu:"#ifndef PHONG_PER_PIXEL\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\nvarying vec4 vPointLight[ MAX_POINT_LIGHTS ];\n#endif\n#if MAX_SPOT_LIGHTS > 0\nuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\nuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\nvarying vec4 vSpotLight[ MAX_SPOT_LIGHTS ];\n#endif\n#endif\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )\nvarying vec3 vWorldPosition;\n#endif",Wu:"#ifndef PHONG_PER_PIXEL\n#if MAX_POINT_LIGHTS > 0\nfor( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nfloat lDistance = 1.0;\nif ( pointLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\nvPointLight[ i ] = vec4( lVector, lDistance );\n}\n#endif\n#if MAX_SPOT_LIGHTS > 0\nfor( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nfloat lDistance = 1.0;\nif ( spotLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\nvSpotLight[ i ] = vec4( lVector, lDistance );\n}\n#endif\n#endif\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )\nvWorldPosition = worldPosition.xyz;\n#endif",
Uu:"uniform vec3 ambientLightColor;\n#if MAX_DIR_LIGHTS > 0\nuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\nuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n#endif\n#if MAX_HEMI_LIGHTS > 0\nuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n#endif\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n#ifdef PHONG_PER_PIXEL\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n#else\nvarying vec4 vPointLight[ MAX_POINT_LIGHTS ];\n#endif\n#endif\n#if MAX_SPOT_LIGHTS > 0\nuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\nuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\nuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n#ifdef PHONG_PER_PIXEL\nuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n#else\nvarying vec4 vSpotLight[ MAX_SPOT_LIGHTS ];\n#endif\n#endif\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )\nvarying vec3 vWorldPosition;\n#endif\n#ifdef WRAP_AROUND\nuniform vec3 wrapRGB;\n#endif\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;",
Tu:"vec3 normal = normalize( vNormal );\nvec3 viewPosition = normalize( vViewPosition );\n#ifdef DOUBLE_SIDED\nnormal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n#endif\n#ifdef USE_NORMALMAP\nnormal = perturbNormal2Arb( -viewPosition, normal );\n#elif defined( USE_BUMPMAP )\nnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n#if MAX_POINT_LIGHTS > 0\nvec3 pointDiffuse  = vec3( 0.0 );\nvec3 pointSpecular = vec3( 0.0 );\nfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n#ifdef PHONG_PER_PIXEL\nvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz + vViewPosition.xyz;\nfloat lDistance = 1.0;\nif ( pointLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\n#else\nvec3 lVector = normalize( vPointLight[ i ].xyz );\nfloat lDistance = vPointLight[ i ].w;\n#endif\nfloat dotProduct = dot( normal, lVector );\n#ifdef WRAP_AROUND\nfloat pointDiffuseWeightFull = max( dotProduct, 0.0 );\nfloat pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\nvec3 pointDiffuseWeight = mix( vec3 ( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n#else\nfloat pointDiffuseWeight = max( dotProduct, 0.0 );\n#endif\npointDiffuse  += diffuse * pointLightColor[ i ] * pointDiffuseWeight * lDistance;\nvec3 pointHalfVector = normalize( lVector + viewPosition );\nfloat pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\nfloat pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( shininess + 2.0001 ) / 8.0;\nvec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, pointHalfVector ), 5.0 );\npointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance * specularNormalization;\n#else\npointSpecular += specular * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance;\n#endif\n}\n#endif\n#if MAX_SPOT_LIGHTS > 0\nvec3 spotDiffuse  = vec3( 0.0 );\nvec3 spotSpecular = vec3( 0.0 );\nfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n#ifdef PHONG_PER_PIXEL\nvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz + vViewPosition.xyz;\nfloat lDistance = 1.0;\nif ( spotLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\n#else\nvec3 lVector = normalize( vSpotLight[ i ].xyz );\nfloat lDistance = vSpotLight[ i ].w;\n#endif\nfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\nif ( spotEffect > spotLightAngleCos[ i ] ) {\nspotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );\nfloat dotProduct = dot( normal, lVector );\n#ifdef WRAP_AROUND\nfloat spotDiffuseWeightFull = max( dotProduct, 0.0 );\nfloat spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\nvec3 spotDiffuseWeight = mix( vec3 ( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n#else\nfloat spotDiffuseWeight = max( dotProduct, 0.0 );\n#endif\nspotDiffuse += diffuse * spotLightColor[ i ] * spotDiffuseWeight * lDistance * spotEffect;\nvec3 spotHalfVector = normalize( lVector + viewPosition );\nfloat spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\nfloat spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( shininess + 2.0001 ) / 8.0;\nvec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, spotHalfVector ), 5.0 );\nspotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * specularNormalization * spotEffect;\n#else\nspotSpecular += specular * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * spotEffect;\n#endif\n}\n}\n#endif\n#if MAX_DIR_LIGHTS > 0\nvec3 dirDiffuse  = vec3( 0.0 );\nvec3 dirSpecular = vec3( 0.0 );\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\nvec3 dirVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( normal, dirVector );\n#ifdef WRAP_AROUND\nfloat dirDiffuseWeightFull = max( dotProduct, 0.0 );\nfloat dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\nvec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );\n#else\nfloat dirDiffuseWeight = max( dotProduct, 0.0 );\n#endif\ndirDiffuse  += diffuse * directionalLightColor[ i ] * dirDiffuseWeight;\nvec3 dirHalfVector = normalize( dirVector + viewPosition );\nfloat dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\nfloat dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( shininess + 2.0001 ) / 8.0;\nvec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( dirVector, dirHalfVector ), 5.0 );\ndirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n#else\ndirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight;\n#endif\n}\n#endif\n#if MAX_HEMI_LIGHTS > 0\nvec3 hemiDiffuse  = vec3( 0.0 );\nvec3 hemiSpecular = vec3( 0.0 );\nfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\nvec3 lVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( normal, lVector );\nfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\nvec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\nhemiDiffuse += diffuse * hemiColor;\nvec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\nfloat hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\nfloat hemiSpecularWeightSky = specularStrength * max( pow( hemiDotNormalHalfSky, shininess ), 0.0 );\nvec3 lVectorGround = -lVector;\nvec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\nfloat hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\nfloat hemiSpecularWeightGround = specularStrength * max( pow( hemiDotNormalHalfGround, shininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat dotProductGround = dot( normal, lVectorGround );\nfloat specularNormalization = ( shininess + 2.0001 ) / 8.0;\nvec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, hemiHalfVectorSky ), 5.0 );\nvec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 5.0 );\nhemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\n#else\nhemiSpecular += specular * hemiColor * ( hemiSpecularWeightSky + hemiSpecularWeightGround ) * hemiDiffuseWeight;\n#endif\n}\n#endif\nvec3 totalDiffuse = vec3( 0.0 );\nvec3 totalSpecular = vec3( 0.0 );\n#if MAX_DIR_LIGHTS > 0\ntotalDiffuse += dirDiffuse;\ntotalSpecular += dirSpecular;\n#endif\n#if MAX_HEMI_LIGHTS > 0\ntotalDiffuse += hemiDiffuse;\ntotalSpecular += hemiSpecular;\n#endif\n#if MAX_POINT_LIGHTS > 0\ntotalDiffuse += pointDiffuse;\ntotalSpecular += pointSpecular;\n#endif\n#if MAX_SPOT_LIGHTS > 0\ntotalDiffuse += spotDiffuse;\ntotalSpecular += spotSpecular;\n#endif\n#ifdef METAL\ngl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient + totalSpecular );\n#else\ngl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient ) + totalSpecular;\n#endif",
hh:"#ifdef USE_COLOR\nvarying vec3 vColor;\n#endif",gh:"#ifdef USE_COLOR\ngl_FragColor = gl_FragColor * vec4( vColor, opacity );\n#endif",ih:"#ifdef USE_COLOR\nvarying vec3 vColor;\n#endif",jh:"#ifdef USE_COLOR\n#ifdef GAMMA_INPUT\nvColor = color * color;\n#else\nvColor = color;\n#endif\n#endif",fi:"#ifdef USE_SKINNING\n#ifdef BONE_TEXTURE\nuniform sampler2D boneTexture;\nmat4 getBoneMatrix( const in float i ) {\nfloat j = i * 4.0;\nfloat x = mod( j, N_BONE_PIXEL_X );\nfloat y = floor( j / N_BONE_PIXEL_X );\nconst float dx = 1.0 / N_BONE_PIXEL_X;\nconst float dy = 1.0 / N_BONE_PIXEL_Y;\ny = dy * ( y + 0.5 );\nvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\nvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\nvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\nvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\nmat4 bone = mat4( v1, v2, v3, v4 );\nreturn bone;\n}\n#else\nuniform mat4 boneGlobalMatrices[ MAX_BONES ];\nmat4 getBoneMatrix( const in float i ) {\nmat4 bone = boneGlobalMatrices[ int(i) ];\nreturn bone;\n}\n#endif\n#endif",
ei:"#ifdef USE_SKINNING\nmat4 boneMatX = getBoneMatrix( skinIndex.x );\nmat4 boneMatY = getBoneMatrix( skinIndex.y );\n#endif",dk:"#ifdef USE_SKINNING\n#ifdef USE_MORPHTARGETS\nvec4 skinVertex = vec4( morphed, 1.0 );\n#else\nvec4 skinVertex = vec4( position, 1.0 );\n#endif\nvec4 skinned  = boneMatX * skinVertex * skinWeight.x;\nskinned \t  += boneMatY * skinVertex * skinWeight.y;\n#endif",Hj:"#ifdef USE_MORPHTARGETS\n#ifndef USE_MORPHNORMALS\nuniform float morphTargetInfluences[ 8 ];\n#else\nuniform float morphTargetInfluences[ 4 ];\n#endif\n#endif",
Ij:"#ifdef USE_MORPHTARGETS\nvec3 morphed = vec3( 0.0 );\nmorphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\nmorphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\nmorphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\nmorphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n#ifndef USE_MORPHNORMALS\nmorphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\nmorphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\nmorphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\nmorphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n#endif\nmorphed += position;\n#endif",
hj:"vec4 mvPosition;\n#ifdef USE_SKINNING\nmvPosition = modelViewMatrix * skinned;\n#endif\n#if !defined( USE_SKINNING ) && defined( USE_MORPHTARGETS )\nmvPosition = modelViewMatrix * vec4( morphed, 1.0 );\n#endif\n#if !defined( USE_SKINNING ) && ! defined( USE_MORPHTARGETS )\nmvPosition = modelViewMatrix * vec4( position, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;",vm:"#ifdef USE_MORPHNORMALS\nvec3 morphedNormal = vec3( 0.0 );\nmorphedNormal +=  ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\nmorphedNormal +=  ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\nmorphedNormal +=  ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\nmorphedNormal +=  ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\nmorphedNormal += normal;\n#endif",
ek:"#ifdef USE_SKINNING\nmat4 skinMatrix = skinWeight.x * boneMatX;\nskinMatrix \t+= skinWeight.y * boneMatY;\n#ifdef USE_MORPHNORMALS\nvec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );\n#else\nvec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );\n#endif\n#endif",El:"vec3 objectNormal;\n#ifdef USE_SKINNING\nobjectNormal = skinnedNormal.xyz;\n#endif\n#if !defined( USE_SKINNING ) && defined( USE_MORPHNORMALS )\nobjectNormal = morphedNormal;\n#endif\n#if !defined( USE_SKINNING ) && ! defined( USE_MORPHNORMALS )\nobjectNormal = normal;\n#endif\n#ifdef FLIP_SIDED\nobjectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;",
ci:"#ifdef USE_SHADOWMAP\nuniform sampler2D shadowMap[ MAX_SHADOWS ];\nuniform vec2 shadowMapSize[ MAX_SHADOWS ];\nuniform float shadowDarkness[ MAX_SHADOWS ];\nuniform float shadowBias[ MAX_SHADOWS ];\nvarying vec4 vShadowCoord[ MAX_SHADOWS ];\nfloat unpackDepth( const in vec4 rgba_depth ) {\nconst vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\nfloat depth = dot( rgba_depth, bit_shift );\nreturn depth;\n}\n#endif",bi:"#ifdef USE_SHADOWMAP\n#ifdef SHADOWMAP_DEBUG\nvec3 frustumColors[3];\nfrustumColors[0] = vec3( 1.0, 0.5, 0.0 );\nfrustumColors[1] = vec3( 0.0, 1.0, 0.8 );\nfrustumColors[2] = vec3( 0.0, 0.5, 1.0 );\n#endif\n#ifdef SHADOWMAP_CASCADE\nint inFrustumCount = 0;\n#endif\nfloat fDepth;\nvec3 shadowColor = vec3( 1.0 );\nfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\nvec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\nbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\nbool inFrustum = all( inFrustumVec );\n#ifdef SHADOWMAP_CASCADE\ninFrustumCount += int( inFrustum );\nbvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );\n#else\nbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n#endif\nbool frustumTest = all( frustumTestVec );\nif ( frustumTest ) {\nshadowCoord.z += shadowBias[ i ];\n#ifdef SHADOWMAP_SOFT\nfloat shadow = 0.0;\nconst float shadowDelta = 1.0 / 9.0;\nfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\nfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\nfloat dx0 = -1.25 * xPixelOffset;\nfloat dy0 = -1.25 * yPixelOffset;\nfloat dx1 = 1.25 * xPixelOffset;\nfloat dy1 = 1.25 * yPixelOffset;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n#else\nvec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\nfloat fDepth = unpackDepth( rgbaDepth );\nif ( fDepth < shadowCoord.z )\nshadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\n#endif\n}\n#ifdef SHADOWMAP_DEBUG\n#ifdef SHADOWMAP_CASCADE\nif ( inFrustum && inFrustumCount == 1 ) gl_FragColor.xyz *= frustumColors[ i ];\n#else\nif ( inFrustum ) gl_FragColor.xyz *= frustumColors[ i ];\n#endif\n#endif\n}\n#ifdef GAMMA_OUTPUT\nshadowColor *= shadowColor;\n#endif\ngl_FragColor.xyz = gl_FragColor.xyz * shadowColor;\n#endif",
di:"#ifdef USE_SHADOWMAP\nvarying vec4 vShadowCoord[ MAX_SHADOWS ];\nuniform mat4 shadowMatrix[ MAX_SHADOWS ];\n#endif",bk:"#ifdef USE_SHADOWMAP\nfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\nvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n}\n#endif",Oi:"#ifdef ALPHATEST\nif ( gl_FragColor.a < ALPHATEST ) discard;\n#endif",Ej:"#ifdef GAMMA_OUTPUT\ngl_FragColor.xyz = sqrt( gl_FragColor.xyz );\n#endif"};
THREE.wc={merge:function(a){var b,c,d,e={};for(b=0;b<a.length;b++)for(c in d=this.clone(a[b]),d)e[c]=d[c];return e},clone:function(a){var b,c,d,e={};for(b in a)for(c in e[b]={},a[b])d=a[b][c],e[b][c]=d instanceof THREE.t||d instanceof THREE.k||d instanceof THREE.d||d instanceof THREE.xc||d instanceof THREE.D||d instanceof THREE.Bb?d.clone():d instanceof Array?d.slice():d;return e}};
THREE.Ra={aj:{ig:{type:"c",value:new THREE.t(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:u},Dv:{type:"v4",value:new THREE.xc(0,0,1,1)},Ma:{type:"t",value:u},Ia:{type:"t",value:u},oa:{type:"t",value:u},hu:{type:"f",value:-1},dr:{type:"i",value:0},Hc:{type:"f",value:1},Xc:{type:"f",value:0.98},Rc:{type:"i",value:0},Vc:{type:"f",value:0}},vt:{Fb:{type:"t",value:u},eg:{type:"f",value:1}},zv:{eb:{type:"t",value:u},xe:{type:"v2",value:new THREE.k(1,1)}},z:{qj:{type:"f",value:2.5E-4},sj:{type:"f",
value:1},rj:{type:"f",value:2E3},pj:{type:"c",value:new THREE.t(16777215)}},Jb:{Ys:{type:"fv",value:[]},Tt:{type:"fv",value:[]},St:{type:"fv",value:[]},yu:{type:"fv",value:[]},Au:{type:"fv",value:[]},zu:{type:"fv",value:[]},Yv:{type:"fv",value:[]},$v:{type:"fv",value:[]},Zv:{type:"fv1",value:[]},Kw:{type:"fv",value:[]},Ow:{type:"fv",value:[]},Lw:{type:"fv",value:[]},Mw:{type:"fv1",value:[]},Jw:{type:"fv1",value:[]},Nw:{type:"fv1",value:[]}},Vv:{ew:{type:"c",value:new THREE.t(15658734)},opacity:{type:"f",
value:1},size:{type:"f",value:1},scale:{type:"f",value:1},map:{type:"t",value:u},qj:{type:"f",value:2.5E-4},sj:{type:"f",value:1},rj:{type:"f",value:2E3},pj:{type:"c",value:new THREE.t(16777215)}},ai:{zf:{type:"tv",value:[]},Zh:{type:"v2v",value:[]},Jg:{type:"fv1",value:[]},Be:{type:"fv1",value:[]},Af:{type:"m4v",value:[]}}};
THREE.Jk={depth:{Q:{av:{type:"f",value:1},$u:{type:"f",value:2E3},opacity:{type:"f",value:1}},N:"void main() {\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",L:"uniform float mNear;\nuniform float mFar;\nuniform float opacity;\nvoid main() {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat color = 1.0 - smoothstep( mNear, mFar, depth );\ngl_FragColor = vec4( vec3( color ), opacity );\n}"},n:{Q:{opacity:{type:"f",value:1}},N:"varying vec3 vNormal;\nvoid main() {\nvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\nvNormal = normalize( normalMatrix * normal );\ngl_Position = projectionMatrix * mvPosition;\n}",
L:"uniform float opacity;\nvarying vec3 vNormal;\nvoid main() {\ngl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );\n}"},Gy:{Q:THREE.wc.merge([THREE.Ra.aj,THREE.Ra.z,THREE.Ra.ai]),N:[THREE.i.pm,THREE.i.gm,THREE.i.Ml,THREE.i.ih,THREE.i.Hj,THREE.i.fi,THREE.i.di,"void main() {",THREE.i.qm,THREE.i.hm,THREE.i.jh,"#ifdef USE_ENVMAP",THREE.i.vm,THREE.i.ei,THREE.i.ek,THREE.i.El,"#endif",THREE.i.Ij,THREE.i.dk,THREE.i.hj,THREE.i.ok,THREE.i.Nl,THREE.i.bk,"}"].join("\n"),L:["uniform vec3 diffuse;\nuniform float opacity;",
THREE.i.hh,THREE.i.om,THREE.i.fm,THREE.i.Ll,THREE.i.ng,THREE.i.ci,THREE.i.Wm,"void main() {\ngl_FragColor = vec4( diffuse, opacity );",THREE.i.nm,THREE.i.Oi,THREE.i.Vm,THREE.i.em,THREE.i.gh,THREE.i.Kl,THREE.i.bi,THREE.i.Ej,THREE.i.mg,"}"].join("\n")},cB:{Q:THREE.wc.merge([THREE.Ra.aj,THREE.Ra.z,THREE.Ra.Jb,THREE.Ra.ai,{za:{type:"c",value:new THREE.t(16777215)},jb:{type:"c",value:new THREE.t(0)},Lc:{type:"v3",value:new THREE.d(1,1,1)}}]),N:["#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\nvarying vec3 vLightBack;\n#endif",
THREE.i.pm,THREE.i.gm,THREE.i.Ml,THREE.i.Ru,THREE.i.ih,THREE.i.Hj,THREE.i.fi,THREE.i.di,"void main() {",THREE.i.qm,THREE.i.hm,THREE.i.jh,THREE.i.vm,THREE.i.ei,THREE.i.ek,THREE.i.El,THREE.i.Ij,THREE.i.dk,THREE.i.hj,THREE.i.ok,THREE.i.Nl,THREE.i.Su,THREE.i.bk,"}"].join("\n"),L:["uniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\nvarying vec3 vLightBack;\n#endif",THREE.i.hh,THREE.i.om,THREE.i.fm,THREE.i.Ll,THREE.i.ng,THREE.i.ci,THREE.i.Wm,"void main() {\ngl_FragColor = vec4( vec3 ( 1.0 ), opacity );",
THREE.i.nm,THREE.i.Oi,THREE.i.Vm,"#ifdef DOUBLE_SIDED\nif ( gl_FrontFacing )\ngl_FragColor.xyz *= vLightFront;\nelse\ngl_FragColor.xyz *= vLightBack;\n#else\ngl_FragColor.xyz *= vLightFront;\n#endif",THREE.i.em,THREE.i.gh,THREE.i.Kl,THREE.i.bi,THREE.i.Ej,THREE.i.mg,"}"].join("\n")},pD:{Q:THREE.wc.merge([THREE.Ra.aj,THREE.Ra.vt,THREE.Ra.zv,THREE.Ra.z,THREE.Ra.Jb,THREE.Ra.ai,{za:{type:"c",value:new THREE.t(16777215)},jb:{type:"c",value:new THREE.t(0)},sd:{type:"c",value:new THREE.t(1118481)},Ce:{type:"f",
value:30},Lc:{type:"v3",value:new THREE.d(1,1,1)}}]),N:["#define PHONG\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;",THREE.i.pm,THREE.i.gm,THREE.i.Ml,THREE.i.Vu,THREE.i.ih,THREE.i.Hj,THREE.i.fi,THREE.i.di,"void main() {",THREE.i.qm,THREE.i.hm,THREE.i.jh,THREE.i.vm,THREE.i.ei,THREE.i.ek,THREE.i.El,"vNormal = normalize( transformedNormal );",THREE.i.Ij,THREE.i.dk,THREE.i.hj,"vViewPosition = -mvPosition.xyz;",THREE.i.ok,THREE.i.Nl,THREE.i.Wu,THREE.i.bk,"}"].join("\n"),L:["uniform vec3 diffuse;\nuniform float opacity;\nuniform vec3 ambient;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;",
THREE.i.hh,THREE.i.om,THREE.i.fm,THREE.i.Ll,THREE.i.ng,THREE.i.Uu,THREE.i.ci,THREE.i.wt,THREE.i.Av,THREE.i.Wm,"void main() {\ngl_FragColor = vec4( vec3 ( 1.0 ), opacity );",THREE.i.nm,THREE.i.Oi,THREE.i.Vm,THREE.i.Tu,THREE.i.em,THREE.i.gh,THREE.i.Kl,THREE.i.bi,THREE.i.Ej,THREE.i.mg,"}"].join("\n")},mD:{Q:THREE.wc.merge([THREE.Ra.Vv,THREE.Ra.ai]),N:["uniform float size;\nuniform float scale;",THREE.i.ih,THREE.i.di,"void main() {",THREE.i.jh,"vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n#ifdef USE_SIZEATTENUATION\ngl_PointSize = size * ( scale / length( mvPosition.xyz ) );\n#else\ngl_PointSize = size;\n#endif\ngl_Position = projectionMatrix * mvPosition;",
THREE.i.ok,THREE.i.bk,"}"].join("\n"),L:["uniform vec3 psColor;\nuniform float opacity;",THREE.i.hh,THREE.i.iv,THREE.i.ng,THREE.i.ci,"void main() {\ngl_FragColor = vec4( psColor, opacity );",THREE.i.hv,THREE.i.Oi,THREE.i.gh,THREE.i.bi,THREE.i.mg,"}"].join("\n")},Uz:{Q:THREE.wc.merge([THREE.Ra.aj,THREE.Ra.z,{scale:{type:"f",value:1},ie:{type:"f",value:1},dx:{type:"f",value:2}}]),N:["uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;",THREE.i.ih,"void main() {",THREE.i.jh,
"vLineDistance = scale * lineDistance;\nvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n}"].join("\n"),L:["uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;",THREE.i.hh,THREE.i.ng,"void main() {\nif ( mod( vLineDistance, totalSize ) > dashSize ) {\ndiscard;\n}\ngl_FragColor = vec4( diffuse, opacity );",THREE.i.gh,THREE.i.mg,"}"].join("\n")},To:{Q:{},N:[THREE.i.Hj,
THREE.i.fi,"void main() {",THREE.i.ei,THREE.i.Ij,THREE.i.dk,THREE.i.hj,"}"].join("\n"),L:"vec4 pack_depth( const in float depth ) {\nconst vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\nconst vec4 bit_mask  = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\nvec4 res = fract( depth * bit_shift );\nres -= res.xxyz * bit_mask;\nreturn res;\n}\nvoid main() {\ngl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );\n}"}};
THREE.hy=function(){var a={wy:t,preserveDrawingBuffer:w,precision:"highp"};function b(a){if(a.Db)for(var b in a.Db)m.deleteBuffer(a.Db[b].buffer)}function c(a,b){var c=a.e.length,d=b.o;if(d.attributes){n===a.Db&&(a.Db=[]);for(var e in d.attributes){var f=d.attributes[e];if(!f.Yk||f.Kt){f.Yk=t;var g=1;"v2"===f.type?g=2:"v3"===f.type?g=3:"v4"===f.type?g=4:"c"===f.type&&(g=3);f.size=g;f.b=new Float32Array(c*g);f.buffer=m.createBuffer();f.buffer.Ti=e;f.ha=t}a.Db.push(f)}}}function d(a,b){var c=b.s,d=
a.nj,h=a.oj,i=3*d.length+4*h.length,j=1*d.length+2*h.length,h=3*d.length+4*h.length,d=e(b,a),l=g(d),k=f(d),H=d.m?d.m:w;a.Zd=new Float32Array(3*i);k&&(a.Hi=new Float32Array(3*i));c.wg&&(a.lo=new Float32Array(4*i));H&&(a.Xd=new Float32Array(3*i));if(l){if(0<c.Sc.length||0<c.C.length)a.no=new Float32Array(2*i);if(1<c.Sc.length||1<c.C.length)a.mo=new Float32Array(2*i)}b.s.Fe.length&&b.s.Ee.length&&(a.jo=new Float32Array(4*i),a.ko=new Float32Array(4*i));a.co=new Uint16Array(3*j);a.fo=new Uint16Array(2*
h);if(a.vf){a.io=[];c=0;for(l=a.vf;c<l;c++)a.io.push(new Float32Array(3*i))}if(a.uf){a.ho=[];c=0;for(l=a.uf;c<l;c++)a.ho.push(new Float32Array(3*i))}a.Wk=3*j;a.$k=2*h;if(d.attributes){n===a.Db&&(a.Db=[]);for(var p in d.attributes){var j=d.attributes[p],c={},q;for(q in j)c[q]=j[q];if(!c.Yk||c.Kt)c.Yk=t,h=1,"v2"===c.type?h=2:"v3"===c.type?h=3:"v4"===c.type?h=4:"c"===c.type&&(h=3),c.size=h,c.b=new Float32Array(i*h),c.buffer=m.createBuffer(),c.buffer.Ti=p,j.ha=t,c.Ds=j;a.Db.push(c)}}a.eo=t}function e(a,
b){return a.o instanceof THREE.Ab?a.o.ga[b.va]:a.o}function f(a){return a instanceof THREE.Qa&&!a.oa||a instanceof THREE.Se?w:a&&n!==a.Ha&&a.Ha===THREE.Oc?THREE.Oc:THREE.Pg}function g(a){return a.map||a.Ma||a.Fb||a.eb||a.Ia||a instanceof THREE.Xa?t:w}function h(a){var b,c,d;for(b in a.attributes)d="index"===b?m.ELEMENT_ARRAY_BUFFER:m.ARRAY_BUFFER,c=a.attributes[b],c.buffer=m.createBuffer(),m.bindBuffer(d,c.buffer),m.bufferData(d,c.b,m.STATIC_DRAW)}function i(a,b,c){var d=a.attributes,e=d.index,f=
d.position,g=d.n,h=d.wa,i=d.color,d=d.Vb;a.kf&&n!==e&&(m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,e.buffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,e.b,b));a.xa&&n!==f&&(m.bindBuffer(m.ARRAY_BUFFER,f.buffer),m.bufferData(m.ARRAY_BUFFER,f.b,b));a.lc&&n!==g&&(m.bindBuffer(m.ARRAY_BUFFER,g.buffer),m.bufferData(m.ARRAY_BUFFER,g.b,b));a.If&&n!==h&&(m.bindBuffer(m.ARRAY_BUFFER,h.buffer),m.bufferData(m.ARRAY_BUFFER,h.b,b));a.La&&n!==i&&(m.bindBuffer(m.ARRAY_BUFFER,i.buffer),m.bufferData(m.ARRAY_BUFFER,i.b,b));a.He&&
n!==d&&(m.bindBuffer(m.ARRAY_BUFFER,d.buffer),m.bufferData(m.ARRAY_BUFFER,d.b,b));if(c)for(var j in a.attributes)delete a.attributes[j].b}function j(a){H[a]||(m.enableVertexAttribArray(a),H[a]=t)}function l(){for(var a in H)H[a]&&(m.disableVertexAttribArray(a),H[a]=w)}function k(a,b){return a.a!==b.a?b.a-a.a:b.id-a.id}function p(a,b){return b[0]-a[0]}function r(a,b,c){if(a.length)for(var d=0,e=a.length;d<e;d++)oa=U=u,ka=N=Fa=ha=ib=qb=Oa=-1,bc=t,a[d].B(b,c,ab,Pa),oa=U=u,ka=N=Fa=ha=ib=qb=Oa=-1,bc=t}
function s(a,b,c,d,e,f,g,h){var i,m,j,l;b?(m=a.length-1,l=b=-1):(m=0,b=a.length,l=1);for(var k=m;k!==b;k+=l)if(i=a[k],i.B){m=i.object;j=i.buffer;if(h)i=h;else{i=i[c];if(!i)continue;g&&Q.Ig(i.qb,i.blendEquation,i.gf,i.ff);Q.yf(i.Bc);Q.Sh(i.Ld);P(i.polygonOffset,i.Nh,i.Oh)}Q.Om(i);j instanceof THREE.cd?Q.Jm(d,e,f,i,j,m):Q.Im(d,e,f,i,j,m)}}function q(a,b,c,d,e,f,g){for(var h,i,m=0,j=a.length;m<j;m++)if(h=a[m],i=h.object,i.visible){if(g)h=g;else{h=h[b];if(!h)continue;f&&Q.Ig(h.qb,h.blendEquation,h.gf,
h.ff);Q.yf(h.Bc);Q.Sh(h.Ld);P(h.polygonOffset,h.Nh,h.Oh)}Q.Km(c,d,e,h,i)}}function v(a,b,c){a.push({buffer:b,object:c,wf:u,Da:u})}function y(a){for(var b in a.attributes)if(a.attributes[b].ha)return t;return w}function F(a){for(var b in a.attributes)a.attributes[b].ha=w}function C(a,b){for(var c=a.length-1;0<=c;c--)a[c].object===b&&a.splice(c,1)}function z(a,b){for(var c=a.length-1;0<=c;c--)a[c]===b&&a.splice(c,1)}function G(a,b,c,d,e){za=0;d.ha&&(d.vb&&Q.Qt(d),Q.Eu(d,b,c,e),d.ha=w);d.F&&!e.$g&&(e.$g=
new Float32Array(Q.Ih));var f=w,g=d.vb,h=g.Q,i=d.Q;g!==U&&(m.useProgram(g),U=g,f=t);d.id!==ka&&(ka=d.id,f=t);if(f||a!==oa)m.uniformMatrix4fv(h.ra,w,a.ra.elements),a!==oa&&(oa=a);if(d.Ca)if(tc&&e.Qd){if(u!==h.be){var j=B();m.uniform1i(h.be,j);Q.Th(e.be,j)}}else u!==h.ut&&m.uniformMatrix4fv(h.ut,w,e.dh);if(f){c&&d.z&&(i.pj.value=c.color,c instanceof THREE.Qg?(i.sj.value=c.Ba,i.rj.value=c.Fa):c instanceof THREE.Mf&&(i.qj.value=c.ij));if(d instanceof THREE.bc||d instanceof THREE.ac||d.Jb){if(bc){for(var l=
0,k=0,H=0,p,q,r,s=xd,ua=s.rh.$a,Aa=s.rh.Wc,v=s.Nd.$a,Ba=s.Nd.Wc,y=s.Nd.th,z=s.pc.$a,C=s.pc.Wc,F=s.pc.th,E=s.pc.Uo,G=s.pc.Co,Lb=s.pc.Zo,J=s.of.Eq,M=s.of.op,N=s.of.Wc,T=0,P=0,R=0,S=0,Jb=0,na=0,ub=0,V=0,Z=q=0,c=Z=Z=0,f=b.length;c<f;c++)j=b[c],j.Nj||(p=j.color,r=j.sb,q=j.bb,j instanceof THREE.mi?j.visible&&(Q.hd?(l+=p.g*p.g,k+=p.f*p.f,H+=p.c*p.c):(l+=p.g,k+=p.f,H+=p.c)):j instanceof THREE.Mc?(Jb+=1,j.visible&&(q=3*T,Q.hd?O(ua,q,p,r*r):I(ua,q,p,r),gb.copy(Gi(j.A)),gb.Wa(Gi(j.target.A)),gb.normalize(),
Aa[q]=gb.x,Aa[q+1]=gb.y,Aa[q+2]=gb.a,T+=1)):j instanceof THREE.Rf?(na+=1,j.visible&&(Z=3*P,Q.hd?O(v,Z,p,r*r):I(v,Z,p,r),r=Gi(j.A),Ba[Z]=r.x,Ba[Z+1]=r.y,Ba[Z+2]=r.a,y[P]=q,P+=1)):j instanceof THREE.Sf?(ub+=1,j.visible&&(Z=3*R,Q.hd?O(z,Z,p,r*r):I(z,Z,p,r),r=Gi(j.A),C[Z]=r.x,C[Z+1]=r.y,C[Z+2]=r.a,F[R]=q,gb.copy(r),gb.Wa(Gi(j.target.A)),gb.normalize(),E[Z]=gb.x,E[Z+1]=gb.y,E[Z+2]=gb.a,G[R]=Math.cos(j.bf),Lb[R]=j.eu,R+=1)):j instanceof THREE.vk&&(V+=1,j.visible&&(p=j.color,q=j.Ua,Z=3*S,Q.hd?(r*=r,O(J,
Z,p,r),O(M,Z,q,r)):(I(J,Z,p,r),I(M,Z,q,r)),gb.copy(Gi(j.A)),gb.normalize(),N[Z]=gb.x,N[Z+1]=gb.y,N[Z+2]=gb.a,S+=1)));c=3*T;for(f=Math.max(ua.length,3*Jb);c<f;c++)ua[c]=0;c=3*T;for(f=Math.max(Aa.length,3*Jb);c<f;c++)Aa[c]=0;c=3*P;for(f=Math.max(v.length,3*na);c<f;c++)v[c]=0;c=3*P;for(f=Math.max(Ba.length,3*na);c<f;c++)Ba[c]=0;c=P;for(f=Math.max(y.length,na);c<f;c++)y[c]=0;c=3*R;for(f=Math.max(z.length,3*ub);c<f;c++)z[c]=0;c=3*R;for(f=Math.max(C.length,3*ub);c<f;c++)C[c]=0;c=3*R;for(f=Math.max(E.length,
3*ub);c<f;c++)E[c]=0;c=R;for(f=Math.max(G.length,ub);c<f;c++)G[c]=0;c=R;for(f=Math.max(Lb.length,ub);c<f;c++)Lb[c]=0;c=R;for(f=Math.max(F.length,ub);c<f;c++)F[c]=0;c=3*S;for(f=Math.max(J.length,3*V);c<f;c++)J[c]=0;c=3*S;for(f=Math.max(M.length,3*V);c<f;c++)M[c]=0;c=3*S;for(f=Math.max(N.length,3*V);c<f;c++)N[c]=0;s.rh.length=T;s.Nd.length=P;s.pc.length=R;s.of.length=S;s.za[0]=l;s.za[1]=k;s.za[2]=H;bc=w}c=xd;i.Ys.value=c.za;i.St.value=c.rh.$a;i.Tt.value=c.rh.Wc;i.Yv.value=c.Nd.$a;i.$v.value=c.Nd.Wc;
i.Zv.value=c.Nd.th;i.Kw.value=c.pc.$a;i.Ow.value=c.pc.Wc;i.Mw.value=c.pc.th;i.Lw.value=c.pc.Uo;i.Jw.value=c.pc.Co;i.Nw.value=c.pc.Zo;i.Au.value=c.of.Eq;i.zu.value=c.of.op;i.yu.value=c.of.Wc}if(d instanceof THREE.Qa||d instanceof THREE.ac||d instanceof THREE.bc){i.opacity.value=d.opacity;Q.hd?si(i.ig.value,d.color):i.ig.value=d.color;i.map.value=d.map;i.Ma.value=d.Ma;i.Ia.value=d.Ia;d.Fb&&(i.Fb.value=d.Fb,i.eg.value=d.eg);d.eb&&(i.eb.value=d.eb,i.xe.value.copy(d.xe));var Y;d.map?Y=d.map:d.Ia?Y=d.Ia:
d.eb?Y=d.eb:d.Fb&&(Y=d.Fb);n!==Y&&(c=Y.offset,Y=Y.repeat,i.Dv.value.set(c.x,c.y,Y.x,Y.y));i.oa.value=d.oa;i.hu.value=d.oa instanceof THREE.Ye?1:-1;i.Hc.value=d.Hc;i.Xc.value=d.Xc;i.Rc.value=d.Rc;i.dr.value=d.oa&&d.oa.ub instanceof THREE.wr}d instanceof THREE.Pb?(i.ig.value=d.color,i.opacity.value=d.opacity):d instanceof THREE.Re?(i.ig.value=d.color,i.opacity.value=d.opacity,i.ie.value=d.ie,i.dx.value=d.ie+d.wh,i.scale.value=d.scale):d instanceof THREE.Ue?(i.ew.value=d.color,i.opacity.value=d.opacity,
i.size.value=d.size,i.scale.value=la.height/2,i.map.value=d.map):d instanceof THREE.bc?(i.Ce.value=d.Ce,Q.hd?(si(i.za.value,d.za),si(i.jb.value,d.jb),si(i.sd.value,d.sd)):(i.za.value=d.za,i.jb.value=d.jb,i.sd.value=d.sd),d.bd&&i.Lc.value.copy(d.Lc)):d instanceof THREE.ac?(Q.hd?(si(i.za.value,d.za),si(i.jb.value,d.jb)):(i.za.value=d.za,i.jb.value=d.jb),d.bd&&i.Lc.value.copy(d.Lc)):d instanceof THREE.Se?(i.av.value=a.Ba,i.$u.value=a.Fa,i.opacity.value=d.opacity):d instanceof THREE.Te&&(i.opacity.value=
d.opacity);if(e.Gg&&!d.ae&&i.Af){c=Y=0;for(f=b.length;c<f;c++)if(j=b[c],j.zc&&(j instanceof THREE.Sf||j instanceof THREE.Mc&&!j.Tm))i.zf.value[Y]=j.zf,i.Zh.value[Y]=j.Zh,i.Af.value[Y]=j.Af,i.Be.value[Y]=j.Be,i.Jg.value[Y]=j.Jg,Y++}b=d.$q;i=0;for(Y=b.length;i<Y;i++)if(f=g.Q[b[i][1]])if(c=b[i][0],l=c.type,j=c.value,"i"===l)m.uniform1i(f,j);else if("f"===l)m.uniform1f(f,j);else if("v2"===l)m.uniform2f(f,j.x,j.y);else if("v3"===l)m.uniform3f(f,j.x,j.y,j.a);else if("v4"===l)m.uniform4f(f,j.x,j.y,j.a,j.j);
else if("c"===l)m.uniform3f(f,j.g,j.f,j.c);else if("iv1"===l)m.uniform1iv(f,j);else if("iv"===l)m.uniform3iv(f,j);else if("fv1"===l)m.uniform1fv(f,j);else if("fv"===l)m.uniform3fv(f,j);else if("v2v"===l){n===c.ea&&(c.ea=new Float32Array(2*j.length));l=0;for(k=j.length;l<k;l++)H=2*l,c.ea[H]=j[l].x,c.ea[H+1]=j[l].y;m.uniform2fv(f,c.ea)}else if("v3v"===l){n===c.ea&&(c.ea=new Float32Array(3*j.length));l=0;for(k=j.length;l<k;l++)H=3*l,c.ea[H]=j[l].x,c.ea[H+1]=j[l].y,c.ea[H+2]=j[l].a;m.uniform3fv(f,c.ea)}else if("v4v"===
l){n===c.ea&&(c.ea=new Float32Array(4*j.length));l=0;for(k=j.length;l<k;l++)H=4*l,c.ea[H]=j[l].x,c.ea[H+1]=j[l].y,c.ea[H+2]=j[l].a,c.ea[H+3]=j[l].j;m.uniform4fv(f,c.ea)}else if("m4"===l)n===c.ea&&(c.ea=new Float32Array(16)),p=c.ea,j=j.elements,p[0]=j[0],p[1]=j[1],p[2]=j[2],p[3]=j[3],p[4]=j[4],p[5]=j[5],p[6]=j[6],p[7]=j[7],p[8]=j[8],p[9]=j[9],p[10]=j[10],p[11]=j[11],p[12]=j[12],p[13]=j[13],p[14]=j[14],p[15]=j[15],m.uniformMatrix4fv(f,w,c.ea);else if("m4v"===l){n===c.ea&&(c.ea=new Float32Array(16*j.length));
l=0;for(k=j.length;l<k;l++)Hi(j[l],c.ea,16*l);m.uniformMatrix4fv(f,w,c.ea)}else if("t"===l){if(H=j,j=B(),m.uniform1i(f,j),H)if(H.J instanceof Array&&6===H.J.length){if(c=H,f=j,6===c.J.length)if(c.ha){c.J.ah||(c.J.ah=m.createTexture(),Q.info.memory.Xb++);m.activeTexture(m.TEXTURE0+f);m.bindTexture(m.TEXTURE_CUBE_MAP,c.J.ah);m.pixelStorei(m.UNPACK_FLIP_Y_WEBGL,c.mf);f=c instanceof THREE.Me;j=[];for(l=0;6>l;l++)Q.ht&&!f?(k=j,H=l,s=c.J[l],Aa=Lf,s.width<=Aa&&s.height<=Aa||(v=Math.max(s.width,s.height),
ua=Math.floor(s.width*Aa/v),Aa=Math.floor(s.height*Aa/v),v=document.createElement("canvas"),v.width=ua,v.height=Aa,v.getContext("2d").drawImage(s,0,0,s.width,s.height,0,0,ua,Aa),s=v),k[H]=s):j[l]=c.J[l];l=j[0];k=0===(l.width&l.width-1)&&0===(l.height&l.height-1);H=W(c.ka);s=W(c.type);K(m.TEXTURE_CUBE_MAP,c,k);for(l=0;6>l;l++)if(f){Aa=j[l].Lb;v=0;for(Ba=Aa.length;v<Ba;v++)ua=Aa[v],m.compressedTexImage2D(m.TEXTURE_CUBE_MAP_POSITIVE_X+l,v,H,ua.width,ua.height,0,ua.data)}else m.texImage2D(m.TEXTURE_CUBE_MAP_POSITIVE_X+
l,0,H,H,s,j[l]);c.lb&&k&&m.generateMipmap(m.TEXTURE_CUBE_MAP);c.ha=w;c.Mj&&c.Mj()}else m.activeTexture(m.TEXTURE0+f),m.bindTexture(m.TEXTURE_CUBE_MAP,c.J.ah)}else H instanceof THREE.Ye?(c=H,m.activeTexture(m.TEXTURE0+j),m.bindTexture(m.TEXTURE_CUBE_MAP,c.hc)):Q.Th(H,j)}else if("tv"===l){n===c.ea&&(c.ea=[]);l=0;for(k=c.value.length;l<k;l++)c.ea[l]=B();m.uniform1iv(f,c.ea);l=0;for(k=c.value.length;l<k;l++)H=c.value[l],j=c.ea[l],H&&Q.Th(H,j)}if((d instanceof THREE.Xa||d instanceof THREE.bc||d.oa)&&u!==
h.yt)b=Gi(a.A),m.uniform3f(h.yt,b.x,b.y,b.a);(d instanceof THREE.bc||d instanceof THREE.ac||d instanceof THREE.Xa||d.Ca)&&u!==h.ox&&m.uniformMatrix4fv(h.ox,w,a.Aa.elements)}m.uniformMatrix4fv(h.Pp,w,e.Pc.elements);h.yv&&m.uniformMatrix3fv(h.yv,w,e.Mi.elements);u!==h.qv&&m.uniformMatrix4fv(h.qv,w,e.A.elements);return g}function B(){var a=za;a>=rc&&console.warn("Trying to use "+a+" texture units while this GPU supports only "+rc);za+=1;return a}function J(a,b){a.Pc.multiply(b.Aa,a.A);a.Mi.Gb(a.Pc);
a.Mi.ii()}function O(a,b,c,d){a[b]=c.g*c.g*d;a[b+1]=c.f*c.f*d;a[b+2]=c.c*c.c*d}function I(a,b,c,d){a[b]=c.g*d;a[b+1]=c.f*d;a[b+2]=c.c*d}function P(a,b,c){Rb!==a&&(a?m.enable(m.POLYGON_OFFSET_FILL):m.disable(m.POLYGON_OFFSET_FILL),Rb=a);if(a&&(Sb!==b||Bb!==c))m.polygonOffset(b,c),Sb=b,Bb=c}function E(a){for(var a=a.split("\n"),b=0,c=a.length;b<c;b++)a[b]=b+1+": "+a[b];return a.join("\n")}function R(a,b){var c;"fragment"===a?c=m.createShader(m.FRAGMENT_SHADER):"vertex"===a&&(c=m.createShader(m.VERTEX_SHADER));
m.shaderSource(c,b);m.compileShader(c);return!m.getShaderParameter(c,m.COMPILE_STATUS)?(console.error(m.getShaderInfoLog(c)),console.error(E(b)),u):c}function K(a,b,c){c?(m.texParameteri(a,m.TEXTURE_WRAP_S,W(b.Yb)),m.texParameteri(a,m.TEXTURE_WRAP_T,W(b.Zb)),m.texParameteri(a,m.TEXTURE_MAG_FILTER,W(b.Kb)),m.texParameteri(a,m.TEXTURE_MIN_FILTER,W(b.mb))):(m.texParameteri(a,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE),m.texParameteri(a,m.TEXTURE_WRAP_T,m.CLAMP_TO_EDGE),m.texParameteri(a,m.TEXTURE_MAG_FILTER,M(b.Kb)),
m.texParameteri(a,m.TEXTURE_MIN_FILTER,M(b.mb)));if(Jb&&b.type!==THREE.uk&&(1<b.Rb||b.Cs))m.texParameterf(a,Jb.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(b.Rb,jd)),b.Cs=b.Rb}function V(a,b){m.bindRenderbuffer(m.RENDERBUFFER,a);b.je&&!b.Ge?(m.renderbufferStorage(m.RENDERBUFFER,m.DEPTH_COMPONENT16,b.width,b.height),m.framebufferRenderbuffer(m.FRAMEBUFFER,m.DEPTH_ATTACHMENT,m.RENDERBUFFER,a)):b.je&&b.Ge?(m.renderbufferStorage(m.RENDERBUFFER,m.DEPTH_STENCIL,b.width,b.height),m.framebufferRenderbuffer(m.FRAMEBUFFER,
m.DEPTH_STENCIL_ATTACHMENT,m.RENDERBUFFER,a)):m.renderbufferStorage(m.RENDERBUFFER,m.RGBA4,b.width,b.height)}function M(a){return a===THREE.Rg||a===THREE.Dn||a===THREE.Cn?m.NEAREST:m.LINEAR}function W(a){if(a===THREE.Nc)return m.REPEAT;if(a===THREE.Le)return m.CLAMP_TO_EDGE;if(a===THREE.Fk)return m.MIRRORED_REPEAT;if(a===THREE.Rg)return m.NEAREST;if(a===THREE.Dn)return m.NEAREST_MIPMAP_NEAREST;if(a===THREE.Cn)return m.NEAREST_MIPMAP_LINEAR;if(a===THREE.Td)return m.LINEAR;if(a===THREE.Kr)return m.LINEAR_MIPMAP_NEAREST;
if(a===THREE.Dk)return m.LINEAR_MIPMAP_LINEAR;if(a===THREE.Pk)return m.UNSIGNED_BYTE;if(a===THREE.rs)return m.UNSIGNED_SHORT_4_4_4_4;if(a===THREE.ss)return m.UNSIGNED_SHORT_5_5_5_1;if(a===THREE.ts)return m.UNSIGNED_SHORT_5_6_5;if(a===THREE.qr)return m.BYTE;if(a===THREE.cs)return m.SHORT;if(a===THREE.us)return m.UNSIGNED_SHORT;if(a===THREE.Hr)return m.INT;if(a===THREE.qs)return m.UNSIGNED_INT;if(a===THREE.uk)return m.FLOAT;if(a===THREE.mr)return m.ALPHA;if(a===THREE.Hk)return m.RGB;if(a===THREE.Vg)return m.RGBA;
if(a===THREE.Mr)return m.LUMINANCE;if(a===THREE.Lr)return m.LUMINANCE_ALPHA;if(a===THREE.gn)return m.FUNC_ADD;if(a===THREE.hs)return m.FUNC_SUBTRACT;if(a===THREE.as)return m.FUNC_REVERSE_SUBTRACT;if(a===THREE.ws)return m.ZERO;if(a===THREE.Tr)return m.ONE;if(a===THREE.gs)return m.SRC_COLOR;if(a===THREE.Wr)return m.ONE_MINUS_SRC_COLOR;if(a===THREE.Wn)return m.SRC_ALPHA;if(a===THREE.Fn)return m.ONE_MINUS_SRC_ALPHA;if(a===THREE.Br)return m.DST_ALPHA;if(a===THREE.Ur)return m.ONE_MINUS_DST_ALPHA;if(a===
THREE.Cr)return m.DST_COLOR;if(a===THREE.Vr)return m.ONE_MINUS_DST_COLOR;if(a===THREE.fs)return m.SRC_ALPHA_SATURATE;if(n!==ub){if(a===THREE.On)return ub.COMPRESSED_RGB_S3TC_DXT1_EXT;if(a===THREE.Zr)return ub.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(a===THREE.Mn)return ub.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(a===THREE.Nn)return ub.COMPRESSED_RGBA_S3TC_DXT5_EXT}return 0}console.log("THREE.WebGLRenderer",THREE.Ln);var a=a||{},la=n!==a.canvas?a.canvas:document.createElement("canvas"),X=n!==a.precision?a.precision:
"highp",aa=n!==a.alpha?a.alpha:t,ia=n!==a.premultipliedAlpha?a.premultipliedAlpha:t,Ia=n!==a.antialias?a.antialias:w,S=n!==a.stencil?a.stencil:t,ja=n!==a.preserveDrawingBuffer?a.preserveDrawingBuffer:w,wa=n!==a.clearColor?new THREE.t(a.clearColor):new THREE.t(0),ba=n!==a.Bt?a.Bt:0;this.Wt=la;this.context=u;this.sl=this.jt=this.fk=this.gt=this.ft=this.et=this.rl=t;this.Xh=this.Zp=this.dp=this.hd=w;this.ak=this.Dw=t;this.xq=THREE.ri;this.Zj=this.$j=w;this.Ih=8;this.Fj=4;this.ht=t;this.mq=[];this.lq=
[];this.info={memory:{dq:0,$:0,Xb:0},B:{ee:0,e:0,l:0,M:0}};var Q=this,T=[],na=0,U=u,Y=u,ka=-1,N=u,oa=u,Na=0,za=0,ha=-1,Fa=-1,Oa=-1,xa=-1,ob=-1,pb=-1,qb=-1,ib=-1,Rb=u,Sb=u,Bb=u,Qa=u,Ka=0,tb=0,Ga=0,fb=0,ab=0,Pa=0,H={},ua=new THREE.Nf,Aa=new THREE.D,Ba=new THREE.D,Lb=new THREE.d,gb=new THREE.d,bc=t,xd={za:[0,0,0],rh:{length:0,$a:[],Wc:[]},Nd:{length:0,$a:[],Wc:[],th:[]},pc:{length:0,$a:[],Wc:[],th:[],Uo:[],Co:[],Zo:[]},of:{length:0,Eq:[],op:[],Wc:[]}},m,Jb,ub;try{if(!(m=la.getContext("experimental-webgl",
{alpha:aa,premultipliedAlpha:ia,antialias:Ia,stencil:S,preserveDrawingBuffer:ja})))throw"Error creating WebGL context.";}catch(Pd){console.error(Pd)}a=m.getExtension("OES_texture_float");aa=m.getExtension("OES_standard_derivatives");Jb=m.getExtension("EXT_texture_filter_anisotropic")||m.getExtension("MOZ_EXT_texture_filter_anisotropic")||m.getExtension("WEBKIT_EXT_texture_filter_anisotropic");ub=m.getExtension("WEBGL_compressed_texture_s3tc")||m.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||
m.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");a||console.log("THREE.WebGLRenderer: Float textures not supported.");aa||console.log("THREE.WebGLRenderer: Standard derivatives not supported.");Jb||console.log("THREE.WebGLRenderer: Anisotropic texture filtering not supported.");ub||console.log("THREE.WebGLRenderer: S3TC compressed textures not supported.");m.clearColor(0,0,0,1);m.clearDepth(1);m.clearStencil(0);m.enable(m.DEPTH_TEST);m.depthFunc(m.LEQUAL);m.frontFace(m.CCW);m.cullFace(m.BACK);
m.enable(m.CULL_FACE);m.enable(m.BLEND);m.blendEquation(m.FUNC_ADD);m.blendFunc(m.SRC_ALPHA,m.ONE_MINUS_SRC_ALPHA);m.clearColor(wa.g,wa.f,wa.c,ba);this.context=m;var rc=m.getParameter(m.MAX_TEXTURE_IMAGE_UNITS),aa=m.getParameter(m.MAX_VERTEX_TEXTURE_IMAGE_UNITS);m.getParameter(m.MAX_TEXTURE_SIZE);var Lf=m.getParameter(m.MAX_CUBE_MAP_TEXTURE_SIZE),jd=Jb?m.getParameter(Jb.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,Ub=0<aa,tc=Ub&&a;ub&&m.getParameter(m.COMPRESSED_TEXTURE_FORMATS);this.getContext=function(){return m};
this.xE=function(){return Ub};this.nu=function(){return jd};this.tq=function(a,b){la.width=a;la.height=b;this.xw(la.width,la.height)};this.xw=function(a,b){tb=Ka=0;Ga=n!==a?a:la.width;fb=n!==b?b:la.height;m.viewport(Ka,tb,Ga,fb)};this.dE=function(a,b,c,d){m.scissor(a,b,c,d)};this.iA=function(a){a?m.enable(m.SCISSOR_TEST):m.disable(m.SCISSOR_TEST)};this.uw=function(a,b){oi(wa,a);ba=b;m.clearColor(wa.g,wa.f,wa.c,ba)};this.tw=function(a,b){wa.copy(a);ba=b;m.clearColor(wa.g,wa.f,wa.c,ba)};this.hp=function(){return wa};
this.gp=function(){return ba};this.clear=function(a,b,c){var d=0;if(n===a||a)d|=m.COLOR_BUFFER_BIT;if(n===b||b)d|=m.DEPTH_BUFFER_BIT;if(n===c||c)d|=m.STENCIL_BUFFER_BIT;m.clear(d)};this.kz=function(a,b,c,d){this.Vj(a);this.clear(b,c,d)};this.xo=function(a){a.init(this);this.lq.push(a)};this.Vs=function(a){a.init(this);this.mq.push(a)};this.Vz=function(a){if(a.Ze)if(a.Ze=w,delete a.Pc,delete a.Mi,a instanceof THREE.O)for(var c in a.s.Za){var d=a.s.Za[c];m.deleteBuffer(d.Sa);m.deleteBuffer(d.Ed);m.deleteBuffer(d.el);
m.deleteBuffer(d.Cb);m.deleteBuffer(d.gl);m.deleteBuffer(d.fl);m.deleteBuffer(d.bl);m.deleteBuffer(d.cl);m.deleteBuffer(d.Vk);m.deleteBuffer(d.Zk);var e=n,f=n;if(d.vf){e=0;for(f=d.vf;e<f;e++)m.deleteBuffer(d.Vf[e])}if(d.uf){e=0;for(f=d.uf;e<f;e++)m.deleteBuffer(d.Zg[e])}b(d);Q.info.memory.$--}else a instanceof THREE.Bd?(a=a.s,m.deleteBuffer(a.Sa),m.deleteBuffer(a.Cb),m.deleteBuffer(a.Ed),b(a),Q.info.memory.$--):a instanceof THREE.Ja?(a=a.s,m.deleteBuffer(a.Sa),m.deleteBuffer(a.Cb),m.deleteBuffer(a.al),
b(a),Q.info.memory.$--):a instanceof THREE.Qb&&(a=a.s,m.deleteBuffer(a.Sa),m.deleteBuffer(a.Cb),b(a),Q.info.memory.$--)};this.Xz=function(a){if(a.J&&a.J.ah)m.deleteTexture(a.J.ah);else{if(!a.Ze)return;a.Ze=w;m.deleteTexture(a.hc)}Q.info.memory.Xb--};this.Wz=function(a){if(a&&a.hc)if(m.deleteTexture(a.hc),a instanceof THREE.Ye)for(var b=0;6>b;b++)m.deleteFramebuffer(a.Dd[b]),m.deleteRenderbuffer(a.Wf[b]);else m.deleteFramebuffer(a.Dd),m.deleteRenderbuffer(a.Wf)};this.Qt=function(a){var b=a.vb;if(b){a.vb=
n;var c,d,e=w,a=0;for(c=T.length;a<c;a++)if(d=T[a],d.vb===b){d.bn--;0===d.bn&&(e=t);break}if(e){e=[];a=0;for(c=T.length;a<c;a++)d=T[a],d.vb!==b&&e.push(d);T=e;m.deleteProgram(b);Q.info.memory.dq--}}};this.UE=function(a,b){U=u;ka=N=ib=qb=Oa=-1;bc=t;Fa=ha=-1;this.yq.update(a,b)};this.kw=function(a,b,c){a.wu&&!a.Sa&&(a.Sa=m.createBuffer());a.vu&&!a.Ed&&(a.Ed=m.createBuffer());a.xu&&!a.qo&&(a.qo=m.createBuffer());a.uu&&!a.Cb&&(a.Cb=m.createBuffer());a.wu&&(m.bindBuffer(m.ARRAY_BUFFER,a.Sa),m.bufferData(m.ARRAY_BUFFER,
a.tD,m.DYNAMIC_DRAW),m.enableVertexAttribArray(b.attributes.position),m.vertexAttribPointer(b.attributes.position,3,m.FLOAT,w,0,0));if(a.vu){m.bindBuffer(m.ARRAY_BUFFER,a.Ed);if(c.Ha===THREE.Pg){var d,e,f,g,h,i,j,l,H,k,p,q=3*a.count;for(p=0;p<q;p+=9)k=a.xv,d=k[p],e=k[p+1],f=k[p+2],g=k[p+3],i=k[p+4],l=k[p+5],h=k[p+6],j=k[p+7],H=k[p+8],d=(d+g+h)/3,e=(e+i+j)/3,f=(f+l+H)/3,k[p]=d,k[p+1]=e,k[p+2]=f,k[p+3]=d,k[p+4]=e,k[p+5]=f,k[p+6]=d,k[p+7]=e,k[p+8]=f}m.bufferData(m.ARRAY_BUFFER,a.xv,m.DYNAMIC_DRAW);m.enableVertexAttribArray(b.attributes.n);
m.vertexAttribPointer(b.attributes.n,3,m.FLOAT,w,0,0)}a.xu&&c.map&&(m.bindBuffer(m.ARRAY_BUFFER,a.qo),m.bufferData(m.ARRAY_BUFFER,a.$E,m.DYNAMIC_DRAW),m.enableVertexAttribArray(b.attributes.wa),m.vertexAttribPointer(b.attributes.wa,2,m.FLOAT,w,0,0));a.uu&&c.m!==THREE.Sg&&(m.bindBuffer(m.ARRAY_BUFFER,a.Cb),m.bufferData(m.ARRAY_BUFFER,a.nz,m.DYNAMIC_DRAW),m.enableVertexAttribArray(b.attributes.color),m.vertexAttribPointer(b.attributes.color,3,m.FLOAT,w,0,0));m.drawArrays(m.TRIANGLES,0,a.count);a.count=
0};this.Jm=function(a,b,c,d,e,f){if(w!==d.visible)if(c=G(a,b,c,d,f),a=c.attributes,b=w,d=16777215*e.id+2*c.id+(d.R?1:0),d!==N&&(N=d,b=t),b&&l(),f instanceof THREE.O)if(f=e.attributes.index){d=e.zm;1<d.length&&(b=t);for(var c=0,g=d.length;c<g;c++){var h=d[c].index;if(b){var i=e.attributes.position,k=i.kc;m.bindBuffer(m.ARRAY_BUFFER,i.buffer);j(a.position);m.vertexAttribPointer(a.position,k,m.FLOAT,w,0,4*h*k);k=e.attributes.n;if(0<=a.n&&k){var H=k.kc;m.bindBuffer(m.ARRAY_BUFFER,k.buffer);j(a.n);m.vertexAttribPointer(a.n,
H,m.FLOAT,w,0,4*h*H)}k=e.attributes.wa;0<=a.wa&&k&&(H=k.kc,m.bindBuffer(m.ARRAY_BUFFER,k.buffer),j(a.wa),m.vertexAttribPointer(a.wa,H,m.FLOAT,w,0,4*h*H));k=e.attributes.color;0<=a.color&&k&&(H=k.kc,m.bindBuffer(m.ARRAY_BUFFER,k.buffer),j(a.color),m.vertexAttribPointer(a.color,H,m.FLOAT,w,0,4*h*H));k=e.attributes.Vb;0<=a.Vb&&k&&(H=k.kc,m.bindBuffer(m.ARRAY_BUFFER,k.buffer),j(a.Vb),m.vertexAttribPointer(a.Vb,H,m.FLOAT,w,0,4*h*H));m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,f.buffer)}m.drawElements(m.TRIANGLES,
d[c].count,m.UNSIGNED_SHORT,2*d[c].start);Q.info.B.ee++;Q.info.B.e+=d[c].count;Q.info.B.l+=d[c].count/3}}else b&&(i=e.attributes.position,k=i.kc,m.bindBuffer(m.ARRAY_BUFFER,i.buffer),j(a.position),m.vertexAttribPointer(a.position,k,m.FLOAT,w,0,0),k=e.attributes.n,0<=a.n&&k&&(H=k.kc,m.bindBuffer(m.ARRAY_BUFFER,k.buffer),j(a.n),m.vertexAttribPointer(a.n,H,m.FLOAT,w,0,0)),k=e.attributes.wa,0<=a.wa&&k&&(H=k.kc,m.bindBuffer(m.ARRAY_BUFFER,k.buffer),j(a.wa),m.vertexAttribPointer(a.wa,H,m.FLOAT,w,0,0)),
k=e.attributes.color,0<=a.color&&k&&(H=k.kc,m.bindBuffer(m.ARRAY_BUFFER,k.buffer),j(a.color),m.vertexAttribPointer(a.color,H,m.FLOAT,w,0,0)),k=e.attributes.Vb,0<=a.Vb&&k&&(H=k.kc,m.bindBuffer(m.ARRAY_BUFFER,k.buffer),j(a.Vb),m.vertexAttribPointer(a.Vb,H,m.FLOAT,w,0,0))),m.drawArrays(m.TRIANGLES,0,i.Cg/3),Q.info.B.ee++,Q.info.B.e+=i.Cg/3,Q.info.B.l+=i.Cg/3/3;else f instanceof THREE.Qb&&b&&(i=e.attributes.position,k=i.kc,m.bindBuffer(m.ARRAY_BUFFER,i.buffer),j(a.position),m.vertexAttribPointer(a.position,
k,m.FLOAT,w,0,0),k=e.attributes.color,0<=a.color&&k&&(H=k.kc,m.bindBuffer(m.ARRAY_BUFFER,k.buffer),j(a.color),m.vertexAttribPointer(a.color,H,m.FLOAT,w,0,0)),m.drawArrays(m.POINTS,0,i.Cg/3),Q.info.B.ee++,Q.info.B.M+=i.Cg/3)};this.Im=function(a,b,c,d,e,f){if(w!==d.visible){var g,h,c=G(a,b,c,d,f),b=c.attributes,a=w,c=16777215*e.id+2*c.id+(d.R?1:0);c!==N&&(N=c,a=t);a&&l();if(!d.F&&0<=b.position)a&&(m.bindBuffer(m.ARRAY_BUFFER,e.Sa),j(b.position),m.vertexAttribPointer(b.position,3,m.FLOAT,w,0,0));else if(f.tm){c=
d.vb.attributes;-1!==f.tm&&0<=c.position?(m.bindBuffer(m.ARRAY_BUFFER,e.Vf[f.tm]),j(c.position),m.vertexAttribPointer(c.position,3,m.FLOAT,w,0,0)):0<=c.position&&(m.bindBuffer(m.ARRAY_BUFFER,e.Sa),j(c.position),m.vertexAttribPointer(c.position,3,m.FLOAT,w,0,0));if(f.Qp.length){var i=0;h=f.Qp;for(g=f.Vc;i<d.Kh&&i<h.length;)0<=c["morphTarget"+i]&&(m.bindBuffer(m.ARRAY_BUFFER,e.Vf[h[i]]),j(c["morphTarget"+i]),m.vertexAttribPointer(c["morphTarget"+i],3,m.FLOAT,w,0,0)),0<=c["morphNormal"+i]&&d.la&&(m.bindBuffer(m.ARRAY_BUFFER,
e.Zg[h[i]]),j(c["morphNormal"+i]),m.vertexAttribPointer(c["morphNormal"+i],3,m.FLOAT,w,0,0)),f.$g[i]=g[h[i]],i++}else{h=[];g=f.Vc;var k,H=g.length;for(k=0;k<H;k++)i=g[k],0<i&&h.push([i,k]);h.length>d.Kh?(h.sort(p),h.length=d.Kh):h.length>d.Sp?h.sort(p):0===h.length&&h.push([0,0]);for(i=0;i<d.Kh;)h[i]?(k=h[i][1],0<=c["morphTarget"+i]&&(m.bindBuffer(m.ARRAY_BUFFER,e.Vf[k]),j(c["morphTarget"+i]),m.vertexAttribPointer(c["morphTarget"+i],3,m.FLOAT,w,0,0)),0<=c["morphNormal"+i]&&d.la&&(m.bindBuffer(m.ARRAY_BUFFER,
e.Zg[k]),j(c["morphNormal"+i]),m.vertexAttribPointer(c["morphNormal"+i],3,m.FLOAT,w,0,0)),f.$g[i]=g[k]):f.$g[i]=0,i++}u!==d.vb.Q.Vc&&m.uniform1fv(d.vb.Q.Vc,f.$g)}if(a){if(e.Db){g=0;for(h=e.Db.length;g<h;g++)c=e.Db[g],0<=b[c.buffer.Ti]&&(m.bindBuffer(m.ARRAY_BUFFER,c.buffer),j(b[c.buffer.Ti]),m.vertexAttribPointer(b[c.buffer.Ti],c.size,m.FLOAT,w,0,0))}0<=b.color&&(m.bindBuffer(m.ARRAY_BUFFER,e.Cb),j(b.color),m.vertexAttribPointer(b.color,3,m.FLOAT,w,0,0));0<=b.n&&(m.bindBuffer(m.ARRAY_BUFFER,e.Ed),
j(b.n),m.vertexAttribPointer(b.n,3,m.FLOAT,w,0,0));0<=b.Vb&&(m.bindBuffer(m.ARRAY_BUFFER,e.el),j(b.Vb),m.vertexAttribPointer(b.Vb,4,m.FLOAT,w,0,0));0<=b.wa&&(m.bindBuffer(m.ARRAY_BUFFER,e.gl),j(b.wa),m.vertexAttribPointer(b.wa,2,m.FLOAT,w,0,0));0<=b.fr&&(m.bindBuffer(m.ARRAY_BUFFER,e.fl),j(b.fr),m.vertexAttribPointer(b.fr,2,m.FLOAT,w,0,0));d.Ca&&0<=b.Bq&&0<=b.Cq&&(m.bindBuffer(m.ARRAY_BUFFER,e.bl),j(b.Bq),m.vertexAttribPointer(b.Bq,4,m.FLOAT,w,0,0),m.bindBuffer(m.ARRAY_BUFFER,e.cl),j(b.Cq),m.vertexAttribPointer(b.Cq,
4,m.FLOAT,w,0,0));0<=b.Cp&&(m.bindBuffer(m.ARRAY_BUFFER,e.al),j(b.Cp),m.vertexAttribPointer(b.Cp,1,m.FLOAT,w,0,0))}f instanceof THREE.O?(d.R?(d=d.sa,d!==Qa&&(m.lineWidth(d),Qa=d),a&&m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,e.Zk),m.drawElements(m.LINES,e.$k,m.UNSIGNED_SHORT,0)):(a&&m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,e.Vk),m.drawElements(m.TRIANGLES,e.Wk,m.UNSIGNED_SHORT,0)),Q.info.B.ee++,Q.info.B.e+=e.Wk,Q.info.B.l+=e.Wk/3):f instanceof THREE.Ja?(f=f.type===THREE.yn?m.LINE_STRIP:m.LINES,d=d.ue,d!==Qa&&
(m.lineWidth(d),Qa=d),m.drawArrays(f,0,e.$k),Q.info.B.ee++):f instanceof THREE.Qb?(m.drawArrays(m.POINTS,0,e.po),Q.info.B.ee++,Q.info.B.M+=e.po):f instanceof THREE.Bd&&(m.drawArrays(m.TRIANGLE_STRIP,0,e.Js),Q.info.B.ee++)}};this.B=function(a,b,c,d){if(w===b instanceof THREE.$b)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else{var e,f,g,h,i=a.fc,j=a.z;ka=-1;bc=t;this.sl&&a.Nb();n===b.parent&&b.Nb();b.Aa.Gb(b.A);Aa.multiply(b.ra,b.Aa);Li(ua,Aa);this.jt&&this.Fu(a);
r(this.mq,a,b);Q.info.B.ee=0;Q.info.B.e=0;Q.info.B.l=0;Q.info.B.M=0;this.Vj(c);(this.rl||d)&&this.clear(this.et,this.ft,this.gt);h=a.gc;d=0;for(e=h.length;d<e;d++)if(f=h[d],g=f.object,f.B=w,g.visible&&(!(g instanceof THREE.O||g instanceof THREE.Qb)||!g.nf||ua.contains(g))){J(g,b);var l=f,H=l.buffer,p=n,v=n,v=l.object.o;if(v instanceof THREE.Ab)p=H.va,p=v.ga[p],p.Da?(l.Da=p,l.wf=u):(l.wf=p,l.Da=u);else if(p=v)p.Da?(l.Da=p,l.wf=u):(l.wf=p,l.Da=u);f.B=t;t===this.fk&&(u!==g.qd?f.a=g.qd:(Lb.copy(Gi(g.A)),
Aa.X(Lb),f.a=Lb.a),f.id=g.id)}this.fk&&h.sort(k);h=a.$d;d=0;for(e=h.length;d<e;d++)f=h[d],g=f.object,g.visible&&(J(g,b),g=f.object.o,g.Da?(f.Da=g,f.wf=u):(f.wf=g,f.Da=u));a.Xp?(d=a.Xp,this.Ig(d.qb,d.blendEquation,d.gf,d.ff),this.yf(d.Bc),this.Sh(d.Ld),P(d.polygonOffset,d.Nh,d.Oh),s(a.gc,w,"",b,i,j,t,d),q(a.$d,"",b,i,j,w,d)):(d=u,this.Ig(THREE.En),s(a.gc,t,"opaque",b,i,j,w,d),q(a.$d,"opaque",b,i,j,w,d),s(a.gc,w,"transparent",b,i,j,t,d),q(a.$d,"transparent",b,i,j,t,d));r(this.lq,a,b);c&&c.lb&&(c.mb!==
THREE.Rg&&c.mb!==THREE.Td)&&(c instanceof THREE.Ye?(m.bindTexture(m.TEXTURE_CUBE_MAP,c.hc),m.generateMipmap(m.TEXTURE_CUBE_MAP),m.bindTexture(m.TEXTURE_CUBE_MAP,u)):(m.bindTexture(m.TEXTURE_2D,c.hc),m.generateMipmap(m.TEXTURE_2D),m.bindTexture(m.TEXTURE_2D,u)));this.yf(t);this.Sh(t)}};this.Km=function(a,b,c,d,e){var f=G(a,b,c,d,e);N=-1;Q.Om(d);e.Zl?e.Zl(f,m,ua):e.B(function(a){Q.kw(a,f,d)})};this.Fu=function(a){for(a.gc||(a.gc=[],a.$d=[],a.dl=[],a.Xk=[]);a.Tf.length;){var b=a.Tf[0],j=a,l=n,k=n,H=
n,q=n;if(!b.Ze)if(b.Ze=t,b.Pc=new THREE.D,b.Mi=new THREE.Vd,b instanceof THREE.O)if(k=b.s,H=b.o,k instanceof THREE.G){if(n===k.Za){var r=k,s=n,ua=n,B=n,E=n,G=n,I=n,J={},K=r.F.length,M=r.la.length,O=H instanceof THREE.Ab;r.Za={};s=0;for(ua=r.l.length;s<ua;s++)B=r.l[s],E=O?B.va:0,n===J[E]&&(J[E]={hash:E,fj:0}),I=J[E].hash+"_"+J[E].fj,n===r.Za[I]&&(r.Za[I]={nj:[],oj:[],va:E,e:0,vf:K,uf:M}),G=B instanceof THREE.K?3:4,65535<r.Za[I].e+G&&(J[E].fj+=1,I=J[E].hash+"_"+J[E].fj,n===r.Za[I]&&(r.Za[I]={nj:[],
oj:[],va:E,e:0,vf:K,uf:M})),B instanceof THREE.K?r.Za[I].nj.push(s):r.Za[I].oj.push(s),r.Za[I].e+=G;r.Ul=[];var T=n;for(T in r.Za)r.Za[T].id=Na++,r.Ul.push(r.Za[T])}for(l in k.Za)if(q=k.Za[l],!q.Sa){var N=q;N.Sa=m.createBuffer();N.Ed=m.createBuffer();N.el=m.createBuffer();N.Cb=m.createBuffer();N.gl=m.createBuffer();N.fl=m.createBuffer();N.bl=m.createBuffer();N.cl=m.createBuffer();N.Vk=m.createBuffer();N.Zk=m.createBuffer();var bc=n,gb=n;if(N.vf){N.Vf=[];bc=0;for(gb=N.vf;bc<gb;bc++)N.Vf.push(m.createBuffer())}if(N.uf){N.Zg=
[];bc=0;for(gb=N.uf;bc<gb;bc++)N.Zg.push(m.createBuffer())}Q.info.memory.$++;d(q,b);k.xa=t;k.um=t;k.kf=t;k.If=t;k.lc=t;k.He=t;k.La=t}}else k instanceof THREE.cd&&h(k);else if(b instanceof THREE.Bd){if(k=b.s,!k.Sa){var U=k;U.Sa=m.createBuffer();U.Cb=m.createBuffer();U.Ed=m.createBuffer();Q.info.memory.$++;var P=k,R=b,S=P.e.length;P.Zd=new Float32Array(3*S);P.Xd=new Float32Array(3*S);P.Hi=new Float32Array(3*S);P.Js=S;c(P,R);k.xa=t;k.La=t;k.lc=t}}else if(b instanceof THREE.Ja){if(k=b.s,!k.Sa){var Y=
k;Y.Sa=m.createBuffer();Y.Cb=m.createBuffer();Y.al=m.createBuffer();Q.info.memory.$++;var Jb=k,W=b,ub=Jb.e.length;Jb.Zd=new Float32Array(3*ub);Jb.Xd=new Float32Array(3*ub);Jb.As=new Float32Array(1*ub);Jb.$k=ub;c(Jb,W);k.xa=t;k.La=t;k.Dj=t}}else if(b instanceof THREE.Qb&&(k=b.s,!k.Sa))if(k instanceof THREE.G){var na=k;na.Sa=m.createBuffer();na.Cb=m.createBuffer();Q.info.memory.$++;var V=k,ka=b,oa=V.e.length;V.Zd=new Float32Array(3*oa);V.Xd=new Float32Array(3*oa);V.Fs=[];V.po=oa;c(V,ka);k.xa=t;k.La=
t}else k instanceof THREE.cd&&h(k);if(!b.oo){if(b instanceof THREE.O)if(k=b.s,k instanceof THREE.cd)v(j.gc,k,b);else for(l in k.Za)q=k.Za[l],v(j.gc,q,b);else b instanceof THREE.Bd||b instanceof THREE.Ja||b instanceof THREE.Qb?(k=b.s,v(j.gc,k,b)):b instanceof THREE.zk||b.Zl?j.$d.push({object:b,wf:u,Da:u}):b instanceof THREE.We?j.dl.push(b):b instanceof THREE.wi&&j.Xk.push(b);b.oo=t}a.Tf.splice(0,1)}for(;a.Uf.length;){var X=a.Uf[0],aa=a;X instanceof THREE.O||X instanceof THREE.Qb||X instanceof THREE.Bd||
X instanceof THREE.Ja?C(aa.gc,X):X instanceof THREE.We?z(aa.dl,X):X instanceof THREE.wi?z(aa.Xk,X):(X instanceof THREE.zk||X.Zl)&&C(aa.$d,X);X.oo=w;a.Uf.splice(0,1)}for(var xd=0,ja=a.gc.length;xd<ja;xd++){var ba=a.gc[xd].object,Z=ba.s,la=n,rc=n,ia=n;if(ba instanceof THREE.O)if(Z instanceof THREE.cd)(Z.xa||Z.kf||Z.If||Z.lc||Z.La||Z.He)&&i(Z,m.DYNAMIC_DRAW,!Z.jj),Z.xa=w,Z.kf=w,Z.If=w,Z.lc=w,Z.La=w,Z.He=w;else{for(var Pd=0,wa=Z.Ul.length;Pd<wa;Pd++)if(la=Z.Ul[Pd],ia=e(ba,la),Z.Io&&d(la,ba),rc=ia.attributes&&
y(ia),Z.xa||Z.um||Z.kf||Z.If||Z.lc||Z.La||Z.He||rc){var ha=la,Lf=ba,za=m.DYNAMIC_DRAW,Fa=!Z.jj,xa=ia;if(ha.eo){var Ga=f(xa),Ia=xa.m?xa.m:w,Oa=g(xa),jd=Ga===THREE.Oc,L=n,ma=n,Ka=n,ca=n,Pa=n,Qa=n,Ub=n,ob=n,ab=n,qb=n,tc=n,ea=n,fa=n,ga=n,Ha=n,fb=n,pb=n,ib=n,Bb=n,tb=n,uc=n,vc=n,Rb=n,wc=n,xc=n,yc=n,Sb=n,zc=n,Ac=n,Bc=n,Qd=n,Cc=n,Dc=n,Ec=n,Rd=n,Ra=n,Hh=n,Yc=n,zd=n,Ad=n,vb=n,Ih=n,rb=n,sb=n,Zc=n,Nc=n,hb=0,lb=0,Oc=0,Pc=0,ec=0,Cb=0,Va=0,Kb=0,jb=0,ra=0,ya=0,D=0,Ta=n,wb=ha.Zd,Sd=ha.no,Td=ha.mo,fc=ha.Hi,bb=ha.lo,
xb=ha.Xd,cb=ha.jo,db=ha.ko,Nf=ha.io,Of=ha.ho,Pf=ha.Db,A=n,Fc=ha.co,Vb=ha.fo,Mb=Lf.s,Gj=Mb.kf,Jh=Mb.If,Hj=Mb.lc,Ij=Mb.He,Jj=Mb.La,Kj=Mb.um,kd=Mb.e,La=ha.nj,Ma=ha.oj,Db=Mb.l,Qf=Mb.C[0],Rf=Mb.C[1],ld=Mb.Ee,$c=Mb.Fe,ad=Mb.F,Je=Mb.la;if(Mb.xa){L=0;for(ma=La.length;L<ma;L++)ca=Db[La[L]],ea=kd[ca.q],fa=kd[ca.c],ga=kd[ca.r],wb[lb]=ea.x,wb[lb+1]=ea.y,wb[lb+2]=ea.a,wb[lb+3]=fa.x,wb[lb+4]=fa.y,wb[lb+5]=fa.a,wb[lb+6]=ga.x,wb[lb+7]=ga.y,wb[lb+8]=ga.a,lb+=9;L=0;for(ma=Ma.length;L<ma;L++)ca=Db[Ma[L]],ea=kd[ca.q],
fa=kd[ca.c],ga=kd[ca.r],Ha=kd[ca.P],wb[lb]=ea.x,wb[lb+1]=ea.y,wb[lb+2]=ea.a,wb[lb+3]=fa.x,wb[lb+4]=fa.y,wb[lb+5]=fa.a,wb[lb+6]=ga.x,wb[lb+7]=ga.y,wb[lb+8]=ga.a,wb[lb+9]=Ha.x,wb[lb+10]=Ha.y,wb[lb+11]=Ha.a,lb+=12;m.bindBuffer(m.ARRAY_BUFFER,ha.Sa);m.bufferData(m.ARRAY_BUFFER,wb,za)}if(Kj){vb=0;for(Ih=ad.length;vb<Ih;vb++){L=ya=0;for(ma=La.length;L<ma;L++)Zc=La[L],ca=Db[Zc],ea=ad[vb].e[ca.q],fa=ad[vb].e[ca.c],ga=ad[vb].e[ca.r],rb=Nf[vb],rb[ya]=ea.x,rb[ya+1]=ea.y,rb[ya+2]=ea.a,rb[ya+3]=fa.x,rb[ya+4]=
fa.y,rb[ya+5]=fa.a,rb[ya+6]=ga.x,rb[ya+7]=ga.y,rb[ya+8]=ga.a,xa.la&&(jd?(Nc=Je[vb].p[Zc],tb=Nc.q,uc=Nc.c,vc=Nc.r):vc=uc=tb=Je[vb].lj[Zc],sb=Of[vb],sb[ya]=tb.x,sb[ya+1]=tb.y,sb[ya+2]=tb.a,sb[ya+3]=uc.x,sb[ya+4]=uc.y,sb[ya+5]=uc.a,sb[ya+6]=vc.x,sb[ya+7]=vc.y,sb[ya+8]=vc.a),ya+=9;L=0;for(ma=Ma.length;L<ma;L++)Zc=Ma[L],ca=Db[Zc],ea=ad[vb].e[ca.q],fa=ad[vb].e[ca.c],ga=ad[vb].e[ca.r],Ha=ad[vb].e[ca.P],rb=Nf[vb],rb[ya]=ea.x,rb[ya+1]=ea.y,rb[ya+2]=ea.a,rb[ya+3]=fa.x,rb[ya+4]=fa.y,rb[ya+5]=fa.a,rb[ya+6]=ga.x,
rb[ya+7]=ga.y,rb[ya+8]=ga.a,rb[ya+9]=Ha.x,rb[ya+10]=Ha.y,rb[ya+11]=Ha.a,xa.la&&(jd?(Nc=Je[vb].p[Zc],tb=Nc.q,uc=Nc.c,vc=Nc.r,Rb=Nc.P):Rb=vc=uc=tb=Je[vb].lj[Zc],sb=Of[vb],sb[ya]=tb.x,sb[ya+1]=tb.y,sb[ya+2]=tb.a,sb[ya+3]=uc.x,sb[ya+4]=uc.y,sb[ya+5]=uc.a,sb[ya+6]=vc.x,sb[ya+7]=vc.y,sb[ya+8]=vc.a,sb[ya+9]=Rb.x,sb[ya+10]=Rb.y,sb[ya+11]=Rb.a),ya+=12;m.bindBuffer(m.ARRAY_BUFFER,ha.Vf[vb]);m.bufferData(m.ARRAY_BUFFER,Nf[vb],za);xa.la&&(m.bindBuffer(m.ARRAY_BUFFER,ha.Zg[vb]),m.bufferData(m.ARRAY_BUFFER,Of[vb],
za))}}if($c.length){L=0;for(ma=La.length;L<ma;L++)ca=Db[La[L]],zc=$c[ca.q],Ac=$c[ca.c],Bc=$c[ca.r],db[ra]=zc.x,db[ra+1]=zc.y,db[ra+2]=zc.a,db[ra+3]=zc.j,db[ra+4]=Ac.x,db[ra+5]=Ac.y,db[ra+6]=Ac.a,db[ra+7]=Ac.j,db[ra+8]=Bc.x,db[ra+9]=Bc.y,db[ra+10]=Bc.a,db[ra+11]=Bc.j,Cc=ld[ca.q],Dc=ld[ca.c],Ec=ld[ca.r],cb[ra]=Cc.x,cb[ra+1]=Cc.y,cb[ra+2]=Cc.a,cb[ra+3]=Cc.j,cb[ra+4]=Dc.x,cb[ra+5]=Dc.y,cb[ra+6]=Dc.a,cb[ra+7]=Dc.j,cb[ra+8]=Ec.x,cb[ra+9]=Ec.y,cb[ra+10]=Ec.a,cb[ra+11]=Ec.j,ra+=12;L=0;for(ma=Ma.length;L<
ma;L++)ca=Db[Ma[L]],zc=$c[ca.q],Ac=$c[ca.c],Bc=$c[ca.r],Qd=$c[ca.P],db[ra]=zc.x,db[ra+1]=zc.y,db[ra+2]=zc.a,db[ra+3]=zc.j,db[ra+4]=Ac.x,db[ra+5]=Ac.y,db[ra+6]=Ac.a,db[ra+7]=Ac.j,db[ra+8]=Bc.x,db[ra+9]=Bc.y,db[ra+10]=Bc.a,db[ra+11]=Bc.j,db[ra+12]=Qd.x,db[ra+13]=Qd.y,db[ra+14]=Qd.a,db[ra+15]=Qd.j,Cc=ld[ca.q],Dc=ld[ca.c],Ec=ld[ca.r],Rd=ld[ca.P],cb[ra]=Cc.x,cb[ra+1]=Cc.y,cb[ra+2]=Cc.a,cb[ra+3]=Cc.j,cb[ra+4]=Dc.x,cb[ra+5]=Dc.y,cb[ra+6]=Dc.a,cb[ra+7]=Dc.j,cb[ra+8]=Ec.x,cb[ra+9]=Ec.y,cb[ra+10]=Ec.a,cb[ra+
11]=Ec.j,cb[ra+12]=Rd.x,cb[ra+13]=Rd.y,cb[ra+14]=Rd.a,cb[ra+15]=Rd.j,ra+=16;0<ra&&(m.bindBuffer(m.ARRAY_BUFFER,ha.bl),m.bufferData(m.ARRAY_BUFFER,cb,za),m.bindBuffer(m.ARRAY_BUFFER,ha.cl),m.bufferData(m.ARRAY_BUFFER,db,za))}if(Jj&&Ia){L=0;for(ma=La.length;L<ma;L++)ca=Db[La[L]],Ub=ca.m,ob=ca.color,3===Ub.length&&Ia===THREE.Wg?(wc=Ub[0],xc=Ub[1],yc=Ub[2]):yc=xc=wc=ob,xb[jb]=wc.g,xb[jb+1]=wc.f,xb[jb+2]=wc.c,xb[jb+3]=xc.g,xb[jb+4]=xc.f,xb[jb+5]=xc.c,xb[jb+6]=yc.g,xb[jb+7]=yc.f,xb[jb+8]=yc.c,jb+=9;L=0;
for(ma=Ma.length;L<ma;L++)ca=Db[Ma[L]],Ub=ca.m,ob=ca.color,4===Ub.length&&Ia===THREE.Wg?(wc=Ub[0],xc=Ub[1],yc=Ub[2],Sb=Ub[3]):Sb=yc=xc=wc=ob,xb[jb]=wc.g,xb[jb+1]=wc.f,xb[jb+2]=wc.c,xb[jb+3]=xc.g,xb[jb+4]=xc.f,xb[jb+5]=xc.c,xb[jb+6]=yc.g,xb[jb+7]=yc.f,xb[jb+8]=yc.c,xb[jb+9]=Sb.g,xb[jb+10]=Sb.f,xb[jb+11]=Sb.c,jb+=12;0<jb&&(m.bindBuffer(m.ARRAY_BUFFER,ha.Cb),m.bufferData(m.ARRAY_BUFFER,xb,za))}if(Ij&&Mb.wg){L=0;for(ma=La.length;L<ma;L++)ca=Db[La[L]],ab=ca.wd,fb=ab[0],pb=ab[1],ib=ab[2],bb[Va]=fb.x,bb[Va+
1]=fb.y,bb[Va+2]=fb.a,bb[Va+3]=fb.j,bb[Va+4]=pb.x,bb[Va+5]=pb.y,bb[Va+6]=pb.a,bb[Va+7]=pb.j,bb[Va+8]=ib.x,bb[Va+9]=ib.y,bb[Va+10]=ib.a,bb[Va+11]=ib.j,Va+=12;L=0;for(ma=Ma.length;L<ma;L++)ca=Db[Ma[L]],ab=ca.wd,fb=ab[0],pb=ab[1],ib=ab[2],Bb=ab[3],bb[Va]=fb.x,bb[Va+1]=fb.y,bb[Va+2]=fb.a,bb[Va+3]=fb.j,bb[Va+4]=pb.x,bb[Va+5]=pb.y,bb[Va+6]=pb.a,bb[Va+7]=pb.j,bb[Va+8]=ib.x,bb[Va+9]=ib.y,bb[Va+10]=ib.a,bb[Va+11]=ib.j,bb[Va+12]=Bb.x,bb[Va+13]=Bb.y,bb[Va+14]=Bb.a,bb[Va+15]=Bb.j,Va+=16;m.bindBuffer(m.ARRAY_BUFFER,
ha.el);m.bufferData(m.ARRAY_BUFFER,bb,za)}if(Hj&&Ga){L=0;for(ma=La.length;L<ma;L++)if(ca=Db[La[L]],Pa=ca.p,Qa=ca.n,3===Pa.length&&jd)for(Ra=0;3>Ra;Ra++)Yc=Pa[Ra],fc[Cb]=Yc.x,fc[Cb+1]=Yc.y,fc[Cb+2]=Yc.a,Cb+=3;else for(Ra=0;3>Ra;Ra++)fc[Cb]=Qa.x,fc[Cb+1]=Qa.y,fc[Cb+2]=Qa.a,Cb+=3;L=0;for(ma=Ma.length;L<ma;L++)if(ca=Db[Ma[L]],Pa=ca.p,Qa=ca.n,4===Pa.length&&jd)for(Ra=0;4>Ra;Ra++)Yc=Pa[Ra],fc[Cb]=Yc.x,fc[Cb+1]=Yc.y,fc[Cb+2]=Yc.a,Cb+=3;else for(Ra=0;4>Ra;Ra++)fc[Cb]=Qa.x,fc[Cb+1]=Qa.y,fc[Cb+2]=Qa.a,Cb+=
3;m.bindBuffer(m.ARRAY_BUFFER,ha.Ed);m.bufferData(m.ARRAY_BUFFER,fc,za)}if(Jh&&Qf&&Oa){L=0;for(ma=La.length;L<ma;L++)if(Ka=La[L],qb=Qf[Ka],n!==qb)for(Ra=0;3>Ra;Ra++)zd=qb[Ra],Sd[Oc]=zd.x,Sd[Oc+1]=zd.y,Oc+=2;L=0;for(ma=Ma.length;L<ma;L++)if(Ka=Ma[L],qb=Qf[Ka],n!==qb)for(Ra=0;4>Ra;Ra++)zd=qb[Ra],Sd[Oc]=zd.x,Sd[Oc+1]=zd.y,Oc+=2;0<Oc&&(m.bindBuffer(m.ARRAY_BUFFER,ha.gl),m.bufferData(m.ARRAY_BUFFER,Sd,za))}if(Jh&&Rf&&Oa){L=0;for(ma=La.length;L<ma;L++)if(Ka=La[L],tc=Rf[Ka],n!==tc)for(Ra=0;3>Ra;Ra++)Ad=
tc[Ra],Td[Pc]=Ad.x,Td[Pc+1]=Ad.y,Pc+=2;L=0;for(ma=Ma.length;L<ma;L++)if(Ka=Ma[L],tc=Rf[Ka],n!==tc)for(Ra=0;4>Ra;Ra++)Ad=tc[Ra],Td[Pc]=Ad.x,Td[Pc+1]=Ad.y,Pc+=2;0<Pc&&(m.bindBuffer(m.ARRAY_BUFFER,ha.fl),m.bufferData(m.ARRAY_BUFFER,Td,za))}if(Gj){L=0;for(ma=La.length;L<ma;L++)Fc[ec]=hb,Fc[ec+1]=hb+1,Fc[ec+2]=hb+2,ec+=3,Vb[Kb]=hb,Vb[Kb+1]=hb+1,Vb[Kb+2]=hb,Vb[Kb+3]=hb+2,Vb[Kb+4]=hb+1,Vb[Kb+5]=hb+2,Kb+=6,hb+=3;L=0;for(ma=Ma.length;L<ma;L++)Fc[ec]=hb,Fc[ec+1]=hb+1,Fc[ec+2]=hb+3,Fc[ec+3]=hb+1,Fc[ec+4]=hb+
2,Fc[ec+5]=hb+3,ec+=6,Vb[Kb]=hb,Vb[Kb+1]=hb+1,Vb[Kb+2]=hb,Vb[Kb+3]=hb+3,Vb[Kb+4]=hb+1,Vb[Kb+5]=hb+2,Vb[Kb+6]=hb+2,Vb[Kb+7]=hb+3,Kb+=8,hb+=4;m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,ha.Vk);m.bufferData(m.ELEMENT_ARRAY_BUFFER,Fc,za);m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,ha.Zk);m.bufferData(m.ELEMENT_ARRAY_BUFFER,Vb,za)}if(Pf){Ra=0;for(Hh=Pf.length;Ra<Hh;Ra++)if(A=Pf[Ra],A.Ds.ha){D=0;if(1===A.size)if(n===A.Ka||"vertices"===A.Ka){L=0;for(ma=La.length;L<ma;L++)ca=Db[La[L]],A.b[D]=A.value[ca.q],A.b[D+1]=A.value[ca.c],
A.b[D+2]=A.value[ca.r],D+=3;L=0;for(ma=Ma.length;L<ma;L++)ca=Db[Ma[L]],A.b[D]=A.value[ca.q],A.b[D+1]=A.value[ca.c],A.b[D+2]=A.value[ca.r],A.b[D+3]=A.value[ca.P],D+=4}else{if("faces"===A.Ka){L=0;for(ma=La.length;L<ma;L++)Ta=A.value[La[L]],A.b[D]=Ta,A.b[D+1]=Ta,A.b[D+2]=Ta,D+=3;L=0;for(ma=Ma.length;L<ma;L++)Ta=A.value[Ma[L]],A.b[D]=Ta,A.b[D+1]=Ta,A.b[D+2]=Ta,A.b[D+3]=Ta,D+=4}}else if(2===A.size)if(n===A.Ka||"vertices"===A.Ka){L=0;for(ma=La.length;L<ma;L++)ca=Db[La[L]],ea=A.value[ca.q],fa=A.value[ca.c],
ga=A.value[ca.r],A.b[D]=ea.x,A.b[D+1]=ea.y,A.b[D+2]=fa.x,A.b[D+3]=fa.y,A.b[D+4]=ga.x,A.b[D+5]=ga.y,D+=6;L=0;for(ma=Ma.length;L<ma;L++)ca=Db[Ma[L]],ea=A.value[ca.q],fa=A.value[ca.c],ga=A.value[ca.r],Ha=A.value[ca.P],A.b[D]=ea.x,A.b[D+1]=ea.y,A.b[D+2]=fa.x,A.b[D+3]=fa.y,A.b[D+4]=ga.x,A.b[D+5]=ga.y,A.b[D+6]=Ha.x,A.b[D+7]=Ha.y,D+=8}else{if("faces"===A.Ka){L=0;for(ma=La.length;L<ma;L++)ga=fa=ea=Ta=A.value[La[L]],A.b[D]=ea.x,A.b[D+1]=ea.y,A.b[D+2]=fa.x,A.b[D+3]=fa.y,A.b[D+4]=ga.x,A.b[D+5]=ga.y,D+=6;L=0;
for(ma=Ma.length;L<ma;L++)Ha=ga=fa=ea=Ta=A.value[Ma[L]],A.b[D]=ea.x,A.b[D+1]=ea.y,A.b[D+2]=fa.x,A.b[D+3]=fa.y,A.b[D+4]=ga.x,A.b[D+5]=ga.y,A.b[D+6]=Ha.x,A.b[D+7]=Ha.y,D+=8}}else if(3===A.size){var qa;qa="c"===A.type?["r","g","b"]:["x","y","z"];if(n===A.Ka||"vertices"===A.Ka){L=0;for(ma=La.length;L<ma;L++)ca=Db[La[L]],ea=A.value[ca.q],fa=A.value[ca.c],ga=A.value[ca.r],A.b[D]=ea[qa[0]],A.b[D+1]=ea[qa[1]],A.b[D+2]=ea[qa[2]],A.b[D+3]=fa[qa[0]],A.b[D+4]=fa[qa[1]],A.b[D+5]=fa[qa[2]],A.b[D+6]=ga[qa[0]],A.b[D+
7]=ga[qa[1]],A.b[D+8]=ga[qa[2]],D+=9;L=0;for(ma=Ma.length;L<ma;L++)ca=Db[Ma[L]],ea=A.value[ca.q],fa=A.value[ca.c],ga=A.value[ca.r],Ha=A.value[ca.P],A.b[D]=ea[qa[0]],A.b[D+1]=ea[qa[1]],A.b[D+2]=ea[qa[2]],A.b[D+3]=fa[qa[0]],A.b[D+4]=fa[qa[1]],A.b[D+5]=fa[qa[2]],A.b[D+6]=ga[qa[0]],A.b[D+7]=ga[qa[1]],A.b[D+8]=ga[qa[2]],A.b[D+9]=Ha[qa[0]],A.b[D+10]=Ha[qa[1]],A.b[D+11]=Ha[qa[2]],D+=12}else if("faces"===A.Ka){L=0;for(ma=La.length;L<ma;L++)ga=fa=ea=Ta=A.value[La[L]],A.b[D]=ea[qa[0]],A.b[D+1]=ea[qa[1]],A.b[D+
2]=ea[qa[2]],A.b[D+3]=fa[qa[0]],A.b[D+4]=fa[qa[1]],A.b[D+5]=fa[qa[2]],A.b[D+6]=ga[qa[0]],A.b[D+7]=ga[qa[1]],A.b[D+8]=ga[qa[2]],D+=9;L=0;for(ma=Ma.length;L<ma;L++)Ha=ga=fa=ea=Ta=A.value[Ma[L]],A.b[D]=ea[qa[0]],A.b[D+1]=ea[qa[1]],A.b[D+2]=ea[qa[2]],A.b[D+3]=fa[qa[0]],A.b[D+4]=fa[qa[1]],A.b[D+5]=fa[qa[2]],A.b[D+6]=ga[qa[0]],A.b[D+7]=ga[qa[1]],A.b[D+8]=ga[qa[2]],A.b[D+9]=Ha[qa[0]],A.b[D+10]=Ha[qa[1]],A.b[D+11]=Ha[qa[2]],D+=12}else if("faceVertices"===A.Ka){L=0;for(ma=La.length;L<ma;L++)Ta=A.value[La[L]],
ea=Ta[0],fa=Ta[1],ga=Ta[2],A.b[D]=ea[qa[0]],A.b[D+1]=ea[qa[1]],A.b[D+2]=ea[qa[2]],A.b[D+3]=fa[qa[0]],A.b[D+4]=fa[qa[1]],A.b[D+5]=fa[qa[2]],A.b[D+6]=ga[qa[0]],A.b[D+7]=ga[qa[1]],A.b[D+8]=ga[qa[2]],D+=9;L=0;for(ma=Ma.length;L<ma;L++)Ta=A.value[Ma[L]],ea=Ta[0],fa=Ta[1],ga=Ta[2],Ha=Ta[3],A.b[D]=ea[qa[0]],A.b[D+1]=ea[qa[1]],A.b[D+2]=ea[qa[2]],A.b[D+3]=fa[qa[0]],A.b[D+4]=fa[qa[1]],A.b[D+5]=fa[qa[2]],A.b[D+6]=ga[qa[0]],A.b[D+7]=ga[qa[1]],A.b[D+8]=ga[qa[2]],A.b[D+9]=Ha[qa[0]],A.b[D+10]=Ha[qa[1]],A.b[D+11]=
Ha[qa[2]],D+=12}}else if(4===A.size)if(n===A.Ka||"vertices"===A.Ka){L=0;for(ma=La.length;L<ma;L++)ca=Db[La[L]],ea=A.value[ca.q],fa=A.value[ca.c],ga=A.value[ca.r],A.b[D]=ea.x,A.b[D+1]=ea.y,A.b[D+2]=ea.a,A.b[D+3]=ea.j,A.b[D+4]=fa.x,A.b[D+5]=fa.y,A.b[D+6]=fa.a,A.b[D+7]=fa.j,A.b[D+8]=ga.x,A.b[D+9]=ga.y,A.b[D+10]=ga.a,A.b[D+11]=ga.j,D+=12;L=0;for(ma=Ma.length;L<ma;L++)ca=Db[Ma[L]],ea=A.value[ca.q],fa=A.value[ca.c],ga=A.value[ca.r],Ha=A.value[ca.P],A.b[D]=ea.x,A.b[D+1]=ea.y,A.b[D+2]=ea.a,A.b[D+3]=ea.j,
A.b[D+4]=fa.x,A.b[D+5]=fa.y,A.b[D+6]=fa.a,A.b[D+7]=fa.j,A.b[D+8]=ga.x,A.b[D+9]=ga.y,A.b[D+10]=ga.a,A.b[D+11]=ga.j,A.b[D+12]=Ha.x,A.b[D+13]=Ha.y,A.b[D+14]=Ha.a,A.b[D+15]=Ha.j,D+=16}else if("faces"===A.Ka){L=0;for(ma=La.length;L<ma;L++)ga=fa=ea=Ta=A.value[La[L]],A.b[D]=ea.x,A.b[D+1]=ea.y,A.b[D+2]=ea.a,A.b[D+3]=ea.j,A.b[D+4]=fa.x,A.b[D+5]=fa.y,A.b[D+6]=fa.a,A.b[D+7]=fa.j,A.b[D+8]=ga.x,A.b[D+9]=ga.y,A.b[D+10]=ga.a,A.b[D+11]=ga.j,D+=12;L=0;for(ma=Ma.length;L<ma;L++)Ha=ga=fa=ea=Ta=A.value[Ma[L]],A.b[D]=
ea.x,A.b[D+1]=ea.y,A.b[D+2]=ea.a,A.b[D+3]=ea.j,A.b[D+4]=fa.x,A.b[D+5]=fa.y,A.b[D+6]=fa.a,A.b[D+7]=fa.j,A.b[D+8]=ga.x,A.b[D+9]=ga.y,A.b[D+10]=ga.a,A.b[D+11]=ga.j,A.b[D+12]=Ha.x,A.b[D+13]=Ha.y,A.b[D+14]=Ha.a,A.b[D+15]=Ha.j,D+=16}else if("faceVertices"===A.Ka){L=0;for(ma=La.length;L<ma;L++)Ta=A.value[La[L]],ea=Ta[0],fa=Ta[1],ga=Ta[2],A.b[D]=ea.x,A.b[D+1]=ea.y,A.b[D+2]=ea.a,A.b[D+3]=ea.j,A.b[D+4]=fa.x,A.b[D+5]=fa.y,A.b[D+6]=fa.a,A.b[D+7]=fa.j,A.b[D+8]=ga.x,A.b[D+9]=ga.y,A.b[D+10]=ga.a,A.b[D+11]=ga.j,
D+=12;L=0;for(ma=Ma.length;L<ma;L++)Ta=A.value[Ma[L]],ea=Ta[0],fa=Ta[1],ga=Ta[2],Ha=Ta[3],A.b[D]=ea.x,A.b[D+1]=ea.y,A.b[D+2]=ea.a,A.b[D+3]=ea.j,A.b[D+4]=fa.x,A.b[D+5]=fa.y,A.b[D+6]=fa.a,A.b[D+7]=fa.j,A.b[D+8]=ga.x,A.b[D+9]=ga.y,A.b[D+10]=ga.a,A.b[D+11]=ga.j,A.b[D+12]=Ha.x,A.b[D+13]=Ha.y,A.b[D+14]=Ha.a,A.b[D+15]=Ha.j,D+=16}m.bindBuffer(m.ARRAY_BUFFER,A.buffer);m.bufferData(m.ARRAY_BUFFER,A.b,za)}}Fa&&(delete ha.eo,delete ha.Xd,delete ha.Hi,delete ha.lo,delete ha.no,delete ha.mo,delete ha.co,delete ha.Zd,
delete ha.fo,delete ha.jo,delete ha.ko)}}Z.xa=w;Z.um=w;Z.kf=w;Z.If=w;Z.lc=w;Z.La=w;Z.He=w;Z.Io=w;ia.attributes&&F(ia)}else if(ba instanceof THREE.Bd){ia=e(ba,Z);rc=ia.attributes&&y(ia);if(Z.xa||Z.La||Z.lc||rc){var gc=Z,Ke=m.DYNAMIC_DRAW,Ud=n,Vd=n,Wd=n,Le=n,Ua=n,Me=n,Ne=n,Oe=n,Kh=n,yb=n,Bd=n,Ya=n,Nb=n,Lh=gc.e,Mh=gc.$a,Nh=gc.tf,Lj=Lh.length,Mj=Mh.length,Nj=Nh.length,Pe=gc.Zd,Qe=gc.Xd,Re=gc.Hi,Oj=gc.La,Pj=gc.lc,Sf=gc.Db;if(gc.xa){for(Ud=0;Ud<Lj;Ud++)Le=Lh[Ud],Ua=3*Ud,Pe[Ua]=Le.x,Pe[Ua+1]=Le.y,Pe[Ua+
2]=Le.a;m.bindBuffer(m.ARRAY_BUFFER,gc.Sa);m.bufferData(m.ARRAY_BUFFER,Pe,Ke)}if(Oj){for(Vd=0;Vd<Mj;Vd++)Me=Mh[Vd],Ua=3*Vd,Qe[Ua]=Me.g,Qe[Ua+1]=Me.f,Qe[Ua+2]=Me.c;m.bindBuffer(m.ARRAY_BUFFER,gc.Cb);m.bufferData(m.ARRAY_BUFFER,Qe,Ke)}if(Pj){for(Wd=0;Wd<Nj;Wd++)Ne=Nh[Wd],Ua=3*Wd,Re[Ua]=Ne.x,Re[Ua+1]=Ne.y,Re[Ua+2]=Ne.a;m.bindBuffer(m.ARRAY_BUFFER,gc.Ed);m.bufferData(m.ARRAY_BUFFER,Re,Ke)}if(Sf){Oe=0;for(Kh=Sf.length;Oe<Kh;Oe++)if(Ya=Sf[Oe],Ya.ha&&(n===Ya.Ka||"vertices"===Ya.Ka)){Ua=0;Bd=Ya.value.length;
if(1===Ya.size)for(yb=0;yb<Bd;yb++)Ya.b[yb]=Ya.value[yb];else if(2===Ya.size)for(yb=0;yb<Bd;yb++)Nb=Ya.value[yb],Ya.b[Ua]=Nb.x,Ya.b[Ua+1]=Nb.y,Ua+=2;else if(3===Ya.size)if("c"===Ya.type)for(yb=0;yb<Bd;yb++)Nb=Ya.value[yb],Ya.b[Ua]=Nb.g,Ya.b[Ua+1]=Nb.f,Ya.b[Ua+2]=Nb.c,Ua+=3;else for(yb=0;yb<Bd;yb++)Nb=Ya.value[yb],Ya.b[Ua]=Nb.x,Ya.b[Ua+1]=Nb.y,Ya.b[Ua+2]=Nb.a,Ua+=3;else if(4===Ya.size)for(yb=0;yb<Bd;yb++)Nb=Ya.value[yb],Ya.b[Ua]=Nb.x,Ya.b[Ua+1]=Nb.y,Ya.b[Ua+2]=Nb.a,Ya.b[Ua+3]=Nb.j,Ua+=4;m.bindBuffer(m.ARRAY_BUFFER,
Ya.buffer);m.bufferData(m.ARRAY_BUFFER,Ya.b,Ke)}}}Z.xa=w;Z.La=w;Z.lc=w;ia.attributes&&F(ia)}else if(ba instanceof THREE.Ja){ia=e(ba,Z);rc=ia.attributes&&y(ia);if(Z.xa||Z.La||Z.Dj||rc){var hc=Z,Se=m.DYNAMIC_DRAW,Xd=n,Yd=n,Zd=n,Te=n,eb=n,Ue=n,Oh=hc.e,Ph=hc.$a,Qh=hc.Dp,Qj=Oh.length,Rj=Ph.length,Sj=Qh.length,Ve=hc.Zd,We=hc.Xd,Rh=hc.As,Tj=hc.La,Uj=hc.Dj,Tf=hc.Db,Xe=n,Sh=n,zb=n,Cd=n,Ob=n,Za=n;if(hc.xa){for(Xd=0;Xd<Qj;Xd++)Te=Oh[Xd],eb=3*Xd,Ve[eb]=Te.x,Ve[eb+1]=Te.y,Ve[eb+2]=Te.a;m.bindBuffer(m.ARRAY_BUFFER,
hc.Sa);m.bufferData(m.ARRAY_BUFFER,Ve,Se)}if(Tj){for(Yd=0;Yd<Rj;Yd++)Ue=Ph[Yd],eb=3*Yd,We[eb]=Ue.g,We[eb+1]=Ue.f,We[eb+2]=Ue.c;m.bindBuffer(m.ARRAY_BUFFER,hc.Cb);m.bufferData(m.ARRAY_BUFFER,We,Se)}if(Uj){for(Zd=0;Zd<Sj;Zd++)Rh[Zd]=Qh[Zd];m.bindBuffer(m.ARRAY_BUFFER,hc.al);m.bufferData(m.ARRAY_BUFFER,Rh,Se)}if(Tf){Xe=0;for(Sh=Tf.length;Xe<Sh;Xe++)if(Za=Tf[Xe],Za.ha&&(n===Za.Ka||"vertices"===Za.Ka)){eb=0;Cd=Za.value.length;if(1===Za.size)for(zb=0;zb<Cd;zb++)Za.b[zb]=Za.value[zb];else if(2===Za.size)for(zb=
0;zb<Cd;zb++)Ob=Za.value[zb],Za.b[eb]=Ob.x,Za.b[eb+1]=Ob.y,eb+=2;else if(3===Za.size)if("c"===Za.type)for(zb=0;zb<Cd;zb++)Ob=Za.value[zb],Za.b[eb]=Ob.g,Za.b[eb+1]=Ob.f,Za.b[eb+2]=Ob.c,eb+=3;else for(zb=0;zb<Cd;zb++)Ob=Za.value[zb],Za.b[eb]=Ob.x,Za.b[eb+1]=Ob.y,Za.b[eb+2]=Ob.a,eb+=3;else if(4===Za.size)for(zb=0;zb<Cd;zb++)Ob=Za.value[zb],Za.b[eb]=Ob.x,Za.b[eb+1]=Ob.y,Za.b[eb+2]=Ob.a,Za.b[eb+3]=Ob.j,eb+=4;m.bindBuffer(m.ARRAY_BUFFER,Za.buffer);m.bufferData(m.ARRAY_BUFFER,Za.b,Se)}}}Z.xa=w;Z.La=w;Z.Dj=
w;ia.attributes&&F(ia)}else if(ba instanceof THREE.Qb)if(Z instanceof THREE.cd)(Z.xa||Z.La)&&i(Z,m.DYNAMIC_DRAW,!Z.jj),Z.xa=w,Z.La=w;else{ia=e(ba,Z);rc=ia.attributes&&y(ia);if(Z.xa||Z.La||ba.Bf||rc){var Gc=Z,Uf=m.DYNAMIC_DRAW,$d=ba,Pb=n,Hc=n,Ic=n,ta=n,Jc=n,bd=n,Ye=Gc.e,Vf=Ye.length,Wf=Gc.$a,Th=Wf.length,md=Gc.Zd,nd=Gc.Xd,Qc=Gc.Fs,Uh=Gc.xa,Vh=Gc.La,Rc=Gc.Db,nc=n,Dd=n,Ea=n,oc=n,Wa=n,sa=n;if($d.Bf){Ba.copy(Aa);Ba.sf($d.A);for(Pb=0;Pb<Vf;Pb++)Ic=Ye[Pb],Lb.copy(Ic),Ba.X(Lb),Qc[Pb]=[Lb.a,Pb];Qc.sort(p);
for(Pb=0;Pb<Vf;Pb++)Ic=Ye[Qc[Pb][1]],ta=3*Pb,md[ta]=Ic.x,md[ta+1]=Ic.y,md[ta+2]=Ic.a;for(Hc=0;Hc<Th;Hc++)ta=3*Hc,bd=Wf[Qc[Hc][1]],nd[ta]=bd.g,nd[ta+1]=bd.f,nd[ta+2]=bd.c;if(Rc){nc=0;for(Dd=Rc.length;nc<Dd;nc++)if(sa=Rc[nc],n===sa.Ka||"vertices"===sa.Ka)if(ta=0,oc=sa.value.length,1===sa.size)for(Ea=0;Ea<oc;Ea++)Jc=Qc[Ea][1],sa.b[Ea]=sa.value[Jc];else if(2===sa.size)for(Ea=0;Ea<oc;Ea++)Jc=Qc[Ea][1],Wa=sa.value[Jc],sa.b[ta]=Wa.x,sa.b[ta+1]=Wa.y,ta+=2;else if(3===sa.size)if("c"===sa.type)for(Ea=0;Ea<
oc;Ea++)Jc=Qc[Ea][1],Wa=sa.value[Jc],sa.b[ta]=Wa.g,sa.b[ta+1]=Wa.f,sa.b[ta+2]=Wa.c,ta+=3;else for(Ea=0;Ea<oc;Ea++)Jc=Qc[Ea][1],Wa=sa.value[Jc],sa.b[ta]=Wa.x,sa.b[ta+1]=Wa.y,sa.b[ta+2]=Wa.a,ta+=3;else if(4===sa.size)for(Ea=0;Ea<oc;Ea++)Jc=Qc[Ea][1],Wa=sa.value[Jc],sa.b[ta]=Wa.x,sa.b[ta+1]=Wa.y,sa.b[ta+2]=Wa.a,sa.b[ta+3]=Wa.j,ta+=4}}else{if(Uh)for(Pb=0;Pb<Vf;Pb++)Ic=Ye[Pb],ta=3*Pb,md[ta]=Ic.x,md[ta+1]=Ic.y,md[ta+2]=Ic.a;if(Vh)for(Hc=0;Hc<Th;Hc++)bd=Wf[Hc],ta=3*Hc,nd[ta]=bd.g,nd[ta+1]=bd.f,nd[ta+2]=
bd.c;if(Rc){nc=0;for(Dd=Rc.length;nc<Dd;nc++)if(sa=Rc[nc],sa.ha&&(n===sa.Ka||"vertices"===sa.Ka))if(oc=sa.value.length,ta=0,1===sa.size)for(Ea=0;Ea<oc;Ea++)sa.b[Ea]=sa.value[Ea];else if(2===sa.size)for(Ea=0;Ea<oc;Ea++)Wa=sa.value[Ea],sa.b[ta]=Wa.x,sa.b[ta+1]=Wa.y,ta+=2;else if(3===sa.size)if("c"===sa.type)for(Ea=0;Ea<oc;Ea++)Wa=sa.value[Ea],sa.b[ta]=Wa.g,sa.b[ta+1]=Wa.f,sa.b[ta+2]=Wa.c,ta+=3;else for(Ea=0;Ea<oc;Ea++)Wa=sa.value[Ea],sa.b[ta]=Wa.x,sa.b[ta+1]=Wa.y,sa.b[ta+2]=Wa.a,ta+=3;else if(4===sa.size)for(Ea=
0;Ea<oc;Ea++)Wa=sa.value[Ea],sa.b[ta]=Wa.x,sa.b[ta+1]=Wa.y,sa.b[ta+2]=Wa.a,sa.b[ta+3]=Wa.j,ta+=4}}if(Uh||$d.Bf)m.bindBuffer(m.ARRAY_BUFFER,Gc.Sa),m.bufferData(m.ARRAY_BUFFER,md,Uf);if(Vh||$d.Bf)m.bindBuffer(m.ARRAY_BUFFER,Gc.Cb),m.bufferData(m.ARRAY_BUFFER,nd,Uf);if(Rc){nc=0;for(Dd=Rc.length;nc<Dd;nc++)if(sa=Rc[nc],sa.ha||$d.Bf)m.bindBuffer(m.ARRAY_BUFFER,sa.buffer),m.bufferData(m.ARRAY_BUFFER,sa.b,Uf)}}Z.xa=w;Z.La=w;ia.attributes&&F(ia)}}};this.Eu=function(a,b,c,d){var e,f,g,h,i,j,k,l,H;a instanceof
THREE.Se?H="depth":a instanceof THREE.Te?H="normal":a instanceof THREE.Qa?H="basic":a instanceof THREE.ac?H="lambert":a instanceof THREE.bc?H="phong":a instanceof THREE.Pb?H="basic":a instanceof THREE.Re?H="dashed":a instanceof THREE.Ue&&(H="particle_basic");if(H){var p=THREE.Jk[H];a.Q=THREE.wc.clone(p.Q);a.N=p.N;a.L=p.L}var q,r,s;e=q=r=s=p=0;for(f=b.length;e<f;e++)g=b[e],g.Nj||(g instanceof THREE.Mc&&q++,g instanceof THREE.Rf&&r++,g instanceof THREE.Sf&&s++,g instanceof THREE.vk&&p++);e=q;f=r;g=
s;h=p;p=q=0;for(s=b.length;p<s;p++)r=b[p],r.zc&&(r instanceof THREE.Sf&&q++,r instanceof THREE.Mc&&!r.Tm&&q++);l=q;tc&&d&&d.Qd?k=1024:(b=m.getParameter(m.MAX_VERTEX_UNIFORM_VECTORS),b=Math.floor((b-20)/4),n!==d&&d instanceof THREE.ec&&(b=Math.min(d.Ta.length,b),b<d.Ta.length&&console.warn("WebGLRenderer: too many bones - "+d.Ta.length+", this GPU supports just "+b+" (try OpenGL instead of ANGLE)")),k=b);a:{r=a.L;s=a.N;p=a.Q;b=a.attributes;q=a.Fl;var c={map:!!a.map,oa:!!a.oa,Ma:!!a.Ma,Fb:!!a.Fb,eb:!!a.eb,
Ia:!!a.Ia,m:a.m,z:c,cr:a.z,ju:c instanceof THREE.Mf,Mb:a.Mb,Ca:a.Ca,jv:k,Qd:tc&&d&&d.Qd,dg:d&&d.dg,cg:d&&d.cg,F:a.F,la:a.la,Ih:this.Ih,Fj:this.Fj,Jp:e,Lp:f,Np:g,Kp:h,Mp:l,Xh:this.Xh&&d.Gg,ak:this.ak,$j:this.$j,Zj:this.Zj,Hd:a.Hd,Jh:a.Jh,Eg:a.Eg,bd:a.bd,le:a.oc===THREE.sc,Rl:a.oc===THREE.Lf},ua,Aa,v,d=[];H?d.push(H):(d.push(r),d.push(s));for(Aa in q)d.push(Aa),d.push(q[Aa]);for(ua in c)d.push(ua),d.push(c[ua]);H=d.join();ua=0;for(Aa=T.length;ua<Aa;ua++)if(d=T[ua],d.code===H){d.bn++;j=d.vb;break a}ua=
[];for(v in q)Aa=q[v],w!==Aa&&(Aa="#define "+v+" "+Aa,ua.push(Aa));Aa=ua.join("\n");v=m.createProgram();ua=["precision "+X+" float;",Aa,Ub?"#define VERTEX_TEXTURES":"",Q.hd?"#define GAMMA_INPUT":"",Q.dp?"#define GAMMA_OUTPUT":"",Q.Zp?"#define PHYSICALLY_BASED_SHADING":"","#define MAX_DIR_LIGHTS "+c.Jp,"#define MAX_POINT_LIGHTS "+c.Lp,"#define MAX_SPOT_LIGHTS "+c.Np,"#define MAX_HEMI_LIGHTS "+c.Kp,"#define MAX_SHADOWS "+c.Mp,"#define MAX_BONES "+c.jv,c.map?"#define USE_MAP":"",c.oa?"#define USE_ENVMAP":
"",c.Ma?"#define USE_LIGHTMAP":"",c.Fb?"#define USE_BUMPMAP":"",c.eb?"#define USE_NORMALMAP":"",c.Ia?"#define USE_SPECULARMAP":"",c.m?"#define USE_COLOR":"",c.Ca?"#define USE_SKINNING":"",c.Qd?"#define BONE_TEXTURE":"",c.dg?"#define N_BONE_PIXEL_X "+c.dg.toFixed(1):"",c.cg?"#define N_BONE_PIXEL_Y "+c.cg.toFixed(1):"",c.F?"#define USE_MORPHTARGETS":"",c.la?"#define USE_MORPHNORMALS":"",c.Eg?"#define PHONG_PER_PIXEL":"",c.bd?"#define WRAP_AROUND":"",c.le?"#define DOUBLE_SIDED":"",c.Rl?"#define FLIP_SIDED":
"",c.Xh?"#define USE_SHADOWMAP":"",c.ak?"#define SHADOWMAP_SOFT":"",c.$j?"#define SHADOWMAP_DEBUG":"",c.Zj?"#define SHADOWMAP_CASCADE":"",c.Mb?"#define USE_SIZEATTENUATION":"","uniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 cameraPosition;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\nattribute vec2 uv2;\n#ifdef USE_COLOR\nattribute vec3 color;\n#endif\n#ifdef USE_MORPHTARGETS\nattribute vec3 morphTarget0;\nattribute vec3 morphTarget1;\nattribute vec3 morphTarget2;\nattribute vec3 morphTarget3;\n#ifdef USE_MORPHNORMALS\nattribute vec3 morphNormal0;\nattribute vec3 morphNormal1;\nattribute vec3 morphNormal2;\nattribute vec3 morphNormal3;\n#else\nattribute vec3 morphTarget4;\nattribute vec3 morphTarget5;\nattribute vec3 morphTarget6;\nattribute vec3 morphTarget7;\n#endif\n#endif\n#ifdef USE_SKINNING\nattribute vec4 skinIndex;\nattribute vec4 skinWeight;\n#endif\n"].join("\n");
Aa=["precision "+X+" float;",c.Fb||c.eb?"#extension GL_OES_standard_derivatives : enable":"",Aa,"#define MAX_DIR_LIGHTS "+c.Jp,"#define MAX_POINT_LIGHTS "+c.Lp,"#define MAX_SPOT_LIGHTS "+c.Np,"#define MAX_HEMI_LIGHTS "+c.Kp,"#define MAX_SHADOWS "+c.Mp,c.Hd?"#define ALPHATEST "+c.Hd:"",Q.hd?"#define GAMMA_INPUT":"",Q.dp?"#define GAMMA_OUTPUT":"",Q.Zp?"#define PHYSICALLY_BASED_SHADING":"",c.cr&&c.z?"#define USE_FOG":"",c.cr&&c.ju?"#define FOG_EXP2":"",c.map?"#define USE_MAP":"",c.oa?"#define USE_ENVMAP":
"",c.Ma?"#define USE_LIGHTMAP":"",c.Fb?"#define USE_BUMPMAP":"",c.eb?"#define USE_NORMALMAP":"",c.Ia?"#define USE_SPECULARMAP":"",c.m?"#define USE_COLOR":"",c.Jh?"#define METAL":"",c.Eg?"#define PHONG_PER_PIXEL":"",c.bd?"#define WRAP_AROUND":"",c.le?"#define DOUBLE_SIDED":"",c.Rl?"#define FLIP_SIDED":"",c.Xh?"#define USE_SHADOWMAP":"",c.ak?"#define SHADOWMAP_SOFT":"",c.$j?"#define SHADOWMAP_DEBUG":"",c.Zj?"#define SHADOWMAP_CASCADE":"","uniform mat4 viewMatrix;\nuniform vec3 cameraPosition;\n"].join("\n");
Aa=R("fragment",Aa+r);ua=R("vertex",ua+s);m.attachShader(v,ua);m.attachShader(v,Aa);m.linkProgram(v);m.getProgramParameter(v,m.LINK_STATUS)||console.error("Could not initialise shader\nVALIDATE_STATUS: "+m.getProgramParameter(v,m.VALIDATE_STATUS)+", gl error ["+m.getError()+"]");m.deleteShader(Aa);m.deleteShader(ua);v.Q={};v.attributes={};var Ba;ua="viewMatrix modelViewMatrix projectionMatrix normalMatrix modelMatrix cameraPosition morphTargetInfluences".split(" ");c.Qd?ua.push("boneTexture"):ua.push("boneGlobalMatrices");
for(Ba in p)ua.push(Ba);Ba=ua;ua=0;for(Aa=Ba.length;ua<Aa;ua++)d=Ba[ua],v.Q[d]=m.getUniformLocation(v,d);ua="position normal uv uv2 tangent color skinIndex skinWeight lineDistance".split(" ");for(Ba=0;Ba<c.Ih;Ba++)ua.push("morphTarget"+Ba);for(Ba=0;Ba<c.Fj;Ba++)ua.push("morphNormal"+Ba);for(j in b)ua.push(j);j=ua;Ba=0;for(b=j.length;Ba<b;Ba++)ua=j[Ba],v.attributes[ua]=m.getAttribLocation(v,ua);v.id=na++;T.push({vb:v,code:H,bn:1});Q.info.memory.dq=T.length;j=v}a.vb=j;Ba=a.vb.attributes;if(a.F){a.Kh=
0;b="morphTarget";for(j=0;j<this.Ih;j++)v=b+j,0<=Ba[v]&&a.Kh++}if(a.la){a.Sp=0;b="morphNormal";for(j=0;j<this.Fj;j++)v=b+j,0<=Ba[v]&&a.Sp++}a.$q=[];for(i in a.Q)a.$q.push([a.Q[i],i])};this.bE=function(a,b){a===THREE.yr?m.disable(m.CULL_FACE):(b===THREE.Fr?m.frontFace(m.CW):m.frontFace(m.CCW),a===THREE.xr?m.cullFace(m.BACK):a===THREE.ri?m.cullFace(m.FRONT):m.cullFace(m.FRONT_AND_BACK),m.enable(m.CULL_FACE))};this.Om=function(a){var b=a.oc===THREE.sc,a=a.oc===THREE.Lf;ha!==b&&(b?m.disable(m.CULL_FACE):
m.enable(m.CULL_FACE),ha=b);Fa!==a&&(a?m.frontFace(m.CW):m.frontFace(m.CCW),Fa=a)};this.yf=function(a){qb!==a&&(a?m.enable(m.DEPTH_TEST):m.disable(m.DEPTH_TEST),qb=a)};this.Sh=function(a){ib!==a&&(m.depthMask(a),ib=a)};this.Ig=function(a,b,c,d){a!==Oa&&(a===THREE.En?m.disable(m.BLEND):a===THREE.hn?(m.enable(m.BLEND),m.blendEquation(m.FUNC_ADD),m.blendFunc(m.SRC_ALPHA,m.ONE)):a===THREE.Xn?(m.enable(m.BLEND),m.blendEquation(m.FUNC_ADD),m.blendFunc(m.ZERO,m.ONE_MINUS_SRC_COLOR)):a===THREE.Pr?(m.enable(m.BLEND),
m.blendEquation(m.FUNC_ADD),m.blendFunc(m.ZERO,m.SRC_COLOR)):a===THREE.qn?m.enable(m.BLEND):(m.enable(m.BLEND),m.blendEquationSeparate(m.FUNC_ADD,m.FUNC_ADD),m.blendFuncSeparate(m.SRC_ALPHA,m.ONE_MINUS_SRC_ALPHA,m.ONE,m.ONE_MINUS_SRC_ALPHA)),Oa=a);if(a===THREE.qn){if(b!==xa&&(m.blendEquation(W(b)),xa=b),c!==ob||d!==pb)m.blendFunc(W(c),W(d)),ob=c,pb=d}else pb=ob=xa=u};this.Th=function(a,b){if(a.ha){a.Ze||(a.Ze=t,a.hc=m.createTexture(),Q.info.memory.Xb++);m.activeTexture(m.TEXTURE0+b);m.bindTexture(m.TEXTURE_2D,
a.hc);m.pixelStorei(m.UNPACK_FLIP_Y_WEBGL,a.mf);m.pixelStorei(m.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.Dm);m.pixelStorei(m.UNPACK_ALIGNMENT,a.an);var c=a.J,d=0===(c.width&c.width-1)&&0===(c.height&c.height-1),e=W(a.ka),f=W(a.type);K(m.TEXTURE_2D,a,d);var g=a.Lb;if(a instanceof THREE.Oe)if(0<g.length&&d){for(var h=0,i=g.length;h<i;h++)c=g[h],m.texImage2D(m.TEXTURE_2D,h,e,c.width,c.height,0,e,f,c.data);a.lb=w}else m.texImage2D(m.TEXTURE_2D,0,e,c.width,c.height,0,e,f,c.data);else if(a instanceof THREE.Me){h=
0;for(i=g.length;h<i;h++)c=g[h],m.compressedTexImage2D(m.TEXTURE_2D,h,e,c.width,c.height,0,c.data)}else if(0<g.length&&d){h=0;for(i=g.length;h<i;h++)c=g[h],m.texImage2D(m.TEXTURE_2D,h,e,e,f,c);a.lb=w}else m.texImage2D(m.TEXTURE_2D,0,e,e,f,a.J);a.lb&&d&&m.generateMipmap(m.TEXTURE_2D);a.ha=w;a.Mj&&a.Mj()}else m.activeTexture(m.TEXTURE0+b),m.bindTexture(m.TEXTURE_2D,a.hc)};this.Vj=function(a){var b=a instanceof THREE.Ye;if(a&&!a.Dd){n===a.je&&(a.je=t);n===a.Ge&&(a.Ge=t);a.hc=m.createTexture();Q.info.memory.Xb++;
var c=0===(a.width&a.width-1)&&0===(a.height&a.height-1),d=W(a.ka),e=W(a.type);if(b){a.Dd=[];a.Wf=[];m.bindTexture(m.TEXTURE_CUBE_MAP,a.hc);K(m.TEXTURE_CUBE_MAP,a,c);for(var f=0;6>f;f++){a.Dd[f]=m.createFramebuffer();a.Wf[f]=m.createRenderbuffer();m.texImage2D(m.TEXTURE_CUBE_MAP_POSITIVE_X+f,0,d,a.width,a.height,0,d,e,u);var g=a,h=m.TEXTURE_CUBE_MAP_POSITIVE_X+f;m.bindFramebuffer(m.FRAMEBUFFER,a.Dd[f]);m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,h,g.hc,0);V(a.Wf[f],a)}c&&m.generateMipmap(m.TEXTURE_CUBE_MAP)}else a.Dd=
m.createFramebuffer(),a.Wf=m.createRenderbuffer(),m.bindTexture(m.TEXTURE_2D,a.hc),K(m.TEXTURE_2D,a,c),m.texImage2D(m.TEXTURE_2D,0,d,a.width,a.height,0,d,e,u),d=m.TEXTURE_2D,m.bindFramebuffer(m.FRAMEBUFFER,a.Dd),m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,d,a.hc,0),V(a.Wf,a),c&&m.generateMipmap(m.TEXTURE_2D);b?m.bindTexture(m.TEXTURE_CUBE_MAP,u):m.bindTexture(m.TEXTURE_2D,u);m.bindRenderbuffer(m.RENDERBUFFER,u);m.bindFramebuffer(m.FRAMEBUFFER,u)}a?(b=b?a.Dd[a.$e]:a.Dd,c=a.width,a=a.height,
e=d=0):(b=u,c=Ga,a=fb,d=Ka,e=tb);b!==Y&&(m.bindFramebuffer(m.FRAMEBUFFER,b),m.viewport(d,e,c,a),Y=b);ab=c;Pa=a};this.yq=new THREE.Kk;this.Vs(this.yq);this.xo(new THREE.es);this.xo(new THREE.Jr)};
THREE.Xg=function(a,b,c){this.width=a;this.height=b;c=c||{};this.Yb=n!==c.Yb?c.Yb:THREE.Le;this.Zb=n!==c.Zb?c.Zb:THREE.Le;this.Kb=n!==c.Kb?c.Kb:THREE.Td;this.mb=n!==c.mb?c.mb:THREE.Dk;this.Rb=n!==c.Rb?c.Rb:1;this.offset=new THREE.k(0,0);this.repeat=new THREE.k(1,1);this.ka=n!==c.ka?c.ka:THREE.Vg;this.type=n!==c.type?c.type:THREE.Pk;this.je=n!==c.je?c.je:t;this.Ge=n!==c.Ge?c.Ge:t;this.lb=t};
THREE.Xg.prototype.clone=function(){var a=new THREE.Xg(this.width,this.height);a.Yb=this.Yb;a.Zb=this.Zb;a.Kb=this.Kb;a.mb=this.mb;a.Rb=this.Rb;a.offset.copy(this.offset);a.repeat.copy(this.repeat);a.ka=this.ka;a.type=this.type;a.je=this.je;a.Ge=this.Ge;a.lb=this.lb;return a};THREE.Ye=function(a,b,c){THREE.Xg.call(this,a,b,c);this.$e=0};THREE.Ye.prototype=Object.create(THREE.Xg.prototype);THREE.dc=function(){this.Gc=new THREE.d;this.h=new THREE.xc;this.visible=t};
THREE.dc.prototype.copy=function(a){this.Gc.copy(a.Gc);this.h.copy(a.h)};THREE.Pn=function(){this.Y=new THREE.dc;this.ba=new THREE.dc;this.wb=new THREE.dc;this.fg=new THREE.d;this.Zi=new THREE.d;this.Fc=new THREE.d;this.Kc=[new THREE.d,new THREE.d,new THREE.d];this.nk=0;this.o=this.color=u;this.Hf=[[]];this.a=u};
THREE.Qn=function(){this.Y=new THREE.dc;this.ba=new THREE.dc;this.wb=new THREE.dc;this.cn=new THREE.dc;this.fg=new THREE.d;this.Zi=new THREE.d;this.Fc=new THREE.d;this.Kc=[new THREE.d,new THREE.d,new THREE.d,new THREE.d];this.nk=0;this.o=this.color=u;this.Hf=[[]];this.a=u};THREE.$r=function(){this.a=this.object=u};THREE.Sn=function(){this.rotation=this.a=this.y=this.x=this.object=u;this.scale=new THREE.k;this.o=u};THREE.Rn=function(){this.a=u;this.Y=new THREE.dc;this.ba=new THREE.dc;this.o=u};
THREE.nn={ty:function(a,b,c,d){var e=THREE.nn.zs,f=e,g=a.g,h=a.f,i=a.c,j=Math.max(Math.max(g,h),i),l=Math.min(Math.min(g,h),i);if(l===j)l=g=0;else{var k=j-l,l=k/j,g=(g===j?(h-i)/k:h===j?2+(i-g)/k:4+(g-h)/k)/6;0>g&&(g+=1);1<g&&(g-=1)}n===f&&(f={Bh:0,Qh:0,Ie:0});f.Bh=g;f.Qh=l;f.Ie=j;e.Bh=THREE.ib.Ac(e.Bh+b,0,1);e.Qh=THREE.ib.Ac(e.Qh+c,0,1);e.Ie=THREE.ib.Ac(e.Ie+d,0,1);var b=e.Bh,c=e.Qh,e=e.Ie,p,r,s;0===e?a.g=a.f=a.c=0:(p=Math.floor(6*b),r=6*b-p,b=e*(1-c),s=e*(1-c*r),c=e*(1-c*(1-r)),0===p?(a.g=e,a.f=
c,a.c=b):1===p?(a.g=s,a.f=e,a.c=b):2===p?(a.g=b,a.f=e,a.c=c):3===p?(a.g=b,a.f=s,a.c=e):4===p?(a.g=c,a.f=b,a.c=e):5===p&&(a.g=e,a.f=b,a.c=s))}};THREE.nn.zs={Bh:0,Qh:0,Ie:0};
THREE.pa={merge:function(a,b){var c,d,e=a.e.length,f=b instanceof THREE.O?b.s:b,g=a.e,h=f.e,i=a.l,j=f.l,l=a.C[0],f=f.C[0];b instanceof THREE.O&&(b.Ec&&b.Jc(),c=b.I,d=new THREE.D,Bi(d,c));for(var k=0,p=h.length;k<p;k++){var r=h[k].clone();c&&c.X(r);g.push(r)}k=0;for(p=j.length;k<p;k++){var r=j[k],s,q,v=r.p,y=r.m;r instanceof THREE.K?s=new THREE.K(r.q+e,r.c+e,r.r+e):r instanceof THREE.Z&&(s=new THREE.Z(r.q+e,r.c+e,r.r+e,r.P+e));s.n.copy(r.n);d&&d.X(s.n);g=0;for(h=v.length;g<h;g++)q=v[g].clone(),d&&
d.X(q),s.p.push(q);s.color.copy(r.color);g=0;for(h=y.length;g<h;g++)q=y[g],s.m.push(q.clone());s.va=r.va;s.qa.copy(r.qa);c&&c.X(s.qa);i.push(s)}k=0;for(p=f.length;k<p;k++){c=f[k];d=[];g=0;for(h=c.length;g<h;g++)d.push(new THREE.k(c[g].x,c[g].y));l.push(d)}},KD:function(a,b){for(var c={},d=0,e=b.length;d<e;d++)c[b[d]]=t;for(var f,g=[],d=0,e=a.l.length;d<e;d++)f=a.l[d],f.va in c||g.push(f);a.l=g},Gm:function(a,b,c){var d,e,f,g=new THREE.d,h=THREE.pa.Ea;d=THREE.pa.random();e=THREE.pa.random();1<d+e&&
(d=1-d,e=1-e);f=1-d-e;g.copy(a);g.T(d);h.copy(b);h.T(e);g.u(h);h.copy(c);h.T(f);g.u(h);return g},hw:function(a,b,c){var d,e,f;if(a instanceof THREE.K)return d=b.e[a.q],e=b.e[a.c],f=b.e[a.r],THREE.pa.Gm(d,e,f);if(a instanceof THREE.Z){d=b.e[a.q];e=b.e[a.c];f=b.e[a.r];var b=b.e[a.P],g;c?a.Ki&&a.Li?(c=a.Ki,g=a.Li):(c=THREE.pa.Ef(d,e,b),g=THREE.pa.Ef(e,f,b),a.Ki=c,a.Li=g):(c=THREE.pa.Ef(d,e,b),g=THREE.pa.Ef(e,f,b));return THREE.pa.random()*(c+g)<c?THREE.pa.Gm(d,e,b):THREE.pa.Gm(e,f,b)}},ED:function(a,
b){function c(a){function b(c,d){if(d<c)return c;var e=c+Math.floor((d-c)/2);return j[e]>a?b(c,e-1):j[e]<a?b(e+1,d):e}return b(0,j.length-1)}var d,e,f=a.l,g=a.e,h=f.length,i=0,j=[],l,k,p,r;for(e=0;e<h;e++)d=f[e],d instanceof THREE.K?(l=g[d.q],k=g[d.c],p=g[d.r],d.ro=THREE.pa.Ef(l,k,p)):d instanceof THREE.Z&&(l=g[d.q],k=g[d.c],p=g[d.r],r=g[d.P],d.Ki=THREE.pa.Ef(l,k,r),d.Li=THREE.pa.Ef(k,p,r),d.ro=d.Ki+d.Li),i+=d.ro,j[e]=i;d=[];for(e=0;e<b;e++)g=THREE.pa.random()*i,g=c(g),d[e]=THREE.pa.hw(f[g],a,t);
return d},Ef:function(a,b,c){var d=THREE.pa.Ea,e=THREE.pa.Yd;d.sub(b,a);e.sub(c,a);ui(d,e);return 0.5*d.length()},rb:function(a){a.cj();var b=a.ce,c=new THREE.d;c.add(b.min,b.max);c.T(-0.5);a.ag(yi(new THREE.D,c.x,c.y,c.a));a.cj();return c},TC:function(a){for(var a=a.C[0],b=0,c=a.length;b<c;b++)for(var d=a[b],e=0,f=d.length;e<f;e++)1!==d[e].x&&(d[e].x-=Math.floor(d[e].x)),1!==d[e].y&&(d[e].y-=Math.floor(d[e].y))},NE:function(a){var b,c,d,e,f=[],g=[],h=[];b=0;for(c=a.Sc.length;b<c;b++)g[b]=[];b=0;
for(c=a.C.length;b<c;b++)h[b]=[];b=0;for(c=a.l.length;b<c;b++)if(d=a.l[b],d instanceof THREE.Z){e=d.q;var i=d.c,j=d.r,l=d.P,k=new THREE.K,p=new THREE.K;k.color.copy(d.color);p.color.copy(d.color);k.va=d.va;p.va=d.va;k.q=e;k.c=i;k.r=l;p.q=i;p.c=j;p.r=l;4===d.m.length&&(k.m[0]=d.m[0].clone(),k.m[1]=d.m[1].clone(),k.m[2]=d.m[3].clone(),p.m[0]=d.m[1].clone(),p.m[1]=d.m[2].clone(),p.m[2]=d.m[3].clone());f.push(k,p);d=0;for(e=a.C.length;d<e;d++)a.C[d].length&&(k=a.C[d][b],i=k[1],j=k[2],l=k[3],k=[k[0].clone(),
i.clone(),l.clone()],i=[i.clone(),j.clone(),l.clone()],h[d].push(k,i));d=0;for(e=a.Sc.length;d<e;d++)a.Sc[d].length&&(i=a.Sc[d][b],g[d].push(i,i))}else{f.push(d);d=0;for(e=a.Sc.length;d<e;d++)g[d].push(a.Sc[d][b]);d=0;for(e=a.C.length;d<e;d++)h[d].push(a.C[d][b])}a.l=f;a.Sc=g;a.C=h;cj(a);bj(a);a.Jd();a.wg&&a.kh()},lA:function(a){for(var b=[],c=0,d=a.l.length;c<d;c++){var e=b.length,f=a.l[c];if(f instanceof THREE.Z){var g=f.q,h=f.c,i=f.r,g=a.e[g],h=a.e[h],i=a.e[i],j=a.e[f.P];b.push(g.clone());b.push(h.clone());
b.push(i.clone());b.push(j.clone());f.q=e;f.c=e+1;f.r=e+2;f.P=e+3}else g=f.q,h=f.c,i=f.r,g=a.e[g],h=a.e[h],i=a.e[i],b.push(g.clone()),b.push(h.clone()),b.push(i.clone()),f.q=e,f.c=e+1,f.r=e+2}a.e=b;delete a.Tk},DE:function(a,b){var c,d,e,f,g,h,i,j,l,k,p,r,s,q,v,y,F,C,z,G=[],B=[];c=0;for(d=a.C.length;c<d;c++)B[c]=[];c=0;for(d=a.l.length;c<d;c++)if(e=a.l[c],e instanceof THREE.K)if(f=e.q,g=e.c,h=e.r,j=a.e[f],l=a.e[g],k=a.e[h],r=j.Sb(l),s=l.Sb(k),p=j.Sb(k),r>b||s>b||p>b){i=a.e.length;C=e.clone();z=e.clone();
r>=s&&r>=p?(j=j.clone(),j.aa(l,0.5),C.q=f,C.c=i,C.r=h,z.q=i,z.c=g,z.r=h,3===e.p.length&&(f=e.p[0].clone(),f.aa(e.p[1],0.5),C.p[1].copy(f),z.p[0].copy(f)),3===e.m.length&&(f=e.m[0].clone(),f.aa(e.m[1],0.5),C.m[1].copy(f),z.m[0].copy(f)),e=0):s>=r&&s>=p?(j=l.clone(),j.aa(k,0.5),C.q=f,C.c=g,C.r=i,z.q=i,z.c=h,z.r=f,3===e.p.length&&(f=e.p[1].clone(),f.aa(e.p[2],0.5),C.p[2].copy(f),z.p[0].copy(f),z.p[1].copy(e.p[2]),z.p[2].copy(e.p[0])),3===e.m.length&&(f=e.m[1].clone(),f.aa(e.m[2],0.5),C.m[2].copy(f),
z.m[0].copy(f),z.m[1].copy(e.m[2]),z.m[2].copy(e.m[0])),e=1):(j=j.clone(),j.aa(k,0.5),C.q=f,C.c=g,C.r=i,z.q=i,z.c=g,z.r=h,3===e.p.length&&(f=e.p[0].clone(),f.aa(e.p[2],0.5),C.p[2].copy(f),z.p[0].copy(f)),3===e.m.length&&(f=e.m[0].clone(),f.aa(e.m[2],0.5),C.m[2].copy(f),z.m[0].copy(f)),e=2);G.push(C,z);a.e.push(j);f=0;for(g=a.C.length;f<g;f++)a.C[f].length&&(j=a.C[f][c],z=j[0],h=j[1],C=j[2],0===e?(l=z.clone(),l.aa(h,0.5),j=[z.clone(),l.clone(),C.clone()],h=[l.clone(),h.clone(),C.clone()]):1===e?(l=
h.clone(),l.aa(C,0.5),j=[z.clone(),h.clone(),l.clone()],h=[l.clone(),C.clone(),z.clone()]):(l=z.clone(),l.aa(C,0.5),j=[z.clone(),h.clone(),l.clone()],h=[l.clone(),h.clone(),C.clone()]),B[f].push(j,h))}else{G.push(e);f=0;for(g=a.C.length;f<g;f++)B[f].push(a.C[f][c])}else if(f=e.q,g=e.c,h=e.r,i=e.P,j=a.e[f],l=a.e[g],k=a.e[h],p=a.e[i],r=j.Sb(l),s=l.Sb(k),q=k.Sb(p),v=j.Sb(p),r>b||s>b||q>b||v>b){y=a.e.length;F=a.e.length+1;C=e.clone();z=e.clone();r>=s&&r>=q&&r>=v||q>=s&&q>=r&&q>=v?(r=j.clone(),r.aa(l,
0.5),l=k.clone(),l.aa(p,0.5),C.q=f,C.c=y,C.r=F,C.P=i,z.q=y,z.c=g,z.r=h,z.P=F,4===e.p.length&&(f=e.p[0].clone(),f.aa(e.p[1],0.5),g=e.p[2].clone(),g.aa(e.p[3],0.5),C.p[1].copy(f),C.p[2].copy(g),z.p[0].copy(f),z.p[3].copy(g)),4===e.m.length&&(f=e.m[0].clone(),f.aa(e.m[1],0.5),g=e.m[2].clone(),g.aa(e.m[3],0.5),C.m[1].copy(f),C.m[2].copy(g),z.m[0].copy(f),z.m[3].copy(g)),e=0):(r=l.clone(),r.aa(k,0.5),l=p.clone(),l.aa(j,0.5),C.q=f,C.c=g,C.r=y,C.P=F,z.q=F,z.c=y,z.r=h,z.P=i,4===e.p.length&&(f=e.p[1].clone(),
f.aa(e.p[2],0.5),g=e.p[3].clone(),g.aa(e.p[0],0.5),C.p[2].copy(f),C.p[3].copy(g),z.p[0].copy(g),z.p[1].copy(f)),4===e.m.length&&(f=e.m[1].clone(),f.aa(e.m[2],0.5),g=e.m[3].clone(),g.aa(e.m[0],0.5),C.m[2].copy(f),C.m[3].copy(g),z.m[0].copy(g),z.m[1].copy(f)),e=1);G.push(C,z);a.e.push(r,l);f=0;for(g=a.C.length;f<g;f++)a.C[f].length&&(j=a.C[f][c],z=j[0],h=j[1],C=j[2],j=j[3],0===e?(l=z.clone(),l.aa(h,0.5),k=C.clone(),k.aa(j,0.5),z=[z.clone(),l.clone(),k.clone(),j.clone()],h=[l.clone(),h.clone(),C.clone(),
k.clone()]):(l=h.clone(),l.aa(C,0.5),k=j.clone(),k.aa(z,0.5),z=[z.clone(),h.clone(),l.clone(),k.clone()],h=[k.clone(),l.clone(),C.clone(),j.clone()]),B[f].push(z,h))}else{G.push(e);f=0;for(g=a.C.length;f<g;f++)B[f].push(a.C[f][c])}a.l=G;a.C=B}};THREE.pa.random=THREE.ib.gw;THREE.pa.Ea=new THREE.d;THREE.pa.Yd=new THREE.d;
THREE.Ad={crossOrigin:"anonymous",Gp:function(a,b,c,d){var e=new Image,f=new THREE.Bb(e,b),b=new THREE.yk;b.addEventListener("load",function(a){f.J=a.content;f.ha=t;c&&c(f)});b.addEventListener("error",function(a){d&&d(a.message)});b.crossOrigin=this.crossOrigin;b.load(a,e);f.Hw=a;return f},Ep:function(a,b,c,d){var e=new THREE.Me;e.ub=b;var f=new XMLHttpRequest;f.onload=function(){var a=THREE.Ad.Bm(f.response,t);e.ka=a.ka;e.Lb=a.Lb;e.J.width=a.width;e.J.height=a.height;e.lb=w;e.ha=t;c&&c(e)};f.onerror=
d;f.open("GET",a,t);f.responseType="arraybuffer";f.send(u);return e},Yu:function(a,b,c,d){var e=[];e.rf=0;var f=new THREE.Bb;f.J=e;n!==b&&(f.ub=b);f.mf=w;for(var b=0,g=a.length;b<g;++b){var h=new Image;e[b]=h;h.onload=function(){e.rf+=1;6===e.rf&&(f.ha=t,c&&c(f))};h.onerror=d;h.crossOrigin=this.crossOrigin;h.src=a[b]}return f},Xu:function(a,b,c,d){var e=[];e.rf=0;var f=new THREE.Me;f.J=e;n!==b&&(f.ub=b);f.mf=w;f.lb=w;b=function(a,b){return function(){var d=THREE.Ad.Bm(a.response,t);b.ka=d.ka;b.Lb=
d.Lb;b.width=d.width;b.height=d.height;e.rf+=1;6===e.rf&&(f.ka=d.ka,f.ha=t,c&&c(f))}};if(a instanceof Array)for(var g=0,h=a.length;g<h;++g){var i={};e[g]=i;var j=new XMLHttpRequest;j.onload=b(j,i);j.onerror=d;i=a[g];j.open("GET",i,t);j.responseType="arraybuffer";j.send(u)}else j=new XMLHttpRequest,j.onload=function(){var a=THREE.Ad.Bm(j.response,t);if(a.up){for(var b=a.Lb.length/a.Bg,d=0;d<b;d++){e[d]={Lb:[]};for(var g=0;g<a.Bg;g++)e[d].Lb.push(a.Lb[d*a.Bg+g]),e[d].ka=a.ka,e[d].width=a.width,e[d].height=
a.height}f.ka=a.ka;f.ha=t;c&&c(f)}},j.onerror=d,j.open("GET",a,t),j.responseType="arraybuffer",j.send(u);return f},Bm:function(a,b){function c(a){return a.charCodeAt(0)+(a.charCodeAt(1)<<8)+(a.charCodeAt(2)<<16)+(a.charCodeAt(3)<<24)}var d={Lb:[],width:0,height:0,ka:u,Bg:1},e=c("DXT1"),f=c("DXT3"),g=c("DXT5"),h=new Int32Array(a,0,31);if(542327876!==h[0])return console.error("ImageUtils.parseDDS(): Invalid magic number in DDS header"),d;if(!h[20]&4)return console.error("ImageUtils.parseDDS(): Unsupported format, must contain a FourCC code"),
d;var i=h[21];switch(i){case e:e=8;d.ka=THREE.On;break;case f:e=16;d.ka=THREE.Mn;break;case g:e=16;d.ka=THREE.Nn;break;default:return console.error("ImageUtils.parseDDS(): Unsupported FourCC code: ",String.fromCharCode(i&255,i>>8&255,i>>16&255,i>>24&255)),d}d.Bg=1;h[2]&131072&&w!==b&&(d.Bg=Math.max(1,h[7]));d.up=h[28]&512?t:w;d.width=h[4];d.height=h[3];for(var h=h[1]+4,f=d.width,g=d.height,i=d.up?6:1,j=0;j<i;j++){for(var l=0;l<d.Bg;l++){var k=Math.max(4,f)/4*Math.max(4,g)/4*e,p={data:new Uint8Array(a,
h,k),width:f,height:g};d.Lb.push(p);h+=k;f=Math.max(0.5*f,1);g=Math.max(0.5*g,1)}f=d.width;g=d.height}return d},DA:function(a,b){var b=b|1,c=a.width,d=a.height,e=document.createElement("canvas");e.width=c;e.height=d;var f=e.getContext("2d");f.drawImage(a,0,0);for(var g=f.getImageData(0,0,c,d).data,h=f.createImageData(c,d),i=h.data,j=0;j<c;j++)for(var l=0;l<d;l++){var k=0>l-1?0:l-1,p=l+1>d-1?d-1:l+1,r=0>j-1?0:j-1,s=j+1>c-1?c-1:j+1,q=[],v=[0,0,g[4*(l*c+j)]/255*b];q.push([-1,0,g[4*(l*c+r)]/255*b]);q.push([-1,
-1,g[4*(k*c+r)]/255*b]);q.push([0,-1,g[4*(k*c+j)]/255*b]);q.push([1,-1,g[4*(k*c+s)]/255*b]);q.push([1,0,g[4*(l*c+s)]/255*b]);q.push([1,1,g[4*(p*c+s)]/255*b]);q.push([0,1,g[4*(p*c+j)]/255*b]);q.push([-1,1,g[4*(p*c+r)]/255*b]);k=[];r=q.length;for(p=0;p<r;p++){var s=q[p],y=q[(p+1)%r],s=[s[0]-v[0],s[1]-v[1],s[2]-v[2]],y=[y[0]-v[0],y[1]-v[1],y[2]-v[2]],s=[s[1]*y[2]-s[2]*y[1],s[2]*y[0]-s[0]*y[2],s[0]*y[1]-s[1]*y[0]],y=Math.sqrt(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]);k.push([s[0]/y,s[1]/y,s[2]/y])}q=[0,0,0];for(p=
0;p<k.length;p++)q[0]+=k[p][0],q[1]+=k[p][1],q[2]+=k[p][2];q[0]/=k.length;q[1]/=k.length;q[2]/=k.length;v=4*(l*c+j);i[v]=255*((q[0]+1)/2)|0;i[v+1]=255*((q[1]+1)/2)|0;i[v+2]=255*q[2]|0;i[v+3]=255}f.putImageData(h,0,0);return e},BA:function(a,b,c){for(var d=a*b,e=new Uint8Array(3*d),f=Math.floor(255*c.g),g=Math.floor(255*c.f),c=Math.floor(255*c.c),h=0;h<d;h++)e[3*h]=f,e[3*h+1]=g,e[3*h+2]=c;a=new THREE.Oe(e,a,b,THREE.Hk);a.ha=t;return a}};
THREE.Yx={vz:function(a,b){for(var c=new THREE.w,d=0,e=b.length;d<e;d++)c.add(new THREE.O(a,b[d]));return c},detach:function(a,b,c){a.ag(b.A);b.remove(a);c.add(a)},Cy:function(a,b,c){var d=new THREE.D;d.Gb(c.A);a.ag(d);b.remove(a);c.add(a)}};
THREE.Un={Ap:{yA:{Q:{GB:{type:"f",value:1.02},DB:{type:"f",value:0.1},EB:{type:"f",value:2},FB:{type:"f",value:1},Xm:{type:"t",value:u}},L:"uniform samplerCube tCube;\nvarying vec3 vReflect;\nvarying vec3 vRefract[3];\nvarying float vReflectionFactor;\nvoid main() {\nvec4 reflectedColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );\nvec4 refractedColor = vec4( 1.0 );\nrefractedColor.r = textureCube( tCube, vec3( -vRefract[0].x, vRefract[0].yz ) ).r;\nrefractedColor.g = textureCube( tCube, vec3( -vRefract[1].x, vRefract[1].yz ) ).g;\nrefractedColor.b = textureCube( tCube, vec3( -vRefract[2].x, vRefract[2].yz ) ).b;\ngl_FragColor = mix( refractedColor, reflectedColor, clamp( vReflectionFactor, 0.0, 1.0 ) );\n}",N:"uniform float mRefractionRatio;\nuniform float mFresnelBias;\nuniform float mFresnelScale;\nuniform float mFresnelPower;\nvarying vec3 vReflect;\nvarying vec3 vRefract[3];\nvarying float vReflectionFactor;\nvoid main() {\nvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\nvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\nvec3 worldNormal = normalize( mat3( modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz ) * normal );\nvec3 I = worldPosition.xyz - cameraPosition;\nvReflect = reflect( I, worldNormal );\nvRefract[0] = refract( normalize( I ), worldNormal, mRefractionRatio );\nvRefract[1] = refract( normalize( I ), worldNormal, mRefractionRatio * 0.99 );\nvRefract[2] = refract( normalize( I ), worldNormal, mRefractionRatio * 0.98 );\nvReflectionFactor = mFresnelBias + mFresnelScale * pow( 1.0 + dot( normalize( I ), worldNormal ), mFresnelPower );\ngl_Position = projectionMatrix * mvPosition;\n}"},
n:{Q:THREE.wc.merge([THREE.Ra.z,THREE.Ra.Jb,THREE.Ra.ai,{Wo:{type:"i",value:0},Xo:{type:"i",value:0},Yo:{type:"i",value:0},bu:{type:"i",value:0},au:{type:"i",value:0},Xw:{type:"t",value:u},Lq:{type:"t",value:u},Xm:{type:"t",value:u},Mq:{type:"t",value:u},Nq:{type:"t",value:u},Kq:{type:"t",value:u},Wq:{type:"v2",value:new THREE.k(1,1)},ix:{type:"f",value:0},jx:{type:"f",value:1},Vq:{type:"c",value:new THREE.t(16777215)},Zq:{type:"c",value:new THREE.t(1118481)},Uq:{type:"c",value:new THREE.t(16777215)},
Yq:{type:"f",value:30},Xq:{type:"f",value:1},dr:{type:"i",value:0},RE:{type:"f",value:0.98},kx:{type:"f",value:0.5},QE:{type:"v2",value:new THREE.k(0,0)},SE:{type:"v2",value:new THREE.k(1,1)},Lc:{type:"v3",value:new THREE.d(1,1,1)}}]),L:["uniform vec3 uAmbientColor;\nuniform vec3 uDiffuseColor;\nuniform vec3 uSpecularColor;\nuniform float uShininess;\nuniform float uOpacity;\nuniform bool enableDiffuse;\nuniform bool enableSpecular;\nuniform bool enableAO;\nuniform bool enableReflection;\nuniform sampler2D tDiffuse;\nuniform sampler2D tNormal;\nuniform sampler2D tSpecular;\nuniform sampler2D tAO;\nuniform samplerCube tCube;\nuniform vec2 uNormalScale;\nuniform bool useRefract;\nuniform float uRefractionRatio;\nuniform float uReflectivity;\nvarying vec3 vTangent;\nvarying vec3 vBinormal;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nuniform vec3 ambientLightColor;\n#if MAX_DIR_LIGHTS > 0\nuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\nuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n#endif\n#if MAX_HEMI_LIGHTS > 0\nuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n#endif\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n#endif\n#if MAX_SPOT_LIGHTS > 0\nuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\nuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\nuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\nuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n#endif\n#ifdef WRAP_AROUND\nuniform vec3 wrapRGB;\n#endif\nvarying vec3 vWorldPosition;\nvarying vec3 vViewPosition;",
THREE.i.ci,THREE.i.ng,"void main() {\ngl_FragColor = vec4( vec3( 1.0 ), uOpacity );\nvec3 specularTex = vec3( 1.0 );\nvec3 normalTex = texture2D( tNormal, vUv ).xyz * 2.0 - 1.0;\nnormalTex.xy *= uNormalScale;\nnormalTex = normalize( normalTex );\nif( enableDiffuse ) {\n#ifdef GAMMA_INPUT\nvec4 texelColor = texture2D( tDiffuse, vUv );\ntexelColor.xyz *= texelColor.xyz;\ngl_FragColor = gl_FragColor * texelColor;\n#else\ngl_FragColor = gl_FragColor * texture2D( tDiffuse, vUv );\n#endif\n}\nif( enableAO ) {\n#ifdef GAMMA_INPUT\nvec4 aoColor = texture2D( tAO, vUv );\naoColor.xyz *= aoColor.xyz;\ngl_FragColor.xyz = gl_FragColor.xyz * aoColor.xyz;\n#else\ngl_FragColor.xyz = gl_FragColor.xyz * texture2D( tAO, vUv ).xyz;\n#endif\n}\nif( enableSpecular )\nspecularTex = texture2D( tSpecular, vUv ).xyz;\nmat3 tsb = mat3( normalize( vTangent ), normalize( vBinormal ), normalize( vNormal ) );\nvec3 finalNormal = tsb * normalTex;\n#ifdef FLIP_SIDED\nfinalNormal = -finalNormal;\n#endif\nvec3 normal = normalize( finalNormal );\nvec3 viewPosition = normalize( vViewPosition );\n#if MAX_POINT_LIGHTS > 0\nvec3 pointDiffuse = vec3( 0.0 );\nvec3 pointSpecular = vec3( 0.0 );\nfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\nvec3 pointVector = lPosition.xyz + vViewPosition.xyz;\nfloat pointDistance = 1.0;\nif ( pointLightDistance[ i ] > 0.0 )\npointDistance = 1.0 - min( ( length( pointVector ) / pointLightDistance[ i ] ), 1.0 );\npointVector = normalize( pointVector );\n#ifdef WRAP_AROUND\nfloat pointDiffuseWeightFull = max( dot( normal, pointVector ), 0.0 );\nfloat pointDiffuseWeightHalf = max( 0.5 * dot( normal, pointVector ) + 0.5, 0.0 );\nvec3 pointDiffuseWeight = mix( vec3 ( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n#else\nfloat pointDiffuseWeight = max( dot( normal, pointVector ), 0.0 );\n#endif\npointDiffuse += pointDistance * pointLightColor[ i ] * uDiffuseColor * pointDiffuseWeight;\nvec3 pointHalfVector = normalize( pointVector + viewPosition );\nfloat pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\nfloat pointSpecularWeight = specularTex.r * max( pow( pointDotNormalHalf, uShininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( uShininess + 2.0001 ) / 8.0;\nvec3 schlick = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( pointVector, pointHalfVector ), 5.0 );\npointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * pointDistance * specularNormalization;\n#else\npointSpecular += pointDistance * pointLightColor[ i ] * uSpecularColor * pointSpecularWeight * pointDiffuseWeight;\n#endif\n}\n#endif\n#if MAX_SPOT_LIGHTS > 0\nvec3 spotDiffuse = vec3( 0.0 );\nvec3 spotSpecular = vec3( 0.0 );\nfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\nvec3 spotVector = lPosition.xyz + vViewPosition.xyz;\nfloat spotDistance = 1.0;\nif ( spotLightDistance[ i ] > 0.0 )\nspotDistance = 1.0 - min( ( length( spotVector ) / spotLightDistance[ i ] ), 1.0 );\nspotVector = normalize( spotVector );\nfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\nif ( spotEffect > spotLightAngleCos[ i ] ) {\nspotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );\n#ifdef WRAP_AROUND\nfloat spotDiffuseWeightFull = max( dot( normal, spotVector ), 0.0 );\nfloat spotDiffuseWeightHalf = max( 0.5 * dot( normal, spotVector ) + 0.5, 0.0 );\nvec3 spotDiffuseWeight = mix( vec3 ( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n#else\nfloat spotDiffuseWeight = max( dot( normal, spotVector ), 0.0 );\n#endif\nspotDiffuse += spotDistance * spotLightColor[ i ] * uDiffuseColor * spotDiffuseWeight * spotEffect;\nvec3 spotHalfVector = normalize( spotVector + viewPosition );\nfloat spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\nfloat spotSpecularWeight = specularTex.r * max( pow( spotDotNormalHalf, uShininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( uShininess + 2.0001 ) / 8.0;\nvec3 schlick = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( spotVector, spotHalfVector ), 5.0 );\nspotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * spotDistance * specularNormalization * spotEffect;\n#else\nspotSpecular += spotDistance * spotLightColor[ i ] * uSpecularColor * spotSpecularWeight * spotDiffuseWeight * spotEffect;\n#endif\n}\n}\n#endif\n#if MAX_DIR_LIGHTS > 0\nvec3 dirDiffuse = vec3( 0.0 );\nvec3 dirSpecular = vec3( 0.0 );\nfor( int i = 0; i < MAX_DIR_LIGHTS; i++ ) {\nvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\nvec3 dirVector = normalize( lDirection.xyz );\n#ifdef WRAP_AROUND\nfloat directionalLightWeightingFull = max( dot( normal, dirVector ), 0.0 );\nfloat directionalLightWeightingHalf = max( 0.5 * dot( normal, dirVector ) + 0.5, 0.0 );\nvec3 dirDiffuseWeight = mix( vec3( directionalLightWeightingFull ), vec3( directionalLightWeightingHalf ), wrapRGB );\n#else\nfloat dirDiffuseWeight = max( dot( normal, dirVector ), 0.0 );\n#endif\ndirDiffuse += directionalLightColor[ i ] * uDiffuseColor * dirDiffuseWeight;\nvec3 dirHalfVector = normalize( dirVector + viewPosition );\nfloat dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\nfloat dirSpecularWeight = specularTex.r * max( pow( dirDotNormalHalf, uShininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( uShininess + 2.0001 ) / 8.0;\nvec3 schlick = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( dirVector, dirHalfVector ), 5.0 );\ndirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n#else\ndirSpecular += directionalLightColor[ i ] * uSpecularColor * dirSpecularWeight * dirDiffuseWeight;\n#endif\n}\n#endif\n#if MAX_HEMI_LIGHTS > 0\nvec3 hemiDiffuse  = vec3( 0.0 );\nvec3 hemiSpecular = vec3( 0.0 );\nfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\nvec3 lVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( normal, lVector );\nfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\nvec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\nhemiDiffuse += uDiffuseColor * hemiColor;\nvec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\nfloat hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\nfloat hemiSpecularWeightSky = specularTex.r * max( pow( hemiDotNormalHalfSky, uShininess ), 0.0 );\nvec3 lVectorGround = -lVector;\nvec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\nfloat hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\nfloat hemiSpecularWeightGround = specularTex.r * max( pow( hemiDotNormalHalfGround, uShininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat dotProductGround = dot( normal, lVectorGround );\nfloat specularNormalization = ( uShininess + 2.0001 ) / 8.0;\nvec3 schlickSky = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( lVector, hemiHalfVectorSky ), 5.0 );\nvec3 schlickGround = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 5.0 );\nhemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\n#else\nhemiSpecular += uSpecularColor * hemiColor * ( hemiSpecularWeightSky + hemiSpecularWeightGround ) * hemiDiffuseWeight;\n#endif\n}\n#endif\nvec3 totalDiffuse = vec3( 0.0 );\nvec3 totalSpecular = vec3( 0.0 );\n#if MAX_DIR_LIGHTS > 0\ntotalDiffuse += dirDiffuse;\ntotalSpecular += dirSpecular;\n#endif\n#if MAX_HEMI_LIGHTS > 0\ntotalDiffuse += hemiDiffuse;\ntotalSpecular += hemiSpecular;\n#endif\n#if MAX_POINT_LIGHTS > 0\ntotalDiffuse += pointDiffuse;\ntotalSpecular += pointSpecular;\n#endif\n#if MAX_SPOT_LIGHTS > 0\ntotalDiffuse += spotDiffuse;\ntotalSpecular += spotSpecular;\n#endif\n#ifdef METAL\ngl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * uAmbientColor + totalSpecular );\n#else\ngl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * uAmbientColor ) + totalSpecular;\n#endif\nif ( enableReflection ) {\nvec3 vReflect;\nvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\nif ( useRefract ) {\nvReflect = refract( cameraToVertex, normal, uRefractionRatio );\n} else {\nvReflect = reflect( cameraToVertex, normal );\n}\nvec4 cubeColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );\n#ifdef GAMMA_INPUT\ncubeColor.xyz *= cubeColor.xyz;\n#endif\ngl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularTex.r * uReflectivity );\n}",
THREE.i.bi,THREE.i.Ej,THREE.i.mg,"}"].join("\n"),N:["attribute vec4 tangent;\nuniform vec2 uOffset;\nuniform vec2 uRepeat;\nuniform bool enableDisplacement;\n#ifdef VERTEX_TEXTURES\nuniform sampler2D tDisplacement;\nuniform float uDisplacementScale;\nuniform float uDisplacementBias;\n#endif\nvarying vec3 vTangent;\nvarying vec3 vBinormal;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vWorldPosition;\nvarying vec3 vViewPosition;",THREE.i.fi,THREE.i.di,"void main() {",THREE.i.ei,THREE.i.ek,
"#ifdef USE_SKINNING\nvNormal = normalize( normalMatrix * skinnedNormal.xyz );\nvec4 skinnedTangent = skinMatrix * vec4( tangent.xyz, 0.0 );\nvTangent = normalize( normalMatrix * skinnedTangent.xyz );\n#else\nvNormal = normalize( normalMatrix * normal );\nvTangent = normalize( normalMatrix * tangent.xyz );\n#endif\nvBinormal = normalize( cross( vNormal, vTangent ) * tangent.w );\nvUv = uv * uRepeat + uOffset;\nvec3 displacedPosition;\n#ifdef VERTEX_TEXTURES\nif ( enableDisplacement ) {\nvec3 dv = texture2D( tDisplacement, uv ).xyz;\nfloat df = uDisplacementScale * dv.x + uDisplacementBias;\ndisplacedPosition = position + normalize( normal ) * df;\n} else {\n#ifdef USE_SKINNING\nvec4 skinVertex = vec4( position, 1.0 );\nvec4 skinned  = boneMatX * skinVertex * skinWeight.x;\nskinned \t  += boneMatY * skinVertex * skinWeight.y;\ndisplacedPosition  = skinned.xyz;\n#else\ndisplacedPosition = position;\n#endif\n}\n#else\n#ifdef USE_SKINNING\nvec4 skinVertex = vec4( position, 1.0 );\nvec4 skinned  = boneMatX * skinVertex * skinWeight.x;\nskinned \t  += boneMatY * skinVertex * skinWeight.y;\ndisplacedPosition  = skinned.xyz;\n#else\ndisplacedPosition = position;\n#endif\n#endif\nvec4 mvPosition = modelViewMatrix * vec4( displacedPosition, 1.0 );\nvec4 worldPosition = modelMatrix * vec4( displacedPosition, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\nvWorldPosition = worldPosition.xyz;\nvViewPosition = -mvPosition.xyz;\n#ifdef USE_SHADOWMAP\nfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\nvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n}\n#endif\n}"].join("\n")},
yz:{Q:{Xm:{type:"t",value:u},zE:{type:"f",value:-1}},N:"varying vec3 vWorldPosition;\nvoid main() {\nvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\nvWorldPosition = worldPosition.xyz;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",L:"uniform samplerCube tCube;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\nvoid main() {\ngl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n}"}}};
THREE.hb={l:{},face:"helvetiker",Rd:"normal",style:"normal",size:150,Jl:10,mu:function(){return this.l[this.face][this.Rd][this.style]},Fp:function(a){var b=a.pA.toLowerCase();this.l[b]=this.l[b]||{};this.l[b][a.Bl]=this.l[b][a.Bl]||{};this.l[b][a.Bl][a.Lt]=a;return this.l[b][a.Bl][a.Lt]=a},Yt:function(a){for(var b=this.mu(),c=this.size/b.OD,d=0,e=String(a).split(""),f=e.length,g=[],a=0;a<f;a++){var h=new THREE.Ve,h=this.fu(e[a],b,c,d,h),d=d+h.offset;g.push(h.path)}return{Xv:g,offset:d/2}},fu:function(a,
b,c,d,e){var f=[],g,h,i,j,l,k,p,r,s,q=b.su[a]||b.su["?"];if(q){if(q.Bv){b=q.Ls||(q.Ls=q.Bv.split(" "));j=b.length;for(a=0;a<j;)switch(i=b[a++],i){case "m":i=b[a++]*c+d;l=b[a++]*c;e.moveTo(i,l);break;case "l":i=b[a++]*c+d;l=b[a++]*c;e.lineTo(i,l);break;case "q":i=b[a++]*c+d;l=b[a++]*c;k=b[a++]*c+d;p=b[a++]*c;e.quadraticCurveTo(k,p,i,l);if(f[f.length-1]){g=1;for(h=this.Jl;g<=h;g++);}break;case "b":if(i=b[a++]*c+d,l=b[a++]*c,k=b[a++]*c+d,p=b[a++]*-c,r=b[a++]*c+d,s=b[a++]*-c,e.bezierCurveTo(i,l,k,p,r,
s),f[f.length-1]){g=1;for(h=this.Jl;g<=h;g++);}}}return{offset:q.NA*c,path:e}}}};THREE.hb.ku=function(a,b){var b=b||{},c=n!==b.Kd?b.Kd:4,d=n!==b.font?b.font:"helvetiker",e=n!==b.Rd?b.Rd:"normal",f=n!==b.style?b.style:"normal";THREE.hb.size=n!==b.size?b.size:100;THREE.hb.Jl=c;THREE.hb.face=d;THREE.hb.Rd=e;THREE.hb.style=f;c=THREE.hb.Yt(a).Xv;d=[];e=0;for(f=c.length;e<f;e++)Array.prototype.push.apply(d,kj(c[e]));return d};var lj=THREE.hb;
function mj(a){for(var b=a.length,c=0,d=b-1,e=0;e<b;d=e++)c+=a[d].x*a[e].y-a[e].x*a[d].y;return 0.5*c}
lj.Xe=function(a,b){var c=a.length;if(3>c)return u;var d=[],e=[],f=[],g,h,i;if(0<mj(a))for(h=0;h<c;h++)e[h]=h;else for(h=0;h<c;h++)e[h]=c-1-h;var j=2*c;for(h=c-1;2<c;){if(0>=j--){console.log("Warning, unable to triangulate polygon!");break}g=h;c<=g&&(g=0);h=g+1;c<=h&&(h=0);i=h+1;c<=i&&(i=0);var l;a:{l=a;var k=g,p=h,r=i,s=c,q=e,v=n,y=n,F=n,C=n,z=n,G=n,B=n,J=n,O=n,y=l[q[k]].x,F=l[q[k]].y,C=l[q[p]].x,z=l[q[p]].y,G=l[q[r]].x,B=l[q[r]].y;if(1E-10>(C-y)*(B-F)-(z-F)*(G-y))l=w;else{for(v=0;v<s;v++)if(!(v==
k||v==p||v==r)){var J=l[q[v]].x,O=l[q[v]].y,I=n,P=n,E=n,R=n,K=n,V=n,M=n,W=n,la=n,X=n,aa=n,ia=n,I=G-C,P=B-z,E=y-G,R=F-B,K=C-y,V=z-F,M=J-y,W=O-F,la=J-C,X=O-z,aa=J-G,ia=O-B,I=I*X-P*la,K=K*W-V*M,E=E*ia-R*aa;if(0<=I&&0<=E&&0<=K){l=w;break a}}l=t}}if(l){d.push([a[e[g]],a[e[h]],a[e[i]]]);f.push([e[g],e[h],e[i]]);g=h;for(i=h+1;i<c;g++,i++)e[g]=e[i];c--;j=2*c}}return b?f:d};lj.Xe.bg=mj;self.oy={l:THREE.hb.l,Fp:THREE.hb.Fp};THREE.ma=da();va=THREE.ma.prototype;
va.Ga=function(){console.log("Warning, getPoint() not implemented!");return u};va.yh=function(a){a=nj(this,a);return this.Ga(a)};va.tg=function(a){a||(a=5);var b,c=[];for(b=0;b<=a;b++)c.push(this.Ga(b/a));return c};va.vj=function(a){a||(a=5);var b,c=[];for(b=0;b<=a;b++)c.push(this.yh(b/a));return c};va.rg=function(){var a=oj(this);return a[a.length-1]};
function oj(a){var b;b||(b=a.xs?a.xs:200);if(a.yl&&a.yl.length==b+1&&!a.ha)return a.yl;a.ha=w;var c=[],d,e=a.Ga(0),f,g=0;c.push(0);for(f=1;f<=b;f++)d=a.Ga(f/b),g+=d.Sb(e),c.push(g),e=d;return a.yl=c}function nj(a,b,c){for(var a=oj(a),d=0,e=a.length,b=c?c:b*a[e-1],c=0,f=e-1,g;c<=f;)if(d=Math.floor(c+(f-c)/2),g=a[d]-b,0>g)c=d+1;else if(0<g)f=d-1;else{f=d;break}d=f;if(a[d]==b)return d/(e-1);c=a[d];return(d+(b-c)/(a[d+1]-c))/(e-1)}
va.wj=function(a){var b=a-1E-4,a=a+1E-4;0>b&&(b=0);1<a&&(a=1);b=this.Ga(b);return this.Ga(a).clone().Wa(b).normalize()};THREE.Of=function(a,b){this.Y=a;this.ba=b};THREE.Of.prototype=Object.create(THREE.ma.prototype);THREE.Of.prototype.Ga=function(a){var b=this.ba.clone().Wa(this.Y);b.T(a).u(this.Y);return b};THREE.Of.prototype.yh=function(a){return this.Ga(a)};THREE.Of.prototype.wj=function(){return this.ba.clone().Wa(this.Y).normalize()};THREE.Bi=function(a,b,c){this.pb=a;this.Y=b;this.ba=c};
THREE.Bi.prototype=Object.create(THREE.ma.prototype);THREE.Bi.prototype.Ga=function(a){var b;b=THREE.da.S.df(a,this.pb.x,this.Y.x,this.ba.x);a=THREE.da.S.df(a,this.pb.y,this.Y.y,this.ba.y);return new THREE.k(b,a)};THREE.Bi.prototype.wj=function(a){var b;b=THREE.ma.S.Pq(a,this.pb.x,this.Y.x,this.ba.x);a=THREE.ma.S.Pq(a,this.pb.y,this.Y.y,this.ba.y);b=new THREE.k(b,a);b.normalize();return b};THREE.qi=function(a,b,c,d){this.pb=a;this.Y=b;this.ba=c;this.wb=d};THREE.qi.prototype=Object.create(THREE.ma.prototype);
THREE.qi.prototype.Ga=function(a){var b;b=THREE.da.S.ef(a,this.pb.x,this.Y.x,this.ba.x,this.wb.x);a=THREE.da.S.ef(a,this.pb.y,this.Y.y,this.ba.y,this.wb.y);return new THREE.k(b,a)};THREE.qi.prototype.wj=function(a){var b;b=THREE.ma.S.Oq(a,this.pb.x,this.Y.x,this.ba.x,this.wb.x);a=THREE.ma.S.Oq(a,this.pb.y,this.Y.y,this.ba.y,this.wb.y);b=new THREE.k(b,a);b.normalize();return b};THREE.Mk=function(a){this.M=n==a?[]:a};THREE.Mk.prototype=Object.create(THREE.ma.prototype);
THREE.Mk.prototype.Ga=function(a){var b=new THREE.k,c=[],d=this.M,e;e=(d.length-1)*a;a=Math.floor(e);e-=a;c[0]=0==a?a:a-1;c[1]=a;c[2]=a>d.length-2?d.length-1:a+1;c[3]=a>d.length-3?d.length-1:a+2;b.x=THREE.ma.S.Hb(d[c[0]].x,d[c[1]].x,d[c[2]].x,d[c[3]].x,e);b.y=THREE.ma.S.Hb(d[c[0]].y,d[c[1]].y,d[c[2]].y,d[c[3]].y,e);return b};THREE.Og=function(a,b,c,d,e,f,g){this.Qs=a;this.Rs=b;this.ux=c;this.vx=d;this.wo=e;this.Ps=f;this.Os=g};THREE.Og.prototype=Object.create(THREE.ma.prototype);
THREE.Og.prototype.Ga=function(a){var b=this.Ps-this.wo;this.Os||(a=1-a);b=this.wo+a*b;a=this.Qs+this.ux*Math.cos(b);b=this.Rs+this.vx*Math.sin(b);return new THREE.k(a,b)};THREE.nr=function(a,b,c,d,e,f){THREE.Og.call(this,a,b,c,c,d,e,f)};THREE.nr.prototype=Object.create(THREE.Og.prototype);
THREE.ma.S={Pq:function(a,b,c,d){return 2*(1-a)*(c-b)+2*a*(d-c)},Oq:function(a,b,c,d,e){return-3*b*(1-a)*(1-a)+3*c*(1-a)*(1-a)-6*a*c*(1-a)+6*a*d*(1-a)-3*a*a*d+3*a*a*e},BE:function(a){return 6*a*a-6*a+(3*a*a-4*a+1)+(-6*a*a+6*a)+(3*a*a-2*a)},Hb:function(a,b,c,d,e){var a=0.5*(c-a),d=0.5*(d-b),f=e*e;return(2*b-2*c+a+d)*e*f+(-3*b+3*c-2*a-d)*f+a*e+b}};THREE.ma.create=function(a,b){a.prototype=Object.create(THREE.ma.prototype);a.prototype.Ga=b;return a};
THREE.Qx=THREE.ma.create(function(a,b){this.Y=a;this.ba=b},function(a){var b=new THREE.d;b.sub(this.ba,this.Y);b.T(a);b.u(this.Y);return b});THREE.Vx=THREE.ma.create(function(a,b,c){this.pb=a;this.Y=b;this.ba=c},function(a){var b,c;b=THREE.da.S.df(a,this.pb.x,this.Y.x,this.ba.x);c=THREE.da.S.df(a,this.pb.y,this.Y.y,this.ba.y);a=THREE.da.S.df(a,this.pb.a,this.Y.a,this.ba.a);return new THREE.d(b,c,a)});
THREE.Fx=THREE.ma.create(function(a,b,c,d){this.pb=a;this.Y=b;this.ba=c;this.wb=d},function(a){var b,c;b=THREE.da.S.ef(a,this.pb.x,this.Y.x,this.ba.x,this.wb.x);c=THREE.da.S.ef(a,this.pb.y,this.Y.y,this.ba.y,this.wb.y);a=THREE.da.S.ef(a,this.pb.a,this.Y.a,this.ba.a,this.wb.a);return new THREE.d(b,c,a)});
THREE.by=THREE.ma.create(function(a){this.M=n==a?[]:a},function(a){var b=new THREE.d,c=[],d=this.M,e,a=(d.length-1)*a;e=Math.floor(a);a-=e;c[0]=0==e?e:e-1;c[1]=e;c[2]=e>d.length-2?d.length-1:e+1;c[3]=e>d.length-3?d.length-1:e+2;e=d[c[0]];var f=d[c[1]],g=d[c[2]],c=d[c[3]];b.x=THREE.ma.S.Hb(e.x,f.x,g.x,c.x,a);b.y=THREE.ma.S.Hb(e.y,f.y,g.y,c.y,a);b.a=THREE.ma.S.Hb(e.a,f.a,g.a,c.a,a);return b});
THREE.Bx=THREE.ma.create(function(a){this.M=n==a?[]:a},function(a){var b=new THREE.d,c=[],d=this.M,e;e=(d.length-0)*a;a=Math.floor(e);e-=a;a+=0<a?0:(Math.floor(Math.abs(a)/d.length)+1)*d.length;c[0]=(a-1)%d.length;c[1]=a%d.length;c[2]=(a+1)%d.length;c[3]=(a+2)%d.length;b.x=THREE.ma.S.Hb(d[c[0]].x,d[c[1]].x,d[c[2]].x,d[c[3]].x,e);b.y=THREE.ma.S.Hb(d[c[0]].y,d[c[1]].y,d[c[2]].y,d[c[3]].y,e);b.a=THREE.ma.S.Hb(d[c[0]].a,d[c[1]].a,d[c[2]].a,d[c[3]].a,e);return b});
THREE.Ne=function(){this.Ya=[];this.Ui=[];this.Ey=w};THREE.Ne.prototype=Object.create(THREE.ma.prototype);THREE.Ne.prototype.add=function(a){this.Ya.push(a)};THREE.Ne.prototype.closePath=function(){var a=this.Ya[0].Ga(0),b=this.Ya[this.Ya.length-1].Ga(1);a.kb(b)||this.Ya.push(new THREE.Of(b,a))};THREE.Ne.prototype.Ga=function(a){for(var b=a*this.rg(),c=pj(this),a=0;a<c.length;){if(c[a]>=b)return b=c[a]-b,a=this.Ya[a],b=1-b/a.rg(),a.yh(b);a++}return u};
THREE.Ne.prototype.rg=function(){var a=pj(this);return a[a.length-1]};function pj(a){if(a.zl&&a.zl.length==a.Ya.length)return a.zl;var b=[],c=0,d,e=a.Ya.length;for(d=0;d<e;d++)c+=a.Ya[d].rg(),b.push(c);return a.zl=b}
function qj(a){var a=a.tg(),b,c,d,e,f,g;b=c=Number.NEGATIVE_INFINITY;e=f=Number.POSITIVE_INFINITY;var h,i,j,l,k=a[0]instanceof THREE.d;l=k?new THREE.d:new THREE.k;i=0;for(j=a.length;i<j;i++)h=a[i],h.x>b?b=h.x:h.x<e&&(e=h.x),h.y>c?c=h.y:h.y<f&&(f=h.y),k&&(h.a>d?d=h.a:h.a<g&&(g=h.a)),l.u(h);a={qC:e,rC:f,kv:b,dC:c,qa:l.gd(j)};k&&(a.eC=d,a.sC=g);return a}function rj(a,b,c){var b=a.tg(b),d,e;c||(c=a.Ui);d=0;for(e=c.length;d<e;d++)b=sj(a,b,c[d]);return b}
function tj(a,b,c){var b=a.vj(b),d,e;c||(c=a.Ui);d=0;for(e=c.length;d<e;d++)b=sj(a,b,c[d]);return b}function sj(a,b,c){var a=qj(a),d,e,f,g,h,i;d=0;for(e=b.length;d<e;d++)f=b[d],g=f.x,h=f.y,i=g/a.kv,i=nj(c,i,g),g=c.Ga(i),h=c.EA(i).T(h),f.x=g.x+h.x,f.y=g.y+h.y;return b}THREE.ti=function(){THREE.w.call(this)};THREE.ti.prototype=Object.create(THREE.w.prototype);va=THREE.ti.prototype;
va.Nb=function(a){this.Ec&&this.Jc();if(this.cb||a){if(this.parent){this.A.multiply(this.parent.A,this.I);Ci(this.A,this.Sq,this.ow,this.qq);Ci(this.I,this.gx,this.oq,this.pw);var a=this.A,b=this.Sq,c=this.oq,d=this.qq,e=a.elements,f=THREE.D.Qk,g=THREE.D.Bs;Ji(f);Di(f,c);g.set(d.x,0,0,0,0,d.y,0,0,0,0,d.a,0,0,0,0,1);a.multiply(f,g);e[12]=b.x;e[13]=b.y;e[14]=b.a}else this.A.copy(this.I);this.cb=w;a=t}b=0;for(c=this.children.length;b<c;b++)this.children[b].Nb(a)};va.Sq=new THREE.d;va.gx=new THREE.d;
va.ow=new THREE.vc;va.oq=new THREE.vc;va.qq=new THREE.d;va.pw=new THREE.d;THREE.Ve=function(a){THREE.Ne.call(this);this.ja=[];if(a){this.moveTo(a[0].x,a[0].y);for(var b=1,c=a.length;b<c;b++)this.lineTo(a[b].x,a[b].y)}};THREE.Ve.prototype=Object.create(THREE.Ne.prototype);THREE.cc={Ek:"moveTo",xn:"lineTo",Kn:"quadraticCurveTo",kn:"bezierCurveTo",rr:"splineThru",lr:"arc",sn:"ellipse"};va=THREE.Ve.prototype;
va.moveTo=function(a,b){var c=Array.prototype.slice.call(arguments);this.ja.push({action:THREE.cc.Ek,ic:c})};va.lineTo=function(a,b){var c=Array.prototype.slice.call(arguments),d=this.ja[this.ja.length-1].ic,d=new THREE.Of(new THREE.k(d[d.length-2],d[d.length-1]),new THREE.k(a,b));this.Ya.push(d);this.ja.push({action:THREE.cc.xn,ic:c})};
va.quadraticCurveTo=function(a,b,c,d){var e=Array.prototype.slice.call(arguments),f=this.ja[this.ja.length-1].ic,f=new THREE.Bi(new THREE.k(f[f.length-2],f[f.length-1]),new THREE.k(a,b),new THREE.k(c,d));this.Ya.push(f);this.ja.push({action:THREE.cc.Kn,ic:e})};
va.bezierCurveTo=function(a,b,c,d,e,f){var g=Array.prototype.slice.call(arguments),h=this.ja[this.ja.length-1].ic,h=new THREE.qi(new THREE.k(h[h.length-2],h[h.length-1]),new THREE.k(a,b),new THREE.k(c,d),new THREE.k(e,f));this.Ya.push(h);this.ja.push({action:THREE.cc.kn,ic:g})};va.arc=function(a,b,c,d,e,f){var g=this.ja[this.ja.length-1].ic;this.Ss(a+g[g.length-2],b+g[g.length-1],c,c,d,e,f)};
va.Ss=function(a,b,c,d,e,f,g){var h=Array.prototype.slice.call(arguments),i=new THREE.Og(a,b,c,d,e,f,g);this.Ya.push(i);i=i.Ga(g?1:0);h.push(i.x);h.push(i.y);this.ja.push({action:THREE.cc.sn,ic:h})};va.vj=function(a){a||(a=40);for(var b=[],c=0;c<a;c++)b.push(this.Ga(c/a));return b};
va.tg=function(a,b){if(this.er)return console.log("tata"),this.vj(a,b);var a=a||12,c=[],d,e,f,g,h,i,j,l,k,p,r,s,q;d=0;for(e=this.ja.length;d<e;d++)switch(f=this.ja[d],g=f.action,f=f.ic,g){case THREE.cc.Ek:c.push(new THREE.k(f[0],f[1]));break;case THREE.cc.xn:c.push(new THREE.k(f[0],f[1]));break;case THREE.cc.Kn:h=f[2];i=f[3];k=f[0];p=f[1];0<c.length?(g=c[c.length-1],r=g.x,s=g.y):(g=this.ja[d-1].ic,r=g[g.length-2],s=g[g.length-1]);for(f=1;f<=a;f++)q=f/a,g=THREE.da.S.df(q,r,k,h),q=THREE.da.S.df(q,s,
p,i),c.push(new THREE.k(g,q));break;case THREE.cc.kn:h=f[4];i=f[5];k=f[0];p=f[1];j=f[2];l=f[3];0<c.length?(g=c[c.length-1],r=g.x,s=g.y):(g=this.ja[d-1].ic,r=g[g.length-2],s=g[g.length-1]);for(f=1;f<=a;f++)q=f/a,g=THREE.da.S.ef(q,r,k,j,h),q=THREE.da.S.ef(q,s,p,l,i),c.push(new THREE.k(g,q));break;case THREE.cc.rr:g=this.ja[d-1].ic;q=[new THREE.k(g[g.length-2],g[g.length-1])];g=a*f[0].length;q=q.concat(f[0]);q=new THREE.Mk(q);for(f=1;f<=g;f++)c.push(q.yh(f/g));break;case THREE.cc.lr:h=f[0];i=f[1];p=
f[2];j=f[3];g=f[4];k=!!f[5];r=g-j;s=2*a;for(f=1;f<=s;f++)q=f/s,k||(q=1-q),q=j+q*r,g=h+p*Math.cos(q),q=i+p*Math.sin(q),c.push(new THREE.k(g,q));break;case THREE.cc.sn:h=f[0];i=f[1];p=f[2];l=f[3];j=f[4];g=f[5];k=!!f[6];r=g-j;s=2*a;for(f=1;f<=s;f++)q=f/s,k||(q=1-q),q=j+q*r,g=h+p*Math.cos(q),q=i+l*Math.sin(q),c.push(new THREE.k(g,q))}d=c[c.length-1];1E-10>Math.abs(d.x-c[0].x)&&1E-10>Math.abs(d.y-c[0].y)&&c.splice(c.length-1,1);b&&c.push(c[0]);return c};
function kj(a){var b,c,d,e,f=[],g=new THREE.Ve;b=0;for(c=a.ja.length;b<c;b++)d=a.ja[b],e=d.ic,d=d.action,d==THREE.cc.Ek&&0!=g.ja.length&&(f.push(g),g=new THREE.Ve),g[d].apply(g,e);0!=g.ja.length&&f.push(g);if(0==f.length)return[];var h;e=[];b=!THREE.da.S.pf(f[0].tg());if(1==f.length)return g=f[0],h=new THREE.da,h.ja=g.ja,h.Ya=g.Ya,e.push(h),e;if(b){h=new THREE.da;b=0;for(c=f.length;b<c;b++)g=f[b],THREE.da.S.pf(g.tg())?(h.ja=g.ja,h.Ya=g.Ya,e.push(h),h=new THREE.da):h.Tc.push(g)}else{b=0;for(c=f.length;b<
c;b++)g=f[b],THREE.da.S.pf(g.tg())?(h&&e.push(h),h=new THREE.da,h.ja=g.ja,h.Ya=g.Ya):h.Tc.push(g);e.push(h)}return e}THREE.da=function(){THREE.Ve.apply(this,arguments);this.Tc=[]};THREE.da.prototype=Object.create(THREE.Ve.prototype);function uj(a,b){var c,d=a.Tc.length,e=[];for(c=0;c<d;c++)e[c]=rj(a.Tc[c],b,a.Ui);return e}function vj(a,b){var c=tj(a,b),d,e=a.Tc.length,f=[];for(d=0;d<e;d++)f[d]=tj(a.Tc[d],b,a.Ui);return{shape:c,Tc:f}}
THREE.da.S={jw:function(a,b){var c=a.concat(),d=c.concat(),e,f,g,h,i,j,l,k,p,r,s=[];for(i=0;i<b.length;i++){j=b[i];Array.prototype.push.apply(d,j);f=Number.POSITIVE_INFINITY;for(e=0;e<j.length;e++){p=j[e];r=[];for(k=0;k<c.length;k++)l=c[k],l=p.sh(l),r.push(l),l<f&&(f=l,g=e,h=k)}e=0<=h-1?h-1:c.length-1;f=0<=g-1?g-1:j.length-1;var q=[j[g],c[h],c[e]];k=THREE.hb.Xe.bg(q);var v=[j[g],j[f],c[h]];p=THREE.hb.Xe.bg(v);r=h;l=g;h+=1;g+=-1;0>h&&(h+=c.length);h%=c.length;0>g&&(g+=j.length);g%=j.length;e=0<=h-
1?h-1:c.length-1;f=0<=g-1?g-1:j.length-1;q=[j[g],c[h],c[e]];q=THREE.hb.Xe.bg(q);v=[j[g],j[f],c[h]];v=THREE.hb.Xe.bg(v);k+p>q+v&&(h=r,g=l,0>h&&(h+=c.length),h%=c.length,0>g&&(g+=j.length),g%=j.length,e=0<=h-1?h-1:c.length-1,f=0<=g-1?g-1:j.length-1);k=c.slice(0,h);p=c.slice(h);r=j.slice(g);l=j.slice(0,g);f=[j[g],j[f],c[h]];s.push([j[g],c[h],c[e]]);s.push(f);c=k.concat(r).concat(l).concat(p)}return{shape:c,Lu:s,Xs:d}},Tq:function(a,b){var c=THREE.da.S.jw(a,b),d=c.Xs,e=c.Lu,c=THREE.hb.Xe(c.shape,w),f,
g,h,i,j={};f=0;for(g=d.length;f<g;f++)i=d[f].x+":"+d[f].y,n!==j[i]&&console.log("Duplicate point",i),j[i]=f;f=0;for(g=c.length;f<g;f++){h=c[f];for(d=0;3>d;d++)i=h[d].x+":"+h[d].y,i=j[i],n!==i&&(h[d]=i)}f=0;for(g=e.length;f<g;f++){h=e[f];for(d=0;3>d;d++)i=h[d].x+":"+h[d].y,i=j[i],n!==i&&(h[d]=i)}return c.concat(e)},pf:function(a){return 0>THREE.hb.Xe.bg(a)},kt:function(a,b){var c=1-a;return c*c*b},lt:function(a,b){return 2*(1-a)*a*b},mt:function(a,b){return a*a*b},df:function(a,b,c,d){return this.kt(a,
b)+this.lt(a,c)+this.mt(a,d)},nt:function(a,b){var c=1-a;return c*c*c*b},ot:function(a,b){var c=1-a;return 3*c*c*a*b},pt:function(a,b){return 3*(1-a)*a*a*b},qt:function(a,b){return a*a*a*b},ef:function(a,b,c,d,e){return this.nt(a,b)+this.ot(a,c)+this.pt(a,d)+this.qt(a,e)}};
var wj=[],xj={},zj={update:function(a){for(var b=0;b<wj.length;b++)wj[b].update(a)},sy:function(a){-1===wj.indexOf(a)&&wj.push(a)},kq:function(a){a=wj.indexOf(a);-1!==a&&wj.splice(a,1)},add:function(a){n!==xj[a.name]&&console.log("THREE.AnimationHandler.add: Warning! "+a.name+" already exists in library. Overwriting.");xj[a.name]=a;if(t!==a.Gu){for(var b=0;b<a.v.length;b++){for(var c=0;c<a.v[b].keys.length;c++)if(0>a.v[b].keys[c].time&&(a.v[b].keys[c].time=0),n!==a.v[b].keys[c].Nm&&!(a.v[b].keys[c].Nm instanceof
THREE.vc)){var d=a.v[b].keys[c].Nm;a.v[b].keys[c].Nm=new THREE.vc(d[0],d[1],d[2],d[3])}if(a.v[b].keys.length&&n!==a.v[b].keys[0].F){d={};for(c=0;c<a.v[b].keys.length;c++)for(var e=0;e<a.v[b].keys[c].F.length;e++){var f=a.v[b].keys[c].F[e];d[f]=-1}a.v[b].WE=d;for(c=0;c<a.v[b].keys.length;c++){var g={};for(f in d){for(e=0;e<a.v[b].keys[c].F.length;e++)if(a.v[b].keys[c].F[e]===f){g[f]=a.v[b].keys[c].sv[e];break}e===a.v[b].keys[c].F.length&&(g[f]=0)}a.v[b].keys[c].sv=g}}for(c=1;c<a.v[b].keys.length;c++)a.v[b].keys[c].time===
a.v[b].keys[c-1].time&&(a.v[b].keys.splice(c,1),c--);for(c=0;c<a.v[b].keys.length;c++)a.v[b].keys[c].index=c}c=parseInt(a.length*a.og,10);a.Ak={};a.Ak.v=[];for(b=0;b<a.v.length;b++)a.Ak.v.push(Array(c));a.Gu=t}},get:function(a){if("string"===typeof a){if(xj[a])return xj[a];console.log("THREE.AnimationHandler.get: Couldn't find animation "+a);return u}},parse:function(a){var b=[];if(a instanceof THREE.ec)for(var c=0;c<a.Ta.length;c++)b.push(a.Ta[c]);else yj(a,b);return b}};
function yj(a,b){b.push(a);for(var c=0;c<a.children.length;c++)yj(a.children[c],b)}zj.LINEAR=0;zj.qk=1;zj.pi=2;THREE.zb=zj;THREE.jn=function(a,b,c){this.root=a;this.data=THREE.zb.get(b);this.v=THREE.zb.parse(a);this.currentTime=0;this.Zm=1;this.Eh=w;this.loop=this.bm=t;this.se=n!==c?c:THREE.zb.LINEAR;this.M=[];this.target=new THREE.d};va=THREE.jn.prototype;va.stop=function(){this.bm=this.Eh=w;THREE.zb.kq(this)};
va.update=function(a){if(w!==this.Eh){var b=["pos","rot","scl"],c,d,e,f,g,h,i,j,l;l=this.currentTime+=a*this.Zm;j=this.currentTime%=this.data.length;Math.min(j*this.data.og,this.data.length*this.data.og);for(var k=0,p=this.v.length;k<p;k++){a=this.v[k];i=a.Qi;for(var r=0;3>r;r++){c=b[r];g=i.Em[c];h=i.xm[c];if(h.time<=l){if(j<l)if(this.loop){g=this.data.v[k].keys[0];for(h=this.sg(c,k,1);h.time<j;)g=h,h=this.sg(c,k,h.index+1)}else{this.stop();return}else{do g=h,h=this.sg(c,k,h.index+1);while(h.time<
j)}i.Em[c]=g;i.xm[c]=h}a.Ec=t;a.cb=t;d=(j-g.time)/(h.time-g.time);e=g[c];f=h[c];if(0>d||1<d)console.log("THREE.Animation.update: Warning! Scale out of bounds:"+d+" on bone "+k),d=0>d?0:1;if("pos"===c)if(c=a.position,this.se===THREE.zb.LINEAR)c.x=e[0]+(f[0]-e[0])*d,c.y=e[1]+(f[1]-e[1])*d,c.a=e[2]+(f[2]-e[2])*d;else{if(this.se===THREE.zb.qk||this.se===THREE.zb.pi)this.M[0]=this.Vl("pos",k,g.index-1).Qj,this.M[1]=e,this.M[2]=f,this.M[3]=this.sg("pos",k,h.index+1).Qj,d=0.33*d+0.33,e=Aj(this,this.M,d),
c.x=e[0],c.y=e[1],c.a=e[2],this.se===THREE.zb.pi&&(d=Aj(this,this.M,1.01*d),this.target.set(d[0],d[1],d[2]),this.target.Wa(c),this.target.y=0,this.target.normalize(),d=Math.atan2(this.target.x,this.target.a),a.rotation.set(0,d,0))}else"rot"===c?THREE.vc.Fw(e,f,a.nc,d):"scl"===c&&(c=a.scale,c.x=e[0]+(f[0]-e[0])*d,c.y=e[1]+(f[1]-e[1])*d,c.a=e[2]+(f[2]-e[2])*d)}}}};
function Aj(a,b,c){var d=[],e=[],f,g,h,i,c=(b.length-1)*c;f=Math.floor(c);c-=f;d[0]=0===f?f:f-1;d[1]=f;d[2]=f>b.length-2?f:f+1;d[3]=f>b.length-3?f:f+2;f=b[d[0]];g=b[d[1]];h=b[d[2]];i=b[d[3]];d=c*c;b=c*d;e[0]=a.Hb(f[0],g[0],h[0],i[0],c,d,b);e[1]=a.Hb(f[1],g[1],h[1],i[1],c,d,b);e[2]=a.Hb(f[2],g[2],h[2],i[2],c,d,b);return e}va.Hb=function(a,b,c,d,e,f,g){a=0.5*(c-a);d=0.5*(d-b);return(2*(b-c)+a+d)*g+(-3*(b-c)-2*a-d)*f+a*e+b};
va.sg=function(a,b,c){for(var d=this.data.v[b].keys,c=this.se===THREE.zb.qk||this.se===THREE.zb.pi?c<d.length-1?c:d.length-1:c%d.length;c<d.length;c++)if(n!==d[c][a])return d[c];return this.data.v[b].keys[0]};va.Vl=function(a,b,c){for(var d=this.data.v[b].keys,c=this.se===THREE.zb.qk||this.se===THREE.zb.pi?0<c?c:0:0<=c?c:c+d.length;0<=c;c--)if(n!==d[c][a])return d[c];return this.data.v[b].keys[d.length-1]};
THREE.vi=function(a,b,c){this.root=a;this.data=THREE.zb.get(b);this.v=THREE.zb.parse(a);this.currentTime=0;this.Zm=0.001;this.Eh=w;this.loop=this.bm=t;this.Bk=n!==c?c:t;a=0;for(b=this.v.length;a<b;a++){var c=this.data.v[a].Kg,d=this.v[a];if(this.data.v[a].keys.length&&c){for(var e=0;e<c.length;e++){var f=c[e],g=this.sg(f,a,0);g&&g.apply(f)}d.Ec=w;this.data.v[a].Lj.Jc();d.cb=t}}};
THREE.vi.prototype.stop=function(){this.bm=this.Eh=w;THREE.zb.kq(this);for(var a=0;a<this.data.v.length;a++){var b=this.v[a],c=this.data.v[a];if(n!==c.Qi){var d=c.Qi.Wp;b instanceof THREE.zd?(d.copy(b.rd),b.rd=d):(d.copy(b.I),b.I=d);delete c.Qi}}};
THREE.vi.prototype.update=function(a){if(this.Eh){var b,c,d,e,f=this.data.Ak.v,g,h,i;h=this.currentTime+=a*this.Zm;g=this.currentTime%=this.data.length;g<this.Sw&&(g=this.currentTime=this.Sw+g);e=parseInt(Math.min(g*this.data.og,this.data.length*this.data.og),10);if((i=g<h)&&!this.loop){for(var a=0,j=this.v.length;a<j;a++){var l=this.data.v[a].keys,f=this.data.v[a].Kg;d=l.length-1;e=this.v[a];if(l.length){for(l=0;l<f.length;l++)g=f[l],(h=this.Vl(g,a,d))&&h.apply(g);this.data.v[a].Lj.Jc();e.cb=t}}this.stop()}else if(!(g<
this.startTime)){a=0;for(j=this.v.length;a<j;a++){d=this.v[a];b=this.data.v[a];var l=b.keys,k=b.Qi;if(this.Bk&&n!==f[a][e])d instanceof THREE.zd?(d.rd=f[a][e],d.cb=w):(d.I=f[a][e],d.cb=t);else if(l.length){this.Bk&&k&&(d instanceof THREE.zd?d.rd=k.Wp:d.I=k.Wp);b=k.Em;c=k.xm;if(b&&c){if(c.time<=h){if(i&&this.loop){b=l[0];for(c=l[1];c.time<g;)b=c,c=l[b.index+1]}else if(!i)for(var p=l.length-1;c.time<g&&c.index!==p;)b=c,c=l[b.index+1];k.Em=b;k.xm=c}c.time>=g?b.Hb(c,g):b.Hb(c,c.time)}this.data.v[a].Lj.Jc();
d.cb=t}}if(this.Bk&&n===f[0][e]){this.v[0].Nb(t);for(a=0;a<this.v.length;a++)f[a][e]=this.v[a]instanceof THREE.zd?this.v[a].rd.clone():this.v[a].I.clone()}}}};THREE.vi.prototype.sg=function(a,b,c){b=this.data.v[b].keys;for(c%=b.length;c<b.length;c++)if(b[c].Ch(a))return b[c];return b[0]};THREE.vi.prototype.Vl=function(a,b,c){b=this.data.v[b].keys;for(c=0<=c?c:c+b.length;0<=c;c--)if(b[c].Ch(a))return b[c];return b[b.length-1]};
THREE.vr=function(a,b,c){THREE.w.call(this);var d=new THREE.tc(90,1,a,b);d.ud.set(0,-1,0);d.tb(new THREE.d(1,0,0));this.add(d);var e=new THREE.tc(90,1,a,b);e.ud.set(0,-1,0);e.tb(new THREE.d(-1,0,0));this.add(e);var f=new THREE.tc(90,1,a,b);f.ud.set(0,0,1);f.tb(new THREE.d(0,1,0));this.add(f);var g=new THREE.tc(90,1,a,b);g.ud.set(0,0,-1);g.tb(new THREE.d(0,-1,0));this.add(g);var h=new THREE.tc(90,1,a,b);h.ud.set(0,-1,0);h.tb(new THREE.d(0,0,1));this.add(h);var i=new THREE.tc(90,1,a,b);i.ud.set(0,-1,
0);i.tb(new THREE.d(0,0,-1));this.add(i);this.Lm=new THREE.Ye(c,c,{ka:THREE.Hk,Kb:THREE.Td,mb:THREE.Td});this.TE=function(a,b){var c=this.Lm,p=c.lb;c.lb=w;c.$e=0;a.B(b,d,c);c.$e=1;a.B(b,e,c);c.$e=2;a.B(b,f,c);c.$e=3;a.B(b,g,c);c.$e=4;a.B(b,h,c);c.lb=p;c.$e=5;a.B(b,i,c)}};THREE.vr.prototype=Object.create(THREE.w.prototype);
THREE.sk=function(a,b,c,d,e,f,g){THREE.$b.call(this);this.pe=c;this.left=-a/2;this.right=a/2;this.top=b/2;this.bottom=-b/2;this.fe=new THREE.Ug(a/-2,a/2,b/2,b/-2,f,g);this.Id=new THREE.tc(c,a/b,d,e);this.zoom=1;Bj(this)};THREE.sk.prototype=Object.create(THREE.$b.prototype);function Bj(a){a.Ba=a.Id.Ba;a.Fa=a.Id.Fa;a.Id.pe=a.pe/a.zoom;a.Id.Gf();a.ra=a.Id.ra;a.qp=t;a.Du=w}THREE.sk.prototype.tq=function(a,b){this.Id.Si=a/b;this.left=-a/2;this.right=a/2;this.top=b/2;this.bottom=-b/2};
THREE.sk.prototype.Gf=function(){if(this.qp)Bj(this);else{Bj(this);var a=this.Id.Si,b=(this.Id.Ba+this.Id.Fa)/2,b=Math.tan(this.pe/2)*b,a=2*b*a/2,b=b/this.zoom,a=a/this.zoom;this.fe.left=-a;this.fe.right=a;this.fe.top=b;this.fe.bottom=-b;this.fe.Gf();this.Ba=this.fe.Ba;this.Fa=this.fe.Fa;this.ra=this.fe.ra;this.qp=w;this.Du=t}};
THREE.ni=function(a,b){THREE.G.call(this);for(var c=0.707*a,d=0.707*b,c=[[a,0,0],[b,0,0],[-a,0,0],[-b,0,0],[0,a,0],[0,b,0],[0,-a,0],[0,-b,0],[0,0,a],[0,0,b],[0,0,-a],[0,0,-b],[c,c,0],[d,d,0],[-c,-c,0],[-d,-d,0],[c,-c,0],[d,-d,0],[-c,c,0],[-d,d,0],[c,0,c],[d,0,d],[-c,0,-c],[-d,0,-d],[c,0,-c],[d,0,-d],[-c,0,c],[-d,0,d],[0,c,c],[0,d,d],[0,-c,-c],[0,-d,-d],[0,c,-c],[0,d,-d],[0,-c,c],[0,-d,d]],d=0,e=c.length;d<e;d++)this.e.push(new THREE.d(c[d][0],c[d][1],c[d][2]))};THREE.ni.prototype=Object.create(THREE.G.prototype);
THREE.sr=function(a,b,c,d){THREE.G.call(this);var a=a||50,c=n!==c?c:0,d=n!==d?d:2*Math.PI,b=n!==b?Math.max(3,b):8,e,f=[];e=new THREE.d;var g=new THREE.k(0.5,0.5);this.e.push(e);f.push(g);for(e=0;e<=b;e++){var h=new THREE.d;h.x=a*Math.cos(c+e/b*d);h.y=a*Math.sin(c+e/b*d);this.e.push(h);f.push(new THREE.k((h.x/a+1)/2,-(h.y/a+1)/2+1))}c=new THREE.d(0,0,-1);for(e=1;e<=b;e++)this.l.push(new THREE.K(e,e+1,0,[c,c,c])),this.C[0].push([f[e],f[e+1],g]);cj(this);bj(this);this.Eb=new THREE.Wd(new THREE.d,a)};
THREE.sr.prototype=Object.create(THREE.G.prototype);
THREE.pn=function(a,b,c,d,e,f){function g(a,b,c,d,e,f,g,q){var v,y=h.xd,F=h.kd,C=e/2,z=f/2,G=h.e.length;if("x"===a&&"y"===b||"y"===a&&"x"===b)v="z";else if("x"===a&&"z"===b||"z"===a&&"x"===b)v="y",F=h.Il;else if("z"===a&&"y"===b||"y"===a&&"z"===b)v="x",y=h.Il;var B=y+1,J=F+1,O=e/y,I=f/F,P=new THREE.d;P[v]=0<g?1:-1;for(e=0;e<J;e++)for(f=0;f<B;f++){var E=new THREE.d;E[a]=(f*O-C)*c;E[b]=(e*I-z)*d;E[v]=g;h.e.push(E)}for(e=0;e<F;e++)for(f=0;f<y;f++)a=new THREE.Z(f+B*e+G,f+B*(e+1)+G,f+1+B*(e+1)+G,f+1+B*
e+G),a.n.copy(P),a.p.push(P.clone(),P.clone(),P.clone(),P.clone()),a.va=q,h.l.push(a),h.C[0].push([new THREE.k(f/y,1-e/F),new THREE.k(f/y,1-(e+1)/F),new THREE.k((f+1)/y,1-(e+1)/F),new THREE.k((f+1)/y,1-e/F)])}THREE.G.call(this);var h=this;this.width=a;this.height=b;this.depth=c;this.xd=d||1;this.kd=e||1;this.Il=f||1;a=this.width/2;b=this.height/2;c=this.depth/2;g("z","y",-1,-1,this.depth,this.height,a,0);g("z","y",1,-1,this.depth,this.height,-a,1);g("x","z",1,1,this.width,this.depth,b,2);g("x","z",
1,-1,this.width,this.depth,-b,3);g("x","y",1,-1,this.width,this.height,c,4);g("x","y",-1,-1,this.width,this.height,-c,5);cj(this);$i(this)};THREE.pn.prototype=Object.create(THREE.G.prototype);
THREE.si=function(a,b,c,d,e,f){THREE.G.call(this);var a=n!==a?a:20,b=n!==b?b:20,c=n!==c?c:100,g=c/2,d=d||8,e=e||1,h,i,j=[],l=[];for(i=0;i<=e;i++){var k=[],p=[],r=i/e,s=r*(b-a)+a;for(h=0;h<=d;h++){var q=h/d,v=new THREE.d;v.x=s*Math.sin(2*q*Math.PI);v.y=-r*c+g;v.a=s*Math.cos(2*q*Math.PI);this.e.push(v);k.push(this.e.length-1);p.push(new THREE.k(q,1-r))}j.push(k);l.push(p)}c=(b-a)/c;for(h=0;h<d;h++){0!==a?(k=this.e[j[0][h]].clone(),p=this.e[j[0][h+1]].clone()):(k=this.e[j[1][h]].clone(),p=this.e[j[1][h+
1]].clone());k.Wj(Math.sqrt(k.x*k.x+k.a*k.a)*c).normalize();p.Wj(Math.sqrt(p.x*p.x+p.a*p.a)*c).normalize();for(i=0;i<e;i++){var r=j[i][h],s=j[i+1][h],q=j[i+1][h+1],v=j[i][h+1],y=k.clone(),F=k.clone(),C=p.clone(),z=p.clone(),G=l[i][h].clone(),B=l[i+1][h].clone(),J=l[i+1][h+1].clone(),O=l[i][h+1].clone();this.l.push(new THREE.Z(r,s,q,v,[y,F,C,z]));this.C[0].push([G,B,J,O])}}if(!f&&0<a){this.e.push(new THREE.d(0,g,0));for(h=0;h<d;h++)r=j[0][h],s=j[0][h+1],q=this.e.length-1,y=new THREE.d(0,1,0),F=new THREE.d(0,
1,0),C=new THREE.d(0,1,0),G=l[0][h].clone(),B=l[0][h+1].clone(),J=new THREE.k(B.kk,0),this.l.push(new THREE.K(r,s,q,[y,F,C])),this.C[0].push([G,B,J])}if(!f&&0<b){this.e.push(new THREE.d(0,-g,0));for(h=0;h<d;h++)r=j[i][h+1],s=j[i][h],q=this.e.length-1,y=new THREE.d(0,-1,0),F=new THREE.d(0,-1,0),C=new THREE.d(0,-1,0),G=l[i][h+1].clone(),B=l[i][h].clone(),J=new THREE.k(B.kk,1),this.l.push(new THREE.K(r,s,q,[y,F,C])),this.C[0].push([G,B,J])}cj(this);bj(this)};THREE.si.prototype=Object.create(THREE.G.prototype);
THREE.Pa=function(a,b){"undefined"!==typeof a&&(THREE.G.call(this),a=a instanceof Array?a:[a],this.Ew=qj(a[a.length-1]),this.ol(a,b),cj(this),bj(this))};THREE.Pa.prototype=Object.create(THREE.G.prototype);THREE.Pa.prototype.ol=function(a,b){for(var c=a.length,d=0;d<c;d++)this.nl(a[d],b)};
THREE.Pa.prototype.nl=function(a,b){function c(a,b,c){b||console.log("die");return b.clone().T(c).u(a)}function d(a,b,c){var d=THREE.Pa.Ea,e=THREE.Pa.Yd,f=THREE.Pa.Ji,g=THREE.Pa.Gs,h=THREE.Pa.Hs,i=THREE.Pa.Is;d.set(a.x-b.x,a.y-b.y);e.set(a.x-c.x,a.y-c.y);d=d.normalize();e=e.normalize();f.set(-d.y,d.x);g.set(e.y,-e.x);h.copy(a).u(f);i.copy(a).u(g);if(h.kb(i))return g.clone();h.copy(b).u(f);i.copy(c).u(g);f=d.fa(g);g=i.Wa(h).fa(g);0===f&&(console.log("Either infinite or no solutions!"),0===g?console.log("Its finite solutions."):
console.log("Too bad, no solutions."));g/=f;return 0>g?(b=Math.atan2(b.y-a.y,b.x-a.x),a=Math.atan2(c.y-a.y,c.x-a.x),b>a&&(a+=2*Math.PI),c=(b+a)/2,a=-Math.cos(c),c=-Math.sin(c),new THREE.k(a,c)):d.T(g).u(h).Wa(a).clone()}function e(c,d){var e,f;for(S=c.length;0<=--S;){e=S;f=S-1;0>f&&(f=c.length-1);for(var g=0,h=r+2*l,g=0;g<h;g++){var i=aa*g,j=aa*(g+1),k=d+e+i,i=d+f+i,p=d+f+j,j=d+e+j,q=c,s=g,v=h,z=e,y=f,k=k+R,i=i+R,p=p+R,j=j+R;E.l.push(new THREE.Z(k,i,p,j,u,u,F));k=C.lu(E,a,q,b,k,i,p,j,s,v,z,y);E.C[0].push(k)}}}
function f(a,b,c){E.e.push(new THREE.d(a,b,c))}function g(c,d,e,f){c+=R;d+=R;e+=R;E.l.push(new THREE.K(c,d,e,u,u,y));c=f?C.ep(E,a,b,c,d,e):C.fp(E,a,b,c,d,e);E.C[0].push(c)}var h=n!==b.Bo?b.Bo:100,i=n!==b.vl?b.vl:6,j=n!==b.ul?b.ul:i-2,l=n!==b.st?b.st:3,k=n!==b.tl?b.tl:t,p=n!==b.Kd?b.Kd:12,r=n!==b.Uw?b.Uw:1,s=b.nA,q,v=w,y=b.o,F=b.mA,C=n!==b.Ok?b.Ok:THREE.Pa.ao,z,G,B,J;s&&(q=s.vj(r),v=t,k=w,z=n!==b.frames?b.frames:new THREE.Gi.tn(s,r,w),G=new THREE.d,B=new THREE.d,J=new THREE.d);k||(j=i=l=0);var O,I,
P,E=this,R=this.e.length,p=a.er?vj(a,p):{shape:rj(a,p),Tc:uj(a,p)},K=p.shape,p=p.Tc;if(s=!THREE.da.S.pf(K)){K=K.reverse();I=0;for(P=p.length;I<P;I++)O=p[I],THREE.da.S.pf(O)&&(p[I]=O.reverse());s=w}var V=THREE.da.S.Tq(K,p),s=K;I=0;for(P=p.length;I<P;I++)O=p[I],K=K.concat(O);var M,W,la,X,aa=K.length,ia=V.length,Ia=[],S=0,ja=s.length;M=ja-1;for(W=S+1;S<ja;S++,M++,W++)M===ja&&(M=0),W===ja&&(W=0),Ia[S]=d(s[S],s[M],s[W]);var wa=[],ba,Q=Ia.concat();I=0;for(P=p.length;I<P;I++){O=p[I];ba=[];S=0;ja=O.length;
M=ja-1;for(W=S+1;S<ja;S++,M++,W++)M===ja&&(M=0),W===ja&&(W=0),ba[S]=d(O[S],O[M],O[W]);wa.push(ba);Q=Q.concat(ba)}for(M=0;M<l;M++){O=M/l;la=i*(1-O);W=j*Math.sin(O*Math.PI/2);S=0;for(ja=s.length;S<ja;S++)X=c(s[S],Ia[S],W),f(X.x,X.y,-la);I=0;for(P=p.length;I<P;I++){O=p[I];ba=wa[I];S=0;for(ja=O.length;S<ja;S++)X=c(O[S],ba[S],W),f(X.x,X.y,-la)}}W=j;for(S=0;S<aa;S++)X=k?c(K[S],Q[S],W):K[S],v?(B.copy(z.tf[0]).T(X.x),G.copy(z.Vi[0]).T(X.y),J.copy(q[0]).u(B).u(G),f(J.x,J.y,J.a)):f(X.x,X.y,0);for(O=1;O<=r;O++)for(S=
0;S<aa;S++)X=k?c(K[S],Q[S],W):K[S],v?(B.copy(z.tf[O]).T(X.x),G.copy(z.Vi[O]).T(X.y),J.copy(q[O]).u(B).u(G),f(J.x,J.y,J.a)):f(X.x,X.y,h/r*O);for(M=l-1;0<=M;M--){O=M/l;la=i*(1-O);W=j*Math.sin(O*Math.PI/2);S=0;for(ja=s.length;S<ja;S++)X=c(s[S],Ia[S],W),f(X.x,X.y,h+la);I=0;for(P=p.length;I<P;I++){O=p[I];ba=wa[I];S=0;for(ja=O.length;S<ja;S++)X=c(O[S],ba[S],W),v?f(X.x,X.y+q[r-1].y,q[r-1].x+la):f(X.x,X.y,h+la)}}if(k){i=0*aa;for(S=0;S<ia;S++)h=V[S],g(h[2]+i,h[1]+i,h[0]+i,t);i=aa*(r+2*l);for(S=0;S<ia;S++)h=
V[S],g(h[0]+i,h[1]+i,h[2]+i,w)}else{for(S=0;S<ia;S++)h=V[S],g(h[2],h[1],h[0],t);for(S=0;S<ia;S++)h=V[S],g(h[0]+aa*r,h[1]+aa*r,h[2]+aa*r,w)}h=0;e(s,h);h+=s.length;I=0;for(P=p.length;I<P;I++)O=p[I],e(O,h),h+=O.length};
THREE.Pa.ao={fp:function(a,b,c,d,e,f){b=a.e[e].x;e=a.e[e].y;c=a.e[f].x;f=a.e[f].y;return[new THREE.k(a.e[d].x,a.e[d].y),new THREE.k(b,e),new THREE.k(c,f)]},ep:function(a,b,c,d,e,f){return this.fp(a,b,c,d,e,f)},lu:function(a,b,c,d,e,f,g,h){var b=a.e[e].x,c=a.e[e].y,e=a.e[e].a,d=a.e[f].x,i=a.e[f].y,f=a.e[f].a,j=a.e[g].x,l=a.e[g].y,g=a.e[g].a,k=a.e[h].x,p=a.e[h].y,a=a.e[h].a;return 0.01>Math.abs(c-i)?[new THREE.k(b,1-e),new THREE.k(d,1-f),new THREE.k(j,1-g),new THREE.k(k,1-a)]:[new THREE.k(c,1-e),new THREE.k(i,
1-f),new THREE.k(l,1-g),new THREE.k(p,1-a)]}};THREE.Pa.Ea=new THREE.k;THREE.Pa.Yd=new THREE.k;THREE.Pa.Ji=new THREE.k;THREE.Pa.Gs=new THREE.k;THREE.Pa.Hs=new THREE.k;THREE.Pa.Is=new THREE.k;THREE.Lk=function(a,b){THREE.G.call(this);w===a instanceof Array&&(a=[a]);this.Ew=qj(a[a.length-1]);this.ol(a,b);cj(this);bj(this)};THREE.Lk.prototype=Object.create(THREE.G.prototype);THREE.Lk.prototype.ol=function(a,b){for(var c=0,d=a.length;c<d;c++)this.nl(a[c],b);return this};
THREE.Lk.prototype.nl=function(a,b){n===b&&(b={});var c=b.o,d=n===b.Ok?THREE.Pa.ao:b.Ok,e,f,g,h=this.e.length;e=a.er?vj(a,n!==b.Kd?b.Kd:12):{shape:rj(a,n!==b.Kd?b.Kd:12),Tc:uj(a,n!==b.Kd?b.Kd:12)};var i=e.shape,j=e.Tc;if(!THREE.da.S.pf(i)){i=i.reverse();e=0;for(f=j.length;e<f;e++)g=j[e],THREE.da.S.pf(g)&&(j[e]=g.reverse())}var l=THREE.da.S.Tq(i,j);e=0;for(f=j.length;e<f;e++)g=j[e],i=i.concat(g);j=i.length;f=l.length;for(e=0;e<j;e++)g=i[e],this.e.push(new THREE.d(g.x,g.y,0));for(e=0;e<f;e++)j=l[e],
i=j[0]+h,g=j[1]+h,j=j[2]+h,this.l.push(new THREE.K(i,g,j,u,u,c)),this.C[0].push(d.ep(this,a,b,i,g,j))};
THREE.Ir=function(a,b,c){THREE.G.call(this);var b=b||12,c=c||2*Math.PI,d=[],e;e=new THREE.D;var c=c/b,f=Math.cos(c),c=Math.sin(c);e.set(f,-c,0,0,c,f,0,0,0,0,1,0,0,0,0,1);for(f=0;f<a.length;f++)d[f]=a[f].clone(),this.e.push(d[f]);for(var g=b+1,c=0;c<g;c++)for(f=0;f<d.length;f++)d[f]=e.X(d[f].clone()),this.e.push(d[f]);for(c=0;c<b;c++){d=0;for(e=a.length;d<e-1;d++)this.l.push(new THREE.Z(c*e+d,(c+1)%g*e+d,(c+1)%g*e+(d+1)%e,c*e+(d+1)%e)),this.C[0].push([new THREE.k(1-c/b,d/e),new THREE.k(1-(c+1)/b,d/
e),new THREE.k(1-(c+1)/b,(d+1)/e),new THREE.k(1-c/b,(d+1)/e)])}cj(this);bj(this);this.Jd()};THREE.Ir.prototype=Object.create(THREE.G.prototype);
THREE.In=function(a,b,c,d){THREE.G.call(this);this.width=a;this.height=b;this.xd=c||1;this.kd=d||1;for(var c=a/2,e=b/2,d=this.xd,f=this.kd,g=d+1,h=f+1,i=this.width/d,j=this.height/f,l=new THREE.d(0,0,1),a=0;a<h;a++)for(b=0;b<g;b++)this.e.push(new THREE.d(b*i-c,-(a*j-e),0));for(a=0;a<f;a++)for(b=0;b<d;b++)c=new THREE.Z(b+g*a,b+g*(a+1),b+1+g*(a+1),b+1+g*a),c.n.copy(l),c.p.push(l.clone(),l.clone(),l.clone(),l.clone()),this.l.push(c),this.C[0].push([new THREE.k(b/d,1-a/f),new THREE.k(b/d,1-(a+1)/f),new THREE.k((b+
1)/d,1-(a+1)/f),new THREE.k((b+1)/d,1-a/f)]);cj(this)};THREE.In.prototype=Object.create(THREE.G.prototype);
THREE.Cd=function(a,b,c,d,e,f,g){THREE.G.call(this);this.V=a||50;this.xd=Math.max(3,Math.floor(b)||8);this.kd=Math.max(2,Math.floor(c)||6);for(var d=n!==d?d:0,e=n!==e?e:2*Math.PI,f=n!==f?f:0,g=n!==g?g:Math.PI,h=[],i=[],c=0;c<=this.kd;c++){for(var j=[],l=[],b=0;b<=this.xd;b++){var k=b/this.xd,p=c/this.kd,r=new THREE.d;r.x=-this.V*Math.cos(d+k*e)*Math.sin(f+p*g);r.y=this.V*Math.cos(f+p*g);r.a=this.V*Math.sin(d+k*e)*Math.sin(f+p*g);this.e.push(r);j.push(this.e.length-1);l.push(new THREE.k(k,1-p))}h.push(j);
i.push(l)}for(c=0;c<this.kd;c++)for(b=0;b<this.xd;b++){var d=h[c][b+1],e=h[c][b],f=h[c+1][b],g=h[c+1][b+1],j=this.e[d].clone().normalize(),l=this.e[e].clone().normalize(),k=this.e[f].clone().normalize(),p=this.e[g].clone().normalize(),r=i[c][b+1].clone(),s=i[c][b].clone(),q=i[c+1][b].clone(),v=i[c+1][b+1].clone();Math.abs(this.e[d].y)===this.V?(this.l.push(new THREE.K(d,f,g,[j,k,p])),this.C[0].push([r,q,v])):Math.abs(this.e[f].y)===this.V?(this.l.push(new THREE.K(d,e,f,[j,l,k])),this.C[0].push([r,
s,q])):(this.l.push(new THREE.Z(d,e,f,g,[j,l,k,p])),this.C[0].push([r,s,q,v]))}cj(this);bj(this);this.Eb=new THREE.Wd(new THREE.d,a)};THREE.Cd.prototype=Object.create(THREE.G.prototype);THREE.ks=function(a,b){var c=THREE.hb.ku(a,b);b.Bo=n!==b.height?b.height:50;n===b.vl&&(b.vl=10);n===b.ul&&(b.ul=8);n===b.tl&&(b.tl=w);THREE.Pa.call(this,c,b)};THREE.ks.prototype=Object.create(THREE.Pa.prototype);
THREE.Zn=function(a,b,c,d,e){THREE.G.call(this);this.V=a||100;this.Ff=b||40;this.Tb=c||8;this.gb=d||6;this.arc=e||2*Math.PI;e=new THREE.d;a=[];b=[];for(c=0;c<=this.Tb;c++)for(d=0;d<=this.gb;d++){var f=d/this.gb*this.arc,g=2*c/this.Tb*Math.PI;e.x=this.V*Math.cos(f);e.y=this.V*Math.sin(f);var h=new THREE.d;h.x=(this.V+this.Ff*Math.cos(g))*Math.cos(f);h.y=(this.V+this.Ff*Math.cos(g))*Math.sin(f);h.a=this.Ff*Math.sin(g);this.e.push(h);a.push(new THREE.k(d/this.gb,c/this.Tb));b.push(h.clone().Wa(e).normalize())}for(c=
1;c<=this.Tb;c++)for(d=1;d<=this.gb;d++){var e=(this.gb+1)*c+d-1,f=(this.gb+1)*(c-1)+d-1,g=(this.gb+1)*(c-1)+d,h=(this.gb+1)*c+d,i=new THREE.Z(e,f,g,h,[b[e],b[f],b[g],b[h]]);i.n.u(b[e]);i.n.u(b[f]);i.n.u(b[g]);i.n.u(b[h]);i.n.normalize();this.l.push(i);this.C[0].push([a[e].clone(),a[f].clone(),a[g].clone(),a[h].clone()])}cj(this)};THREE.Zn.prototype=Object.create(THREE.G.prototype);
THREE.ns=function(a,b,c,d,e,f,g){function h(a,b,c,d,e,f){var g=Math.cos(a),b=Math.sin(a),a=a*(c/d),c=Math.cos(a),g=g*0.5*e*(2+c),b=0.5*e*(2+c)*b,e=0.5*f*e*Math.sin(a);return new THREE.d(g,b,e)}THREE.G.call(this);this.V=a||200;this.Ff=b||40;this.Tb=c||64;this.gb=d||8;this.Dg=e||2;this.gq=f||3;this.pp=g||1;this.jc=Array(this.Tb);c=new THREE.d;d=new THREE.d;e=new THREE.d;for(a=0;a<this.Tb;++a){this.jc[a]=Array(this.gb);for(b=0;b<this.gb;++b){var i=2*(a/this.Tb)*this.Dg*Math.PI,g=2*(b/this.gb)*Math.PI,
f=h(i,g,this.gq,this.Dg,this.V,this.pp),i=h(i+0.01,g,this.gq,this.Dg,this.V,this.pp);c.sub(i,f);d.add(i,f);vi(e,c,d);vi(d,e,c);e.normalize();d.normalize();i=-this.Ff*Math.cos(g);g=this.Ff*Math.sin(g);f.x+=i*d.x+g*e.x;f.y+=i*d.y+g*e.y;f.a+=i*d.a+g*e.a;this.jc[a][b]=this.e.push(new THREE.d(f.x,f.y,f.a))-1}}for(a=0;a<this.Tb;++a)for(b=0;b<this.gb;++b){var e=(a+1)%this.Tb,f=(b+1)%this.gb,c=this.jc[a][b],d=this.jc[e][b],e=this.jc[e][f],f=this.jc[a][f],g=new THREE.k(a/this.Tb,b/this.gb),i=new THREE.k((a+
1)/this.Tb,b/this.gb),j=new THREE.k((a+1)/this.Tb,(b+1)/this.gb),l=new THREE.k(a/this.Tb,(b+1)/this.gb);this.l.push(new THREE.Z(c,d,e,f));this.C[0].push([g,i,j,l])}cj(this);bj(this);this.Jd()};THREE.ns.prototype=Object.create(THREE.G.prototype);
THREE.Gi=function(a,b,c,d,e,f){THREE.G.call(this);this.path=a;this.ze=b||64;this.V=c||1;this.ye=d||8;this.closed=e||w;f&&(this.debug=new THREE.w);this.jc=[];var g,h,e=this.ze+1,i,j,l,f=new THREE.d,k,p,r,b=new THREE.Gi.tn(this.path,this.ze,this.closed);k=b.Qq;p=b.tf;r=b.Vi;this.Qq=k;this.tf=p;this.Vi=r;for(b=0;b<e;b++){this.jc[b]=[];d=b/(e-1);l=a.yh(d);d=k[b];g=p[b];h=r[b];this.debug&&(this.debug.add(new THREE.yd(d,l,c,255)),this.debug.add(new THREE.yd(g,l,c,16711680)),this.debug.add(new THREE.yd(h,
l,c,65280)));for(d=0;d<this.ye;d++)i=2*(d/this.ye)*Math.PI,j=-this.V*Math.cos(i),i=this.V*Math.sin(i),f.copy(l),f.x+=j*g.x+i*h.x,f.y+=j*g.y+i*h.y,f.a+=j*g.a+i*h.a,this.jc[b][d]=this.e.push(new THREE.d(f.x,f.y,f.a))-1}for(b=0;b<this.ze;b++)for(d=0;d<this.ye;d++)e=this.closed?(b+1)%this.ze:b+1,f=(d+1)%this.ye,a=this.jc[b][d],c=this.jc[e][d],e=this.jc[e][f],f=this.jc[b][f],k=new THREE.k(b/this.ze,d/this.ye),p=new THREE.k((b+1)/this.ze,d/this.ye),r=new THREE.k((b+1)/this.ze,(d+1)/this.ye),g=new THREE.k(b/
this.ze,(d+1)/this.ye),this.l.push(new THREE.Z(a,c,e,f)),this.C[0].push([k,p,r,g]);cj(this);bj(this);this.Jd()};THREE.Gi.prototype=Object.create(THREE.G.prototype);
THREE.Gi.tn=function(a,b,c){var d=new THREE.d,e=[],f=[],g=[],h=new THREE.d,i=new THREE.D,b=b+1,j,l,k;this.Qq=e;this.tf=f;this.Vi=g;for(j=0;j<b;j++){l=j/(b-1);k=e;var p=j,r=a;l=nj(r,l);l=r.wj(l);k[p]=l;e[j].normalize()}f[0]=new THREE.d;g[0]=new THREE.d;a=Number.MAX_VALUE;j=Math.abs(e[0].x);l=Math.abs(e[0].y);k=Math.abs(e[0].a);j<=a&&(a=j,d.set(1,0,0));l<=a&&(a=l,d.set(0,1,0));k<=a&&d.set(0,0,1);vi(h,e[0],d).normalize();vi(f[0],e[0],h);vi(g[0],e[0],f[0]);for(j=1;j<b;j++)f[j]=f[j-1].clone(),g[j]=g[j-
1].clone(),vi(h,e[j-1],e[j]),1E-4<h.length()&&(h.normalize(),d=Math.acos(e[j-1].fa(e[j])),xi(i,h,d).X(f[j])),vi(g[j],e[j],f[j]);if(c){d=Math.acos(f[0].fa(f[b-1]));d/=b-1;0<e[0].fa(vi(h,f[0],f[b-1]))&&(d=-d);for(j=1;j<b;j++)xi(i,e[j],d*j).X(f[j]),vi(g[j],e[j],f[j])}};
THREE.Ai=function(a,b,c,d){function e(a){var b=a.normalize().clone();b.index=i.e.push(b)-1;var c=Math.atan2(a.a,-a.x)/2/Math.PI+0.5,a=Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.a*a.a))/Math.PI+0.5;b.wa=new THREE.k(c,1-a);return b}function f(a,b,c,d){1>d?(d=new THREE.K(a.index,b.index,c.index,[a.clone(),b.clone(),c.clone()]),d.qa.u(a).u(b).u(c).gd(3),d.n=d.qa.clone().normalize(),i.l.push(d),d=Math.atan2(d.qa.a,-d.qa.x),i.C[0].push([h(a.wa,a,d),h(b.wa,b,d),h(c.wa,c,d)])):(d-=1,f(a,g(a,b),g(a,c),d),f(g(a,b),
b,g(b,c),d),f(g(a,c),g(b,c),c,d),f(g(a,b),g(b,c),g(a,c),d))}function g(a,b){k[a.index]||(k[a.index]=[]);k[b.index]||(k[b.index]=[]);var c=k[a.index][b.index];n===c&&(k[a.index][b.index]=k[b.index][a.index]=c=e((new THREE.d).add(a,b).gd(2)));return c}function h(a,b,c){0>c&&1===a.x&&(a=new THREE.k(a.x-1,a.y));0===b.x&&0===b.a&&(a=new THREE.k(c/2/Math.PI+0.5,a.y));return a}THREE.G.call(this);for(var c=c||1,d=d||0,i=this,j=0,l=a.length;j<l;j++)e(new THREE.d(a[j][0],a[j][1],a[j][2]));for(var k=[],a=this.e,
j=0,l=b.length;j<l;j++)f(a[b[j][0]],a[b[j][1]],a[b[j][2]],d);$i(this);j=0;for(l=this.e.length;j<l;j++)this.e[j].T(c);cj(this);this.Eb=new THREE.Wd(new THREE.d,c)};THREE.Ai.prototype=Object.create(THREE.G.prototype);
THREE.xk=function(a,b){var c=(1+Math.sqrt(5))/2;THREE.Ai.call(this,[[-1,c,0],[1,c,0],[-1,-c,0],[1,-c,0],[0,-1,c],[0,1,c],[0,-1,-c],[0,1,-c],[c,0,-1],[c,0,1],[-c,0,-1],[-c,0,1]],[[0,11,5],[0,5,1],[0,1,7],[0,7,10],[0,10,11],[1,5,9],[5,11,4],[11,10,2],[10,7,6],[7,1,8],[3,9,4],[3,4,2],[3,2,6],[3,6,8],[3,8,9],[4,9,5],[2,4,11],[6,2,10],[8,6,7],[9,8,1]],a,b)};THREE.xk.prototype=Object.create(THREE.G.prototype);
THREE.Sr=function(a,b){THREE.Ai.call(this,[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],[[0,2,4],[0,4,3],[0,3,5],[0,5,2],[1,2,5],[1,5,3],[1,3,4],[1,4,2]],a,b)};THREE.Sr.prototype=Object.create(THREE.G.prototype);THREE.js=function(a,b){THREE.Ai.call(this,[[1,1,1],[-1,-1,1],[-1,1,-1],[1,-1,-1]],[[2,1,0],[0,3,2],[1,3,0],[2,3,1]],a,b)};THREE.js.prototype=Object.create(THREE.G.prototype);
THREE.Yr=function(a,b,c,d){THREE.G.call(this);var e=this.e,f=this.l,g=this.C[0],d=n===d?w:d,h,i,j,l,k=b+1;for(h=0;h<=c;h++){l=h/c;for(i=0;i<=b;i++)j=i/b,j=a(j,l),e.push(j)}var p,r,s,q;for(h=0;h<c;h++)for(i=0;i<b;i++)a=h*k+i,e=h*k+i+1,l=(h+1)*k+i,j=(h+1)*k+i+1,p=new THREE.k(i/b,h/c),r=new THREE.k((i+1)/b,h/c),s=new THREE.k(i/b,(h+1)/c),q=new THREE.k((i+1)/b,(h+1)/c),d?(f.push(new THREE.K(a,e,l)),f.push(new THREE.K(e,j,l)),g.push([p,r,s]),g.push([r,q,s])):(f.push(new THREE.Z(a,e,j,l)),g.push([p,r,q,
s]));cj(this);bj(this);this.Jd()};THREE.Yr.prototype=Object.create(THREE.G.prototype);
THREE.ur=function(a){function b(a){var b=a.length();return new THREE.k(a.x/b,a.y/b)}THREE.G.call(this);for(var c=[[0,1,2],[0,2,1]],d=3;d<a.length;d++){var e=d,f=a[e].clone(),g=f.length();f.x+=2E-6*g*(Math.random()-0.5);f.y+=2E-6*g*(Math.random()-0.5);f.a+=2E-6*g*(Math.random()-0.5);for(var g=[],h=0;h<c.length;){var i=c[h],j=f,l=a[i[0]],k;k=l;var p=a[i[1]],r=new THREE.d,s=new THREE.d;r.sub(a[i[2]],p);s.sub(k,p);ui(r,s);r.normalize();k=r;l=k.fa(l);if(k.fa(j)>=l){for(j=0;3>j;j++){l=[i[j],i[(j+1)%3]];
k=t;for(p=0;p<g.length;p++)if(g[p][0]===l[1]&&g[p][1]===l[0]){g[p]=g[g.length-1];g.pop();k=w;break}k&&g.push(l)}c[h]=c[c.length-1];c.pop()}else h++}for(p=0;p<g.length;p++)c.push([g[p][0],g[p][1],e])}e=0;f=Array(a.length);for(d=0;d<c.length;d++){g=c[d];for(h=0;3>h;h++)n===f[g[h]]&&(f[g[h]]=e++,this.e.push(a[g[h]])),g[h]=f[g[h]]}for(d=0;d<c.length;d++)this.l.push(new THREE.K(c[d][0],c[d][1],c[d][2]));for(d=0;d<this.l.length;d++)g=this.l[d],this.C[0].push([b(this.e[g.q]),b(this.e[g.c]),b(this.e[g.r])]);
cj(this);bj(this);this.Jd()};THREE.ur.prototype=Object.create(THREE.G.prototype);THREE.pr=function(a){var b=new THREE.G;b.e.push(new THREE.d,new THREE.d(a||1,0,0),new THREE.d,new THREE.d(0,a||1,0),new THREE.d,new THREE.d(0,0,a||1));b.$a.push(new THREE.t(16711680),new THREE.t(16755200),new THREE.t(65280),new THREE.t(11206400),new THREE.t(255),new THREE.t(43775));a=new THREE.Pb({m:THREE.Wg});THREE.Ja.call(this,b,a,THREE.Pf)};THREE.pr.prototype=Object.create(THREE.Ja.prototype);
THREE.yd=function(a,b,c,d){THREE.w.call(this);n===d&&(d=16776960);n===c&&(c=20);var e=new THREE.G;e.e.push(new THREE.d(0,0,0));e.e.push(new THREE.d(0,1,0));this.Cj=new THREE.Ja(e,new THREE.Pb({color:d}));this.add(this.Cj);e=new THREE.si(0,0.05,0.25,5,1);this.lh=new THREE.O(e,new THREE.Qa({color:d}));this.lh.position.set(0,1,0);this.add(this.lh);b instanceof THREE.d&&(this.position=b);Cj(this,a);this.Uj(c)};THREE.yd.prototype=Object.create(THREE.w.prototype);
function Cj(a,b){var c=ui(new THREE.d(0,1,0),b),b=Math.acos((new THREE.d(0,1,0)).fa(b.clone().normalize()));a.I=xi(new THREE.D,c.normalize(),b);ti(a.rotation,a.I,a.lf)}THREE.yd.prototype.Uj=function(a){this.scale.set(a,a,a)};function Dj(a,b){oi(a.Cj.o.color,b);oi(a.lh.o.color,b)}
THREE.rc=function(a){function b(a,b,d){c(a,d);c(b,d)}function c(a,b){d.s.e.push(new THREE.d);d.s.$a.push(new THREE.t(b));n===d.Pj[a]&&(d.Pj[a]=[]);d.Pj[a].push(d.s.e.length-1)}THREE.Ja.call(this);var d=this;this.s=new THREE.G;this.o=new THREE.Pb({color:16777215,m:THREE.Pe});this.type=THREE.Pf;this.A=a.A;this.Ec=w;this.Pj={};b("n1","n2",16755200);b("n2","n4",16755200);b("n4","n3",16755200);b("n3","n1",16755200);b("f1","f2",16755200);b("f2","f4",16755200);b("f4","f3",16755200);b("f3","f1",16755200);
b("n1","f1",16755200);b("n2","f2",16755200);b("n3","f3",16755200);b("n4","f4",16755200);b("p","n1",16711680);b("p","n2",16711680);b("p","n3",16711680);b("p","n4",16711680);b("u1","u2",43775);b("u2","u3",43775);b("u3","u1",43775);b("c","t",16777215);b("p","c",3355443);b("cn1","cn2",3355443);b("cn3","cn4",3355443);b("cf1","cf2",3355443);b("cf3","cf4",3355443);this.Yi=a;this.update(a)};THREE.rc.prototype=Object.create(THREE.Ja.prototype);
THREE.rc.prototype.update=function(){function a(a,d,e,f){THREE.rc.Uk.set(d,e,f);THREE.rc.Sk.lk(THREE.rc.Uk,THREE.rc.bo);a=b.Pj[a];if(n!==a){d=0;for(e=a.length;d<e;d++)b.s.e[a[d]].copy(THREE.rc.Uk)}}var b=this;THREE.rc.bo.ra.copy(this.Yi.ra);a("c",0,0,-1);a("t",0,0,1);a("n1",-1,-1,-1);a("n2",1,-1,-1);a("n3",-1,1,-1);a("n4",1,1,-1);a("f1",-1,-1,1);a("f2",1,-1,1);a("f3",-1,1,1);a("f4",1,1,1);a("u1",0.7,1.1,-1);a("u2",-0.7,1.1,-1);a("u3",0,2,-1);a("cf1",-1,0,1);a("cf2",1,0,1);a("cf3",0,-1,1);a("cf4",
0,1,1);a("cn1",-1,0,-1);a("cn2",1,0,-1);a("cn3",0,-1,-1);a("cn4",0,1,-1);this.s.xa=t};THREE.rc.Sk=new THREE.Gk;THREE.rc.Uk=new THREE.d;THREE.rc.bo=new THREE.$b;
THREE.rn=function(a,b,c){THREE.w.call(this);this.ua=a;this.position=a.position;this.direction=new THREE.d;this.direction.sub(a.target.position,a.position);this.color=a.color.clone();var d=THREE.ib.Ac(a.sb,0,1);this.color.g*=d;this.color.f*=d;this.color.c*=d;var d=ri(this.color),e=new THREE.Cd(b,16,8),f=new THREE.ni(1.25*b,2.25*b),g=new THREE.Qa({color:d,z:w}),h=new THREE.Pb({color:d,z:w});this.Ib=new THREE.yd(this.direction,u,c,d);this.ya=new THREE.O(e,g);this.Ib.lh.o.z=w;this.Ib.Cj.o.z=w;this.te=
new THREE.Ja(f,h,THREE.Pf);this.add(this.Ib);this.add(this.ya);this.add(this.te);this.ya.ca.Uc=t;this.ya.ca.Ah=a;this.ya.ca.zh=this;this.ob=u;a.target.ca.Rq&&(b=new THREE.Cd(b,8,4),c=new THREE.Qa({color:d,R:t,z:w}),this.ob=new THREE.O(b,c),this.ob.position=a.target.position,this.ob.ca.Uc=t,this.ob.ca.Ah=a.target,this.ob.ca.zh=this.ob,a=new THREE.Re({color:d,ie:4,wh:4,opacity:0.75,Da:t,z:w}),d=new THREE.G,d.e.push(this.position.clone()),d.e.push(this.ob.position.clone()),aj(d),this.qc=new THREE.Ja(d,
a),this.qc.ca.Uc=t);this.ca.Uc=t};THREE.rn.prototype=Object.create(THREE.w.prototype);
THREE.rn.prototype.update=function(){this.direction.sub(this.ua.target.position,this.ua.position);Cj(this.Ib,this.direction);this.color.copy(this.ua.color);var a=THREE.ib.Ac(this.ua.sb,0,1);this.color.g*=a;this.color.f*=a;this.color.c*=a;Dj(this.Ib,ri(this.color));this.ya.o.color.copy(this.color);this.te.o.color.copy(this.color);this.ob.o.color.copy(this.color);this.qc.o.color.copy(this.color);this.qc.s.e[0].copy(this.ua.position);this.qc.s.e[1].copy(this.ua.target.position);aj(this.qc.s);this.qc.s.xa=
t};
THREE.wn=function(a,b,c){THREE.w.call(this);this.ua=a;this.position=a.position;var d=THREE.ib.Ac(a.sb,0,1);this.color=a.color.clone();this.color.g*=d;this.color.f*=d;this.color.c*=d;var e=ri(this.color);this.Ua=a.Ua.clone();this.Ua.g*=d;this.Ua.f*=d;this.Ua.c*=d;for(var d=ri(this.Ua),f=new THREE.Cd(b,16,8,0,2*Math.PI,0,0.5*Math.PI),g=new THREE.Cd(b,16,8,0,2*Math.PI,0.5*Math.PI,Math.PI),h=new THREE.Qa({color:e,z:w}),i=new THREE.Qa({color:d,z:w}),j=0,l=f.l.length;j<l;j++)f.l[j].va=0;j=0;for(l=g.l.length;j<l;j++)g.l[j].va=
1;THREE.pa.merge(f,g);this.ya=new THREE.O(f,new THREE.Ab([h,i]));this.Ib=new THREE.yd(new THREE.d(0,1,0),new THREE.d(0,1.1*(b+c),0),c,e);this.Ib.rotation.x=Math.PI;this.Bp=new THREE.yd(new THREE.d(0,1,0),new THREE.d(0,-1.1*(b+c),0),c,d);b=new THREE.w;b.rotation.x=0.5*-Math.PI;b.add(this.ya);b.add(this.Ib);b.add(this.Bp);this.add(b);this.ya.ca.Uc=t;this.ya.ca.Ah=a;this.ya.ca.zh=this;this.ca.Uc=t;this.target=new THREE.d;this.tb(this.target)};THREE.wn.prototype=Object.create(THREE.w.prototype);
THREE.wn.prototype.update=function(){var a=THREE.ib.Ac(this.ua.sb,0,1);this.color.copy(this.ua.color);this.Ua.copy(this.ua.Ua);this.color.g*=a;this.color.f*=a;this.color.c*=a;this.Ua.g*=a;this.Ua.f*=a;this.Ua.c*=a;this.ya.o.ga[0].color.copy(this.color);this.ya.o.ga[1].color.copy(this.Ua);Dj(this.Ib,ri(this.color));Dj(this.Bp,ri(this.Ua));this.tb(this.target)};
THREE.Jn=function(a,b){THREE.w.call(this);this.ua=a;this.position=a.position;this.color=a.color.clone();var c=THREE.ib.Ac(a.sb,0,1);this.color.g*=c;this.color.f*=c;this.color.c*=c;var d=ri(this.color),c=new THREE.Cd(b,16,8),e=new THREE.ni(1.25*b,2.25*b),f=new THREE.xk(1,2),g=new THREE.Qa({color:d,z:w}),h=new THREE.Pb({color:d,z:w}),d=new THREE.Qa({color:d,z:w,R:t,opacity:0.1,Da:t});this.ya=new THREE.O(c,g);this.te=new THREE.Ja(e,h,THREE.Pf);this.qf=new THREE.O(f,d);c=a.bb;0===c?this.qf.visible=w:
this.qf.scale.set(c,c,c);this.add(this.ya);this.add(this.te);this.add(this.qf);this.ya.ca.Uc=t;this.ya.ca.Ah=a;this.ya.ca.zh=this;this.ca.Uc=t};THREE.Jn.prototype=Object.create(THREE.w.prototype);
THREE.Jn.prototype.update=function(){this.color.copy(this.ua.color);var a=THREE.ib.Ac(this.ua.sb,0,1);this.color.g*=a;this.color.f*=a;this.color.c*=a;this.ya.o.color.copy(this.color);this.te.o.color.copy(this.color);this.qf.o.color.copy(this.color);a=this.ua.bb;0===a?this.qf.visible=w:(this.qf.visible=t,this.qf.scale.set(a,a,a))};
THREE.Vn=function(a,b,c){THREE.w.call(this);this.ua=a;this.position=a.position;this.direction=new THREE.d;this.direction.sub(a.target.position,a.position);this.color=a.color.clone();var d=THREE.ib.Ac(a.sb,0,1);this.color.g*=d;this.color.f*=d;this.color.c*=d;var d=ri(this.color),e=new THREE.Cd(b,16,8),f=new THREE.ni(1.25*b,2.25*b),g=new THREE.si(1E-4,1,1,8,1,t),h=new THREE.D;Ai(h,-Math.PI/2);h.translate(new THREE.d(0,-0.5,0));g.ag(h);var i=new THREE.Qa({color:d,z:w}),h=new THREE.Pb({color:d,z:w}),
j=new THREE.Qa({color:d,z:w,R:t,opacity:0.3,Da:t});this.Ib=new THREE.yd(this.direction,u,c,d);this.ya=new THREE.O(e,i);this.Bj=new THREE.O(g,j);c=a.bb?a.bb:1E4;e=2*c*Math.tan(0.5*a.bf);this.Bj.scale.set(e,e,c);this.Ib.lh.o.z=w;this.Ib.Cj.o.z=w;this.te=new THREE.Ja(f,h,THREE.Pf);this.xj=new THREE.ti;this.xj.add(this.Ib);this.xj.add(this.ya);this.xj.add(this.te);this.add(this.xj);this.add(this.Bj);this.tb(a.target.position);this.ya.ca.Uc=t;this.ya.ca.Ah=a;this.ya.ca.zh=this;this.ob=u;a.target.ca.Rq&&
(b=new THREE.Cd(b,8,4),f=new THREE.Qa({color:d,R:t,z:w}),this.ob=new THREE.O(b,f),this.ob.position=a.target.position,this.ob.ca.Uc=t,this.ob.ca.Ah=a.target,this.ob.ca.zh=this.ob,a=new THREE.Re({color:d,ie:4,wh:4,opacity:0.75,Da:t,z:w}),d=new THREE.G,d.e.push(this.position.clone()),d.e.push(this.ob.position.clone()),aj(d),this.qc=new THREE.Ja(d,a),this.qc.ca.Uc=t);this.ca.Uc=t};THREE.Vn.prototype=Object.create(THREE.w.prototype);
THREE.Vn.prototype.update=function(){this.direction.sub(this.ua.target.position,this.ua.position);Cj(this.Ib,this.direction);this.tb(this.ua.target.position);var a=this.ua.bb?this.ua.bb:1E4,b=2*a*Math.tan(0.5*this.ua.bf);this.Bj.scale.set(b,b,a);this.color.copy(this.ua.color);a=THREE.ib.Ac(this.ua.sb,0,1);this.color.g*=a;this.color.f*=a;this.color.c*=a;Dj(this.Ib,ri(this.color));this.ya.o.color.copy(this.color);this.te.o.color.copy(this.color);this.Bj.o.color.copy(this.color);this.ob.o.color.copy(this.color);
this.qc.o.color.copy(this.color);this.qc.s.e[0].copy(this.ua.position);this.qc.s.e[1].copy(this.ua.target.position);aj(this.qc.s);this.qc.s.xa=t};THREE.dy=function(a){this.Ww=n===a?1:a;this.VE=w;this.wE=t;this.debug=w};THREE.pa.Lv=function(a,b){return Math.min(a,b)+"_"+Math.max(a,b)};
THREE.pa.pz=function(a){function b(a,b){n===g[a]&&(g[a]=[]);g[a].push(b)}var c,d,e,f,g={},h=THREE.pa.Lv;c=0;for(d=a.l.length;c<d;c++)e=a.l[c],e instanceof THREE.K?(f=h(e.q,e.c),b(f,c),f=h(e.c,e.r),b(f,c),f=h(e.r,e.q),b(f,c)):e instanceof THREE.Z&&(f=h(e.q,e.c),b(f,c),f=h(e.c,e.r),b(f,c),f=h(e.r,e.P),b(f,c),f=h(e.P,e.q),b(f,c));return g};THREE.zk=function(){THREE.w.call(this);this.B=da()};THREE.zk.prototype=Object.create(THREE.w.prototype);
THREE.wi=function(a,b,c,d,e){THREE.w.call(this);this.Gh=[];this.h=new THREE.d;this.Qo=n;n!==a&&this.add(a,b,c,d,e)};THREE.wi.prototype=Object.create(THREE.w.prototype);THREE.wi.prototype.add=function(a,b,c,d,e,f){n===b&&(b=-1);n===c&&(c=0);n===f&&(f=1);n===e&&(e=new THREE.t(16777215));n===d&&(d=THREE.Tg);c=Math.min(c,Math.max(0,c));this.Gh.push({ik:a,size:b,bb:c,x:0,y:0,a:0,scale:1,rotation:1,opacity:f,color:e,qb:d})};
THREE.An=function(a,b){THREE.O.call(this,a,b);this.Do={};this.pl=[];var c=this.s.F.length,d=c-1,c=c/1,e=0,e={Qw:e,jA:d,length:d-e+1,og:c,duration:(d-e)/c,dm:0,oh:0,Qc:w,time:0,direction:1,Rd:1,jg:w,ve:w};this.Do.__default=e;this.pl.push(e);(d=this.Do.__default)&&(d.Rd=1)};THREE.An.prototype=Object.create(THREE.O.prototype);
THREE.An.prototype.update=function(a){for(var b=0,c=this.pl.length;b<c;b++){var d=this.pl[b];if(d.Qc){var e=d.duration/d.length;d.time+=d.direction*a;if(d.ve){if(d.time>d.duration||0>d.time)d.direction*=-1,d.time>d.duration&&(d.time=d.duration,d.jg=t),0>d.time&&(d.time=0,d.jg=w)}else d.time%=d.duration,0>d.time&&(d.time+=d.duration);var f=d.Qw+THREE.ib.Ac(Math.floor(d.time/e),0,d.length-1),g=d.Rd;f!==d.oh&&(this.Vc[d.dm]=0,this.Vc[d.oh]=1*g,this.Vc[f]=0,d.dm=d.oh,d.oh=f);e=d.time%e/e;d.jg&&(e=1-e);
this.Vc[d.oh]=e*g;this.Vc[d.dm]=(1-e)*g}}};
THREE.Jr=function(){function a(a){var c=b.createProgram(),d=b.createShader(b.FRAGMENT_SHADER),e=b.createShader(b.VERTEX_SHADER);b.shaderSource(d,a.L);b.shaderSource(e,a.N);b.compileShader(d);b.compileShader(e);b.attachShader(c,d);b.attachShader(c,e);b.linkProgram(c);return c}var b,c,d,e,f,g,h,i,j,l,k,p;this.init=function(r){b=r.context;c=r;d=new Float32Array(16);e=new Uint16Array(6);r=0;d[r++]=-1;d[r++]=-1;d[r++]=0;d[r++]=0;d[r++]=1;d[r++]=-1;d[r++]=1;d[r++]=0;d[r++]=1;d[r++]=1;d[r++]=1;d[r++]=1;
d[r++]=-1;d[r++]=1;d[r++]=0;d[r++]=1;r=0;e[r++]=0;e[r++]=1;e[r++]=2;e[r++]=0;e[r++]=2;e[r++]=3;f=b.createBuffer();g=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,f);b.bufferData(b.ARRAY_BUFFER,d,b.STATIC_DRAW);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,g);b.bufferData(b.ELEMENT_ARRAY_BUFFER,e,b.STATIC_DRAW);h=b.createTexture();i=b.createTexture();b.bindTexture(b.TEXTURE_2D,h);b.texImage2D(b.TEXTURE_2D,0,b.RGB,16,16,0,b.RGB,b.UNSIGNED_BYTE,u);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);
b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.bindTexture(b.TEXTURE_2D,i);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,16,16,0,b.RGBA,b.UNSIGNED_BYTE,u);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,
b.NEAREST);0>=b.getParameter(b.MAX_VERTEX_TEXTURE_IMAGE_UNITS)?(j=w,l=a(THREE.Tn.Pu)):(j=t,l=a(THREE.Tn.Qu));k={};p={};k.gr=b.getAttribLocation(l,"position");k.wa=b.getAttribLocation(l,"uv");p.Mm=b.getUniformLocation(l,"renderType");p.map=b.getUniformLocation(l,"map");p.Cv=b.getUniformLocation(l,"occlusionMap");p.opacity=b.getUniformLocation(l,"opacity");p.color=b.getUniformLocation(l,"color");p.scale=b.getUniformLocation(l,"scale");p.rotation=b.getUniformLocation(l,"rotation");p.Tj=b.getUniformLocation(l,
"screenPosition")};this.B=function(a,d,e,v){var a=a.Xk,y=a.length;if(y){var F=new THREE.d,C=v/e,z=0.5*e,G=0.5*v,B=16/v,J=new THREE.k(B*C,B),O=new THREE.d(1,1,0),I=new THREE.k(1,1),P=p,B=k;b.useProgram(l);b.enableVertexAttribArray(k.gr);b.enableVertexAttribArray(k.wa);b.uniform1i(P.Cv,0);b.uniform1i(P.map,1);b.bindBuffer(b.ARRAY_BUFFER,f);b.vertexAttribPointer(B.gr,2,b.FLOAT,w,16,0);b.vertexAttribPointer(B.wa,2,b.FLOAT,w,16,8);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,g);b.disable(b.CULL_FACE);b.depthMask(w);
var E,R,K,V,M;for(E=0;E<y;E++)if(B=16/v,J.set(B*C,B),V=a[E],F.set(V.A.elements[12],V.A.elements[13],V.A.elements[14]),d.Aa.X(F),d.ra.X(F),O.copy(F),I.x=O.x*z+z,I.y=O.y*G+G,j||0<I.x&&I.x<e&&0<I.y&&I.y<v){b.activeTexture(b.TEXTURE1);b.bindTexture(b.TEXTURE_2D,h);b.copyTexImage2D(b.TEXTURE_2D,0,b.RGB,I.x-8,I.y-8,16,16,0);b.uniform1i(P.Mm,0);b.uniform2f(P.scale,J.x,J.y);b.uniform3f(P.Tj,O.x,O.y,O.a);b.disable(b.BLEND);b.enable(b.DEPTH_TEST);b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0);b.activeTexture(b.TEXTURE0);
b.bindTexture(b.TEXTURE_2D,i);b.copyTexImage2D(b.TEXTURE_2D,0,b.RGBA,I.x-8,I.y-8,16,16,0);b.uniform1i(P.Mm,1);b.disable(b.DEPTH_TEST);b.activeTexture(b.TEXTURE1);b.bindTexture(b.TEXTURE_2D,h);b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0);V.h.copy(O);if(V.Qo)V.Qo(V);else{R=V;K=n;M=R.Gh.length;var W=n,la=2*-R.h.x,X=2*-R.h.y;for(K=0;K<M;K++)W=R.Gh[K],W.x=R.h.x+la*W.bb,W.y=R.h.y+X*W.bb,W.px=0.25*W.x*Math.PI,W.rotation+=0.25*(W.px-W.rotation)}b.uniform1i(P.Mm,2);b.enable(b.BLEND);R=0;for(K=V.Gh.length;R<
K;R++)M=V.Gh[R],0.001<M.opacity&&0.001<M.scale&&(O.x=M.x,O.y=M.y,O.a=M.a,B=M.size*M.scale/v,J.x=B*C,J.y=B,b.uniform3f(P.Tj,O.x,O.y,O.a),b.uniform2f(P.scale,J.x,J.y),b.uniform1f(P.rotation,M.rotation),b.uniform1f(P.opacity,M.opacity),b.uniform3f(P.color,M.color.g,M.color.f,M.color.c),c.Ig(M.qb,M.blendEquation,M.gf,M.ff),c.Th(M.ik,1),b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0))}b.enable(b.CULL_FACE);b.enable(b.DEPTH_TEST);b.depthMask(t)}}};
THREE.Kk=function(){var a,b,c,d,e,f,g=new THREE.Nf,h=new THREE.D,i=new THREE.d,j=new THREE.d;this.init=function(g){a=g.context;b=g;var g=THREE.Jk.To,h=THREE.wc.clone(g.Q);c=new THREE.Xa({L:g.L,N:g.N,Q:h});d=new THREE.Xa({L:g.L,N:g.N,Q:h,F:t});e=new THREE.Xa({L:g.L,N:g.N,Q:h,Ca:t});f=new THREE.Xa({L:g.L,N:g.N,Q:h,F:t,Ca:t});c.ae=t;d.ae=t;e.ae=t;f.ae=t};this.B=function(a,c){b.Xh&&b.Dw&&this.update(a,c)};this.update=function(l,k){var p,r,s,q,v,y,F,C,z,G=[];q=0;a.clearColor(1,1,1,1);a.disable(a.BLEND);
a.enable(a.CULL_FACE);a.frontFace(a.CCW);b.xq===THREE.ri?a.cullFace(a.FRONT):a.cullFace(a.BACK);b.yf(t);p=0;for(r=l.fc.length;p<r;p++)if(s=l.fc[p],s.zc)if(s instanceof THREE.Mc&&s.Tm)for(v=0;v<s.zw;v++){var B;if(s.Yj[v])B=s.Yj[v];else{z=s;F=v;B=new THREE.Mc;B.Ju=t;B.Nj=t;B.zc=t;B.Wh=z.Wh;B.Vh=z.Vh;B.Qm=z.Qm;B.Rm=z.Rm;B.Pm=z.Pm;B.Sm=z.Sm;B.Ae=z.Ae;B.Be=z.Be;B.Jg=z.uq[F];B.$h=z.Cw[F];B.Yh=z.Aw[F];B.bq=[];B.Cm=[];C=B.bq;y=B.Cm;for(var J=0;8>J;J++)C[J]=new THREE.d,y[J]=new THREE.d;C=z.wq[F];z=z.vq[F];
y[0].set(-1,-1,C);y[1].set(1,-1,C);y[2].set(-1,1,C);y[3].set(1,1,C);y[4].set(-1,-1,z);y[5].set(1,-1,z);y[6].set(-1,1,z);y[7].set(1,1,z);B.Mv=k;y=new THREE.ti;y.position=s.Bw;y.add(B);y.add(B.target);k.add(y);s.Yj[v]=B;console.log("Created virtualLight",B)}F=s;C=v;z=F.Yj[C];z.position.copy(F.position);z.target.position.copy(F.target.position);z.tb(z.target);z.Ae=F.Ae;z.Be=F.Be;z.Jg=F.uq[C];y=F.wq[C];F=F.vq[C];z=z.Cm;z[0].a=y;z[1].a=y;z[2].a=y;z[3].a=y;z[4].a=F;z[5].a=F;z[6].a=F;z[7].a=F;G[q]=B;q++}else G[q]=
s,q++;p=0;for(r=G.length;p<r;p++){s=G[p];s.zf||(s.zf=new THREE.Xg(s.$h,s.Yh,{mb:THREE.Td,Kb:THREE.Td,ka:THREE.Vg}),s.Zh=new THREE.k(s.$h,s.Yh),s.Af=new THREE.D);if(!s.Pd){if(s instanceof THREE.Sf)s.Pd=new THREE.tc(s.yw,s.$h/s.Yh,s.Wh,s.Vh);else if(s instanceof THREE.Mc)s.Pd=new THREE.Ug(s.Qm,s.Rm,s.Sm,s.Pm,s.Wh,s.Vh);else{console.error("Unsupported light type for shadow");continue}l.add(s.Pd);b.sl&&l.Nb()}s.Ae&&!s.eh&&(s.eh=new THREE.rc(s.Pd),s.Pd.add(s.eh));if(s.Ju&&B.Mv==k){v=k;q=s.Pd;y=s.Cm;z=
s.bq;i.set(Infinity,Infinity,Infinity);j.set(-Infinity,-Infinity,-Infinity);for(F=0;8>F;F++)C=z[F],C.copy(y[F]),THREE.Kk.Sk.lk(C,v),q.Aa.X(C),C.x<i.x&&(i.x=C.x),C.x>j.x&&(j.x=C.x),C.y<i.y&&(i.y=C.y),C.y>j.y&&(j.y=C.y),C.a<i.a&&(i.a=C.a),C.a>j.a&&(j.a=C.a);q.left=i.x;q.right=j.x;q.top=j.y;q.bottom=i.y;q.Gf()}q=s.zf;y=s.Af;v=s.Pd;v.position.copy(Gi(s.A));v.tb(Gi(s.target.A));v.Nb();v.Aa.Gb(v.A);s.eh&&(s.eh.visible=s.Ae);s.Ae&&s.eh.update();y.set(0.5,0,0,0.5,0,0.5,0,0.5,0,0,0.5,0.5,0,0,0,1);y.sf(v.ra);
y.sf(v.Aa);h.multiply(v.ra,v.Aa);Li(g,h);b.Vj(q);b.clear();z=l.gc;s=0;for(q=z.length;s<q;s++)if(F=z[s],y=F.object,F.B=w,y.visible&&y.zc&&(!(y instanceof THREE.O||y instanceof THREE.Qb)||!y.nf||g.contains(y)))y.Pc.multiply(v.Aa,y.A),F.B=t;s=0;for(q=z.length;s<q;s++)F=z[s],F.B&&(y=F.object,F=F.buffer,J=y.o instanceof THREE.Ab?y.o.ga[0]:y.o,C=0<y.s.F.length&&J.F,J=y instanceof THREE.ec&&J.Ca,C=y.gj?y.gj:J?C?f:e:C?d:c,F instanceof THREE.cd?b.Jm(v,l.fc,u,C,F,y):b.Im(v,l.fc,u,C,F,y));z=l.$d;s=0;for(q=z.length;s<
q;s++)F=z[s],y=F.object,y.visible&&y.zc&&(y.Pc.multiply(v.Aa,y.A),b.Km(v,l.fc,u,c,y))}p=b.hp();r=b.gp();a.clearColor(p.g,p.f,p.c,r);a.enable(a.BLEND);b.xq===THREE.ri&&a.cullFace(a.BACK)}};THREE.Kk.Sk=new THREE.Gk;
THREE.es=function(){function a(a,b){return a.a!==b.a?b.a-a.a:b.id-a.id}var b,c,d,e,f,g,h,i,j;this.init=function(a){b=a.context;c=a;d=new Float32Array(16);e=new Uint16Array(6);a=0;d[a++]=-1;d[a++]=-1;d[a++]=0;d[a++]=0;d[a++]=1;d[a++]=-1;d[a++]=1;d[a++]=0;d[a++]=1;d[a++]=1;d[a++]=1;d[a++]=1;d[a++]=-1;d[a++]=1;d[a++]=0;d[a++]=1;a=0;e[a++]=0;e[a++]=1;e[a++]=2;e[a++]=0;e[a++]=2;e[a++]=3;f=b.createBuffer();g=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,f);b.bufferData(b.ARRAY_BUFFER,d,b.STATIC_DRAW);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,
g);b.bufferData(b.ELEMENT_ARRAY_BUFFER,e,b.STATIC_DRAW);var a=THREE.bs.Pw,k=b.createProgram(),p=b.createShader(b.FRAGMENT_SHADER),r=b.createShader(b.VERTEX_SHADER);b.shaderSource(p,a.L);b.shaderSource(r,a.N);b.compileShader(p);b.compileShader(r);b.attachShader(k,p);b.attachShader(k,r);b.linkProgram(k);h=k;i={};j={};i.position=b.getAttribLocation(h,"position");i.wa=b.getAttribLocation(h,"uv");j.Lg=b.getUniformLocation(h,"uvOffset");j.Mg=b.getUniformLocation(h,"uvScale");j.rotation=b.getUniformLocation(h,
"rotation");j.scale=b.getUniformLocation(h,"scale");j.$f=b.getUniformLocation(h,"alignment");j.color=b.getUniformLocation(h,"color");j.map=b.getUniformLocation(h,"map");j.opacity=b.getUniformLocation(h,"opacity");j.$c=b.getUniformLocation(h,"useScreenCoordinates");j.Mb=b.getUniformLocation(h,"sizeAttenuation");j.Tj=b.getUniformLocation(h,"screenPosition");j.Pp=b.getUniformLocation(h,"modelViewMatrix");j.ra=b.getUniformLocation(h,"projectionMatrix");j.tj=b.getUniformLocation(h,"fogType");j.qj=b.getUniformLocation(h,
"fogDensity");j.sj=b.getUniformLocation(h,"fogNear");j.rj=b.getUniformLocation(h,"fogFar");j.pj=b.getUniformLocation(h,"fogColor");j.Hd=b.getUniformLocation(h,"alphaTest")};this.B=function(d,e,p,r){var s=d.dl,q=s.length;if(q){var v=i,y=j,F=r/p,p=0.5*p,C=0.5*r;b.useProgram(h);b.enableVertexAttribArray(v.position);b.enableVertexAttribArray(v.wa);b.disable(b.CULL_FACE);b.enable(b.BLEND);b.bindBuffer(b.ARRAY_BUFFER,f);b.vertexAttribPointer(v.position,2,b.FLOAT,w,16,0);b.vertexAttribPointer(v.wa,2,b.FLOAT,
w,16,8);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,g);b.uniformMatrix4fv(y.ra,w,e.ra.elements);b.activeTexture(b.TEXTURE0);b.uniform1i(y.map,0);var z=v=0,G=d.z;G?(b.uniform3f(y.pj,G.color.g,G.color.f,G.color.c),G instanceof THREE.Qg?(b.uniform1f(y.sj,G.Ba),b.uniform1f(y.rj,G.Fa),b.uniform1i(y.tj,1),z=v=1):G instanceof THREE.Mf&&(b.uniform1f(y.qj,G.ij),b.uniform1i(y.tj,2),z=v=2)):(b.uniform1i(y.tj,0),z=v=0);for(var B,J,O=[],G=0;G<q;G++)B=s[G],J=B.o,B.visible&&0!==J.opacity&&(J.$c?B.a=-B.position.a:(B.Pc.multiply(e.Aa,
B.A),B.a=-B.Pc.elements[14]));s.sort(a);for(G=0;G<q;G++)B=s[G],J=B.o,B.visible&&0!==J.opacity&&J.map&&(J.map.J&&J.map.J.width)&&(b.uniform1f(y.Hd,J.Hd),J.$c?(b.uniform1i(y.$c,1),b.uniform3f(y.Tj,(B.position.x-p)/p,(C-B.position.y)/C,Math.max(0,Math.min(1,B.position.a)))):(b.uniform1i(y.$c,0),b.uniform1i(y.Mb,J.Mb?1:0),b.uniformMatrix4fv(y.Pp,w,B.Pc.elements)),e=d.z&&J.z?z:0,v!==e&&(b.uniform1i(y.tj,e),v=e),e=1/(J.Rh?r:1),O[0]=e*F*B.scale.x,O[1]=e*B.scale.y,b.uniform2f(y.Mg,J.Mg.x,J.Mg.y),b.uniform2f(y.Lg,
J.Lg.x,J.Lg.y),b.uniform2f(y.$f,J.$f.x,J.$f.y),b.uniform1f(y.opacity,J.opacity),b.uniform3f(y.color,J.color.g,J.color.f,J.color.c),b.uniform1f(y.rotation,B.rotation),b.uniform2fv(y.scale,O),c.Ig(J.qb,J.blendEquation,J.gf,J.ff),c.yf(J.Bc),c.Sh(J.Ld),c.Th(J.map,0),b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0));b.enable(b.CULL_FACE)}}};
THREE.Hx=function(){this.enabled=w;this.Lm=u;var a,b,c,d,e,f,g=new THREE.Nf,h=new THREE.D;this.init=function(g){a=g.context;b=g;var g=THREE.Jk.To,h=THREE.wc.clone(g.Q);c=new THREE.Xa({L:g.L,N:g.N,Q:h});d=new THREE.Xa({L:g.L,N:g.N,Q:h,F:t});e=new THREE.Xa({L:g.L,N:g.N,Q:h,Ca:t});f=new THREE.Xa({L:g.L,N:g.N,Q:h,F:t,Ca:t});c.ae=t;d.ae=t;e.ae=t;f.ae=t};this.B=function(a,b){this.enabled&&this.update(a,b)};this.update=function(i,j){var l,k,p,r,s,q;a.clearColor(1,1,1,1);a.disable(a.BLEND);b.yf(t);b.sl&&
i.Nb();j.Aa.Gb(j.A);h.multiply(j.ra,j.Aa);Li(g,h);b.Vj(this.Lm);b.clear();q=i.gc;l=0;for(k=q.length;l<k;l++)if(p=q[l],s=p.object,p.B=w,s.visible&&(!(s instanceof THREE.O||s instanceof THREE.Qb)||!s.nf||g.contains(s)))s.Pc.multiply(j.Aa,s.A),p.B=t;var v;l=0;for(k=q.length;l<k;l++)if(p=q[l],p.B&&(s=p.object,p=p.buffer,!(s instanceof THREE.Qb)||s.gj))(v=s.o instanceof THREE.Ab?s.o.ga[0]:s.o)&&b.Om(s.o),r=0<s.s.F.length&&v.F,v=s instanceof THREE.ec&&v.Ca,r=s.gj?s.gj:v?r?f:e:r?d:c,p instanceof THREE.cd?
b.Jm(j,i.fc,u,r,p,s):b.Im(j,i.fc,u,r,p,s);q=i.$d;l=0;for(k=q.length;l<k;l++)p=q[l],s=p.object,s.visible&&(s.Pc.multiply(j.Aa,s.A),b.Km(j,i.fc,u,c,s));l=b.hp();k=b.gp();a.clearColor(l.g,l.f,l.c,k);a.enable(a.BLEND)}};
THREE.Tn={Qu:{N:"uniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform int renderType;\nuniform sampler2D occlusionMap;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif( renderType == 2 ) {\nvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) ) +\ntexture2D( occlusionMap, vec2( 0.5, 0.1 ) ) +\ntexture2D( occlusionMap, vec2( 0.9, 0.1 ) ) +\ntexture2D( occlusionMap, vec2( 0.9, 0.5 ) ) +\ntexture2D( occlusionMap, vec2( 0.9, 0.9 ) ) +\ntexture2D( occlusionMap, vec2( 0.5, 0.9 ) ) +\ntexture2D( occlusionMap, vec2( 0.1, 0.9 ) ) +\ntexture2D( occlusionMap, vec2( 0.1, 0.5 ) ) +\ntexture2D( occlusionMap, vec2( 0.5, 0.5 ) );\nvVisibility = (       visibility.r / 9.0 ) *\n( 1.0 - visibility.g / 9.0 ) *\n(       visibility.b / 9.0 ) *\n( 1.0 - visibility.a / 9.0 );\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",L:"precision mediump float;\nuniform sampler2D map;\nuniform float opacity;\nuniform int renderType;\nuniform vec3 color;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nif( renderType == 0 ) {\ngl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\n} else if( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * vVisibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"},
Pu:{N:"uniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform int renderType;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif( renderType == 2 ) {\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",L:"precision mediump float;\nuniform sampler2D map;\nuniform sampler2D occlusionMap;\nuniform float opacity;\nuniform int renderType;\nuniform vec3 color;\nvarying vec2 vUV;\nvoid main() {\nif( renderType == 0 ) {\ngl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );\n} else if( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nfloat visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a +\ntexture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a +\ntexture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a +\ntexture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;\nvisibility = ( 1.0 - visibility / 4.0 );\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * visibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"}};
THREE.bs={Pw:{N:"uniform int useScreenCoordinates;\nuniform int sizeAttenuation;\nuniform vec3 screenPosition;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 scale;\nuniform vec2 alignment;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uvOffset + uv * uvScale;\nvec2 alignedPosition = position + alignment;\nvec2 rotatedPosition;\nrotatedPosition.x = ( cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y ) * scale.x;\nrotatedPosition.y = ( sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y ) * scale.y;\nvec4 finalPosition;\nif( useScreenCoordinates != 0 ) {\nfinalPosition = vec4( screenPosition.xy + rotatedPosition, screenPosition.z, 1.0 );\n} else {\nfinalPosition = projectionMatrix * modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\nfinalPosition.xy += rotatedPosition * ( sizeAttenuation == 1 ? 1.0 : finalPosition.z );\n}\ngl_Position = finalPosition;\n}",
L:"precision mediump float;\nuniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvoid main() {\nvec4 texture = texture2D( map, vUV );\nif ( texture.a < alphaTest ) discard;\ngl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\nif ( fogType > 0 ) {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat fogFactor = 0.0;\nif ( fogType == 1 ) {\nfogFactor = smoothstep( fogNear, fogFar, depth );\n} else {\nconst float LOG2 = 1.442695;\nfloat fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n}\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}\n}"}};
var Ej=window.webnaali=window.webnaali||{};Ej.VERSION="0.1 dev";Ej.Bn="WebNaali";Ej.log=function(a){var b;b="string"===typeof a?a:"object"===typeof a?JSON.stringify(a):"ERROR: Use Strings or Objects with log().";var c=document.getElementById("log");c!==u?(c.innerHTML+="&nbsp["+(new Date).toTimeString().replace(/.*(\d{2}:\d{2}:\d{2}).*/,"$1")+"] "+b+"<br>",c.scrollTop=c.scrollHeight):console.log(a)};Ej.XA=function(a){return this.fb=new Ej.Wx(a)};
Ej.UA=function(a,b,c){a=new Ej.vs(a,b,c);this.fb!==n?this.fb.My(a):console.error(" ERROR: Create scene before creating a WebSocket connection. ");return a};Ej.start=function(){this.fb!==n?this.fb.start():console.error(" ERROR: Create a scene before starting the client. ")};Ej.log("WebNaali v"+Ej.VERSION);var Fj=window;function Vj(a,b,c,d,e){this.Xf=b;this.il=c;this.context=d;this.ll=a;this.to=e||0}
function Wj(a,b){if("function"!==typeof a)throw Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",b));}function Xj(){this.yc=[];this.jl=u;var a=this;this.jf=function(){Xj.prototype.jf.apply(a,arguments)}}
Vj.prototype={Qc:t,nd:u,execute:function(a){var b;this.Qc&&this.Xf&&(a=this.nd?this.nd.concat(a):a,b=this.Xf.apply(this.context,a),this.il&&this.detach());return b},detach:function(){return this.tp()?this.ll.remove(this.Xf,this.context):u},tp:function(){return!!this.ll&&!!this.Xf},Ms:function(){delete this.ll;delete this.Xf;delete this.context},toString:function(){return"[SignalBinding isOnce:"+this.il+", isBound:"+this.tp()+", active:"+this.Qc+"]"}};
Xj.prototype={VERSION:"1.0.0",Op:w,uo:t,Qc:t,Ns:function(a,b,c,d){var e=this.hl(a,c);if(-1!==e){if(a=this.yc[e],a.il!==b)throw Error("You cannot add"+(b?"":"Once")+"() then add"+(!b?"":"Once")+"() the same listener without removing the relationship first.");}else a=new Vj(this,a,b,c,d),this.Ks(a);this.Op&&this.jl&&a.execute(this.jl);return a},Ks:function(a){var b=this.yc.length;do--b;while(this.yc[b]&&a.to<=this.yc[b].to);this.yc.splice(b+1,0,a)},hl:function(a,b){for(var c=this.yc.length,d;c--;)if(d=
this.yc[c],d.Xf===a&&d.context===b)return c;return-1},has:function(a,b){return-1!==this.hl(a,b)},add:function(a,b,c){Wj(a,"add");return this.Ns(a,w,b,c)},remove:function(a,b){Wj(a,"remove");var c=this.hl(a,b);-1!==c&&(this.yc[c].Ms(),this.yc.splice(c,1));return a},jf:function(a){if(this.Qc){var b=Array.prototype.slice.call(arguments),c=this.yc.length,d;this.Op&&(this.jl=b);if(c){d=this.yc.slice();this.uo=t;do c--;while(d[c]&&this.uo&&d[c].execute(b)!==w)}}},toString:function(){return"[Signal active:"+
this.Qc+" numListeners:"+this.yc.length+"]"}};Fj.Signal=Xj;
THREE.Cx=function(){function a(a,d,e){N=a;d=d||za;e!==n&&(a=e.split("/"),a.pop(),Bb=(1>a.length?".":a.join("/"))+"/");if((a=N.evaluate("//dae:asset",N,S,XPathResult.ORDERED_NODE_ITERATOR_TYPE,u).iterateNext())&&a.childNodes)for(e=0;e<a.childNodes.length;e++){var i=a.childNodes[e];switch(i.nodeName){case "unit":i.getAttribute("meter");break;case "up_axis":fb=i.textContent.charAt(0)}}if(!Ga.ej||fb===Ga.ki)ab=u;else switch(fb){case "X":ab="Y"===Ga.ki?"XtoY":"XtoZ";break;case "Y":ab="X"===Ga.ki?"YtoX":
"YtoZ";break;case "Z":ab="X"===Ga.ki?"ZtoX":"ZtoY"}Fa=b("//dae:library_images/dae:image",g,"image");pb=b("//dae:library_materials/dae:material",I,"material");qb=b("//dae:library_effects/dae:effect",V,"effect");ob=b("//dae:library_geometries/dae:geometry",v,"geometry");ib=b(".//dae:library_cameras/dae:camera",ia,"camera");xa=b("//dae:library_controllers/dae:controller",h,"controller");Oa=b("//dae:library_animations/dae:animation",W,"animation");Sb=b(".//dae:library_visual_scenes/dae:visual_scene",
l,"visual_scene");Qa=[];Ka=[];(a=N.evaluate(".//dae:scene/dae:instance_visual_scene",N,S,XPathResult.ORDERED_NODE_ITERATOR_TYPE,u).iterateNext())?(a=a.getAttribute("url").replace(/^#/,""),Na=Sb[0<a.length?a:"visual_scene0"]):Na=u;oa=new THREE.w;for(a=0;a<Na.Va.length;a++)oa.add(f(Na.Va[a]));Rb=[];c(oa);a={fb:oa,wC:Qa,lE:Ka,at:Rb,Nt:{images:Fa,ga:pb,ge:ib,fA:qb,$:ob,controllers:xa,at:Oa,cF:Sb,fb:Na}};d&&d(a);return a}function b(a,b,c){for(var a=N.evaluate(a,N,S,XPathResult.ORDERED_NODE_ITERATOR_TYPE,
u),d={},e=a.iterateNext(),f=0;e;){e=(new b).parse(e);if(!e.id||0==e.id.length)e.id=c+f++;d[e.id]=e;e=a.iterateNext()}return d}function c(a){var b=Na.xh(a.name,t),d=u;if(b&&b.keys){d={og:60,v:[{Lj:b,keys:b.keys,Kg:b.Kg}],Lj:a,name:"animation_"+a.name,length:0};Rb.push(d);for(var e=0,f=b.keys.length;e<f;e++)d.length=Math.max(d.length,b.keys[e].time)}else d={v:[{keys:[],Kg:[]}]};e=0;for(f=a.children.length;e<f;e++)for(var b=0,g=c(a.children[e]).v.length;b<g;b++)d.v.push({keys:[],Kg:[]});return d}function d(a,
b,c,e){a.Kf=a.Kf||new THREE.D;a.Kf.copy(a.I);if(a.he&&a.he.length){var f=a.he[0].Ub.Mh[c];f instanceof THREE.D&&a.Kf.copy(f)}e&&a.Kf.multiply(e,a.Kf);b.push(a);for(e=0;e<a.Va.length;e++)d(a.Va[e],b,c,a.Kf)}function e(a,b,c){var e,f=xa[b.url];if(!f||!f.Zc)console.log("ColladaLoader: Could not find skin controller.");else if(!b.De||!b.De.length)console.log("ColladaLoader: Could not find the skeleton for the skin. ");else{var c=1E6,g=-c,h=0;for(e in Oa)for(var i=Oa[e],j=0;j<i.Ub.length;j++){var k=i.Ub[j];
k.create();c=Math.min(c,k.startTime);g=Math.max(g,k.ne);h=Math.max(h,k.input.length)}e=h;for(var b=Na.xh(b.De[0],t)||Na.uj(b.De[0],t),l,p,g=new THREE.d,q,j=0;j<a.e.length;j++)f.Zc.Fo.X(a.e[j]);for(c=0;c<e;c++){h=[];i=[];for(j=0;j<a.e.length;j++)i.push(new THREE.d);d(b,h,c);j=h;k=f.Zc;for(p=0;p<j.length;p++)if(l=j[p],q=-1,"JOINT"==l.type){for(var r=0;r<k.Aj.length;r++)if(l.Oa==k.Aj[r]){q=r;break}if(0<=q){r=k.am[q];l.ZA=r;l.Dq=new THREE.D;l.Dq.multiply(l.Kf,r);l.ad=[];for(r=0;r<k.ad.length;r++)for(var s=
0;s<k.ad[r].length;s++){var v=k.ad[r][s];v.Mu==q&&l.ad.push(v)}}else throw"ColladaLoader: Could not find joint '"+l.Oa+"'.";}for(j=0;j<h.length;j++)if("JOINT"==h[j].type)for(k=0;k<h[j].ad.length;k++)l=h[j].ad[k],p=l.index,l=l.Rd,q=a.e[p],p=i[p],g.x=q.x,g.y=q.y,g.a=q.a,h[j].Dq.X(g),p.x+=g.x*l,p.y+=g.y*l,p.a+=g.a*l;a.F.push({name:"target_"+c,e:i})}}}function f(a){var b=new THREE.w,c,d,g,h;for(g=0;g<a.controllers.length;g++){var i=xa[a.controllers[g].url];switch(i.type){case "skin":if(ob[i.Zc.source]){var j=
new q;j.url=i.Zc.source;j.Dc=a.controllers[g].Dc;a.$.push(j);c=a.controllers[g]}else xa[i.Zc.source]&&(d=i=xa[i.Zc.source],i.md&&ob[i.md.source]&&(j=new q,j.url=i.md.source,j.Dc=a.controllers[g].Dc,a.$.push(j)));break;case "morph":ob[i.md.source]&&(j=new q,j.url=i.md.source,j.Dc=a.controllers[g].Dc,a.$.push(j),d=a.controllers[g]),console.log("ColladaLoader: Morph-controller partially supported.")}}j={};for(g=0;g<a.$.length;g++){h=a.$[g];var i=h.Dc,m=ob[h.url],k={},l=[],p=0,s;if(m&&m.Md&&m.Md.od){0==
b.name.length&&(b.name=m.id);if(i)for(h=0;h<i.length;h++){s=i[h];var v=pb[s.target],z=qb[v.sp.url].Xj.o;if(m.le){if(!(z in j)){var y=z.clone();y.oc=THREE.sc;j[z]=y}z=j[z]}z.opacity=!z.opacity?1:z.opacity;k[s.Jq]=p;l.push(z);s=z;s.name=v.name==u||""===v.name?v.id:v.name;p++}i=s||new THREE.ac({color:14540253,Ha:THREE.Pg,oc:m.le?THREE.sc:THREE.Qe});m=m.Md.jd;if(1<p){i=new THREE.Ab(l);for(h=0;h<m.l.length;h++)l=m.l[h],l.va=k[l.Ot]}if(c!==n)e(m,c),i.F=t,i=new THREE.ec(m,i,w),i.De=c.De,i.jE=xa[c.url],i.kE=
c,i.name="skin_"+Ka.length,Ka.push(i);else if(d!==n){h=m;k=d instanceof r?xa[d.url]:d;if(!k||!k.md)console.log("could not find morph controller!");else{k=k.md;for(l=0;l<k.Wb.length;l++)p=ob[k.Wb[l]],p.Md&&(p.Md.od&&p.Md.od.length)&&(p=p.Md.od[0].s,p.e.length===h.e.length&&h.F.push({name:"target_1",e:p.e}));h.F.push({name:"target_Z",e:h.e})}i.F=t;i=new THREE.O(m,i);i.name="morph_"+Qa.length;Qa.push(i)}else i=new THREE.O(m,i);1<a.$.length?b.add(i):b=i}}for(g=0;g<a.ge.length;g++)b=ib[a.ge[g].url],b=
new THREE.tc(b.pe,b.Eo,b.kr,b.jr);b.name=a.id||"";b.I=a.I;g=Ci(a.I);b.position=g[0];b.nc=g[1];b.vd=t;b.scale=g[2];Ga.zt&&b.s&&(g=THREE.pa.rb(b.s),b.nc.X(g.sf(b.scale)),b.position.Wa(g));for(g=0;g<a.Va.length;g++)b.add(f(a.Va[g]));return b}function g(){this.Dh=this.id=""}function h(){this.type=this.name=this.id="";this.md=this.Zc=u}function i(){this.ad=this.Wb=this.source=this.method=u}function j(){this.source="";this.Fo=u;this.am=[];this.Aj=[];this.ad=[]}function l(){this.name=this.id="";this.Va=
[];this.fb=new THREE.w}function k(){this.Oa=this.name=this.id="";this.Va=[];this.controllers=[];this.Df=[];this.$=[];this.he=[];this.I=new THREE.D}function p(){this.type=this.Oa="";this.data=[];this.U=u}function r(){this.url="";this.De=[];this.Dc=[]}function s(){this.target=this.Jq=""}function q(){this.url="";this.Dc=[]}function v(){this.id="";this.Md=u}function y(a){this.s=a.id;this.od=[];this.jd=this.e=u}function F(){this.o="";this.count=0;this.ld=[];this.Jf=u;this.Dg=[];this.s=new THREE.G}function C(){F.call(this);
this.Jf=[]}function z(){F.call(this);this.Jf=3}function G(){this.source="";this.Hq=this.count=0;this.nd=[]}function B(){this.input={}}function J(){this.Yc="";this.offset=0;this.source="";this.set=0}function O(a){this.id=a;this.type=u}function I(){this.name=this.id="";this.sp=u}function P(){this.color=new THREE.t(0);pi(this.color,Math.random(),Math.random(),Math.random());this.color.q=1;this.td=this.$w=this.ik=u}function E(a,b){this.type=a;this.me=b;this.o=u}function R(a){this.me=a;this.ka=this.Dh=
u}function K(a){this.me=a;this.ov=this.bv=this.nv=this.tx=this.sx=this.source=u}function V(){this.name=this.id="";this.Ub=this.gi=this.Xj=u}function M(){this.url=""}function W(){this.name=this.id="";this.source={};this.Ub=[];this.gg=[]}function la(a){this.Pi=a;this.target=this.source="";this.Ag=this.Ri=this.ct=this.Xt=this.Oa=this.cp=u}function X(a){this.id="";this.Pi=a;this.ld=[];this.ne=this.startTime=this.Hu=this.Cf=this.Mh=this.input=u;this.duration=0}function aa(a){this.Wb=[];this.time=a}function ia(){this.Ym=
this.name=this.id=""}function Ia(){this.url=""}function S(a){return"dae"==a?"http://www.collada.org/2005/11/COLLADASchema":u}function ja(a){for(var a=ba(a),b=[],c=0,d=a.length;c<d;c++)b.push(parseFloat(a[c]));return b}function wa(a){for(var a=ba(a),b=[],c=0,d=a.length;c<d;c++)b.push(parseInt(a[c],10));return b}function ba(a){return 0<a.length?a.replace(/^\s+/,"").replace(/\s+$/,"").split(/\s+/):[]}function Q(a,b,c){return a.hasAttribute(b)?parseInt(a.getAttribute(b),10):c}function T(a,b){a.le=w;var c=
N.evaluate(".//dae:extra//dae:double_sided",b,S,XPathResult.ORDERED_NODE_ITERATOR_TYPE,u);if(c&&(c=c.iterateNext())&&1===parseInt(c.textContent,10))a.le=t}function na(a,b){if(Ga.ej&&fb!==Ga.ki)switch(ab){case "XtoY":var c=a[0];a[0]=b*a[1];a[1]=c;break;case "XtoZ":c=a[2];a[2]=a[1];a[1]=a[0];a[0]=c;break;case "YtoX":c=a[0];a[0]=a[1];a[1]=b*c;break;case "YtoZ":c=a[1];a[1]=b*a[2];a[2]=c;break;case "ZtoX":c=a[0];a[0]=a[1];a[1]=a[2];a[2]=c;break;case "ZtoY":c=a[1],a[1]=a[2],a[2]=b*c}}function U(a,b){var c=
[a[b],a[b+1],a[b+2]];na(c,-1);return new THREE.d(c[0],c[1],c[2])}function Y(a){if(Ga.ej){var b=[a[0],a[4],a[8]];na(b,-1);a[0]=b[0];a[4]=b[1];a[8]=b[2];b=[a[1],a[5],a[9]];na(b,-1);a[1]=b[0];a[5]=b[1];a[9]=b[2];b=[a[2],a[6],a[10]];na(b,-1);a[2]=b[0];a[6]=b[1];a[10]=b[2];b=[a[0],a[1],a[2]];na(b,-1);a[0]=b[0];a[1]=b[1];a[2]=b[2];b=[a[4],a[5],a[6]];na(b,-1);a[4]=b[0];a[5]=b[1];a[6]=b[2];b=[a[8],a[9],a[10]];na(b,-1);a[8]=b[0];a[9]=b[1];a[10]=b[2];b=[a[3],a[7],a[11]];na(b,-1);a[3]=b[0];a[7]=b[1];a[11]=b[2]}return new THREE.D(a[0],
a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15])}function ka(a){if(Ga.ej)switch(a){case "X":switch(ab){case "XtoY":case "XtoZ":case "YtoX":a="Y";break;case "ZtoX":a="Z"}break;case "Y":switch(ab){case "XtoY":case "YtoX":case "ZtoX":a="X";break;case "XtoZ":case "YtoZ":case "ZtoY":a="Z"}break;case "Z":switch(ab){case "XtoZ":a="X";break;case "YtoZ":case "ZtoX":case "ZtoY":a="Y"}}return a}var N=u,oa=u,Na,za=u,ha={},Fa={},Oa={},xa={},ob={},pb={},qb={},ib={},Rb,Sb,Bb,Qa,
Ka,tb=THREE.Oc,Ga={zt:w,ej:w,Vw:t,ki:"Y",Ro:u},fb="Y",ab=u,Pa=Math.PI/180;g.prototype.parse=function(a){this.id=a.getAttribute("id");for(var b=0;b<a.childNodes.length;b++){var c=a.childNodes[b];"init_from"==c.nodeName&&(this.Dh=c.textContent)}return this};h.prototype.parse=function(a){this.id=a.getAttribute("id");this.name=a.getAttribute("name");this.type="none";for(var b=0;b<a.childNodes.length;b++){var c=a.childNodes[b];switch(c.nodeName){case "skin":this.Zc=(new j).parse(c);this.type=c.nodeName;
break;case "morph":this.md=(new i).parse(c),this.type=c.nodeName}}return this};i.prototype.parse=function(a){var b={},c=[],d;this.method=a.getAttribute("method");this.source=a.getAttribute("source").replace(/^#/,"");for(d=0;d<a.childNodes.length;d++){var e=a.childNodes[d];if(1==e.nodeType)switch(e.nodeName){case "source":e=(new O).parse(e);b[e.id]=e;break;case "targets":c=this.Ov(e);break;default:console.log(e.nodeName)}}for(d=0;d<c.length;d++)switch(a=c[d],e=b[a.source],a.Yc){case "MORPH_TARGET":this.Wb=
e.xf();break;case "MORPH_WEIGHT":this.ad=e.xf()}return this};i.prototype.Ov=function(a){for(var b=[],c=0;c<a.childNodes.length;c++){var d=a.childNodes[c];if(1==d.nodeType)switch(d.nodeName){case "input":b.push((new J).parse(d))}}return b};j.prototype.parse=function(a){var b={},c,d;this.source=a.getAttribute("source").replace(/^#/,"");this.am=[];this.Aj=[];this.ad=[];for(var e=0;e<a.childNodes.length;e++){var f=a.childNodes[e];if(1==f.nodeType)switch(f.nodeName){case "bind_shape_matrix":f=ja(f.textContent);
this.Fo=Y(f);break;case "source":f=(new O).parse(f);b[f.id]=f;break;case "joints":c=f;break;case "vertex_weights":d=f;break;default:console.log(f.nodeName)}}this.Pv(c,b);this.Uv(d,b);return this};j.prototype.Pv=function(a,b){for(var c=0;c<a.childNodes.length;c++){var d=a.childNodes[c];if(1==d.nodeType)switch(d.nodeName){case "input":var d=(new J).parse(d),e=b[d.source];"JOINT"==d.Yc?this.Aj=e.xf():"INV_BIND_MATRIX"==d.Yc&&(this.am=e.xf())}}};j.prototype.Uv=function(a,b){for(var c,d,e=[],f=0;f<a.childNodes.length;f++){var g=
a.childNodes[f];if(1==g.nodeType)switch(g.nodeName){case "input":e.push((new J).parse(g));break;case "v":c=wa(g.textContent);break;case "vcount":d=wa(g.textContent)}}for(f=g=0;f<d.length;f++){for(var h=d[f],i=[],j=0;j<h;j++){for(var k={},l=0;l<e.length;l++){var p=e[l],q=c[g+p.offset];switch(p.Yc){case "JOINT":k.Mu=q;break;case "WEIGHT":k.Rd=b[p.source].data[q]}}i.push(k);g+=e.length}for(j=0;j<i.length;j++)i[j].index=f;this.ad.push(i)}};l.prototype.xh=function(a,b){for(var c=0;c<this.Va.length;c++){var d=
this.Va[c].xh(a,b);if(d)return d}return u};l.prototype.uj=function(a,b){for(var c=0;c<this.Va.length;c++){var d=this.Va[c].uj(a,b);if(d)return d}return u};l.prototype.parse=function(a){this.id=a.getAttribute("id");this.name=a.getAttribute("name");this.Va=[];for(var b=0;b<a.childNodes.length;b++){var c=a.childNodes[b];if(1==c.nodeType)switch(c.nodeName){case "node":this.Va.push((new k).parse(c))}}return this};k.prototype.xh=function(a,b){if(this.id==a)return this;if(b)for(var c=0;c<this.Va.length;c++){var d=
this.Va[c].xh(a,b);if(d)return d}return u};k.prototype.uj=function(a,b){if(this.Oa==a)return this;if(b)for(var c=0;c<this.Va.length;c++){var d=this.Va[c].uj(a,b);if(d)return d}return u};k.prototype.ru=function(a){for(var b=0;b<this.Df.length;b++)if(this.Df[b].Oa==a)return this.Df[b];return u};k.prototype.parse=function(a){var b;this.id=a.getAttribute("id");this.Oa=a.getAttribute("sid");this.name=a.getAttribute("name");this.type=a.getAttribute("type");this.type="JOINT"==this.type?this.type:"NODE";
this.Va=[];this.Df=[];this.$=[];this.ge=[];this.controllers=[];this.I=new THREE.D;for(var c=0;c<a.childNodes.length;c++)if(b=a.childNodes[c],1==b.nodeType)switch(b.nodeName){case "node":this.Va.push((new k).parse(b));break;case "instance_camera":this.ge.push((new Ia).parse(b));break;case "instance_controller":this.controllers.push((new r).parse(b));break;case "instance_geometry":this.$.push((new q).parse(b));break;case "instance_light":break;case "instance_node":b=b.getAttribute("url").replace(/^#/,
"");(b=N.evaluate(".//dae:library_nodes//dae:node[@id='"+b+"']",N,S,XPathResult.ORDERED_NODE_ITERATOR_TYPE,u).iterateNext())&&this.Va.push((new k).parse(b));break;case "rotate":case "translate":case "scale":case "matrix":case "lookat":case "skew":this.Df.push((new p).parse(b));break;case "extra":break;default:console.log(b.nodeName)}a=[];c=1E6;b=-1E6;for(var d in Oa)for(var e=Oa[d],f=0;f<e.gg.length;f++){var g=e.gg[f],h=e.Ub[f];d=g.target.split("/")[0];d==this.id&&(h.create(),g.Ub=h,c=Math.min(c,
h.startTime),b=Math.max(b,h.ne),a.push(g))}a.length&&(this.startTime=c,this.ne=b);if((this.he=a)&&this.he.length){d=[];a=[];c=0;for(e=this.he.length;c<e;c++){var i=this.he[c],f=i.cp,g=i.Ub,h=g.input,j=this.ru(i.Oa),l;if(i.Ri){l=[];b=0;for(var s=i.Ri.length;b<s;b++){var v=i.Ri[b];-1<v&&3>v&&(v=ka(["X","Y","Z"][v]),v={ly:0,my:1,ny:2}[v]);l[b]=v}}else l=ka(i.Ag);if(j){-1===a.indexOf(f)&&a.push(f);b=0;for(s=h.length;b<s;b++){var v=h[b],i=g.getData(j.type,b),z;z=u;for(var y=0,B=d.length;y<B&&z==u;y++){var C=
d[y];if(C.time===v)z=C;else if(C.time>v)break}if(!z){z=new aa(v);y=-1;B=0;for(C=d.length;B<C&&-1==y;B++)d[B].time>=v&&(y=B);v=y;d.splice(-1==v?d.length:v,0,z)}z.yo(f,j,l,i)}}else console.log('Could not find transform "'+i.Oa+'" in node '+this.id)}for(c=0;c<a.length;c++){e=a[c];for(b=0;b<d.length;b++)if(z=d[b],!z.Ch(e)){f=z;g=e;j=n;a:{h=b?b-1:0;for(h=0<=h?h:h+d.length;0<=h;h--)if(j=d[h],j.Ch(g))break a;j=u}l=n;a:{for(h=b+1;h<d.length;h++)if(l=d[h],l.Ch(g))break a;l=u}if(j&&l){h=(f.time-j.time)/(l.time-
j.time);j=j.Wl(g);l=l.Wl(g).data;s=j.data;i=n;if("matrix"===j.type)i=s;else if(s.length){i=[];for(v=0;v<s.length;++v)i[v]=s[v]+(l[v]-s[v])*h}else i=s+(l-s)*h;f.yo(g,j.transform,j.Ag,i)}}}this.keys=d;this.Kg=a}this.Jc();return this};k.prototype.Jc=function(){Ji(this.I);for(var a=0;a<this.Df.length;a++)this.Df[a].apply(this.I)};p.prototype.parse=function(a){this.Oa=a.getAttribute("sid");this.type=a.nodeName;this.data=ja(a.textContent);this.It();return this};p.prototype.It=function(){switch(this.type){case "matrix":this.U=
Y(this.data);break;case "rotate":this.bf=this.data[3]*Pa;case "translate":na(this.data,-1);this.U=new THREE.d(this.data[0],this.data[1],this.data[2]);break;case "scale":na(this.data,1);this.U=new THREE.d(this.data[0],this.data[1],this.data[2]);break;default:console.log("Can not convert Transform of type "+this.type)}};p.prototype.apply=function(a){switch(this.type){case "matrix":a.sf(this.U);break;case "translate":a.translate(this.U);break;case "rotate":var b=this.U,c=this.bf,d=a.elements;if(1===
b.x&&0===b.y&&0===b.a)Ai(a,c);else if(0===b.x&&1===b.y&&0===b.a){var d=c,a=a.elements,e=a[0],b=a[1],f=a[2],g=a[3],h=a[8],i=a[9],c=a[10],j=a[11],k=Math.cos(d),d=Math.sin(d);a[0]=k*e-d*h;a[1]=k*b-d*i;a[2]=k*f-d*c;a[3]=k*g-d*j;a[8]=k*h+d*e;a[9]=k*i+d*b;a[10]=k*c+d*f;a[11]=k*j+d*g}else if(0===b.x&&0===b.y&&1===b.a)d=c,a=a.elements,e=a[0],b=a[1],f=a[2],g=a[3],h=a[4],i=a[5],c=a[6],j=a[7],k=Math.cos(d),d=Math.sin(d),a[0]=k*e+d*h,a[1]=k*b+d*i,a[2]=k*f+d*c,a[3]=k*g+d*j,a[4]=k*h-d*e,a[5]=k*i-d*b,a[6]=k*c-d*
f,a[7]=k*j-d*g;else{var a=b.x,e=b.y,b=b.a,f=Math.sqrt(a*a+e*e+b*b),a=a/f,e=e/f,b=b/f,f=a*a,g=e*e,h=b*b,i=Math.cos(c),c=Math.sin(c),j=1-i,k=a*e*j,l=a*b*j,j=e*b*j,a=a*c,p=e*c,c=b*c,b=f+(1-f)*i,f=k+c,e=l-p,k=k-c,g=g+(1-g)*i,c=j+a,l=l+p,j=j-a,h=h+(1-h)*i,i=d[0],a=d[1],p=d[2],q=d[3],r=d[4],s=d[5],v=d[6],z=d[7],y=d[8],B=d[9],C=d[10],E=d[11];d[0]=b*i+f*r+e*y;d[1]=b*a+f*s+e*B;d[2]=b*p+f*v+e*C;d[3]=b*q+f*z+e*E;d[4]=k*i+g*r+c*y;d[5]=k*a+g*s+c*B;d[6]=k*p+g*v+c*C;d[7]=k*q+g*z+c*E;d[8]=l*i+j*r+h*y;d[9]=l*a+j*
s+h*B;d[10]=l*p+j*v+h*C;d[11]=l*q+j*z+h*E}break;case "scale":a.scale(this.U)}};p.prototype.update=function(a,b){var c=["X","Y","Z","ANGLE"];switch(this.type){case "matrix":if(b)if(1===b.length)switch(b[0]){case 0:this.U.BC=a[0];this.U.FC=a[1];this.U.JC=a[2];this.U.NC=a[3];break;case 1:this.U.CC=a[0];this.U.GC=a[1];this.U.KC=a[2];this.U.OC=a[3];break;case 2:this.U.DC=a[0];this.U.HC=a[1];this.U.LC=a[2];this.U.PC=a[3];break;case 3:this.U.EC=a[0],this.U.IC=a[1],this.U.MC=a[2],this.U.QC=a[3]}else 2===
b.length?this.U["n"+(b[0]+1)+(b[1]+1)]=a:console.log("Incorrect addressing of matrix in transform.");else this.U.copy(a);break;case "translate":case "scale":"[object Array]"===Object.prototype.toString.call(b)&&(b=c[b[0]]);switch(b){case "X":this.U.x=a;break;case "Y":this.U.y=a;break;case "Z":this.U.a=a;break;default:this.U.x=a[0],this.U.y=a[1],this.U.a=a[2]}break;case "rotate":switch("[object Array]"===Object.prototype.toString.call(b)&&(b=c[b[0]]),b){case "X":this.U.x=a;break;case "Y":this.U.y=
a;break;case "Z":this.U.a=a;break;case "ANGLE":this.bf=a*Pa;break;default:this.U.x=a[0],this.U.y=a[1],this.U.a=a[2],this.bf=a[3]*Pa}}};r.prototype.parse=function(a){this.url=a.getAttribute("url").replace(/^#/,"");this.De=[];this.Dc=[];for(var b=0;b<a.childNodes.length;b++){var c=a.childNodes[b];if(1===c.nodeType)switch(c.nodeName){case "skeleton":this.De.push(c.textContent.replace(/^#/,""));break;case "bind_material":if(c=N.evaluate(".//dae:instance_material",c,S,XPathResult.ORDERED_NODE_ITERATOR_TYPE,
u))for(var d=c.iterateNext();d;)this.Dc.push((new s).parse(d)),d=c.iterateNext()}}return this};s.prototype.parse=function(a){this.Jq=a.getAttribute("symbol");this.target=a.getAttribute("target").replace(/^#/,"");return this};q.prototype.parse=function(a){this.url=a.getAttribute("url").replace(/^#/,"");this.Dc=[];for(var b=0;b<a.childNodes.length;b++){var c=a.childNodes[b];if(1==c.nodeType&&"bind_material"==c.nodeName){if(a=N.evaluate(".//dae:instance_material",c,S,XPathResult.ORDERED_NODE_ITERATOR_TYPE,
u))for(b=a.iterateNext();b;)this.Dc.push((new s).parse(b)),b=a.iterateNext();break}}return this};v.prototype.parse=function(a){this.id=a.getAttribute("id");T(this,a);for(var b=0;b<a.childNodes.length;b++){var c=a.childNodes[b];switch(c.nodeName){case "mesh":this.Md=(new y(this)).parse(c)}}return this};y.prototype.parse=function(a){this.od=[];var b;for(b=0;b<a.childNodes.length;b++){var c=a.childNodes[b];switch(c.nodeName){case "source":var d=c.getAttribute("id");ha[d]==n&&(ha[d]=(new O(d)).parse(c));
break;case "vertices":this.e=(new B).parse(c);break;case "triangles":this.od.push((new z).parse(c));break;case "polygons":this.od.push((new F).parse(c));break;case "polylist":this.od.push((new C).parse(c))}}this.jd=new THREE.G;a=ha[this.e.input.POSITION.source].data;for(b=0;b<a.length;b+=3)this.jd.e.push(U(a,b).clone());for(b=0;b<this.od.length;b++)a=this.od[b],a.ww(this.e),this.tu(a,this.jd);cj(this.jd);bj(this.jd);this.jd.Lo&&(this.jd.Jd(),delete this.jd.Lo);this.jd.cj();return this};y.prototype.tu=
function(a,b){var c,d,e=a.Dg,f=a.ld,g,h,i,j,k,l=0,p=3,q=0,r=[];for(c=0;c<f.length;c++)switch(g=f[c],p=g.offset+1,q=q<p?p:q,g.Yc){case "TEXCOORD":r.push(g.set)}for(var s=0;s<e.length;++s)for(var v=e[s],z=0;z<v.length;){var y=[],B=[],C=u,E=[],p=a.Jf?a.Jf.length?a.Jf[l++]:a.Jf:v.length/q;for(c=0;c<p;c++)for(d=0;d<f.length;d++)switch(g=f[d],j=ha[g.source],h=v[z+c*q+g.offset],k=j.Yf.nd.length,i=h*k,g.Yc){case "VERTEX":y.push(h);break;case "NORMAL":B.push(U(j.data,i));break;case "TEXCOORD":C=C||{};C[g.set]===
n&&(C[g.set]=[]);C[g.set].push(new THREE.k(j.data[i],j.data[i+1]));break;case "COLOR":E.push(pi(new THREE.t,j.data[i],j.data[i+1],j.data[i+2]))}if(0==B.length)if(g=this.e.input.Sx){j=ha[g.source];k=j.Yf.nd.length;c=0;for(h=y.length;c<h;c++)B.push(U(j.data,y[c]*k))}else b.Lo=t;if(!C&&(C={},g=this.e.input.ey)){r.push(g.set);j=ha[g.source];k=j.Yf.nd.length;c=0;for(h=y.length;c<h;c++)i=y[c]*k,C[g.set]===n&&(C[g.set]=[]),C[g.set].push(new THREE.k(j.data[i],1-j.data[i+1]))}if(0==E.length&&(g=this.e.input.yx)){j=
ha[g.source];k=j.Yf.nd.length;c=0;for(h=y.length;c<h;c++)i=y[c]*k,E.push(pi(new THREE.t,j.data[i],j.data[i+1],j.data[i+2]))}d=u;g=[];if(3===p)g.push(new THREE.K(y[0],y[1],y[2],B,E.length?E:new THREE.t));else if(4===p)g.push(new THREE.Z(y[0],y[1],y[2],y[3],B,E.length?E:new THREE.t));else if(4<p&&Ga.Vw){E=E.length?E:new THREE.t;for(d=1;d<p-1;)g.push(new THREE.K(y[0],y[d],y[d+1],[B[0],B[d++],B[d]],E))}if(g.length){c=0;for(h=g.length;c<h;c++){d=g[c];d.Ot=a.o;b.l.push(d);for(d=0;d<r.length;d++)y=C[r[d]],
y=4<p?[y[0],y[c+1],y[c+2]]:4===p?[y[0],y[1],y[2],y[3]]:[y[0],y[1],y[2]],b.C[d]||(b.C[d]=[]),b.C[d].push(y)}}else console.log("dropped face with vcount "+p+" for geometry with id: "+b.id);z+=q*p}};F.prototype.ww=function(a){for(var b=0;b<this.ld.length;b++)this.ld[b].source==a.id&&(this.ld[b].source=a.input.POSITION.source)};F.prototype.parse=function(a){this.o=a.getAttribute("material");this.count=Q(a,"count",0);for(var b=0;b<a.childNodes.length;b++){var c=a.childNodes[b];switch(c.nodeName){case "input":this.ld.push((new J).parse(a.childNodes[b]));
break;case "vcount":this.Jf=wa(c.textContent);break;case "p":this.Dg.push(wa(c.textContent));break;case "ph":console.warn("polygon holes not yet supported!")}}return this};C.prototype=Object.create(F.prototype);z.prototype=Object.create(F.prototype);G.prototype.parse=function(a){this.nd=[];this.source=a.getAttribute("source");this.count=Q(a,"count",0);this.Hq=Q(a,"stride",0);for(var b=0;b<a.childNodes.length;b++){var c=a.childNodes[b];if("param"==c.nodeName){var d={};d.name=c.getAttribute("name");
d.type=c.getAttribute("type");this.nd.push(d)}}return this};B.prototype.parse=function(a){this.id=a.getAttribute("id");for(var b=0;b<a.childNodes.length;b++)if("input"==a.childNodes[b].nodeName){var c=(new J).parse(a.childNodes[b]);this.input[c.Yc]=c}return this};J.prototype.parse=function(a){this.Yc=a.getAttribute("semantic");this.source=a.getAttribute("source").replace(/^#/,"");this.set=Q(a,"set",-1);this.offset=Q(a,"offset",0);"TEXCOORD"==this.Yc&&0>this.set&&(this.set=0);return this};O.prototype.parse=
function(a){this.id=a.getAttribute("id");for(var b=0;b<a.childNodes.length;b++){var c=a.childNodes[b];switch(c.nodeName){case "bool_array":for(var d=ba(c.textContent),e=[],f=0,g=d.length;f<g;f++)e.push("true"==d[f]||"1"==d[f]?t:w);this.data=e;this.type=c.nodeName;break;case "float_array":this.data=ja(c.textContent);this.type=c.nodeName;break;case "int_array":this.data=wa(c.textContent);this.type=c.nodeName;break;case "IDREF_array":case "Name_array":this.data=ba(c.textContent);this.type=c.nodeName;
break;case "technique_common":for(d=0;d<c.childNodes.length;d++)if("accessor"==c.childNodes[d].nodeName){this.Yf=(new G).parse(c.childNodes[d]);break}}}return this};O.prototype.xf=function(){var a=[],b=this.Yf.nd[0];switch(b.type){case "IDREF":case "Name":case "name":case "float":return this.data;case "float4x4":for(b=0;b<this.data.length;b+=16){var c=this.data.slice(b,b+16),c=Y(c);a.push(c)}break;default:console.log("ColladaLoader: Source: Read dont know how to read "+b.type+".")}return a};I.prototype.parse=
function(a){this.id=a.getAttribute("id");this.name=a.getAttribute("name");for(var b=0;b<a.childNodes.length;b++)if("instance_effect"==a.childNodes[b].nodeName){this.sp=(new M).parse(a.childNodes[b]);break}return this};P.prototype.isTexture=function(){return this.ik!=u};P.prototype.parse=function(a){for(var b=0;b<a.childNodes.length;b++){var c=a.childNodes[b];if(1==c.nodeType)switch(c.nodeName){case "color":c=ja(c.textContent);this.color=new THREE.t(0);pi(this.color,c[0],c[1],c[2]);this.color.q=c[3];
break;case "texture":this.ik=c.getAttribute("texture"),this.$w=c.getAttribute("texcoord"),this.td={Ev:0,Fv:0,lw:1,mw:1,qx:1,rx:1},this.Tv(c)}}return this};P.prototype.Tv=function(a){if(a.childNodes){a.childNodes[1]&&"extra"===a.childNodes[1].nodeName&&(a=a.childNodes[1],a.childNodes[1]&&"technique"===a.childNodes[1].nodeName&&(a=a.childNodes[1]));for(var b=0;b<a.childNodes.length;b++){var c=a.childNodes[b];switch(c.nodeName){case "offsetU":case "offsetV":case "repeatU":case "repeatV":this.td[c.nodeName]=
parseFloat(c.textContent);break;case "wrapU":case "wrapV":this.td[c.nodeName]=parseInt(c.textContent);break;default:this.td[c.nodeName]=c.textContent}}}};E.prototype.parse=function(a){for(var b=0;b<a.childNodes.length;b++){var c=a.childNodes[b];if(1==c.nodeType)switch(c.nodeName){case "ambient":case "emission":case "diffuse":case "specular":case "transparent":this[c.nodeName]=(new P).parse(c);break;case "shininess":case "reflectivity":case "index_of_refraction":case "transparency":var d;d=N.evaluate(".//dae:float",
c,S,XPathResult.ORDERED_NODE_ITERATOR_TYPE,u);for(var e=d.iterateNext(),f=[];e;)f.push(e),e=d.iterateNext();d=f;0<d.length&&(this[c.nodeName]=parseFloat(d[0].textContent))}}this.create();return this};E.prototype.create=function(){var a={},b=this.transparency!==n&&1>this.transparency,c;for(c in this)switch(c){case "ambient":case "emission":case "diffuse":case "specular":var d=this[c];if(d instanceof P)if(d.isTexture()){if(this.me.Ub&&this.me.gi&&this.me.Ub.source==this.me.gi.Oa){var e=Fa[this.me.gi.Dh];
e&&(e=THREE.Ad.Gp(Bb+e.Dh),e.Yb=d.td.qx?THREE.Nc:THREE.Le,e.Zb=d.td.rx?THREE.Nc:THREE.Le,e.offset.x=d.td.Ev,e.offset.y=d.td.Fv,e.repeat.x=d.td.lw,e.repeat.y=d.td.mw,a.map=e,"emission"===c&&(a.emissive=16777215))}}else if("diffuse"===c||!b)"emission"===c?a.emissive=ri(d.color):a[c]=ri(d.color);break;case "shininess":a[c]=this[c];break;case "reflectivity":a[c]=this[c];0<a[c]&&(a.envMap=Ga.Ro);a.combine=THREE.zn;break;case "index_of_refraction":a.refractionRatio=this[c];1!==this[c]&&(a.envMap=Ga.Ro);
break;case "transparency":b&&(a.transparent=t,a.opacity=this[c],b=t)}a.shading=tb;a.side=this.me.le?THREE.sc:THREE.Qe;switch(this.type){case "constant":a.color=a.hA;this.o=new THREE.Qa(a);break;case "phong":case "blinn":a.color=a.ig;this.o=new THREE.bc(a);break;default:a.color=a.ig,this.o=new THREE.ac(a)}return this.o};R.prototype.parse=function(a){for(var b=0;b<a.childNodes.length;b++){var c=a.childNodes[b];if(1==c.nodeType)switch(c.nodeName){case "init_from":this.Dh=c.textContent;break;case "format":this.ka=
c.textContent;break;default:console.log("unhandled Surface prop: "+c.nodeName)}}return this};K.prototype.parse=function(a){for(var b=0;b<a.childNodes.length;b++){var c=a.childNodes[b];if(1==c.nodeType)switch(c.nodeName){case "source":this.source=c.textContent;break;case "minfilter":this.nv=c.textContent;break;case "magfilter":this.bv=c.textContent;break;case "mipfilter":this.ov=c.textContent;break;case "wrap_s":this.sx=c.textContent;break;case "wrap_t":this.tx=c.textContent;break;default:console.log("unhandled Sampler2D prop: "+
c.nodeName)}}return this};V.prototype.create=function(){if(this.Xj==u)return u};V.prototype.parse=function(a){this.id=a.getAttribute("id");this.name=a.getAttribute("name");T(this,a);this.Xj=u;for(var b=0;b<a.childNodes.length;b++){var c=a.childNodes[b];if(1==c.nodeType)switch(c.nodeName){case "profile_COMMON":this.Sv(this.Yp(c))}}return this};V.prototype.Qv=function(a){for(var b=a.getAttribute("sid"),c=0;c<a.childNodes.length;c++){var d=a.childNodes[c];if(1==d.nodeType)switch(d.nodeName){case "surface":this.gi=
(new R(this)).parse(d);this.gi.Oa=b;break;case "sampler2D":this.Ub=(new K(this)).parse(d);this.Ub.Oa=b;break;case "extra":break;default:console.log(d.nodeName)}}};V.prototype.Yp=function(a){for(var b,c=0;c<a.childNodes.length;c++){var d=a.childNodes[c];if(1==d.nodeType)switch(d.nodeName){case "profile_COMMON":this.Yp(d);break;case "technique":b=d;break;case "newparam":this.Qv(d);break;case "image":d=(new g).parse(d);Fa[d.id]=d;break;case "extra":break;default:console.log(d.nodeName)}}return b};V.prototype.Sv=
function(a){for(var b=0;b<a.childNodes.length;b++){var c=a.childNodes[b];if(1==c.nodeType)switch(c.nodeName){case "constant":case "lambert":case "blinn":case "phong":this.Xj=(new E(c.nodeName,this)).parse(c)}}};M.prototype.parse=function(a){this.url=a.getAttribute("url").replace(/^#/,"");return this};W.prototype.parse=function(a){this.id=a.getAttribute("id");this.name=a.getAttribute("name");this.source={};for(var b=0;b<a.childNodes.length;b++){var c=a.childNodes[b];if(1==c.nodeType)switch(c.nodeName){case "animation":var c=
(new W).parse(c),d;for(d in c.source)this.source[d]=c.source[d];for(var e=0;e<c.gg.length;e++)this.gg.push(c.gg[e]),this.Ub.push(c.Ub[e]);break;case "source":d=(new O).parse(c);this.source[d.id]=d;break;case "sampler":this.Ub.push((new X(this)).parse(c));break;case "channel":this.gg.push((new la(this)).parse(c))}}return this};la.prototype.parse=function(a){this.source=a.getAttribute("source").replace(/^#/,"");this.target=a.getAttribute("target");var b=this.target.split("/");b.shift();var a=b.shift(),
c=0<=a.indexOf("."),d=0<=a.indexOf("(");if(c)b=a.split("."),this.Oa=b.shift(),this.Ag=b.shift();else if(d){b=a.split("(");this.Oa=b.shift();for(var e=0;e<b.length;e++)b[e]=parseInt(b[e].replace(/\)/,""));this.Ri=b}else this.Oa=a;this.cp=a;this.Xt=c;this.ct=d;return this};X.prototype.parse=function(a){this.id=a.getAttribute("id");this.ld=[];for(var b=0;b<a.childNodes.length;b++){var c=a.childNodes[b];if(1==c.nodeType)switch(c.nodeName){case "input":this.ld.push((new J).parse(c))}}return this};X.prototype.create=
function(){for(var a=0;a<this.ld.length;a++){var b=this.ld[a],c=this.Pi.source[b.source];switch(b.Yc){case "INPUT":this.input=c.xf();break;case "OUTPUT":this.Mh=c.xf();this.Cf=c.Yf.Hq;break;case "INTERPOLATION":this.Hu=c.xf();break;case "IN_TANGENT":break;case "OUT_TANGENT":break;default:console.log(b.Yc)}}this.duration=this.ne=this.startTime=0;if(this.input.length){this.startTime=1E8;this.ne=-1E8;for(a=0;a<this.input.length;a++)this.startTime=Math.min(this.startTime,this.input[a]),this.ne=Math.max(this.ne,
this.input[a]);this.duration=this.ne-this.startTime}};X.prototype.getData=function(a,b){var c;if("matrix"===a&&16===this.Cf)c=this.Mh[b];else if(1<this.Cf){c=[];for(var b=b*this.Cf,d=0;d<this.Cf;++d)c[d]=this.Mh[b+d];if(3===this.Cf)switch(a){case "rotate":case "translate":na(c,-1);break;case "scale":na(c,1)}else 4===this.Cf&&"matrix"===a&&na(c,-1)}else c=this.Mh[b];return c};aa.prototype.yo=function(a,b,c,d){this.Wb.push({Oa:a,Ag:c,transform:b,data:d})};aa.prototype.apply=function(a){for(var b=0;b<
this.Wb.length;++b){var c=this.Wb[b];(!a||c.Oa===a)&&c.transform.update(c.data,c.Ag)}};aa.prototype.Wl=function(a){for(var b=0;b<this.Wb.length;++b)if(this.Wb[b].Oa===a)return this.Wb[b];return u};aa.prototype.Ch=function(a){for(var b=0;b<this.Wb.length;++b)if(this.Wb[b].Oa===a)return t;return w};aa.prototype.Hb=function(a,b){for(var c=0;c<this.Wb.length;++c){var d=this.Wb[c],e=a.Wl(d.Oa);if("matrix"!==d.transform.type&&e){var f=(b-this.time)/(a.time-this.time),g=e.data,h=d.data;if(0>f||1<f)console.log("Key.interpolate: Warning! Scale out of bounds:"+
f),f=0>f?0:1;if(h.length)for(var e=[],i=0;i<h.length;++i)e[i]=h[i]+(g[i]-h[i])*f;else e=h+(g-h)*f}else e=d.data;d.transform.update(e,d.Ag)}};ia.prototype.parse=function(a){this.id=a.getAttribute("id");this.name=a.getAttribute("name");for(var b=0;b<a.childNodes.length;b++){var c=a.childNodes[b];if(1==c.nodeType)switch(c.nodeName){case "optics":this.Rv(c)}}return this};ia.prototype.Rv=function(a){for(var b=0;b<a.childNodes.length;b++)if("technique_common"==a.childNodes[b].nodeName)for(var c=a.childNodes[b],
d=0;d<c.childNodes.length;d++)if(this.Ym=c.childNodes[d].nodeName,"perspective"==this.Ym)for(var e=c.childNodes[d],f=0;f<e.childNodes.length;f++){var g=e.childNodes[f];switch(g.nodeName){case "yfov":this.oF=g.textContent;break;case "xfov":this.kF=g.textContent;break;case "znear":this.kr=g.textContent;break;case "zfar":this.jr=g.textContent;break;case "aspect_ratio":this.Eo=g.textContent}}else if("orthographic"==this.Ym){e=c.childNodes[d];for(f=0;f<e.childNodes.length;f++)switch(g=e.childNodes[f],
g.nodeName){case "xmag":this.lF=g.textContent;break;case "ymag":this.pF=g.textContent;break;case "znear":this.kr=g.textContent;break;case "zfar":this.jr=g.textContent;break;case "aspect_ratio":this.Eo=g.textContent}}};Ia.prototype.parse=function(a){this.url=a.getAttribute("url").replace(/^#/,"");return this};return{load:function(b,c,d){var e=0;if(document.implementation&&document.implementation.createDocument){var f=new XMLHttpRequest;f.onreadystatechange=function(){if(4==f.readyState){if(0==f.status||
200==f.status)if(f.responseXML)za=c,a(f.responseXML,n,b);else if(f.responseText){za=c;var g=(new DOMParser).parseFromString(f.responseText,"application/xml");a(g,n,b)}else console.error("ColladaLoader: Empty or non-existing file ("+b+")")}else 3==f.readyState&&d&&(0==e&&(e=f.getResponseHeader("Content-Length")),d({total:e,loaded:f.responseText.length}))};f.open("GET",b,t);f.send(u)}else alert("Don't know how to parse XML!")},parse:a,cE:function(a){tb=a},zy:e,$:ob,options:Ga}};
THREE.Ux=function(a){var b=this,c=new THREE.w;c.add(a);var d=new THREE.w;d.position.y=10;d.add(c);var e=w,f=w,g=w,h=w,i=w,j=w,l=new THREE.d,k=Math.PI/2;document.addEventListener("mousemove",function(a){if(b.enabled!==w){var e=a.yC||a.AC||a.eF||0;d.rotation.y-=0.002*(a.xC||a.zC||a.dF||0);c.rotation.x-=0.002*e;c.rotation.x=Math.max(-k,Math.min(k,c.rotation.x))}},w);document.addEventListener("keydown",function(a){switch(a.keyCode){case 38:case 87:e=t;break;case 37:case 65:g=t;break;case 40:case 83:f=
t;break;case 39:case 68:h=t;break;case 32:j===t&&(l.y+=10),j=w}},w);document.addEventListener("keyup",function(a){switch(a.keyCode){case 38:case 87:e=w;break;case 37:case 65:g=w;break;case 40:case 83:f=w;break;case 39:case 68:h=w}},w);this.enabled=w;this.FA=function(){return d};this.$A=function(a){j=i=a};this.update=function(a){b.enabled!==w&&(a*=0.1,l.x+=0.08*-l.x*a,l.a+=0.08*-l.a*a,l.y-=0.25*a,e&&(l.a-=0.12*a),f&&(l.a+=0.12*a),g&&(l.x-=0.12*a),h&&(l.x+=0.12*a),i===t&&(l.y=Math.max(0,l.y)),d.translate(l.x,
d.ml.set(1,0,0)),d.translate(l.y,d.ml.set(0,1,0)),d.translate(l.a,d.ml.set(0,0,1)),10>d.position.y&&(l.y=0,d.position.y=10,j=t))}};var Yj=window.webnaali=window.webnaali||{},Zj=jQuery,$j=!!window.Ax,ak;try{ak=!!window.WebGLRenderingContext&&!!document.createElement("canvas").getContext("experimental-webgl")}catch(bk){ak=w}
var ck=Yj.Detector={canvas:$j,webgl:ak,jF:!!window.ky,rA:window.Jx&&window.Lx&&window.Kx&&window.Blob,jp:function(a,b,c){return!this.webgl?(b=window.iy?b:c,"element"===a?(a=document.createElement("div"),a.id="webgl-error-message",a.style.fontFamily="monospace",a.style.fontSize="13px",a.style.fontWeight="normal",a.style.textAlign="center",a.style.background="#fff",a.style.color="#000",a.style.padding="1.5em",a.style.width="400px",a.style.margin="5em auto 0",a.innerHTML=b,a):b):w},throwWebGLError:function(a){var a=
a||{},a=Zj.extend({},{parent:document.body,type:"element",np:'Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br />\nFind out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.',Ho:'Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br/>\nFind out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'},
a),b;"element"===a.type?(b=ck.jp(a.type,a.np,a.Ho),a.parent.appendChild(b)):"alert"===a.type&&alert(ck.jp(a.type,a.np,a.Ho))}},dk=window.webnaali=window.webnaali||{},ek=jQuery;
dk.vs=function(a,b,c){c=ek.extend({},{hq:8E3,timeout:8E3,Ao:t},c);this.dn=u;this.url="ws://"+a+":"+b;this.host=a;this.port=b;this.ID=w;this.HD=this.qz=u;this.GD=0;this.Ao=c.Ao;this.hq=c.hq;this.timeout=c.timeout;this.callbacks={};window.addEventListener("beforeunload",function(){this.dn.onclose=da();this.dn.close();this.dn=u}.bind(this),w)};(window.webnaali=window.webnaali||{}).or=function(a,b){this.Nx=a;this.vA="dae";this.JD=b;this.callbacks={}};
((window.webnaali=window.webnaali||{}).Dr=function(a){this.entities={};this.bj={};this.ql=a}).prototype={lv:new Signal,Ix:function(a){this.id=a;this.bj={};console.debug(this)},Dx:function(a,b){this.type=a;this.parent=b;this.py=function(a,b){a!==n&&(""!==a&&b!==n)&&(this[a]=b)}},qy:function(a,b){var c=this.entities[b];a.parent=b;c!==n&&!c.bj.hasOwnProperty(a.type)&&(c.bj[a.type]=a,this.Gt(a))},Gt:function(a){var b=this;switch(a.type){case "EC_Mesh":var c;console.debug("ADDED EC MESH!");this.ql.ND(a["Mesh ref"]).add(function(d){c=
a.os.split(",");for(var e=c.length;e--;)c[e]=Number(c[e]);d.position.set(c[0],c[1],c[2]);d.rotation.set(c[3]*Math.PI/180,c[4]*Math.PI/180,c[5]*Math.PI/180);d.scale.set(c[6],c[7],c[8]);c=b.entities[a.parent].bj.EC_Placeable.os.split(",");for(e=c.length;e--;)c[e]=Number(c[e]);d.position.set(d.position.x+c[0],d.position.y+c[1],d.position.a+c[2]);d.rotation.set(d.rotation.x+c[3]*Math.PI/180,d.rotation.y+c[4]*Math.PI/180,d.rotation.a+c[5]*Math.PI/180);d.scale.set(d.scale.x*c[6],d.scale.y*c[7],d.scale.a*
c[8]);a.Md=d;b.lv.jf(a)});break;case "EC_Placeable":console.log("ADDED EC PLACEABLE");break;case "EC_RigidBody":console.log("ADDED EC RigidBody")}},ry:function(a){var b=a.id;this.entities.hasOwnProperty(b)||(this.entities[b]=a)}};(window.webnaali=window.webnaali||{}).Xx=function(a){this.Zt=a;this.lD=this.WA()};var fk=window.webnaali=window.webnaali||{},gk=jQuery;
fk.SceneManager=function(a){this.time=Date.now();this.rz=a;this.Yi=this.fb=this.LD=this.controls=u;this.BB=[];this.fF=u;this.ql=new webnaali.or({},"http://localhost:8000/scenes/avatar/");this.Zt=new webnaali.Dr(this.ql);this.init()};
